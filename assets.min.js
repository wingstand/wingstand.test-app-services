function hex2b64(t){var e,n,r="";for(e=0;e+3<=t.length;e+=3)n=parseInt(t.substring(e,e+3),16),r+=b64map.charAt(n>>6)+b64map.charAt(63&n);if(e+1==t.length?(n=parseInt(t.substring(e,e+1),16),r+=b64map.charAt(n<<2)):e+2==t.length&&(n=parseInt(t.substring(e,e+2),16),r+=b64map.charAt(n>>2)+b64map.charAt((3&n)<<4)),b64pad)for(;(3&r.length)>0;)r+=b64pad;return r}function b64tohex(t){var e,n,r,i="",o=0;for(e=0;e<t.length&&t.charAt(e)!=b64pad;++e)r=b64map.indexOf(t.charAt(e)),r<0||(0==o?(i+=int2char(r>>2),n=3&r,o=1):1==o?(i+=int2char(n<<2|r>>4),n=15&r,o=2):2==o?(i+=int2char(n),i+=int2char(r>>2),n=3&r,o=3):(i+=int2char(n<<2|r>>4),i+=int2char(15&r),o=0));return 1==o&&(i+=int2char(n<<2)),i}function b64toBA(t){var e,n=b64tohex(t),r=new Array;for(e=0;2*e<n.length;++e)r[e]=parseInt(n.substring(2*e,2*e+2),16);return r}function BigInteger(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i}function am2(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],c=this[t++]>>15,l=a*u+c*s;u=s*u+((32767&l)<<15)+n[r]+(1073741823&i),i=(u>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i}function am3(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],c=this[t++]>>14,l=a*u+c*s;u=s*u+((16383&l)<<14)+n[r]+i,i=(u>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i}function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var n=BI_RC[t.charCodeAt(e)];return null==n?-1:n}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var s=8==n?255&t[r]:intAt(t,r);s<0?"-"==t.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,o+=n,o>=this.DB&&(o-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this[s]>>a)>0&&(i=!0,o=int2char(n));s>=0;)a<e?(n=(this[s]&(1<<a)-1)<<e-a,n|=this[--s]>>(a+=this.DB-e)):(n=this[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=int2char(n));return i?o:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0}function nbits(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var n,r=t%this.DB,i=this.DB-r,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+s+1]=this[n]>>i|a,a=(this[n]&o)<<r;for(n=s-1;n>=0;--n)e[n]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)return void(e.t=0);var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}function bnpSubTo(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function bnpMultiplyTo(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e[i]=0;for(i=0;i<r.t;++i)e[i+n.t]=n.am(0,r[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=nbi());var o=nbi(),s=this.s,a=t.s,u=this.DB-nbits(r[r.t-1]);u>0?(r.lShiftTo(u,o),i.lShiftTo(u,n)):(r.copyTo(o),i.copyTo(n));var c=o.t,l=o[c-1];if(0!=l){var h=l*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,g=n.t,v=g-c,m=null==e?nbi():e;for(o.dlShiftTo(v,m),n.compareTo(m)>=0&&(n[n.t++]=1,n.subTo(m,n)),BigInteger.ONE.dlShiftTo(c,m),m.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--v>=0;){var y=n[--g]==l?this.DM:Math.floor(n[g]*f+(n[g-1]+p)*d);if((n[g]+=o.am(0,y,n,v,0,c))<y)for(o.dlShiftTo(v,m),n.subTo(m,n);n[g]<--y;)n.subTo(m,n)}null!=e&&(n.drShiftTo(c,e),s!=a&&BigInteger.ZERO.subTo(e,e)),n.t=c,n.clamp(),u>0&&n.rShiftTo(u,n),s<0&&BigInteger.ZERO.subTo(n,n)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger.ONE;var n=nbi(),r=nbi(),i=e.convert(this),o=nbits(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var s=n;n=r,r=s}return e.revert(n)}function bnModPowInt(t,e){var n;return n=t<256||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,n)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=nbv(n),i=nbi(),o=nbi(),s="";for(this.divRemTo(r,i,o);i.signum()>0;)s=(n+o.intValue()).toString(t).substr(1)+s,i.divRemTo(r,i,o);return o.intValue().toString(t)+s}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,s=0,a=0;a<t.length;++a){var u=intAt(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(i=!0):(s=e*s+u,++o>=n&&(this.dMultiply(r),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var r=new Array,i=7&t;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,i=0;if(t-- >0)for(r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==i&&(128&this.s)!=(128&n)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(i,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=cbit(this[n]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var n=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),n=nbi();return this.divRemTo(t,e,n),new Array(e,n)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,n){t.multiplyTo(e,n)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n[r+this.t]=this.am(0,t[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t[r],n,r,0,e-r);n.clamp()}function bnpMultiplyUpperTo(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function bnModPow(t,e){var n,r,i=t.bitLength(),o=nbv(1);if(i<=0)return o;n=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var s=new Array,a=3,u=n-1,c=(1<<n)-1;if(s[1]=r.convert(this),n>1){var l=nbi();for(r.sqrTo(s[1],l);a<=c;)s[a]=nbi(),r.mulTo(l,s[a-2],s[a]),a+=2}var h,f,d=t.t-1,p=!0,g=nbi();for(i=nbits(t[d])-1;d>=0;){for(i>=u?h=t[d]>>i-u&c:(h=(t[d]&(1<<i+1)-1)<<u-i,d>0&&(h|=t[d-1]>>this.DB+i-u)),a=n;0==(1&h);)h>>=1,--a;if((i-=a)<0&&(i+=this.DB,--d),p)s[h].copyTo(o),p=!1;else{for(;a>1;)r.sqrTo(o,g),r.sqrTo(g,o),a-=2;a>0?r.sqrTo(o,g):(f=o,o=g,g=f),r.mulTo(g,s[h],o)}for(;d>=0&&0==(t[d]&1<<i);)r.sqrTo(o,g),f=o,o=g,g=f,--i<0&&(i=this.DB-1,--d)}return r.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var n=t.clone(),r=this.clone(),i=nbv(1),o=nbv(0),s=nbv(0),a=nbv(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(i.isEven()&&o.isEven()||(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?(s.isEven()&&a.isEven()||(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(s,i),o.subTo(a,o)):(r.subTo(n,r),e&&s.subTo(i,s),a.subTo(o,a))}return 0!=r.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}function bnIsProbablePrime(t){var e,n=this.abs();if(1==n.t&&n[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(n[0]==lowprimes[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<lowprimes.length;){for(var r=lowprimes[e],i=e+1;i<lowprimes.length&&r<lplim;)r*=lowprimes[i++];for(r=n.modInt(r);e<i;)if(r%lowprimes[e++]==0)return!1}return n.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);t=t+1>>1,t>lowprimes.length&&(t=lowprimes.length);for(var i=nbi(),o=0;o<t;++o){i.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var s=i.modPow(r,this);if(0!=s.compareTo(BigInteger.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<n&&0!=s.compareTo(e);)if(s=s.modPowInt(2,this),0==s.compareTo(BigInteger.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function ARC4next(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(t){rng_pool[rng_pptr++]^=255&t,rng_pool[rng_pptr++]^=t>>8&255,rng_pool[rng_pptr++]^=t>>16&255,rng_pool[rng_pptr++]^=t>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(t){var e;for(e=0;e<t.length;++e)t[e]=rng_get_byte()}function SecureRandom(){}function parseBigInt(t,e){return new BigInteger(t,e)}function linebrk(t,e){for(var n="",r=0;r+e<t.length;)n+=t.substring(r,r+e)+"\n",r+=e;return n+t.substring(r,t.length)}function byte2Hex(t){return t<16?"0"+t.toString(16):t.toString(16)}function pkcs1pad2(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var n=new Array,r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var o=new SecureRandom,s=new Array;e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new BigInteger(n)}function oaep_mgf1_arr(t,e,n){for(var r="",i=0;r.length<e;)r+=n(String.fromCharCode.apply(String,t.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return r}function oaep_pad(t,e,n,r){var i=KJUR.crypto.MessageDigest,o=KJUR.crypto.Util,s=null;if(n||(n="sha1"),"string"==typeof n&&(s=i.getCanonicalAlgName(n),r=i.getHashLength(s),n=function(t){return hextorstr(o.hashString(t,s))}),t.length+2*r+2>e)throw"Message too long for RSA";var a,u="";for(a=0;a<e-t.length-2*r-2;a+=1)u+="\0";var c=n("")+u+""+t,l=new Array(r);(new SecureRandom).nextBytes(l);var h=oaep_mgf1_arr(l,c.length,n),f=[];for(a=0;a<c.length;a+=1)f[a]=c.charCodeAt(a)^h.charCodeAt(a);var d=oaep_mgf1_arr(f,l.length,n),p=[0];for(a=0;a<l.length;a+=1)p[a+1]=l[a]^d.charCodeAt(a);return new BigInteger(p.concat(f))}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(t,e){this.isPublic=!0,"string"!=typeof t?(this.n=t,this.e=e):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=parseBigInt(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function RSADoPublic(t){return t.modPowInt(this.e,this.n)}function RSAEncrypt(t){var e=pkcs1pad2(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r}function RSAEncryptOAEP(t,e,n){var r=oaep_pad(t,this.n.bitLength()+7>>3,e,n);if(null==r)return null;var i=this.doPublic(r);if(null==i)return null;var o=i.toString(16);return 0==(1&o.length)?o:"0"+o}function pkcs1unpad2(t,e){for(var n=t.toByteArray(),r=0;r<n.length&&0==n[r];)++r;if(n.length-r!=e-1||2!=n[r])return null;for(++r;0!=n[r];)if(++r>=n.length)return null;for(var i="";++r<n.length;){var o=255&n[r];o<128?i+=String.fromCharCode(o):o>191&&o<224?(i+=String.fromCharCode((31&o)<<6|63&n[r+1]),++r):(i+=String.fromCharCode((15&o)<<12|(63&n[r+1])<<6|63&n[r+2]),r+=2)}return i}function oaep_mgf1_str(t,e,n){for(var r="",i=0;r.length<e;)r+=n(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return r}function oaep_unpad(t,e,n,r){var i=KJUR.crypto.MessageDigest,o=KJUR.crypto.Util,s=null;n||(n="sha1"),"string"==typeof n&&(s=i.getCanonicalAlgName(n),r=i.getHashLength(s),n=function(t){return hextorstr(o.hashString(t,s))}),t=t.toByteArray();var a;for(a=0;a<t.length;a+=1)t[a]&=255;for(;t.length<e;)t.unshift(0);if(t=String.fromCharCode.apply(String,t),t.length<2*r+2)throw"Cipher too short";var a,u=t.substr(1,r),c=t.substr(r+1),l=oaep_mgf1_str(c,r,n),h=[];for(a=0;a<u.length;a+=1)h[a]=u.charCodeAt(a)^l.charCodeAt(a);var f=oaep_mgf1_str(String.fromCharCode.apply(String,h),t.length-r,n),d=[];for(a=0;a<c.length;a+=1)d[a]=c.charCodeAt(a)^f.charCodeAt(a);if(d=String.fromCharCode.apply(String,d),d.substr(0,r)!==n(""))throw"Hash mismatch";d=d.substr(r);var p=d.indexOf(""),g=p!=-1?d.substr(0,p).lastIndexOf("\0"):-1;if(g+1!=p)throw"Malformed data";return d.substr(p+1)}function RSASetPrivate(t,e,n){this.isPrivate=!0,"string"!=typeof t?(this.n=t,this.e=e,this.d=n):null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(n,16)):alert("Invalid RSA private key")}function RSASetPrivateEx(t,e,n,r,i,o,s,a){if(this.isPrivate=!0,null==t)throw"RSASetPrivateEx N == null";if(null==e)throw"RSASetPrivateEx E == null";if(0==t.length)throw"RSASetPrivateEx N.length == 0";if(0==e.length)throw"RSASetPrivateEx E.length == 0";null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=parseBigInt(t,16),this.e=parseInt(e,16),this.d=parseBigInt(n,16),this.p=parseBigInt(r,16),this.q=parseBigInt(i,16),this.dmp1=parseBigInt(o,16),this.dmq1=parseBigInt(s,16),this.coeff=parseBigInt(a,16)):alert("Invalid RSA private key in RSASetPrivateEx")}function RSAGenerate(t,e){var n=new SecureRandom,r=t>>1;this.e=parseInt(e,16);for(var i=new BigInteger(e,16);;){for(;this.p=new BigInteger(t-r,1,n),0!=this.p.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.p.isProbablePrime(10););for(;this.q=new BigInteger(r,1,n),0!=this.q.subtract(BigInteger.ONE).gcd(i).compareTo(BigInteger.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var s=this.p.subtract(BigInteger.ONE),a=this.q.subtract(BigInteger.ONE),u=s.multiply(a);if(0==u.gcd(i).compareTo(BigInteger.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(u),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.isPrivate=!0}function RSADoPrivate(t){if(null==this.p||null==this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),n=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(n)<0;)e=e.add(this.p);return e.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n)}function RSADecrypt(t){var e=parseBigInt(t,16),n=this.doPrivate(e);return null==n?null:pkcs1unpad2(n,this.n.bitLength()+7>>3)}function RSADecryptOAEP(t,e,n){var r=parseBigInt(t,16),i=this.doPrivate(r);return null==i?null:oaep_unpad(i,this.n.bitLength()+7>>3,e,n)}function ECFieldElementFp(t,e){this.x=e,this.q=t}function feFpEquals(t){return t==this||this.q.equals(t.q)&&this.x.equals(t.x)}function feFpToBigInteger(){return this.x}function feFpNegate(){return new ECFieldElementFp(this.q,this.x.negate().mod(this.q))}function feFpAdd(t){return new ECFieldElementFp(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function feFpSubtract(t){return new ECFieldElementFp(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function feFpMultiply(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function feFpSquare(){return new ECFieldElementFp(this.q,this.x.square().mod(this.q))}function feFpDivide(t){return new ECFieldElementFp(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}function ECPointFp(t,e,n,r){this.curve=t,this.x=e,this.y=n,null==r?this.z=BigInteger.ONE:this.z=r,this.zinv=null}function pointFpGetX(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpGetY(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function pointFpEquals(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,n;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),!!e.equals(BigInteger.ZERO)&&(n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),n.equals(BigInteger.ZERO))}function pointFpIsInfinity(){return null==this.x&&null==this.y||this.z.equals(BigInteger.ZERO)&&!this.y.toBigInteger().equals(BigInteger.ZERO)}function pointFpNegate(){return new ECPointFp(this.curve,this.x,this.y.negate(),this.z)}function pointFpAdd(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),n=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(BigInteger.ZERO.equals(n))return BigInteger.ZERO.equals(e)?this.twice():this.curve.getInfinity();var r=new BigInteger("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),n.square()),a=s.multiply(n),u=i.multiply(s),c=e.square().multiply(this.z),l=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(n).mod(this.curve.q),h=u.multiply(r).multiply(e).subtract(o.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),f=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(l),this.curve.fromBigInteger(h),f)}function pointFpTwice(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new BigInteger("3"),e=this.x.toBigInteger(),n=this.y.toBigInteger(),r=n.multiply(this.z),i=r.multiply(n).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=e.square().multiply(t);BigInteger.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o))),s=s.mod(this.curve.q);var a=s.square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.q),u=s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=r.square().multiply(r).shiftLeft(3).mod(this.curve.q);return new ECPointFp(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)}function pointFpMultiply(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new BigInteger("3")),i=this.negate(),o=this;for(e=r.bitLength()-2;e>0;--e){o=o.twice();var s=r.testBit(e),a=n.testBit(e);s!=a&&(o=o.add(s?this:i))}return o}function pointFpMultiplyTwo(t,e,n){var r;r=t.bitLength()>n.bitLength()?t.bitLength()-1:n.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(e);r>=0;)i=i.twice(),t.testBit(r)?i=n.testBit(r)?i.add(o):i.add(this):n.testBit(r)&&(i=i.add(e)),--r;return i}function ECCurveFp(t,e,n){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(n),this.infinity=new ECPointFp(this,null,null)}function curveFpGetQ(){return this.q}function curveFpGetA(){return this.a}function curveFpGetB(){return this.b}function curveFpEquals(t){return t==this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function curveFpGetInfinity(){return this.infinity}function curveFpFromBigInteger(t){return new ECFieldElementFp(this.q,t)}function curveFpDecodePointHex(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,n=t.substr(2,e),r=t.substr(e+2,e);return new ECPointFp(this,this.fromBigInteger(new BigInteger(n,16)),this.fromBigInteger(new BigInteger(r,16)));default:return null}}function Base64x(){}function stoBA(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}function BAtos(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}function BAtohex(t){for(var e="",n=0;n<t.length;n++){var r=t[n].toString(16);1==r.length&&(r="0"+r),e+=r}return e}function stohex(t){return BAtohex(stoBA(t))}function stob64(t){return hex2b64(stohex(t))}function stob64u(t){return b64tob64u(hex2b64(stohex(t)))}function b64utos(t){return BAtos(b64toBA(b64utob64(t)))}function b64tob64u(t){return t=t.replace(/\=/g,""),t=t.replace(/\+/g,"-"),t=t.replace(/\//g,"_")}function b64utob64(t){return t.length%4==2?t+="==":t.length%4==3&&(t+="="),t=t.replace(/-/g,"+"),t=t.replace(/_/g,"/")}function hextob64u(t){return t.length%2==1&&(t="0"+t),b64tob64u(hex2b64(t))}function b64utohex(t){return b64tohex(b64utob64(t))}function utf8tob64(t){return hex2b64(uricmptohex(encodeURIComponentAll(t)))}function b64toutf8(t){return decodeURIComponent(hextouricmp(b64tohex(t)))}function utf8tohex(t){return uricmptohex(encodeURIComponentAll(t))}function hextoutf8(t){return decodeURIComponent(hextouricmp(t))}function hextorstr(t){for(var e="",n=0;n<t.length-1;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e}function rstrtohex(t){for(var e="",n=0;n<t.length;n++)e+=("0"+t.charCodeAt(n).toString(16)).slice(-2);return e}function hextob64(t){return hex2b64(t)}function hextob64nl(t){var e=hextob64(t),n=e.replace(/(.{64})/g,"$1\r\n");return n=n.replace(/\r\n$/,"")}function b64nltohex(t){var e=t.replace(/[^0-9A-Za-z\/+=]*/g,""),n=b64tohex(e);return n}function hextoArrayBuffer(t){if(t.length%2!=0)throw"input is not even length";if(null==t.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var e=new ArrayBuffer(t.length/2),n=new DataView(e),r=0;r<t.length/2;r++)n.setUint8(r,parseInt(t.substr(2*r,2),16));return e}function ArrayBuffertohex(t){for(var e="",n=new DataView(t),r=0;r<t.byteLength;r++)e+=("00"+n.getUint8(r).toString(16)).slice(-2);return e}function uricmptohex(t){return t.replace(/%/g,"")}function hextouricmp(t){return t.replace(/(..)/g,"%$1")}function encodeURIComponentAll(t){for(var e=encodeURIComponent(t),n="",r=0;r<e.length;r++)"%"==e[r]?(n+=e.substr(r,3),r+=2):n=n+"%"+stohex(e[r]);return n}function newline_toUnix(t){return t=t.replace(/\r\n/gm,"\n")}function newline_toDos(t){return t=t.replace(/\r\n/gm,"\n"),t=t.replace(/\n/gm,"\r\n")}function intarystrtohex(t){t=t.replace(/^\s*\[\s*/,""),t=t.replace(/\s*\]\s*$/,""),t=t.replace(/\s*/g,"");try{var e=t.split(/,/).map(function(t,e,n){var r=parseInt(t);if(r<0||255<r)throw"integer not in range 0-255";var i=("00"+r.toString(16)).slice(-2);return i}).join("");return e}catch(n){throw"malformed integer array string: "+n}}function _rsapem_pemToBase64(t){var e=t;return e=e.replace("-----BEGIN RSA PRIVATE KEY-----",""),e=e.replace("-----END RSA PRIVATE KEY-----",""),e=e.replace(/[ \n]+/g,"")}function _rsapem_getPosArrayOfChildrenFromHex(t){var e=new Array,n=ASN1HEX.getStartPosOfV_AtObj(t,0),r=ASN1HEX.getPosOfNextSibling_AtObj(t,n),i=ASN1HEX.getPosOfNextSibling_AtObj(t,r),o=ASN1HEX.getPosOfNextSibling_AtObj(t,i),s=ASN1HEX.getPosOfNextSibling_AtObj(t,o),a=ASN1HEX.getPosOfNextSibling_AtObj(t,s),u=ASN1HEX.getPosOfNextSibling_AtObj(t,a),c=ASN1HEX.getPosOfNextSibling_AtObj(t,u),l=ASN1HEX.getPosOfNextSibling_AtObj(t,c);
return e.push(n,r,i,o,s,a,u,c,l),e}function _rsapem_getHexValueArrayOfChildrenFromHex(t){var e=_rsapem_getPosArrayOfChildrenFromHex(t),n=ASN1HEX.getHexOfV_AtObj(t,e[0]),r=ASN1HEX.getHexOfV_AtObj(t,e[1]),i=ASN1HEX.getHexOfV_AtObj(t,e[2]),o=ASN1HEX.getHexOfV_AtObj(t,e[3]),s=ASN1HEX.getHexOfV_AtObj(t,e[4]),a=ASN1HEX.getHexOfV_AtObj(t,e[5]),u=ASN1HEX.getHexOfV_AtObj(t,e[6]),c=ASN1HEX.getHexOfV_AtObj(t,e[7]),l=ASN1HEX.getHexOfV_AtObj(t,e[8]),h=new Array;return h.push(n,r,i,o,s,a,u,c,l),h}function _rsapem_readPrivateKeyFromASN1HexString(t){var e=_rsapem_getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function _rsapem_readPrivateKeyFromPEMString(t){var e=_rsapem_pemToBase64(t),n=b64tohex(e),r=_rsapem_getHexValueArrayOfChildrenFromHex(n);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function _rsasign_getHexPaddedDigestInfoForString(t,e,n){var r=function(t){return KJUR.crypto.Util.hashString(t,n)},i=r(t);return KJUR.crypto.Util.getPaddedDigestInfoHex(i,n,e)}function _zeroPaddingOfSignature(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t}function _rsasign_signString(t,e){var n=function(t){return KJUR.crypto.Util.hashString(t,e)},r=n(t);return this.signWithMessageHash(r,e)}function _rsasign_signWithMessageHash(t,e){var n=KJUR.crypto.Util.getPaddedDigestInfoHex(t,e,this.n.bitLength()),r=parseBigInt(n,16),i=this.doPrivate(r),o=i.toString(16);return _zeroPaddingOfSignature(o,this.n.bitLength())}function _rsasign_signStringWithSHA1(t){return _rsasign_signString.call(this,t,"sha1")}function _rsasign_signStringWithSHA256(t){return _rsasign_signString.call(this,t,"sha256")}function pss_mgf1_str(t,e,n){for(var r="",i=0;r.length<e;)r+=hextorstr(n(rstrtohex(t+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return r}function _rsasign_signStringPSS(t,e,n){var r=function(t){return KJUR.crypto.Util.hashHex(t,e)},i=r(rstrtohex(t));return void 0===n&&(n=-1),this.signWithMessageHashPSS(i,e,n)}function _rsasign_signWithMessageHashPSS(t,e,n){var r,i=hextorstr(t),o=i.length,s=this.n.bitLength()-1,a=Math.ceil(s/8),u=function(t){return KJUR.crypto.Util.hashHex(t,e)};if(n===-1||void 0===n)n=o;else if(n===-2)n=a-o-2;else if(n<-2)throw"invalid salt length";if(a<o+n+2)throw"data too long";var c="";n>0&&(c=new Array(n),(new SecureRandom).nextBytes(c),c=String.fromCharCode.apply(String,c));var l=hextorstr(u(rstrtohex("\0\0\0\0\0\0\0\0"+i+c))),h=[];for(r=0;r<a-n-o-2;r+=1)h[r]=0;var f=String.fromCharCode.apply(String,h)+""+c,d=pss_mgf1_str(l,f.length,u),p=[];for(r=0;r<f.length;r+=1)p[r]=f.charCodeAt(r)^d.charCodeAt(r);var g=65280>>8*a-s&255;for(p[0]&=~g,r=0;r<o;r++)p.push(l.charCodeAt(r));return p.push(188),_zeroPaddingOfSignature(this.doPrivate(new BigInteger(p)).toString(16),this.n.bitLength())}function _rsasign_getDecryptSignatureBI(t,e,n){var r=new RSAKey;r.setPublic(e,n);var i=r.doPublic(t);return i}function _rsasign_getHexDigestInfoFromSig(t,e,n){var r=_rsasign_getDecryptSignatureBI(t,e,n),i=r.toString(16).replace(/^1f+00/,"");return i}function _rsasign_getAlgNameAndHashFromHexDisgestInfo(t){for(var e in KJUR.crypto.Util.DIGESTINFOHEAD){var n=KJUR.crypto.Util.DIGESTINFOHEAD[e],r=n.length;if(t.substring(0,r)==n){var i=[e,t.substring(r)];return i}}return[]}function _rsasign_verifySignatureWithArgs(t,e,n,r){var i=_rsasign_getHexDigestInfoFromSig(e,n,r),o=_rsasign_getAlgNameAndHashFromHexDisgestInfo(i);if(0==o.length)return!1;var s=o[0],a=o[1],u=function(t){return KJUR.crypto.Util.hashString(t,s)},c=u(t);return a==c}function _rsasign_verifyHexSignatureForMessage(t,e){var n=parseBigInt(t,16),r=_rsasign_verifySignatureWithArgs(e,n,this.n.toString(16),this.e.toString(16));return r}function _rsasign_verifyString(t,e){e=e.replace(_RE_HEXDECONLY,""),e=e.replace(/[ \n]+/g,"");var n=parseBigInt(e,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),o=_rsasign_getAlgNameAndHashFromHexDisgestInfo(i);if(0==o.length)return!1;var s=o[0],a=o[1],u=function(t){return KJUR.crypto.Util.hashString(t,s)},c=u(t);return a==c}function _rsasign_verifyWithMessageHash(t,e){e=e.replace(_RE_HEXDECONLY,""),e=e.replace(/[ \n]+/g,"");var n=parseBigInt(e,16);if(n.bitLength()>this.n.bitLength())return 0;var r=this.doPublic(n),i=r.toString(16).replace(/^1f+00/,""),o=_rsasign_getAlgNameAndHashFromHexDisgestInfo(i);if(0==o.length)return!1;var s=(o[0],o[1]);return s==t}function _rsasign_verifyStringPSS(t,e,n,r){var i=function(t){return KJUR.crypto.Util.hashHex(t,n)},o=i(rstrtohex(t));return void 0===r&&(r=-1),this.verifyWithMessageHashPSS(o,e,n,r)}function _rsasign_verifyWithMessageHashPSS(t,e,n,r){var i=new BigInteger(e,16);if(i.bitLength()>this.n.bitLength())return!1;var o,s=function(t){return KJUR.crypto.Util.hashHex(t,n)},a=hextorstr(t),u=a.length,c=this.n.bitLength()-1,l=Math.ceil(c/8);if(r===-1||void 0===r)r=u;else if(r===-2)r=l-u-2;else if(r<-2)throw"invalid salt length";if(l<u+r+2)throw"data too long";var h=this.doPublic(i).toByteArray();for(o=0;o<h.length;o+=1)h[o]&=255;for(;h.length<l;)h.unshift(0);if(188!==h[l-1])throw"encoded message does not end in 0xbc";h=String.fromCharCode.apply(String,h);var f=h.substr(0,l-u-1),d=h.substr(f.length,u),p=65280>>8*l-c&255;if(0!==(f.charCodeAt(0)&p))throw"bits beyond keysize not zero";var g=pss_mgf1_str(d,f.length,s),v=[];for(o=0;o<f.length;o+=1)v[o]=f.charCodeAt(o)^g.charCodeAt(o);v[0]&=~p;var m=l-u-r-2;for(o=0;o<m;o+=1)if(0!==v[o])throw"leftmost octets not zero";if(1!==v[m])throw"0x01 marker not found";return d===hextorstr(s(rstrtohex("\0\0\0\0\0\0\0\0"+a+String.fromCharCode.apply(String,v.slice(-r)))))}function X509(){this.subjectPublicKeyRSA=null,this.subjectPublicKeyRSA_hN=null,this.subjectPublicKeyRSA_hE=null,this.hex=null,this.getSerialNumberHex=function(){return ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,1])},this.getSignatureAlgorithmField=function(){var t=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,2,0]),e=KJUR.asn1.ASN1Util.oidHexToInt(t),n=KJUR.asn1.x509.OID.oid2name(e);return n},this.getIssuerHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3])},this.getIssuerString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,3]))},this.getSubjectHex=function(){return ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5])},this.getSubjectString=function(){return X509.hex2dn(ASN1HEX.getDecendantHexTLVByNthList(this.hex,0,[0,5]))},this.getNotBefore=function(){var t=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,0]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.getNotAfter=function(){var t=ASN1HEX.getDecendantHexVByNthList(this.hex,0,[0,4,1]);return t=t.replace(/(..)/g,"%$1"),t=decodeURIComponent(t)},this.readCertPEM=function(t){var e=X509.pemToHex(t),n=X509.getPublicKeyHexArrayFromCertHex(e),r=new RSAKey;r.setPublic(n[0],n[1]),this.subjectPublicKeyRSA=r,this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=e},this.readCertPEMWithoutRSAInit=function(t){var e=X509.pemToHex(t),n=X509.getPublicKeyHexArrayFromCertHex(e);"function"==typeof this.subjectPublicKeyRSA.setPublic&&this.subjectPublicKeyRSA.setPublic(n[0],n[1]),this.subjectPublicKeyRSA_hN=n[0],this.subjectPublicKeyRSA_hE=n[1],this.hex=e},this.getInfo=function(){var t="Basic Fields\n";t+="  serial number: "+this.getSerialNumberHex()+"\n",t+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",t+="  issuer: "+this.getIssuerString()+"\n",t+="  notBefore: "+this.getNotBefore()+"\n",t+="  notAfter: "+this.getNotAfter()+"\n",t+="  subject: "+this.getSubjectString()+"\n",t+="  subject public key info: \n";var e=X509.getSubjectPublicKeyInfoPosFromCertHex(this.hex),n=ASN1HEX.getHexOfTLV_AtObj(this.hex,e),r=KEYUTIL.getKey(n,null,"pkcs8pub");r instanceof RSAKey&&(t+="    key algorithm: RSA\n",t+="    n="+r.n.toString(16).substr(0,16)+"...\n",t+="    e="+r.e.toString(16)+"\n"),t+="X509v3 Extensions:\n";for(var i=X509.getV3ExtInfoListOfCertHex(this.hex),o=0;o<i.length;o++){var s=i[o],a=KJUR.asn1.x509.OID.oid2name(s.oid);""===a&&(a=s.oid);var u="";if(s.critical===!0&&(u="CRITICAL"),t+="  "+a+" "+u+":\n","basicConstraints"===a){var c=X509.getExtBasicConstraints(this.hex);void 0===c.cA?t+="    {}\n":(t+="    cA=true",void 0!==c.pathLen&&(t+=", pathLen="+c.pathLen),t+="\n")}else if("keyUsage"===a)t+="    "+X509.getExtKeyUsageString(this.hex)+"\n";else if("subjectKeyIdentifier"===a)t+="    "+X509.getExtSubjectKeyIdentifier(this.hex)+"\n";else if("authorityKeyIdentifier"===a){var l=X509.getExtAuthorityKeyIdentifier(this.hex);void 0!==l.kid&&(t+="    kid="+l.kid+"\n")}else if("extKeyUsage"===a){var h=X509.getExtExtKeyUsageName(this.hex);t+="    "+h.join(", ")+"\n"}else if("subjectAltName"===a){var f=X509.getExtSubjectAltName(this.hex);t+="    "+f.join(", ")+"\n"}else if("cRLDistributionPoints"===a){var d=X509.getExtCRLDistributionPointsURI(this.hex);t+="    "+d+"\n"}else if("authorityInfoAccess"===a){var p=X509.getExtAIAInfo(this.hex);void 0!==p.ocsp&&(t+="    ocsp: "+p.ocsp.join(",")+"\n"),void 0!==p.caissuer&&(t+="    caissuer: "+p.caissuer.join(",")+"\n")}}return t+="signature algorithm: "+X509.getSignatureAlgorithmName(this.hex)+"\n",t+="signature: "+X509.getSignatureValueHex(this.hex).substr(0,16)+"...\n"}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}if(function(){"use strict";function t(e,r){function i(t,e){return function(){return t.apply(e,arguments)}}var o;if(r=r||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=r.touchBoundary||10,this.layer=e,this.tapDelay=r.tapDelay||200,this.tapTimeout=r.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=this,u=0,c=s.length;u<c;u++)a[s[u]]=i(a[s[u]],a);n&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),r):i.call(e,t,n,r)}),"function"==typeof e.onclick&&(o=e.onclick,e.addEventListener("click",function(t){o(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!e,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,i=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=r&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(r&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var n,r;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),r=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},t.prototype.determineEventType=function(t){return n&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;r&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,n;if(e=t.fastClickScrollParent,!e||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,n,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],r){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!i){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},t.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,a,u,c,l=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(c=t.changedTouches[0],l=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||l,l.fastClickScrollParent=this.targetElement.fastClickScrollParent),a=l.tagName.toLowerCase(),"label"===a){if(e=this.findControl(l)){if(this.focus(l),n)return!1;l=e}}else if(this.needsFocus(l))return t.timeStamp-s>100||r&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(l),this.sendClick(l,t),r&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return!(!r||i||(u=l.fastClickScrollParent,!u||u.fastClickLastScrollTop===u.scrollTop))||(this.needsClick(l)||(t.preventDefault(),this.sendClick(l,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;n&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,r,i,o;if("undefined"==typeof window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(e=document.querySelector("meta[name=viewport]")){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(r>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(i=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),i[1]>=10&&i[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(e.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(e.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},t.attach=function(e,n){return new t(e,n)},window.FastClick=t}(),function(){function t(t){return f.call(t)}function e(t,e,n){try{c.call(t,e,n)}catch(r){}}function n(t,e){l.call(t,e)}function r(t){return d.call(t)}function i(t){for(;t.childNodes.length;)t.removeChild(t.lastChild)}function o(t,e,n){h.value.call(t,e,n)}function s(){var t=!0;try{p.innerHTML="<test/>"}catch(e){t=!1}return t}function a(s,a){function u(i){var o=t(i);if(o&&o.length){for(var s,a=0,c=o.length;a<c;a++){var l=o[a],h=l.name;"o"!==h[0]&&"O"!==h[0]||"n"!==h[1]&&"N"!==h[1]||(s=s||[],s.push({name:l.name,value:l.value}))}if(s)for(var a=0,c=s.length;a<c;a++){var l=s[a];n(i,l.name),e(i,"x-"+l.name,l.value)}}for(var f=r(i),a=0,c=f.length;a<c;a++)u(f[a])}var c=document.implementation.createHTMLDocument("cleaner");i(c.documentElement),MSApp.execUnsafeLocalFunction(function(){o(c.documentElement,"afterbegin",s)});var l=c.documentElement.querySelectorAll("script");Array.prototype.forEach.call(l,function(t){switch(t.type.toLowerCase()){case"":t.type="text/inert";break;case"text/javascript":case"text/ecmascript":case"text/x-javascript":case"text/jscript":case"text/livescript":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":t.type="text/inert-"+t.type.slice("text/".length);break;case"application/javascript":case"application/ecmascript":case"application/x-javascript":t.type="application/inert-"+t.type.slice("application/".length)}}),u(c.documentElement);var h=[];return"HTML"===a.tagName?h=Array.prototype.slice.call(document.adoptNode(c.documentElement).childNodes):(c.head&&(h=h.concat(Array.prototype.slice.call(document.adoptNode(c.head).childNodes))),c.body&&(h=h.concat(Array.prototype.slice.call(document.adoptNode(c.body).childNodes)))),h}function u(t,e){var n=Object.getOwnPropertyDescriptor(HTMLElement.prototype,t),r=n.set;Object.defineProperty(HTMLElement.prototype,t,{get:n.get,set:function(t){if(window.WinJS&&window.WinJS._execUnsafe&&s())r.call(this,t);else{var i=this,o=a(t,i);MSApp.execUnsafeLocalFunction(function(){e(n,i,o)})}},enumerable:n.enumerable,configurable:n.configurable})}if(window.MSApp&&MSApp.execUnsafeLocalFunction){var c=Object.getOwnPropertyDescriptor(Element.prototype,"setAttribute").value,l=Object.getOwnPropertyDescriptor(Element.prototype,"removeAttribute").value,h=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"insertAdjacentHTML"),f=Object.getOwnPropertyDescriptor(Node.prototype,"attributes").get,d=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes").get,p=document.createElement("div");u("innerHTML",function(t,e,n){i(e);for(var r=0,o=n.length;r<o;r++)e.appendChild(n[r])}),u("outerHTML",function(t,e,n){for(var r=0,i=n.length;r<i;r++)e.insertAdjacentElement("afterend",n[r]);e.parentNode.removeChild(e)})}}(),function(){function t(t){return function(e){e.annotations=t}}window.WebComponents=window.WebComponents||{},WebComponents.annotate=t,window.wccontainer=function(){return function(t){t.isContainer=!0}}}(),"function"!=typeof HTMLElement){var _HTMLElement=function(){};_HTMLElement.prototype=HTMLElement.prototype,HTMLElement=_HTMLElement}try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),ce.defaultPrevented!==!0)throw new Error("Could not prevent default")}catch(e){var CustomEvent=function(t,e){var n,r;return e=e||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(t){this.defaultPrevented=!0}},n};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}if(function(t){"use strict";function e(){var t=S.splice(0,S.length);for(Vt=0;t.length;)t.shift().call(null,t.shift())}function n(t,e){for(var n=0,r=t.length;n<r;n++)p(t[n],e)}function r(t){for(var e,n=0,r=t.length;n<r;n++)e=t[n],N(e,nt[o(e)])}function i(t){return function(e){Ft(e)&&(p(e,t),n(e.querySelectorAll(rt),t))}}function o(t){var e=Lt.call(t,"is"),n=t.nodeName.toUpperCase(),r=ot.call(et,e?Q+e.toUpperCase():G+n);return e&&-1<r&&!s(n,e)?-1:r}function s(t,e){return-1<rt.indexOf(t+'[is="'+e+'"]')}function a(t){var e=t.currentTarget,n=t.attrChange,r=t.attrName,i=t.target,o=t[J]||2,s=t[z]||3;Yt&&(!i||i===e)&&e[M]&&"style"!==r&&(t.prevValue!==t.newValue||""===t.newValue&&(n===o||n===s))&&e[M](r,n===o?null:t.prevValue,n===s?null:t.newValue)}function u(t){var n=i(t);return function(t){S.push(n,t.target),Vt&&clearTimeout(Vt),Vt=setTimeout(e,1)}}function c(t){Wt&&(Wt=!1,t.currentTarget.removeEventListener(W,c)),n((t.target||O).querySelectorAll(rt),t.detail===j?j:D),It&&f()}function l(t,e){var n=this;Ht.call(n,t,e),x.call(n,{target:n})}function h(t,e){Ot(t,e),C?C.observe(t,qt):(Xt&&(t.setAttribute=l,t[P]=A(t),t[F](Y,x)),t[F](X,a)),t[K]&&Yt&&(t.created=!0,t[K](),t.created=!1)}function f(){for(var t,e=0,n=Dt.length;e<n;e++)t=Dt[e],it.contains(t)||(n--,Dt.splice(e--,1),p(t,j))}function d(t){throw new Error("A "+t+" type is already registered")}function p(t,e){var n,r=o(t);-1<r&&(R(t,nt[r]),r=0,e!==D||t[D]?e===j&&!t[j]&&(t[D]=!1,t[j]=!0,r=1):(t[j]=!1,t[D]=!0,r=1,It&&ot.call(Dt,t)<0&&Dt.push(t)),r&&(n=t[e+$])&&n.call(t))}function g(){}function v(t,e,n){var r=n&&n[L]||"",i=e.prototype,o=Nt(i),s=e.observedAttributes||lt,a={prototype:o};Pt(o,K,{value:function(){if(xt)xt=!1;else if(!this[mt]){this[mt]=!0,new e(this),i[K]&&i[K].call(this);var t=Et[Ct.get(e)];(!bt||t.create.length>1)&&b(this)}}}),Pt(o,M,{value:function(t){-1<ot.call(s,t)&&i[M].apply(this,arguments)}}),i[H]&&Pt(o,B,{value:i[H]}),i[U]&&Pt(o,q,{value:i[U]}),r&&(a[L]=r),t=t.toUpperCase(),Et[t]={constructor:e,create:r?[r,Rt(t)]:[t]},Ct.set(e,t),O[I](t.toLowerCase(),a),_(t),At[t].r()}function m(t){var e=Et[t.toUpperCase()];return e&&e.constructor}function y(t){return"string"==typeof t?t:t&&t.is||""}function b(t){for(var e,n=t[M],r=n?t.attributes:lt,i=r.length;i--;)e=r[i],n.call(t,e.name||e.nodeName,null,e.value||e.nodeValue)}function _(t){return t=t.toUpperCase(),t in At||(At[t]={},At[t].p=new St(function(e){At[t].r=e})),At[t].p}function w(){yt&&delete t.customElements,ct(t,"customElements",{configurable:!0,value:new g}),ct(t,"CustomElementRegistry",{configurable:!0,value:g});for(var e=function(e){var n=t[e];if(n){t[e]=function(t){var e,r;return t||(t=this),t[mt]||(xt=!0,e=Et[Ct.get(t.constructor)],r=bt&&1===e.create.length,t=r?Reflect.construct(n,lt,e.constructor):O.createElement.apply(O,e.create),t[mt]=!0,xt=!1,r||b(t)),t},t[e].prototype=n.prototype;try{n.prototype.constructor=t[e]}catch(r){vt=!0,ct(n,mt,{value:t[e]})}}},n=k.get(/^HTML[A-Z]*[a-z]/),r=n.length;r--;e(n[r]));O.createElement=function(t,e){var n=y(e);return n?Kt.call(this,t,Rt(n)):Kt.call(this,t)}}var S,x,E,A,C,R,N,O=t.document,T=t.Object,k=function(t){var e,n,r,i,o=/^[A-Z]+[a-z]/,s=function(t){var e,n=[];for(e in u)t.test(e)&&n.push(e);return n},a=function(t,e){e=e.toLowerCase(),e in u||(u[t]=(u[t]||[]).concat(e),u[e]=u[e.toUpperCase()]=t)},u=(T.create||T)(null),c={};for(n in t)for(i in t[n])for(r=t[n][i],u[i]=r,e=0;e<r.length;e++)u[r[e].toLowerCase()]=u[r[e].toUpperCase()]=i;return c.get=function(t){return"string"==typeof t?u[t]||(o.test(t)?[]:""):s(t)},c.set=function(t,e){return o.test(t)?a(t,e):a(e,t),c},c}({collections:{HTMLAllCollection:["all"],HTMLCollection:["forms"],HTMLFormControlsCollection:["elements"],HTMLOptionsCollection:["options"]},elements:{Element:["element"],HTMLAnchorElement:["a"],HTMLAppletElement:["applet"],HTMLAreaElement:["area"],HTMLAttachmentElement:["attachment"],HTMLAudioElement:["audio"],HTMLBRElement:["br"],HTMLBaseElement:["base"],HTMLBodyElement:["body"],HTMLButtonElement:["button"],HTMLCanvasElement:["canvas"],HTMLContentElement:["content"],HTMLDListElement:["dl"],HTMLDataElement:["data"],HTMLDataListElement:["datalist"],HTMLDetailsElement:["details"],HTMLDialogElement:["dialog"],HTMLDirectoryElement:["dir"],HTMLDivElement:["div"],HTMLDocument:["document"],HTMLElement:["element","abbr","address","article","aside","b","bdi","bdo","cite","code","command","dd","dfn","dt","em","figcaption","figure","footer","header","i","kbd","mark","nav","noscript","rp","rt","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr"],HTMLEmbedElement:["embed"],HTMLFieldSetElement:["fieldset"],HTMLFontElement:["font"],HTMLFormElement:["form"],HTMLFrameElement:["frame"],HTMLFrameSetElement:["frameset"],HTMLHRElement:["hr"],HTMLHeadElement:["head"],HTMLHeadingElement:["h1","h2","h3","h4","h5","h6"],HTMLHtmlElement:["html"],HTMLIFrameElement:["iframe"],HTMLImageElement:["img"],HTMLInputElement:["input"],HTMLKeygenElement:["keygen"],HTMLLIElement:["li"],HTMLLabelElement:["label"],HTMLLegendElement:["legend"],HTMLLinkElement:["link"],HTMLMapElement:["map"],HTMLMarqueeElement:["marquee"],HTMLMediaElement:["media"],HTMLMenuElement:["menu"],HTMLMenuItemElement:["menuitem"],HTMLMetaElement:["meta"],HTMLMeterElement:["meter"],HTMLModElement:["del","ins"],HTMLOListElement:["ol"],HTMLObjectElement:["object"],HTMLOptGroupElement:["optgroup"],HTMLOptionElement:["option"],HTMLOutputElement:["output"],HTMLParagraphElement:["p"],HTMLParamElement:["param"],HTMLPictureElement:["picture"],HTMLPreElement:["pre"],HTMLProgressElement:["progress"],HTMLQuoteElement:["blockquote","q","quote"],HTMLScriptElement:["script"],HTMLSelectElement:["select"],HTMLShadowElement:["shadow"],HTMLSlotElement:["slot"],HTMLSourceElement:["source"],HTMLSpanElement:["span"],HTMLStyleElement:["style"],HTMLTableCaptionElement:["caption"],HTMLTableCellElement:["td","th"],HTMLTableColElement:["col","colgroup"],HTMLTableElement:["table"],HTMLTableRowElement:["tr"],HTMLTableSectionElement:["thead","tbody","tfoot"],HTMLTemplateElement:["template"],HTMLTextAreaElement:["textarea"],HTMLTimeElement:["time"],HTMLTitleElement:["title"],HTMLTrackElement:["track"],HTMLUListElement:["ul"],HTMLUnknownElement:["unknown","vhgroupv","vkeygen"],HTMLVideoElement:["video"]},nodes:{Attr:["node"],Audio:["audio"],CDATASection:["node"],CharacterData:["node"],Comment:["#comment"],Document:["#document"],DocumentFragment:["#document-fragment"],DocumentType:["node"],HTMLDocument:["#document"],Image:["img"],Option:["option"],ProcessingInstruction:["node"],ShadowRoot:["#shadow-root"],Text:["#text"],XMLDocument:["xml"]}}),I="registerElement",P="__"+I+(1e5*t.Math.random()>>0),F="addEventListener",D="attached",$="Callback",j="detached",L="extends",M="attributeChanged"+$,B=D+$,H="connected"+$,U="disconnected"+$,K="created"+$,q=j+$,J="ADDITION",V="MODIFICATION",z="REMOVAL",X="DOMAttrModified",W="DOMContentLoaded",Y="DOMSubtreeModified",G="<",Q="=",Z=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,tt=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],et=[],nt=[],rt="",it=O.documentElement,ot=et.indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},st=T.prototype,at=st.hasOwnProperty,ut=st.isPrototypeOf,ct=T.defineProperty,lt=[],ht=T.getOwnPropertyDescriptor,ft=T.getOwnPropertyNames,dt=T.getPrototypeOf,pt=T.setPrototypeOf,gt=!!T.__proto__,vt=!1,mt="__dreCEv1",yt=t.customElements,bt=!!(yt&&yt.define&&yt.get&&yt.whenDefined),_t=T.create||T,wt=t.Map||function(){var t,e=[],n=[];return{get:function(t){return n[ot.call(e,t)]},set:function(r,i){t=ot.call(e,r),t<0?n[e.push(r)-1]=i:n[t]=i}}},St=t.Promise||function(t){function e(t){for(r=!0;n.length;)n.shift()(t)}var n=[],r=!1,i={"catch":function(){return i},then:function(t){return n.push(t),r&&setTimeout(e,1),i}};return t(e),i},xt=!1,Et=_t(null),At=_t(null),Ct=new wt,Rt=String,Nt=T.create||function Zt(t){return t?(Zt.prototype=t,new Zt):this},Ot=pt||(gt?function(t,e){return t.__proto__=e,t}:ft&&ht?function(){function t(t,e){for(var n,r=ft(e),i=0,o=r.length;i<o;i++)n=r[i],at.call(t,n)||ct(t,n,ht(e,n))}return function(e,n){do t(e,n);while((n=dt(n))&&!ut.call(n,e));return e}}():function(t,e){for(var n in e)t[n]=e[n];return t}),Tt=t.MutationObserver||t.WebKitMutationObserver,kt=(t.HTMLElement||t.Element||t.Node).prototype,It=!ut.call(kt,it),Pt=It?function(t,e,n){return t[e]=n.value,t}:ct,Ft=It?function(t){return 1===t.nodeType}:function(t){return ut.call(kt,t)},Dt=It&&[],$t=kt.cloneNode,jt=kt.dispatchEvent,Lt=kt.getAttribute,Mt=kt.hasAttribute,Bt=kt.removeAttribute,Ht=kt.setAttribute,Ut=O.createElement,Kt=Ut,qt=Tt&&{attributes:!0,characterData:!0,attributeOldValue:!0},Jt=Tt||function(t){Xt=!1,it.removeEventListener(X,Jt)},Vt=0,zt=!1,Xt=!0,Wt=!0,Yt=!0;if(I in O||(pt||gt?(R=function(t,e){ut.call(e,t)||h(t,e)},N=h):(R=function(t,e){t[P]||(t[P]=T(!0),h(t,e))},N=R),It?(Xt=!1,function(){var t=ht(kt,F),e=t.value,n=function(t){var e=new CustomEvent(X,{bubbles:!0});e.attrName=t,e.prevValue=Lt.call(this,t),e.newValue=null,e[z]=e.attrChange=2,Bt.call(this,t),jt.call(this,e)},r=function(t,e){var n=Mt.call(this,t),r=n&&Lt.call(this,t),i=new CustomEvent(X,{bubbles:!0});Ht.call(this,t,e),i.attrName=t,i.prevValue=n?r:null,i.newValue=e,n?i[V]=i.attrChange=1:i[J]=i.attrChange=0,jt.call(this,i)},i=function(t){var e,n=t.currentTarget,r=n[P],i=t.propertyName;r.hasOwnProperty(i)&&(r=r[i],e=new CustomEvent(X,{bubbles:!0}),e.attrName=r.name,e.prevValue=r.value||null,e.newValue=r.value=n[i]||null,null==e.prevValue?e[J]=e.attrChange=0:e[V]=e.attrChange=1,jt.call(n,e))};t.value=function(t,o,s){t===X&&this[M]&&this.setAttribute!==r&&(this[P]={className:{name:"class",value:this.className}},this.setAttribute=r,this.removeAttribute=n,e.call(this,"propertychange",i)),e.call(this,t,o,s)},ct(kt,F,t)}()):Tt||(it[F](X,Jt),it.setAttribute(P,1),it.removeAttribute(P),Xt&&(x=function(t){var e,n,r,i=this;if(i===t.target){e=i[P],i[P]=n=A(i);for(r in n){if(!(r in e))return E(0,i,r,e[r],n[r],J);if(n[r]!==e[r])return E(1,i,r,e[r],n[r],V)}for(r in e)if(!(r in n))return E(2,i,r,e[r],n[r],z)}},E=function(t,e,n,r,i,o){var s={attrChange:t,currentTarget:e,attrName:n,prevValue:r,newValue:i};s[o]=t,a(s)},A=function(t){for(var e,n,r={},i=t.attributes,o=0,s=i.length;o<s;o++)e=i[o],
n=e.name,"setAttribute"!==n&&(r[n]=e.value);return r})),O[I]=function(t,e){if(s=t.toUpperCase(),zt||(zt=!0,Tt?(C=function(t,e){function n(t,e){for(var n=0,r=t.length;n<r;e(t[n++]));}return new Tt(function(r){for(var i,o,s,a=0,u=r.length;a<u;a++)i=r[a],"childList"===i.type?(n(i.addedNodes,t),n(i.removedNodes,e)):(o=i.target,Yt&&o[M]&&"style"!==i.attributeName&&(s=Lt.call(o,i.attributeName),s!==i.oldValue&&o[M](i.attributeName,i.oldValue,s)))})}(i(D),i(j)),C.observe(O,{childList:!0,subtree:!0})):(S=[],O[F]("DOMNodeInserted",u(D)),O[F]("DOMNodeRemoved",u(j))),O[F](W,c),O[F]("readystatechange",c),kt.cloneNode=function(t){var e=$t.call(this,!!t),n=o(e);return-1<n&&N(e,nt[n]),t&&r(e.querySelectorAll(rt)),e}),-2<ot.call(et,Q+s)+ot.call(et,G+s)&&d(t),!Z.test(s)||-1<ot.call(tt,s))throw new Error("The type "+t+" is invalid");var s,a,l=function(){return f?O.createElement(p,s):O.createElement(p)},h=e||st,f=at.call(h,L),p=f?e[L].toUpperCase():s;return f&&-1<ot.call(et,G+p)&&d(p),a=et.push((f?Q:G)+s)-1,rt=rt.concat(rt.length?",":"",f?p+'[is="'+t.toLowerCase()+'"]':p),l.prototype=nt[a]=at.call(h,"prototype")?h.prototype:Nt(kt),n(O.querySelectorAll(rt),D),l},O.createElement=Kt=function(t,e){var n=y(e),r=n?Ut.call(O,t,Rt(n)):Ut.call(O,t),i=""+t,o=ot.call(et,(n?Q:G)+(n||i).toUpperCase()),a=-1<o;return n&&(r.setAttribute("is",n=n.toLowerCase()),a&&(a=s(i.toUpperCase(),n))),Yt=!O.createElement.innerHTMLHelper,a&&N(r,nt[o]),r}),g.prototype={constructor:g,define:bt?function(t,e,n){if(n)v(t,e,n);else{var r=t.toUpperCase();Et[r]={constructor:e,create:[r]},Ct.set(e,r),yt.define(t,e)}}:v,get:bt?function(t){return yt.get(t)||m(t)}:m,whenDefined:bt?function(t){return St.race([yt.whenDefined(t),_(t)])}:_},yt)try{!function(e,n,r){if(n[L]="a",e.prototype=Nt(HTMLAnchorElement.prototype),e.prototype.constructor=e,t.customElements.define(r,e,n),Lt.call(O.createElement("a",{is:r}),"is")!==r||bt&&Lt.call(new e,"is")!==r)throw n}(function te(){return Reflect.construct(HTMLAnchorElement,[],te)},{},"document-register-element-a")}catch(Gt){w()}else w();try{Ut.call(O,"a","a")}catch(Qt){Rt=function(t){return{is:t}}}}(window),HTMLElement.prototype.attachShadow||Object.setPrototypeOf||(console.warn("ShadyDOM polyfill not applied for this platform: "+navigator.userAgent),console.warn("ShadowDOM not available for web components.")),!HTMLElement.prototype.attachShadow&&Object.setPrototypeOf&&!function(){"use strict";function t(t){return Boolean("ShadyRoot"===t.__localName)}function e(t,e){return P.call(t,e)}function n(t,e,n){var r=Object.getOwnPropertyDescriptor(e,t);r&&Object.defineProperty(n,t,r)}function r(t,e){if(t&&e)for(var r,i=Object.getOwnPropertyNames(e),o=0;o<i.length&&(r=i[o]);o++)n(r,e,t);return t||e}function i(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var i=0;i<e.length;i++)r(t,e[i]);return t}function o(t,e){for(var n in e)t[n]=e[n];return t}function s(t,e){var n=Object.getPrototypeOf(t);if(!n.hasOwnProperty("__patchProto")){var i=Object.create(n);i.__sourceProto=n,r(i,e),n.__patchProto=i}Object.setPrototypeOf(t,n.__patchProto)}function a(t,e,n){return{index:t,removed:e,addedCount:n}}function u(t,e){return J[e]||(J[e]=Object.getOwnPropertyDescriptor(HTMLElement.prototype,e)||Object.getOwnPropertyDescriptor(Element.prototype,e)||Object.getOwnPropertyDescriptor(Node.prototype,e)),J[e].get.call(t)}function c(t){G||(G=!0,k.then(l)),Z.push(t)}function l(){for(G=!1,tt++;Z.length;)Z.shift()();Q&&Q.flush&&Q.flush();var t=tt>et;if(Z.length&&!t&&l(),tt=0,t)throw new Error("Loop detected in ShadyDOM distribution, aborting.")}function h(t){switch(t){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case" ":return"&nbsp;"}}function f(t){return t.replace(nt,h)}function d(t){return t.replace(rt,h)}function p(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}function g(t,e,n){switch(t.nodeType){case Node.ELEMENT_NODE:for(var r,i=t.localName,o="<"+i,s=t.attributes,a=0;r=s[a];a++)o+=" "+r.name+'="'+f(r.value)+'"';return o+=">",it[i]?o:o+v(t,n)+"</"+i+">";case Node.TEXT_NODE:var u=t.data;return e&&ot[e.localName]?u:d(u);case Node.COMMENT_NODE:return"<!--"+t.data+"-->";default:throw window.console.error(t),new Error("not implemented")}}function v(t,e){"template"===t.localName&&(t=t.content);for(var n,r="",i=e?e(t):t.childNodes,o=0,s=i.length;o<s&&(n=i[o]);o++)r+=g(n,t,e);return r}function m(t,e){var n=yt(e);return t.filter(function(t){var e=n===yt(t.target);if(e&&t.addedNodes){var r=Array.from(t.addedNodes).filter(function(t){return n===yt(t)});Object.defineProperty(t,"addedNodes",{value:r,configurable:!0})}return e&&(!t.addedNodes||t.addedNodes.length)})}function y(t){T.inUse&&!_(t)&&Et.canPatchNode(t)&&(q.saveChildNodes(t),Et.patch(t))}function b(t){Et.unpatch(t)}function _(t){return Boolean(t.__patched)}function w(t,e){for(var n=[],r=t,i=t===window?window:t.getRootNode();r;)n.push(r),r=r.assignedSlot?r.assignedSlot:r.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&r.host&&(e||r!==i)?r.host:r.parentNode;return n[n.length-1]===document&&n.push(window),n}function S(e,n){if(!t)return e;for(var r,i,o,s,a=w(e,!0),u=n,c=0;c<u.length;c++)if(r=u[c],o=r===window?window:r.getRootNode(),o!==i&&(s=a.indexOf(o),i=o),!t(o)||s>-1)return r}function x(t){var e=function(e,n){var r=new t(e,n);return r.__composed=n&&Boolean(n.composed),r};return o(e,t),e.prototype=t.prototype,e}function E(t,e,n){var r=e.__handlers&&e.__handlers[t.type]&&e.__handlers[t.type][n];if(r)for(var i,o=0;i=r[o];o++)if(i.call(e,t),t.__immediatePropagationStopped)return}function A(t){var e,n=t.composedPath();Object.defineProperty(t,"currentTarget",{get:function(){return e},configurable:!0});for(var r=n.length-1;r>=0;r--)if(e=n[r],E(t,e,"capture"),t.__propagationStopped)return;Object.defineProperty(t,"eventPhase",{value:Event.BUBBLING_PHASE});for(var i=0;i<n.length;i++)if(e=n[i],E(t,e,"bubble"),t.__propagationStopped)return}function C(t){return Boolean("object"==typeof t?t.capture:t)}function R(t,e,n){if(e){this.__eventListenerCount||(this.__eventListenerCount=0),this.__eventListenerCount++;var r=function(t){if(t.__target||(t.__target=t.target,t.__relatedTarget=t.relatedTarget,s(t,Nt)),t.composed||t.composedPath().indexOf(this)>-1)return t.eventPhase===Event.BUBBLING_PHASE&&t.target===t.relatedTarget?void t.stopImmediatePropagation():e(t)};e.__eventWrapper=r,Ot[t]?(this.__handlers=this.__handlers||{},this.__handlers[t]=this.__handlers[t]||{capture:[],bubble:[]},C(n)?this.__handlers[t].capture.push(r):this.__handlers[t].bubble.push(r)):At.call(this,t,r,n)}}function N(t,e,n){if(e){var r=e.__eventWrapper;if(Ct.call(this,t,r||e,n),r&&(e.__eventWrapper=null,this.__eventListenerCount--,Ot[t]&&this.__handlers&&this.__handlers[t])){var i;C(n)?(i=this.__handlers[t].capture.indexOf(r),i>-1&&this.__handlers[t].capture.splice(i,1)):(i=this.__handlers[t].bubble.indexOf(r),i>-1&&this.__handlers[t].bubble.splice(i,1))}}}function O(){for(var t in Ot)window.addEventListener(t,function(t){t.__target||(t.__target=t.target,t.__relatedTarget=t.relatedTarget,s(t,Nt),A(t),t.stopImmediatePropagation())},!0)}var T=window.ShadyDOM||{};T.hasNativeShadowDOM=Boolean(Element.prototype.attachShadow&&Node.prototype.getRootNode),T.inUse=T.force||!T.hasNativeShadowDOM;var k,I=Element.prototype,P=I.matches||I.matchesSelector||I.mozMatchesSelector||I.msMatchesSelector||I.oMatchesSelector||I.webkitMatchesSelector,F={};k=window.Promise?Promise.resolve():{then:function(t){var e=document.createTextNode(""),n=new MutationObserver(function(){n.disconnect(),t()});n.observe(e,{characterData:!0})}};var D=0,$=1,j=2,L=3,M={calcEditDistances:function(t,e,n,r,i,o){for(var s=this,a=o-i+1,u=n-e+1,c=new Array(a),l=0;l<a;l++)c[l]=new Array(u),c[l][0]=l;for(var h=0;h<u;h++)c[0][h]=h;for(var f=1;f<a;f++)for(var d=1;d<u;d++)if(s.equals(t[e+d-1],r[i+f-1]))c[f][d]=c[f-1][d-1];else{var p=c[f-1][d]+1,g=c[f][d-1]+1;c[f][d]=p<g?p:g}return c},spliceOperationsFromEditDistances:function(t){for(var e=t.length-1,n=t[0].length-1,r=t[e][n],i=[];e>0||n>0;)if(0!=e)if(0!=n){var o,s=t[e-1][n-1],a=t[e-1][n],u=t[e][n-1];o=a<u?a<s?a:s:u<s?u:s,o==s?(s==r?i.push(D):(i.push($),r=s),e--,n--):o==a?(i.push(L),e--,r=a):(i.push(j),n--,r=u)}else i.push(L),e--;else i.push(j),n--;return i.reverse(),i},calcSplices:function(t,e,n,r,i,o){var s,u=0,c=0,l=Math.min(n-e,o-i);if(0==e&&0==i&&(u=this.sharedPrefix(t,r,l)),n==t.length&&o==r.length&&(c=this.sharedSuffix(t,r,l-u)),e+=u,i+=u,n-=c,o-=c,n-e==0&&o-i==0)return[];if(e==n){for(s=a(e,[],0);i<o;)s.removed.push(r[i++]);return[s]}if(i==o)return[a(e,[],n-e)];var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(t,e,n,r,i,o));s=void 0;for(var f=[],d=e,p=i,g=0;g<h.length;g++)switch(h[g]){case D:s&&(f.push(s),s=void 0),d++,p++;break;case $:s||(s=a(d,[],0)),s.addedCount++,d++,s.removed.push(r[p]),p++;break;case j:s||(s=a(d,[],0)),s.addedCount++,d++;break;case L:s||(s=a(d,[],0)),s.removed.push(r[p]),p++}return s&&f.push(s),f},sharedPrefix:function(t,e,n){for(var r=this,i=0;i<n;i++)if(!r.equals(t[i],e[i]))return i;return n},sharedSuffix:function(t,e,n){for(var r=t.length,i=e.length,o=0;o<n&&this.equals(t[--r],e[--i]);)o++;return o},calculateSplices:function(t,e){return this.calcSplices(t,0,t.length,e,0,e.length)},equals:function(t,e){return t===e}},B=function(t,e){return M.calculateSplices(t,e)},H=Element.prototype.insertBefore,U=Element.prototype.appendChild,K=Element.prototype.removeChild,q={arrayCopyChildNodes:function(t){for(var e=[],n=0,r=t.firstChild;r;r=r.nextSibling)e[n++]=r;return e},arrayCopyChildren:function(t){for(var e=[],n=0,r=t.firstElementChild;r;r=r.nextElementSibling)e[n++]=r;return e},arrayCopy:function(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n},saveChildNodes:function(t){q.Logical.saveChildNodes(t),q.Composed.hasParentNode(t)||q.Composed.saveComposedData(t),q.Composed.saveChildNodes(t)}};q.Logical={hasParentNode:function(t){return Boolean(t.__dom&&t.__dom.parentNode)},hasChildNodes:function(t){return Boolean(t.__dom&&void 0!==t.__dom.childNodes)},getChildNodes:function(t){return this.hasChildNodes(t)?this._getChildNodes(t):q.Composed.getChildNodes(t)},_getChildNodes:function(t){if(!t.__dom.childNodes){t.__dom.childNodes=[];for(var e=this.getFirstChild(t);e;e=this.getNextSibling(e))t.__dom.childNodes.push(e)}return t.__dom.childNodes},getParentNode:function(t){return t.__dom&&void 0!==t.__dom.parentNode?t.__dom.parentNode:q.Composed.getParentNode(t)},getFirstChild:function(t){return t.__dom&&void 0!==t.__dom.firstChild?t.__dom.firstChild:q.Composed.getFirstChild(t)},getLastChild:function(t){return t.__dom&&void 0!==t.__dom.lastChild?t.__dom.lastChild:q.Composed.getLastChild(t)},getNextSibling:function(t){return t.__dom&&void 0!==t.__dom.nextSibling?t.__dom.nextSibling:q.Composed.getNextSibling(t)},getPreviousSibling:function(t){return t.__dom&&void 0!==t.__dom.previousSibling?t.__dom.previousSibling:q.Composed.getPreviousSibling(t)},getFirstElementChild:function(t){return t.__dom&&void 0!==t.__dom.firstChild?this._getFirstElementChild(t):q.Composed.getFirstElementChild(t)},_getFirstElementChild:function(t){for(var e=t.__dom.firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.nextSibling;return e},getLastElementChild:function(t){return t.__dom&&void 0!==t.__dom.lastChild?this._getLastElementChild(t):q.Composed.getLastElementChild(t)},_getLastElementChild:function(t){for(var e=t.__dom.lastChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.previousSibling;return e},getNextElementSibling:function(t){return t.__dom&&void 0!==t.__dom.nextSibling?this._getNextElementSibling(t):q.Composed.getNextElementSibling(t)},_getNextElementSibling:function(t){for(var e=this,n=t.__dom.nextSibling;n&&n.nodeType!==Node.ELEMENT_NODE;)n=e.getNextSibling(n);return n},getPreviousElementSibling:function(t){return t.__dom&&void 0!==t.__dom.previousSibling?this._getPreviousElementSibling(t):q.Composed.getPreviousElementSibling(t)},_getPreviousElementSibling:function(t){for(var e=this,n=t.__dom.previousSibling;n&&n.nodeType!==Node.ELEMENT_NODE;)n=e.getPreviousSibling(n);return n},saveChildNodes:function(t){if(!this.hasChildNodes(t)){t.__dom=t.__dom||{},t.__dom.firstChild=t.firstChild,t.__dom.lastChild=t.lastChild;for(var e,n=t.__dom.childNodes=q.arrayCopyChildNodes(t),r=0;r<n.length&&(e=n[r]);r++)e.__dom=e.__dom||{},e.__dom.parentNode=t,e.__dom.nextSibling=n[r+1]||null,e.__dom.previousSibling=n[r-1]||null,F.patchNode(e)}},recordInsertBefore:function(t,e,n){var r=this;if(e.__dom.childNodes=null,t.nodeType===Node.DOCUMENT_FRAGMENT_NODE){for(var i=q.arrayCopyChildNodes(t),o=0;o<i.length;o++)r._linkNode(i[o],e,n);t.__dom=t.__dom||{},t.__dom.firstChild=t.__dom.lastChild=null,t.__dom.childNodes=null}else this._linkNode(t,e,n)},_linkNode:function(t,e,n){F.patchNode(t),n=n||null,t.__dom=t.__dom||{},e.__dom=e.__dom||{},n&&(n.__dom=n.__dom||{}),t.__dom.previousSibling=n?n.__dom.previousSibling:e.__dom.lastChild,t.__dom.previousSibling&&(t.__dom.previousSibling.__dom.nextSibling=t),t.__dom.nextSibling=n,t.__dom.nextSibling&&(t.__dom.nextSibling.__dom.previousSibling=t),t.__dom.parentNode=e,n?n===e.__dom.firstChild&&(e.__dom.firstChild=t):(e.__dom.lastChild=t,e.__dom.firstChild||(e.__dom.firstChild=t)),e.__dom.childNodes=null},recordRemoveChild:function(t,e){t.__dom=t.__dom||{},e.__dom=e.__dom||{},t===e.__dom.firstChild&&(e.__dom.firstChild=t.__dom.nextSibling),t===e.__dom.lastChild&&(e.__dom.lastChild=t.__dom.previousSibling);var n=t.__dom.previousSibling,r=t.__dom.nextSibling;n&&(n.__dom=n.__dom||{},n.__dom.nextSibling=r),r&&(r.__dom=r.__dom||{},r.__dom.previousSibling=n),t.__dom.parentNode=t.__dom.previousSibling=t.__dom.nextSibling=null,e.__dom.childNodes=null}},q.Composed={hasParentNode:function(t){return Boolean(t.__dom&&void 0!==t.__dom.$parentNode)},hasChildNodes:function(t){return Boolean(t.__dom&&void 0!==t.__dom.$childNodes)},getChildNodes:function(t){return this.hasChildNodes(t)?this._getChildNodes(t):!t.__patched&&q.arrayCopy(t.childNodes)},_getChildNodes:function(t){if(!t.__dom.$childNodes){t.__dom.$childNodes=[];for(var e=t.__dom.$firstChild;e;e=e.__dom.$nextSibling)t.__dom.$childNodes.push(e)}return t.__dom.$childNodes},getComposedChildNodes:function(t){return t.__dom.$childNodes},getParentNode:function(t){return this.hasParentNode(t)?t.__dom.$parentNode:!t.__patched&&t.parentNode},getFirstChild:function(t){return t.__patched?t.__dom.$firstChild:t.firstChild},getLastChild:function(t){return t.__patched?t.__dom.$lastChild:t.lastChild},getNextSibling:function(t){return t.__patched?t.__dom.$nextSibling:t.nextSibling},getPreviousSibling:function(t){return t.__patched?t.__dom.$previousSibling:t.previousSibling},getFirstElementChild:function(t){return t.__patched?this._getFirstElementChild(t):t.firstElementChild},_getFirstElementChild:function(t){for(var e=t.__dom.$firstChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.$nextSibling;return e},getLastElementChild:function(t){return t.__patched?this._getLastElementChild(t):t.lastElementChild},_getLastElementChild:function(t){for(var e=t.__dom.$lastChild;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.__dom.$previousSibling;return e},getNextElementSibling:function(t){return t.__patched?this._getNextElementSibling(t):t.nextElementSibling},_getNextElementSibling:function(t){for(var e=this,n=t.__dom.$nextSibling;n&&n.nodeType!==Node.ELEMENT_NODE;)n=e.getNextSibling(n);return n},getPreviousElementSibling:function(t){return t.__patched?this._getPreviousElementSibling(t):t.previousElementSibling},_getPreviousElementSibling:function(t){for(var e=this,n=t.__dom.$previousSibling;n&&n.nodeType!==Node.ELEMENT_NODE;)n=e.getPreviousSibling(n);return n},saveChildNodes:function(t){var e=this;if(!this.hasChildNodes(t)){t.__dom=t.__dom||{},t.__dom.$firstChild=t.firstChild,t.__dom.$lastChild=t.lastChild;for(var n,r=t.__dom.$childNodes=q.arrayCopyChildNodes(t),i=0;i<r.length&&(n=r[i]);i++)e.saveComposedData(n)}},saveComposedData:function(t){t.__dom=t.__dom||{},void 0===t.__dom.$parentNode&&(t.__dom.$parentNode=t.parentNode),void 0===t.__dom.$nextSibling&&(t.__dom.$nextSibling=t.nextSibling),void 0===t.__dom.$previousSibling&&(t.__dom.$previousSibling=t.previousSibling)},recordInsertBefore:function(t,e,n){var r=this;if(e.__dom.$childNodes=null,t.nodeType===Node.DOCUMENT_FRAGMENT_NODE)for(var i=this.getFirstChild(t);i;i=this.getNextSibling(i))r._linkNode(i,e,n);else this._linkNode(t,e,n)},_linkNode:function(t,e,n){t.__dom=t.__dom||{},e.__dom=e.__dom||{},n&&(n.__dom=n.__dom||{}),t.__dom.$previousSibling=n?n.__dom.$previousSibling:e.__dom.$lastChild,t.__dom.$previousSibling&&(t.__dom.$previousSibling.__dom.$nextSibling=t),t.__dom.$nextSibling=n,t.__dom.$nextSibling&&(t.__dom.$nextSibling.__dom.$previousSibling=t),t.__dom.$parentNode=e,n?n===e.__dom.$firstChild&&(e.__dom.$firstChild=t):(e.__dom.$lastChild=t,e.__dom.$firstChild||(e.__dom.$firstChild=t)),e.__dom.$childNodes=null},recordRemoveChild:function(t,e){t.__dom=t.__dom||{},e.__dom=e.__dom||{},t===e.__dom.$firstChild&&(e.__dom.$firstChild=t.__dom.$nextSibling),t===e.__dom.$lastChild&&(e.__dom.$lastChild=t.__dom.$previousSibling);var n=t.__dom.$previousSibling,r=t.__dom.$nextSibling;n&&(n.__dom=n.__dom||{},n.__dom.$nextSibling=r),r&&(r.__dom=r.__dom||{},r.__dom.$previousSibling=n),t.__dom.$parentNode=t.__dom.$previousSibling=t.__dom.$nextSibling=null,e.__dom.$childNodes=null},clearChildNodes:function(t){for(var e,n=this,r=this.getChildNodes(t),i=0;i<r.length;i++)e=r[i],n.recordRemoveChild(e,t),K.call(t,e)},saveParentNode:function(t){t.__dom=t.__dom||{},t.__dom.$parentNode=t.parentNode},insertBefore:function(t,e,n){return this.saveChildNodes(t),this._addChild(t,e,n),H.call(t,e,n||null)},appendChild:function(t,e){return this.saveChildNodes(t),this._addChild(t,e),U.call(t,e)},removeChild:function(t,e){var n=this.getParentNode(e);if(this.saveChildNodes(t),this._removeChild(t,e),n===t)return K.call(t,e)},_addChild:function(t,e,n){var r=this,i=e.nodeType===Node.DOCUMENT_FRAGMENT_NODE,o=this.getParentNode(e);if(o&&this._removeChild(o,e),i)for(var s=this.getChildNodes(e),a=0;a<s.length;a++){var u=s[a];r._removeChild(e,u),r.recordInsertBefore(u,t,n)}else this.recordInsertBefore(e,t,n)},_removeChild:function(t,e){this.recordRemoveChild(e,t)}};var J={},V="function"==typeof Event?Event:function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n},z=function(){function t(t){this.root=t,this.insertionPointTag="slot"}return t.prototype.getInsertionPoints=function(){return this.root.querySelectorAll(this.insertionPointTag)},t.prototype.hasInsertionPoint=function(){return Boolean(this.root._insertionPoints&&this.root._insertionPoints.length)},t.prototype.isInsertionPoint=function(t){return t.localName&&t.localName==this.insertionPointTag},t.prototype.distribute=function(){return this.hasInsertionPoint()?this.distributePool(this.root,this.collectPool()):[]},t.prototype.collectPool=function(){return q.arrayCopy(q.Logical.getChildNodes(this.root.host))},t.prototype.distributePool=function(t,e){for(var n,r=this,i=[],o=this.root._insertionPoints,s=0,a=o.length;s<a&&(n=o[s]);s++){r.distributeInsertionPoint(n,e);var u=q.Logical.getParentNode(n);u&&u.shadyRoot&&r.hasInsertionPoint(u.shadyRoot)&&i.push(u.shadyRoot)}for(var c=0;c<e.length;c++){var l=e[c];if(l){l._assignedSlot=void 0;var h=q.Composed.getParentNode(l);h&&q.Composed.removeChild(h,l)}}return i},t.prototype.distributeInsertionPoint=function(t,e){var n=this,r=t._assignedNodes;r&&this.clearAssignedSlots(t,!0),t._assignedNodes=[];for(var i,o=!1,s=!1,a=0,u=e.length;a<u;a++)i=e[a],i&&n.matchesInsertionPoint(i,t)&&(i.__prevAssignedSlot!=t&&(o=!0),n.distributeNodeInto(i,t),e[a]=void 0,s=!0);if(!s)for(var c,l=q.Logical.getChildNodes(t),h=0;h<l.length;h++)c=l[h],c.__prevAssignedSlot!=t&&(o=!0),n.distributeNodeInto(c,t);if(r){for(var f=0;f<r.length;f++)r[f].__prevAssignedSlot=null;t._assignedNodes.length<r.length&&(o=!0)}this.setDistributedNodesOnInsertionPoint(t),o&&this._fireSlotChange(t)},t.prototype.clearAssignedSlots=function(t,e){var n=t._assignedNodes;if(n)for(var r=0;r<n.length;r++){var i=n[r];e&&(i.__prevAssignedSlot=i._assignedSlot),i._assignedSlot===t&&(i._assignedSlot=null)}},t.prototype.matchesInsertionPoint=function(t,e){var n=e.getAttribute("name");n=n?n.trim():"";var r=t.getAttribute&&t.getAttribute("slot");return r=r?r.trim():"",r==n},t.prototype.distributeNodeInto=function(t,e){e._assignedNodes.push(t),t._assignedSlot=e},t.prototype.setDistributedNodesOnInsertionPoint=function(t){var e=this,n=t._assignedNodes;t._distributedNodes=[];for(var r,i=0;i<n.length&&(r=n[i]);i++)if(e.isInsertionPoint(r)){var o=r._distributedNodes;if(o)for(var s=0;s<o.length;s++)t._distributedNodes.push(o[s])}else t._distributedNodes.push(n[i])},t.prototype._fireSlotChange=function(t){t.dispatchEvent(new V("slotchange")),t._assignedSlot&&this._fireSlotChange(t._assignedSlot)},t.prototype.isFinalDestination=function(t){return!t._assignedSlot},t}(),X=function(t){if(!t)throw"Must provide a host";var e=document.createDocumentFragment();return e.__proto__=Y,e._init(t),e},W={_init:function(t){this.__localName="ShadyRoot",t.shadyRoot=this,this.host=t,q.Logical.saveChildNodes(t),q.Logical.saveChildNodes(this),this._clean=!0,this._hasRendered=!1,this._distributor=new z(this),this.update()},update:function(){var t=this._findDistributionRoot(this.host);t._clean&&(t._clean=!1,c(function(){t.render()}))},_findDistributionRoot:function(t){for(var e=t.shadyRoot;t&&this._elementNeedsDistribution(t);)e=t.getRootNode(),t=e&&e.host;return e},_elementNeedsDistribution:function(t){for(var e,n=this,r=q.Logical.getChildNodes(t),i=0;i<r.length;i++)if(e=r[i],n._distributor.isInsertionPoint(e))return t.getRootNode()},render:function(){this._clean||(this._clean=!0,this._skipUpdateInsertionPoints?this._hasRendered||(this._insertionPoints=[]):this.updateInsertionPoints(),this._skipUpdateInsertionPoints=!1,this.distribute(),this.compose(),this._hasRendered=!0)},forceRender:function(){this._clean=!1,this.render()},distribute:function(){for(var t=this._distributor.distribute(),e=0;e<t.length;e++)t[e].forceRender()},updateInsertionPoints:function(){var t=this,e=this.__insertionPoints;if(e)for(var n,r=0;r<e.length;r++)n=e[r],n.getRootNode()!==t&&t._distributor.clearAssignedSlots(n);e=this._insertionPoints=this._distributor.getInsertionPoints();for(var i,o=0;o<e.length;o++)i=e[o],q.Logical.saveChildNodes(i),q.Logical.saveChildNodes(q.Logical.getParentNode(i))},get _insertionPoints(){return this.__insertionPoints||this.updateInsertionPoints(),this.__insertionPoints||(this.__insertionPoints=[])},set _insertionPoints(t){this.__insertionPoints=t},hasInsertionPoint:function(){return this._distributor.hasInsertionPoint()},compose:function(){this._composeTree()},_composeTree:function(){var t=this;this._updateChildNodes(this.host,this._composeNode(this.host));for(var e,n,r=this._insertionPoints||[],i=0,o=r.length;i<o&&(e=r[i]);i++)n=q.Logical.getParentNode(e),n!==t.host&&n!==t&&t._updateChildNodes(n,t._composeNode(n))},_composeNode:function(t){for(var e=this,n=[],r=q.Logical.getChildNodes(t.shadyRoot||t),i=0;i<r.length;i++){var o=r[i];if(e._distributor.isInsertionPoint(o))for(var s=o._distributedNodes||(o._distributedNodes=[]),a=0;a<s.length;a++){var u=s[a];e.isFinalDestination(o,u)&&n.push(u)}else n.push(o)}return n},isFinalDestination:function(t,e){return this._distributor.isFinalDestination(t,e)},_updateChildNodes:function(t,e){for(var n,r=q.Composed.getChildNodes(t),i=B(e,r),o=0,s=0;o<i.length&&(n=i[o]);o++){for(var a,u=0;u<n.removed.length&&(a=n.removed[u]);u++)q.Composed.getParentNode(a)===t&&q.Composed.removeChild(t,a),r.splice(n.index+s,1);s-=n.addedCount}for(var c,l,h=0;h<i.length&&(c=i[h]);h++){l=r[c.index];for(var f,d=c.index;d<c.index+c.addedCount;d++)f=e[d],q.Composed.insertBefore(t,f,l),r.splice(d,0,f)}},getInsertionPointTag:function(){return this._distributor.insertionPointTag}},Y=Object.create(DocumentFragment.prototype);r(Y,W);var G,Q=window.customElements,Z=[],tt=0,et=100;l.list=Z;var nt=/[&\u00A0"]/g,rt=/[&\u00A0<>]/g,it=p(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),ot=p(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),st={addNode:function(t,e,n){var r=this.ownerShadyRootForNode(t);if(r){e.__noInsertionPoint&&(r._skipUpdateInsertionPoints=!0);var i=this._maybeAddInsertionPoint(e,t,r);i&&(r._skipUpdateInsertionPoints=!1),this._addedNode(e,r)}q.Logical.hasChildNodes(t)&&q.Logical.recordInsertBefore(e,t,n);var o=this._maybeDistribute(e,t,r)||t.shadyRoot;return o},removeNode:function(t){var e,n=q.Logical.hasParentNode(t)&&q.Logical.getParentNode(t),r=this.ownerShadyRootForNode(t);return n&&(e=this.maybeDistributeParent(t),q.Logical.recordRemoveChild(t,n),r&&(this._removeDistributedChildren(r,t)||n.localName===r.getInsertionPointTag())&&(r._skipUpdateInsertionPoints=!1,r.update())),this._removeOwnerShadyRoot(t),r&&this._removedNode(t,r),e},_scheduleObserver:function(t,e,n){var r=t.__dom&&t.__dom.observer;r&&(e&&r.addedNodes.push(e),n&&r.removedNodes.push(n),r.schedule())},removeNodeFromParent:function(t,e){e?(this._scheduleObserver(e,null,t),this.removeNode(t)):this._removeOwnerShadyRoot(t)},_hasCachedOwnerRoot:function(t){return Boolean(void 0!==t.__ownerShadyRoot)},getRootNode:function(e){if(e&&e.nodeType){var n=e.__ownerShadyRoot;if(void 0===n){if(t(e))n=e;else{var r=q.Logical.getParentNode(e);n=r?this.getRootNode(r):e}document.documentElement.contains(e)&&(e.__ownerShadyRoot=n)}return n}},ownerShadyRootForNode:function(e){var n=this.getRootNode(e);if(t(n))return n},_maybeDistribute:function(t,e,n){var r=n&&n.getInsertionPointTag()||"",i=t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&!t.__noInsertionPoint&&r&&t.querySelector(r),o=i&&q.Logical.getParentNode(i).nodeType!==Node.DOCUMENT_FRAGMENT_NODE,s=i||t.localName===r;(s||e.localName===r)&&n&&n.update();var a=this._nodeNeedsDistribution(e);return a&&e.shadyRoot.update(),a||s&&!o},_maybeAddInsertionPoint:function(t,e,n){var r,i=this,o=n.getInsertionPointTag();if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||t.__noInsertionPoint)t.localName===o&&(q.Logical.saveChildNodes(e),q.Logical.saveChildNodes(t),r=!0);else for(var s,a,u,c=t.querySelectorAll(o),l=0;l<c.length&&(s=c[l]);l++)a=q.Logical.getParentNode(s),a===t&&(a=e),u=i._maybeAddInsertionPoint(s,a,n),r=r||u;return r},_nodeNeedsDistribution:function(t){return t&&t.shadyRoot&&t.shadyRoot.hasInsertionPoint()},_addedNode:function(){},_removedNode:function(){},_removeDistributedChildren:function(t,e){for(var n,r=this,i=t._insertionPoints,o=0;o<i.length;o++){var s=i[o];if(r._contains(e,s))for(var a=s.assignedNodes({flatten:!0}),u=0;u<a.length;u++){n=!0;var c=a[u],l=q.Composed.getParentNode(c);l&&q.Composed.removeChild(l,c)}}return n},_contains:function(t,e){for(;e;){if(e==t)return!0;e=q.Logical.getParentNode(e)}},_removeOwnerShadyRoot:function(t){var e=this;if(this._hasCachedOwnerRoot(t))for(var n,r=q.Logical.getChildNodes(t),i=0,o=r.length;i<o&&(n=r[i]);i++)e._removeOwnerShadyRoot(n);t.__ownerShadyRoot=void 0},firstComposedNode:function(t){for(var e,n=t.assignedNodes({flatten:!0}),r=this.getRootNode(t),i=0,o=n.length;i<o&&(e=n[i]);i++)if(r.isFinalDestination(t,e))return e},clearNode:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},maybeDistributeParent:function(t){var e=q.Logical.getParentNode(t);if(this._nodeNeedsDistribution(e))return e.shadyRoot.update(),!0},maybeDistributeAttributeChange:function(t,e){var n="slot"===t.localName&&"name"===e;if(n){var r=this.getRootNode(t);r.update&&r.update()}},query:function(t,e,n){var r=[];return this._queryElements(q.Logical.getChildNodes(t),e,n,r),r},_queryElements:function(t,e,n,r){for(var i,o=this,s=0,a=t.length;s<a&&(i=t[s]);s++)if(i.nodeType===Node.ELEMENT_NODE&&o._queryElement(i,e,n,r))return!0},_queryElement:function(t,e,n,r){var i=e(t);return i&&r.push(t),n&&n(i)?i:void this._queryElements(q.Logical.getChildNodes(t),e,n,r)},activeElementForNode:function(e){var n=this,r=document.activeElement;if(!r)return null;var i=!!t(e);if(e!==document){if(!i)return null;if(e.host===r||!e.host.contains(r))return null}for(var o=this.ownerShadyRootForNode(r);o&&o!==e;)r=o.host,o=n.ownerShadyRootForNode(r);return e===document?o?null:r:o===e?r:null}},at=Element.prototype.cloneNode,ut=Document.prototype.importNode,ct=Element.prototype.setAttribute,lt=Element.prototype.removeAttribute,ht={};Object.defineProperties(ht,{parentElement:{get:function(){return q.Logical.getParentNode(this)},configurable:!0},parentNode:{get:function(){return q.Logical.getParentNode(this)},configurable:!0},nextSibling:{get:function(){return q.Logical.getNextSibling(this)},configurable:!0},previousSibling:{get:function(){return q.Logical.getPreviousSibling(this)},configurable:!0},nextElementSibling:{get:function(){return q.Logical.getNextElementSibling(this)},configurable:!0},previousElementSibling:{get:function(){return q.Logical.getPreviousElementSibling(this)},configurable:!0},assignedSlot:{get:function(){return this._assignedSlot},configurable:!0}});var ft={appendChild:function(t){return this.insertBefore(t)},insertBefore:function(e,n){if(n&&q.Logical.getParentNode(n)!==this)throw Error("The ref_node to be inserted before is not a child of this node");if(e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var r=q.Logical.getParentNode(e);st.removeNodeFromParent(e,r)}if(!st.addNode(this,e,n)){if(n){var i=st.ownerShadyRootForNode(n);i&&(n=n.localName===i.getInsertionPointTag()?st.firstComposedNode(n):n)}var o=t(this)?this.host:this;n?q.Composed.insertBefore(o,e,n):q.Composed.appendChild(o,e)}return st._scheduleObserver(this,e),e},removeChild:function(e){if(q.Logical.getParentNode(e)!==this)throw Error("The node to be removed is not a child of this node: "+e);if(!st.removeNode(e)){var n=t(this)?this.host:this,r=q.Composed.getParentNode(e);n===r&&q.Composed.removeChild(n,e)}return st._scheduleObserver(this,null,e),e},replaceChild:function(t,e){return this.insertBefore(t,e),this.removeChild(e),t},querySelector:function(t){var n=st.query(this,function(n){return e(n,t)},function(t){return Boolean(t)})[0];return n||null},querySelectorAll:function(t){return st.query(this,function(n){return e(n,t)})},cloneNode:function(t){if("template"==this.localName)return at.call(this,t);var e=at.call(this,!1);if(t)for(var n,r=this.childNodes,i=0;i<r.length;i++)n=r[i].cloneNode(!0),e.appendChild(n);return e},importNode:function(t,e){var n=this instanceof Document?this:this.ownerDocument,r=ut.call(n,t,!1);if(e){var i=q.Logical.getChildNodes(t);F.patchNode(r);for(var o,s=0;s<i.length;s++)o=n.importNode(i[s],!0),r.appendChild(o)}return r}};Object.defineProperties(ft,{childNodes:{get:function(){var t=q.Logical.getChildNodes(this);return Array.isArray(t)?t:q.arrayCopyChildNodes(this)},configurable:!0},children:{get:function(){return q.Logical.hasChildNodes(this)?Array.prototype.filter.call(this.childNodes,function(t){return t.nodeType===Node.ELEMENT_NODE}):q.arrayCopyChildren(this)},configurable:!0},firstChild:{get:function(){return q.Logical.getFirstChild(this)},configurable:!0},lastChild:{get:function(){return q.Logical.getLastChild(this)},configurable:!0},firstElementChild:{get:function(){return q.Logical.getFirstElementChild(this)},configurable:!0},lastElementChild:{get:function(){return q.Logical.getLastElementChild(this)},configurable:!0},textContent:{get:function(){if(this.childNodes){for(var t,e=[],n=0,r=this.childNodes;t=r[n];n++)t.nodeType!==Node.COMMENT_NODE&&e.push(t.textContent);return e.join("")}return""},set:function(t){st.clearNode(this),t&&this.appendChild(document.createTextNode(t))},configurable:!0},innerHTML:{get:function(){return v(this)},set:function(t){var e=this;st.clearNode(this);var n=document.createElement("div");n.innerHTML=t;for(var r=q.arrayCopyChildNodes(n),i=0;i<r.length;i++)e.appendChild(r[i])},configurable:!0}});var dt={assignedNodes:function(t){return(t&&t.flatten?this._distributedNodes:this._assignedNodes)||[]},setAttribute:function(t,e){
ct.call(this,t,e),st.maybeDistributeParent(this)||st.maybeDistributeAttributeChange(this,t)},removeAttribute:function(t){lt.call(this,t),st.maybeDistributeParent(this)||st.maybeDistributeAttributeChange(this,t)}};Object.defineProperties(dt,{shadowRoot:{get:function(){return this.shadyRoot}},slot:{get:function(){return this.getAttribute("slot")},set:function(t){this.setAttribute("slot",t)}}});var pt={get:function(){return st.activeElementForNode(this)}},gt={};Object.defineProperties(gt,{activeElement:pt});var vt={};Object.defineProperties(vt,{_activeElement:pt});var mt={Node:i({__patched:"Node"},ht),Fragment:i({__patched:"Fragment"},ht,ft,gt),Element:i({__patched:"Element"},ht,ft,dt,gt),Document:i({__patched:"Document"},ht,ft,dt,vt)},yt=function(t){return st.getRootNode(t)},bt=function(){this._scheduled=!1,this.addedNodes=[],this.removedNodes=[],this.callbacks=new Set};bt.prototype.schedule=function(){var t=this;this._scheduled||(this._scheduled=!0,k.then(function(){t.flush()}))},bt.prototype.flush=function(){if(this._scheduled){this._scheduled=!1;var t=this.takeRecords();t.length&&this.callbacks.forEach(function(e){e(t)})}},bt.prototype.takeRecords=function(){if(this.addedNodes.length||this.removedNodes.length){var t=[{addedNodes:this.addedNodes,removedNodes:this.removedNodes}];return this.addedNodes=[],this.removedNodes=[],t}return[]};var _t=function(t,e){F.patchNode(t),t.__dom.observer||(t.__dom.observer=new bt),t.__dom.observer.callbacks.add(e);var n=t.__dom.observer;return{_callback:e,_observer:n,_node:t,takeRecords:function(){return n.takeRecords()}}},wt=function(t){var e=t&&t._observer;e&&(e.callbacks["delete"](t._callback),e.callbacks.size||(t._node.__dom.observer=null))},St=0,xt=!1,Et={canPatchNode:function(t){switch(t){case document.head:case document.documentElement:return!1;default:return!0}},hasPrototypeDescriptors:Boolean(Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent")),patch:function(t){St++,xt&&window.console.warn("patch node",t),this.hasPrototypeDescriptors?s(t,this.mixinForObject(t)):(window.console.warn("Patching instance rather than prototype",t),r(t,this.mixinForNode(t)))},mixinForObject:function(t){switch(t.nodeType){case Node.ELEMENT_NODE:return mt.Element;case Node.DOCUMENT_FRAGMENT_NODE:return mt.Fragment;case Node.DOCUMENT_NODE:return mt.Document;case Node.TEXT_NODE:case Node.COMMENT_NODE:return mt.Node}},unpatch:function(t){t.__sourceProto&&(t.__proto__=t.__sourceProto)}};F.patchNode=y,F.isNodePatched=_;var At=Element.prototype.addEventListener,Ct=Element.prototype.removeEventListener,Rt={blur:!0,focus:!0,focusin:!0,focusout:!0,click:!0,dblclick:!0,mousedown:!0,mouseenter:!0,mouseleave:!0,mousemove:!0,mouseout:!0,mouseover:!0,mouseup:!0,wheel:!0,beforeinput:!0,input:!0,keydown:!0,keyup:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,touchstart:!0,touchend:!0,touchmove:!0,touchcancel:!0,pointerover:!0,pointerenter:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointercancel:!0,pointerout:!0,pointerleave:!0,gotpointercapture:!0,lostpointercapture:!0,dragstart:!0,drag:!0,dragenter:!0,dragleave:!0,dragover:!0,drop:!0,dragend:!0,DOMActivate:!0,DOMFocusIn:!0,DOMFocusOut:!0,keypress:!0},Nt={__patched:"Event",get composed(){return this.isTrusted&&void 0===this.__composed&&(this.__composed=Rt[this.type]),this.__composed||!1},composedPath:function(){return this.__composedPath||(this.__composedPath=w(this.__target,this.composed)),this.__composedPath},get target(){return S(this.currentTarget,this.composedPath())},get relatedTarget(){return this.__relatedTarget?(this.__relatedTargetComposedPath||(this.__relatedTargetComposedPath=w(this.__relatedTarget,!0)),S(this.currentTarget,this.__relatedTargetComposedPath)):null},stopPropagation:function(){Event.prototype.stopPropagation.call(this),this.__propagationStopped=!0},stopImmediatePropagation:function(){Event.prototype.stopImmediatePropagation.call(this),this.__immediatePropagationStopped=!0,this.__propagationStopped=!0}},Ot={focus:!0,blur:!0},Tt=x(Event),kt=x(CustomEvent),It=x(MouseEvent);if(T.inUse){window.ShadyDOM={tree:q,getNativeProperty:u,patch:y,isPatched:_,unpatch:b,isShadyRoot:t,enqueue:c,flush:l,inUse:T.inUse,filterMutations:m,observeChildren:_t,unobserveChildren:wt};var Pt=function(t){y(t);var e=new X(t);return y(e),e};Element.prototype.attachShadow=function(){return Pt(this)},Node.prototype.addEventListener=R,Node.prototype.removeEventListener=N,Event=Tt,CustomEvent=kt,MouseEvent=It,O(),Object.defineProperty(Node.prototype,"isConnected",{get:function(){return document.documentElement.contains(this)},configurable:!0}),Node.prototype.getRootNode=function(t){return yt(this,t)},Object.defineProperty(Element.prototype,"slot",{get:function(){return this.getAttribute("slot")},set:function(t){this.setAttribute("slot",t)},configurable:!0}),Object.defineProperty(Node.prototype,"assignedSlot",{get:function(){return this._assignedSlot||null},configurable:!0})}}(),function(t,e){t.tv4=e()}(this,function(){function t(t){return encodeURI(t).replace(/%25[0-9][0-9]/g,function(t){return"%"+t.substring(3)})}function e(e){var n="";h[e.charAt(0)]&&(n=e.charAt(0),e=e.substring(1));var r="",i="",o=!0,s=!1,a=!1;"+"===n?o=!1:"."===n?(i=".",r="."):"/"===n?(i="/",r="/"):"#"===n?(i="#",o=!1):";"===n?(i=";",r=";",s=!0,a=!0):"?"===n?(i="?",r="&",s=!0):"&"===n&&(i="&",r="&",s=!0);for(var u=[],c=e.split(","),l=[],d={},p=0;p<c.length;p++){var g=c[p],v=null;if(g.indexOf(":")!==-1){var m=g.split(":");g=m[0],v=parseInt(m[1],10)}for(var y={};f[g.charAt(g.length-1)];)y[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var b={truncate:v,name:g,suffices:y};l.push(b),d[g]=b,u.push(g)}var _=function(e){for(var n="",u=0,c=0;c<l.length;c++){var h=l[c],f=e(h.name);if(null===f||void 0===f||Array.isArray(f)&&0===f.length||"object"==typeof f&&0===Object.keys(f).length)u++;else if(n+=c===u?i:r||",",Array.isArray(f)){s&&(n+=h.name+"=");for(var d=0;d<f.length;d++)d>0&&(n+=h.suffices["*"]?r||",":",",h.suffices["*"]&&s&&(n+=h.name+"=")),n+=o?encodeURIComponent(f[d]).replace(/!/g,"%21"):t(f[d])}else if("object"==typeof f){s&&!h.suffices["*"]&&(n+=h.name+"=");var p=!0;for(var g in f)p||(n+=h.suffices["*"]?r||",":","),p=!1,n+=o?encodeURIComponent(g).replace(/!/g,"%21"):t(g),n+=h.suffices["*"]?"=":",",n+=o?encodeURIComponent(f[g]).replace(/!/g,"%21"):t(f[g])}else s&&(n+=h.name,a&&""===f||(n+="=")),null!=h.truncate&&(f=f.substring(0,h.truncate)),n+=o?encodeURIComponent(f).replace(/!/g,"%21"):t(f)}return n};return _.varNames=u,{prefix:i,substitution:_}}function n(t){if(!(this instanceof n))return new n(t);for(var r=t.split("{"),i=[r.shift()],o=[],s=[],a=[];r.length>0;){var u=r.shift(),c=u.split("}")[0],l=u.substring(c.length+1),h=e(c);s.push(h.substitution),o.push(h.prefix),i.push(l),a=a.concat(h.substitution.varNames)}this.fill=function(t){for(var e=i[0],n=0;n<s.length;n++){var r=s[n];e+=r(t),e+=i[n+1]}return e},this.varNames=a,this.template=t}function r(t,e){if(t===e)return!0;if("object"==typeof t&&"object"==typeof e){if(Array.isArray(t)!==Array.isArray(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!r(t[n],e[n]))return!1}else{var i;for(i in t)if(void 0===e[i]&&void 0!==t[i])return!1;for(i in e)if(void 0===t[i]&&void 0!==e[i])return!1;for(i in t)if(!r(t[i],e[i]))return!1}return!0}return!1}function i(t){var e=String(t).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return e?{href:e[0]||"",protocol:e[1]||"",authority:e[2]||"",host:e[3]||"",hostname:e[4]||"",port:e[5]||"",pathname:e[6]||"",search:e[7]||"",hash:e[8]||""}:null}function o(t,e){function n(t){var e=[];return t.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(t){"/.."===t?e.pop():e.push(t)}),e.join("").replace(/^\//,"/"===t.charAt(0)?"/":"")}return e=i(e||""),t=i(t||""),e&&t?(e.protocol||t.protocol)+(e.protocol||e.authority?e.authority:t.authority)+n(e.protocol||e.authority||"/"===e.pathname.charAt(0)?e.pathname:e.pathname?(t.authority&&!t.pathname?"/":"")+t.pathname.slice(0,t.pathname.lastIndexOf("/")+1)+e.pathname:t.pathname)+(e.protocol||e.authority||e.pathname?e.search:e.search||t.search)+e.hash:null}function s(t){return t.split("#")[0]}function a(t,e){if(t&&"object"==typeof t)if(void 0===e?e=t.id:"string"==typeof t.id&&(e=o(e,t.id),t.id=e),Array.isArray(t))for(var n=0;n<t.length;n++)a(t[n],e);else{"string"==typeof t.$ref&&(t.$ref=o(e,t.$ref));for(var r in t)"enum"!==r&&a(t[r],e)}}function u(t,e,n,r,i,o){if(Error.call(this),void 0===t)throw new Error("No code supplied for error: "+e);this.message=e,this.params=n,this.code=t,this.dataPath=r||"",this.schemaPath=i||"",this.subErrors=o||null;var s=new Error(this.message);if(this.stack=s.stack||s.stacktrace,!this.stack)try{throw s}catch(s){this.stack=s.stack||s.stacktrace}}function c(t,e){if(e.substring(0,t.length)===t){var n=e.substring(t.length);if(e.length>0&&"/"===e.charAt(t.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function l(t){var e=new d,n=t||"en",r={addFormat:function(){e.addFormat.apply(e,arguments)},language:function(t){return t?(_[t]||(t=t.split("-")[0]),!!_[t]&&(n=t,t)):n},addLanguage:function(t,e){var n;for(n in v)e[n]&&!e[v[n]]&&(e[v[n]]=e[n]);var r=t.split("-")[0];if(_[r]){_[t]=Object.create(_[r]);for(n in e)"undefined"==typeof _[r][n]&&(_[r][n]=e[n]),_[t][n]=e[n]}else _[t]=e,_[r]=e;return this},freshApi:function(t){var e=l();return t&&e.language(t),e},validate:function(t,r,i,o){var s=new d(e,(!1),_[n],i,o);"string"==typeof r&&(r={$ref:r}),s.addSchema("",r);var a=s.validateAll(t,r,null,null,"");return!a&&o&&(a=s.banUnknownProperties()),this.error=a,this.missing=s.missing,this.valid=null===a,this.valid},validateResult:function(){var t={};return this.validate.apply(t,arguments),t},validateMultiple:function(t,r,i,o){var s=new d(e,(!0),_[n],i,o);"string"==typeof r&&(r={$ref:r}),s.addSchema("",r),s.validateAll(t,r,null,null,""),o&&s.banUnknownProperties();var a={};return a.errors=s.errors,a.missing=s.missing,a.valid=0===a.errors.length,a},addSchema:function(){return e.addSchema.apply(e,arguments)},getSchema:function(){return e.getSchema.apply(e,arguments)},getSchemaMap:function(){return e.getSchemaMap.apply(e,arguments)},getSchemaUris:function(){return e.getSchemaUris.apply(e,arguments)},getMissingUris:function(){return e.getMissingUris.apply(e,arguments)},dropSchemas:function(){e.dropSchemas.apply(e,arguments)},defineKeyword:function(){e.defineKeyword.apply(e,arguments)},defineError:function(t,e,n){if("string"!=typeof t||!/^[A-Z]+(_[A-Z]+)*$/.test(t))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof e||e%1!==0||e<1e4)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof v[t])throw new Error("Error already defined: "+t+" as "+v[t]);if("undefined"!=typeof m[e])throw new Error("Error code already used: "+m[e]+" as "+e);v[t]=e,m[e]=t,b[t]=b[e]=n;for(var r in _){var i=_[r];i[t]&&(i[e]=i[e]||i[t])}},reset:function(){e.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:a,resolveUrl:o,getDocumentUri:s,errorCodes:v};return r}Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in i)t.call(i,s)&&o.push(s);if(e)for(var a=0;a<r;a++)t.call(i,n[a])&&o.push(n[a]);return o}}()),Object.create||(Object.create=function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return t.prototype=e,new t}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);i<n;i++)if(i in e&&e[i]===t)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(t){for(var e="tv4_test_frozen_key";t.hasOwnProperty(e);)e+=Math.random();try{return t[e]=!0,delete t[e],!1}catch(n){return!0}});var h={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},f={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(t){return this.fill(function(e){return t[e]})}};var d=function(t,e,n,r,i){if(this.missing=[],this.missingMap={},this.formatValidators=t?Object.create(t.formatValidators):{},this.schemas=t?Object.create(t.schemas):{},this.collectMultiple=e,this.errors=[],this.handleError=e?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=n,this.definedKeywords={},t)for(var o in t.definedKeywords)this.definedKeywords[o]=t.definedKeywords[o].slice(0)};d.prototype.defineKeyword=function(t,e){this.definedKeywords[t]=this.definedKeywords[t]||[],this.definedKeywords[t].push(e)},d.prototype.createError=function(t,e,n,r,i){var o=this.errorMessages[t]||b[t];if("string"!=typeof o)return new u(t,"Unknown error code "+t+": "+JSON.stringify(e),e,n,r,i);var s=o.replace(/\{([^{}]*)\}/g,function(t,n){var r=e[n];return"string"==typeof r||"number"==typeof r?r:t});return new u(t,s,e,n,r,i)},d.prototype.returnError=function(t){return t},d.prototype.collectError=function(t){return t&&this.errors.push(t),null},d.prototype.prefixErrors=function(t,e,n){for(var r=t;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(e,n);return this},d.prototype.banUnknownProperties=function(){for(var t in this.unknownPropertyPaths){var e=this.createError(v.UNKNOWN_PROPERTY,{path:t},t,""),n=this.handleError(e);if(n)return n}return null},d.prototype.addFormat=function(t,e){if("object"==typeof t){for(var n in t)this.addFormat(n,t[n]);return this}this.formatValidators[t]=e},d.prototype.resolveRefs=function(t,e){if(void 0!==t.$ref){if(e=e||{},e[t.$ref])return this.createError(v.CIRCULAR_REFERENCE,{urls:Object.keys(e).join(", ")},"","");e[t.$ref]=!0,t=this.getSchema(t.$ref,e)}return t},d.prototype.getSchema=function(t,e){var n;if(void 0!==this.schemas[t])return n=this.schemas[t],this.resolveRefs(n,e);var r=t,i="";if(t.indexOf("#")!==-1&&(i=t.substring(t.indexOf("#")+1),r=t.substring(0,t.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var o=decodeURIComponent(i);if(""===o)return this.resolveRefs(n,e);if("/"!==o.charAt(0))return;for(var s=o.split("/").slice(1),a=0;a<s.length;a++){var u=s[a].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[u]){n=void 0;break}n=n[u]}if(void 0!==n)return this.resolveRefs(n,e)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},d.prototype.searchSchemas=function(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.searchSchemas(t[n],e);else if(t&&"object"==typeof t){"string"==typeof t.id&&c(e,t.id)&&void 0===this.schemas[t.id]&&(this.schemas[t.id]=t);for(var r in t)if("enum"!==r)if("object"==typeof t[r])this.searchSchemas(t[r],e);else if("$ref"===r){var i=s(t[r]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},d.prototype.addSchema=function(t,e){if("string"!=typeof t||"undefined"==typeof e){if("object"!=typeof t||"string"!=typeof t.id)return;e=t,t=e.id}t===s(t)+"#"&&(t=s(t)),this.schemas[t]=e,delete this.missingMap[t],a(e,t),this.searchSchemas(e,t)},d.prototype.getSchemaMap=function(){var t={};for(var e in this.schemas)t[e]=this.schemas[e];return t},d.prototype.getSchemaUris=function(t){var e=[];for(var n in this.schemas)t&&!t.test(n)||e.push(n);return e},d.prototype.getMissingUris=function(t){var e=[];for(var n in this.missingMap)t&&!t.test(n)||e.push(n);return e},d.prototype.dropSchemas=function(){this.schemas={},this.reset()},d.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},d.prototype.validateAll=function(t,e,n,r,i){var o;if(e=this.resolveRefs(e),!e)return null;if(e instanceof u)return this.errors.push(e),e;var s,a=this.errors.length,c=null,l=null;if(this.checkRecursive&&t&&"object"==typeof t){if(o=!this.scanned.length,t[this.validatedSchemasKey]){var h=t[this.validatedSchemasKey].indexOf(e);if(h!==-1)return this.errors=this.errors.concat(t[this.validationErrorsKey][h]),null}if(Object.isFrozen(t)&&(s=this.scannedFrozen.indexOf(t),s!==-1)){var f=this.scannedFrozenSchemas[s].indexOf(e);if(f!==-1)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[s][f]),null}if(this.scanned.push(t),Object.isFrozen(t))s===-1&&(s=this.scannedFrozen.length,this.scannedFrozen.push(t),this.scannedFrozenSchemas.push([])),c=this.scannedFrozenSchemas[s].length,this.scannedFrozenSchemas[s][c]=e,this.scannedFrozenValidationErrors[s][c]=[];else{if(!t[this.validatedSchemasKey])try{Object.defineProperty(t,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(t,this.validationErrorsKey,{value:[],configurable:!0})}catch(d){t[this.validatedSchemasKey]=[],t[this.validationErrorsKey]=[]}l=t[this.validatedSchemasKey].length,t[this.validatedSchemasKey][l]=e,t[this.validationErrorsKey][l]=[]}}var p=this.errors.length,g=this.validateBasic(t,e,i)||this.validateNumeric(t,e,i)||this.validateString(t,e,i)||this.validateArray(t,e,i)||this.validateObject(t,e,i)||this.validateCombinations(t,e,i)||this.validateHypermedia(t,e,i)||this.validateFormat(t,e,i)||this.validateDefinedKeywords(t,e,i)||null;if(o){for(;this.scanned.length;){var v=this.scanned.pop();delete v[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(g||p!==this.errors.length)for(;n&&n.length||r&&r.length;){var m=n&&n.length?""+n.pop():null,y=r&&r.length?""+r.pop():null;g&&(g=g.prefixWith(m,y)),this.prefixErrors(p,m,y)}return null!==c?this.scannedFrozenValidationErrors[s][c]=this.errors.slice(a):null!==l&&(t[this.validationErrorsKey][l]=this.errors.slice(a)),this.handleError(g)},d.prototype.validateFormat=function(t,e){if("string"!=typeof e.format||!this.formatValidators[e.format])return null;var n=this.formatValidators[e.format].call(null,t,e);return"string"==typeof n||"number"==typeof n?this.createError(v.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&"object"==typeof n?this.createError(v.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},d.prototype.validateDefinedKeywords=function(t,e,n){for(var r in this.definedKeywords)if("undefined"!=typeof e[r])for(var i=this.definedKeywords[r],o=0;o<i.length;o++){var s=i[o],a=s(t,e[r],e,n);if("string"==typeof a||"number"==typeof a)return this.createError(v.KEYWORD_CUSTOM,{key:r,message:a}).prefixWith(null,"format");if(a&&"object"==typeof a){var u=a.code;if("string"==typeof u){if(!v[u])throw new Error("Undefined error code (use defineError): "+u);u=v[u]}else"number"!=typeof u&&(u=v.KEYWORD_CUSTOM);var c="object"==typeof a.message?a.message:{key:r,message:a.message||"?"},l=a.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,c,a.dataPath||null,l)}}return null},d.prototype.validateBasic=function(t,e,n){var r;return(r=this.validateType(t,e,n))?r.prefixWith(null,"type"):(r=this.validateEnum(t,e,n))?r.prefixWith(null,"type"):null},d.prototype.validateType=function(t,e){if(void 0===e.type)return null;var n=typeof t;null===t?n="null":Array.isArray(t)&&(n="array");var r=e.type;"object"!=typeof r&&(r=[r]);for(var i=0;i<r.length;i++){var o=r[i];if(o===n||"integer"===o&&"number"===n&&t%1===0)return null}return this.createError(v.INVALID_TYPE,{type:n,expected:r.join("/")})},d.prototype.validateEnum=function(t,e){if(void 0===e["enum"])return null;for(var n=0;n<e["enum"].length;n++){var i=e["enum"][n];if(r(t,i))return null}return this.createError(v.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(t):t})},d.prototype.validateNumeric=function(t,e,n){return this.validateMultipleOf(t,e,n)||this.validateMinMax(t,e,n)||this.validateNaN(t,e,n)||null};var p=Math.pow(2,-51),g=1-p;d.prototype.validateMultipleOf=function(t,e){var n=e.multipleOf||e.divisibleBy;if(void 0===n)return null;if("number"==typeof t){var r=t/n%1;if(r>=p&&r<g)return this.createError(v.NUMBER_MULTIPLE_OF,{value:t,multipleOf:n})}return null},d.prototype.validateMinMax=function(t,e){if("number"!=typeof t)return null;if(void 0!==e.minimum){if(t<e.minimum)return this.createError(v.NUMBER_MINIMUM,{value:t,minimum:e.minimum}).prefixWith(null,"minimum");if(e.exclusiveMinimum&&t===e.minimum)return this.createError(v.NUMBER_MINIMUM_EXCLUSIVE,{value:t,minimum:e.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==e.maximum){if(t>e.maximum)return this.createError(v.NUMBER_MAXIMUM,{value:t,maximum:e.maximum}).prefixWith(null,"maximum");if(e.exclusiveMaximum&&t===e.maximum)return this.createError(v.NUMBER_MAXIMUM_EXCLUSIVE,{value:t,maximum:e.maximum}).prefixWith(null,"exclusiveMaximum")}return null},d.prototype.validateNaN=function(t){return"number"!=typeof t?null:isNaN(t)===!0||t===1/0||t===-(1/0)?this.createError(v.NUMBER_NOT_A_NUMBER,{value:t}).prefixWith(null,"type"):null},d.prototype.validateString=function(t,e,n){return this.validateStringLength(t,e,n)||this.validateStringPattern(t,e,n)||null},d.prototype.validateStringLength=function(t,e){return"string"!=typeof t?null:void 0!==e.minLength&&t.length<e.minLength?this.createError(v.STRING_LENGTH_SHORT,{length:t.length,minimum:e.minLength}).prefixWith(null,"minLength"):void 0!==e.maxLength&&t.length>e.maxLength?this.createError(v.STRING_LENGTH_LONG,{length:t.length,maximum:e.maxLength}).prefixWith(null,"maxLength"):null},d.prototype.validateStringPattern=function(t,e){if("string"!=typeof t||void 0===e.pattern)return null;var n=new RegExp(e.pattern);return n.test(t)?null:this.createError(v.STRING_PATTERN,{pattern:e.pattern}).prefixWith(null,"pattern")},d.prototype.validateArray=function(t,e,n){return Array.isArray(t)?this.validateArrayLength(t,e,n)||this.validateArrayUniqueItems(t,e,n)||this.validateArrayItems(t,e,n)||null:null},d.prototype.validateArrayLength=function(t,e){var n;return void 0!==e.minItems&&t.length<e.minItems&&(n=this.createError(v.ARRAY_LENGTH_SHORT,{length:t.length,minimum:e.minItems}).prefixWith(null,"minItems"),this.handleError(n))?n:void 0!==e.maxItems&&t.length>e.maxItems&&(n=this.createError(v.ARRAY_LENGTH_LONG,{length:t.length,maximum:e.maxItems}).prefixWith(null,"maxItems"),this.handleError(n))?n:null},d.prototype.validateArrayUniqueItems=function(t,e){if(e.uniqueItems)for(var n=0;n<t.length;n++)for(var i=n+1;i<t.length;i++)if(r(t[n],t[i])){var o=this.createError(v.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(o))return o}return null},d.prototype.validateArrayItems=function(t,e,n){if(void 0===e.items)return null;var r,i;if(Array.isArray(e.items)){for(i=0;i<t.length;i++)if(i<e.items.length){if(r=this.validateAll(t[i],e.items[i],[i],["items",i],n+"/"+i))return r}else if(void 0!==e.additionalItems)if("boolean"==typeof e.additionalItems){if(!e.additionalItems&&(r=this.createError(v.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(r)))return r}else if(r=this.validateAll(t[i],e.additionalItems,[i],["additionalItems"],n+"/"+i))return r}else for(i=0;i<t.length;i++)if(r=this.validateAll(t[i],e.items,[i],["items"],n+"/"+i))return r;return null},d.prototype.validateObject=function(t,e,n){return"object"!=typeof t||null===t||Array.isArray(t)?null:this.validateObjectMinMaxProperties(t,e,n)||this.validateObjectRequiredProperties(t,e,n)||this.validateObjectProperties(t,e,n)||this.validateObjectDependencies(t,e,n)||null},d.prototype.validateObjectMinMaxProperties=function(t,e){var n,r=Object.keys(t);return void 0!==e.minProperties&&r.length<e.minProperties&&(n=this.createError(v.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:e.minProperties}).prefixWith(null,"minProperties"),this.handleError(n))?n:void 0!==e.maxProperties&&r.length>e.maxProperties&&(n=this.createError(v.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:e.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(n))?n:null},d.prototype.validateObjectRequiredProperties=function(t,e){if(void 0!==e.required)for(var n=0;n<e.required.length;n++){var r=e.required[n];if(void 0===t[r]){var i=this.createError(v.OBJECT_REQUIRED,{key:r}).prefixWith(null,""+n).prefixWith(null,"required");if(this.handleError(i))return i}}return null},d.prototype.validateObjectProperties=function(t,e,n){var r;for(var i in t){var o=n+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),s=!1;if(void 0!==e.properties&&void 0!==e.properties[i]&&(s=!0,r=this.validateAll(t[i],e.properties[i],[i],["properties",i],o)))return r;if(void 0!==e.patternProperties)for(var a in e.patternProperties){var u=new RegExp(a);if(u.test(i)&&(s=!0,r=this.validateAll(t[i],e.patternProperties[a],[i],["patternProperties",a],o)))return r}if(s)this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]);else if(void 0!==e.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[o]=!0,delete this.unknownPropertyPaths[o]),"boolean"==typeof e.additionalProperties){if(!e.additionalProperties&&(r=this.createError(v.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(r)))return r}else if(r=this.validateAll(t[i],e.additionalProperties,[i],["additionalProperties"],o))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[o]&&(this.unknownPropertyPaths[o]=!0)}return null},d.prototype.validateObjectDependencies=function(t,e,n){var r;if(void 0!==e.dependencies)for(var i in e.dependencies)if(void 0!==t[i]){var o=e.dependencies[i];if("string"==typeof o){if(void 0===t[o]&&(r=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:i,missing:o}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(o))for(var s=0;s<o.length;s++){var a=o[s];if(void 0===t[a]&&(r=this.createError(v.OBJECT_DEPENDENCY_KEY,{key:i,missing:a}).prefixWith(null,""+s).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(t,o,[],["dependencies",i],n))return r}return null},d.prototype.validateCombinations=function(t,e,n){return this.validateAllOf(t,e,n)||this.validateAnyOf(t,e,n)||this.validateOneOf(t,e,n)||this.validateNot(t,e,n)||null},d.prototype.validateAllOf=function(t,e,n){if(void 0===e.allOf)return null;for(var r,i=0;i<e.allOf.length;i++){var o=e.allOf[i];if(r=this.validateAll(t,o,[],["allOf",i],n))return r}return null},d.prototype.validateAnyOf=function(t,e,n){if(void 0===e.anyOf)return null;var r,i,o=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var a=!0,u=0;u<e.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=e.anyOf[u],l=this.errors.length,h=this.validateAll(t,c,[],["anyOf",u],n);if(null===h&&l===this.errors.length){if(this.errors=this.errors.slice(0,s),this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var d in this.unknownPropertyPaths)i[d]||(r[d]=!0);a=!1;continue}return null}h&&o.push(h.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(v.ANY_OF_MISSING,{},"","/anyOf",o)):void 0},d.prototype.validateOneOf=function(t,e,n){if(void 0===e.oneOf)return null;var r,i,o=null,s=[],a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=0;u<e.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=e.oneOf[u],l=this.errors.length,h=this.validateAll(t,c,[],["oneOf",u],n);if(null===h&&l===this.errors.length){if(null!==o)return this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MULTIPLE,{index1:o,index2:u},"","/oneOf");if(o=u,this.trackUnknownProperties){for(var f in this.knownPropertyPaths)i[f]=!0,delete r[f];for(var d in this.unknownPropertyPaths)i[d]||(r[d]=!0)}}else h&&s.push(h)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===o?(s=s.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(v.ONE_OF_MISSING,{},"","/oneOf",s)):(this.errors=this.errors.slice(0,a),null)},d.prototype.validateNot=function(t,e,n){if(void 0===e.not)return null;var r,i,o=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var s=this.validateAll(t,e.not,null,null,n),a=this.errors.slice(o);return this.errors=this.errors.slice(0,o),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===s&&0===a.length?this.createError(v.NOT_PASSED,{},"","/not"):null},d.prototype.validateHypermedia=function(t,e,r){if(!e.links)return null;for(var i,o=0;o<e.links.length;o++){var s=e.links[o];if("describedby"===s.rel){for(var a=new n(s.href),u=!0,c=0;c<a.varNames.length;c++)if(!(a.varNames[c]in t)){u=!1;break}if(u){var l=a.fillFromObject(t),h={$ref:l};if(i=this.validateAll(t,h,[],["links",o],r))return i}}}};var v={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},m={};for(var y in v)m[v[y]]=y;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",
ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="ValidationError",u.prototype.prefixWith=function(t,e){if(null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+t+this.dataPath),null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+e+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(t,e);return this};var _={},w=l();return w.addLanguage("en-gb",b),w.tv4=w,w}),"undefined"==typeof module)var module={exports:void 0};if(module.exports=Defiant=function(){"use strict";var t={is_ie:/msie/i.test(navigator.userAgent),is_safari:/safari/i.test(navigator.userAgent),env:"production",xml_decl:'<?xml version="1.0" encoding="utf-8"?>',namespace:'xmlns:d="defiant-namespace"',tabsize:4,render:function(t,e){var n,r,i,o,s=new XSLTProcessor,a=document.createElement("span"),u={match:"/"};switch(typeof t){case"object":this.extend(u,t),u.data||(u.data=e);break;case"string":u.template=t,u.data=e;break;default:throw"error"}if(u.data=JSON.toXML(u.data),n='//xsl:template[@name="'+u.template+'"]',this.xsl_template||this.gatherTemplates(),u.sorter&&(o=this.node.selectSingleNode(this.xsl_template,n+"//xsl:for-each//xsl:sort"),o&&(u.sorter.order&&o.setAttribute("order",u.sorter.order),u.sorter.select&&o.setAttribute("select",u.sorter.select),o.setAttribute("data-type",u.sorter.type||"text"))),i=this.node.selectSingleNode(this.xsl_template,n),i.setAttribute("match",u.match),s.importStylesheet(this.xsl_template),a.appendChild(s.transformToFragment(u.data,document)),i.removeAttribute("match"),this.is_safari){r=a.getElementsByTagName("script");for(var c=0,l=r.length;l>c;c++)r[c].defer=!0}return a.innerHTML},gatherTemplates:function(){for(var t=document.getElementsByTagName("script"),e="",n=0,r=t.length;r>n;n++)"defiant/xsl-template"===t[n].type&&(e+=t[n].innerHTML);this.xsl_template=this.xmlFromString('<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" '+this.namespace+">"+e.replace(/defiant:(\w+)/g,"$1")+"</xsl:stylesheet>")},getSnapshot:function(t){return JSON.toXML(t,!0)},xmlFromString:function(t){var e,n;return t=t.replace(/>\s{1,}</g,"><"),null===t.trim().match(/<\?xml/)&&(t=this.xml_decl+t),this.is_ie?(n=new ActiveXObject("Msxml2.DOMDocument"),n.loadXML(t),-1===t.indexOf("xsl:stylesheet")&&n.setProperty("SelectionLanguage","XPath")):(e=new DOMParser,n=e.parseFromString(t,"text/xml")),n},extend:function(t,e){for(var n in e)t[n]&&"object"==typeof e[n]?this.extend(t[n],e[n]):t[n]=e[n];return t},node:{}};return t}(this),"undefined"==typeof XSLTProcessor){var XSLTProcessor=function(){};XSLTProcessor.prototype={importStylesheet:function(t){this.xsldoc=t},transformToFragment:function(t){var e=t.transformNode(this.xsldoc),n=document.createElement("span");return n.innerHTML=e,n}}}String.prototype.fill||(String.prototype.fill=function(t,e){var n=this;for(e=e||" ";n.length<t;n+=e);return n}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),String.prototype.xTransform||(String.prototype.xTransform=function(){var t=this;return-1===this.indexOf("translate(")&&(t=this.replace(/contains\(([^,]+),([^\\)]+)\)/,function(t,e,n){var r="abcdefghijklmnopqrstuvwxyz",i=n.trim().slice(-1);return"contains(translate("+e+", "+i+r.toUpperCase()+i+", "+i+r+i+"),"+n.toLowerCase()+")"})),t.toString()}),"undefined"==typeof JSON&&(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(t){if(t instanceof Object){var e="";if(t.constructor===Array){for(var n=0;n<t.length;e+=this.stringify(t[n])+",",n++);return"["+e.substr(0,e.length-1)+"]"}if(t.toString!==Object.prototype.toString)return'"'+t.toString().replace(/"/g,"\\$&")+'"';for(var r in t)e+='"'+r.replace(/"/g,"\\$&")+'":'+this.stringify(t[r])+",";return"{"+e.substr(0,e.length-1)+"}"}return"string"==typeof t?'"'+t.replace(/"/g,"\\$&")+'"':String(t)}}),JSON.toXML||(JSON.toXML=function(t,e){"use strict";var n={map:[],rx_validate_name:/^(?!xml)[a-z_][\w\d.:]*$/i,rx_node:/<(.+?)( .*?)>/,rx_constructor:/<(.+?)( d:contr=".*?")>/,rx_namespace:/ xmlns\:d="defiant\-namespace"/,rx_data:/(<.+?>)(.*?)(<\/d:data>)/i,rx_function:/function (\w+)/i,to_xml:function(t){var e=this.hash_to_xml(null,t);return Defiant.xmlFromString(e)},hash_to_xml:function(t,e,n){var r,i,o,s,a,u,c,l,h=e.constructor===Array,f=[],d=[];for(r in e)if(i=e[r],(null===i||void 0===i||"NaN"===i.toString())&&(i=null),s="@"===r.slice(0,1),a=n?t:r,a==+a&&e.constructor!==Object&&(a="d:item"),null===i?(u=null,c=!1):(u=i.constructor,c=u.toString().match(this.rx_function)[1]),s)d.push(a.slice(1)+'="'+this.escape_xml(i)+'"'),"String"!==c&&d.push("d:"+a.slice(1)+'="'+c+'"');else if(null===i)f.push(this.scalar_to_xml(a,i));else switch(u){case Function:break;case Object:f.push(this.hash_to_xml(a,i));break;case Array:if(r===a){if(o=i.constructor===Array)for(l=i.length;l--;)i[l].constructor===Array&&(o=!0),o||i[l].constructor!==Object||(o=!0);f.push(this.scalar_to_xml(a,i,o));break}case String:if("string"==typeof i&&(i=i.toString().replace(/\&/g,"&amp;").replace(/\r|\n/g,"&#13;")),"#text"===a){this.map.push(e),d.push('d:mi="'+this.map.length+'"'),d.push('d:constr="'+c+'"'),f.push(this.escape_xml(i));break}case Number:case Boolean:if("#text"===a&&"String"!==c){this.map.push(e),d.push('d:mi="'+this.map.length+'"'),d.push('d:constr="'+c+'"'),f.push(this.escape_xml(i));break}f.push(this.scalar_to_xml(a,i))}return t||(t="d:data",d.push(Defiant.namespace),h&&d.push('d:constr="Array"')),null===t.match(this.rx_validate_name)&&(d.push('d:name="'+t+'"'),t="d:name"),n?f.join(""):(this.map.push(e),d.push('d:mi="'+this.map.length+'"'),"<"+t+(d.length?" "+d.join(" "):"")+(f.length?">"+f.join("")+"</"+t+">":"/>"))},scalar_to_xml:function(t,e,n){var r,i,o,s="";if(null===t.match(this.rx_validate_name)&&(s+=' d:name="'+t+'"',t="d:name",n=!1),(null===e||"NaN"===e.toString())&&(e=null),null===e)return"<"+t+' d:constr="null"/>';if(1===e.length&&e[0].constructor===Object){r=this.hash_to_xml(!1,e[0]);var a=r.match(this.rx_node),u=r.match(this.rx_constructor);return a=null!==a?a[2].replace(this.rx_namespace,"").replace(/>/,"").replace(/"\/$/,'"'):"",u=null!==u?u[2]:"",r=r.match(this.rx_data),r=null!==r?r[2]:"","<"+t+a+" "+u+' d:type="ArrayItem">'+r+"</"+t+">"}return 0===e.length&&e.constructor===Array?"<"+t+' d:constr="Array"/>':n?this.hash_to_xml(t,e,!0):(i=e.constructor,o=i.toString().match(this.rx_function)[1],r=i===Array?this.hash_to_xml("d:item",e,!0):this.escape_xml(e),s+=' d:constr="'+o+'"',this.map.push(e),s+=' d:mi="'+this.map.length+'"',"#text"===t?this.escape_xml(e):"<"+t+s+">"+r+"</"+t+">")},escape_xml:function(t){return String(t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/&nbsp;/g,"&#160;")}},r=n.to_xml.call(n,t);return e?{doc:r,src:t,map:n.map}:(this.search.map=n.map,r)}),JSON.search||(JSON.search=function(t,e,n){"use strict";var r,i,o=t.doc&&t.doc.nodeType,s=o?t.doc:JSON.toXML(t),a=o?t.map:this.search.map,u=o?t.src:t,c=Defiant.node[n?"selectSingleNode":"selectNodes"](s,e.xTransform()),l=[];for(n&&(c=[c]),i=c.length;i--;)switch(c[i].nodeType){case 2:case 3:l.unshift(c[i].nodeValue);break;default:r=+c[i].getAttribute("d:mi"),a[r-1]&&l.unshift(a[r-1])}return"development"===Defiant.env&&(this.trace=JSON.mtrace(u,l,c)),l}),JSON.mtrace||(JSON.mtrace=function(t,e,n){"use strict";for(var r,i,o,s,a,u=window,c=JSON.stringify,l=c(t,null,"\t").replace(/\t/g,""),h=[],f=0,d=n.length,p=!!d&&n[f].ownerDocument.documentElement,g=(this.search.map,0);d>f;f++){switch(n[f].nodeType){case 2:i=n[f].ownerElement?n[f].ownerElement.getAttribute("d:"+n[f].nodeName):"String",r='"@'+n[f].nodeName+'": '+u[i](e[f]),o=l.indexOf(r),a=0;break;case 3:i=n[f].parentNode.getAttribute("d:constr"),r=u[i](e[f]),r='"'+n[f].parentNode.nodeName+'": '+("Number"===r?r:'"'+r+'"'),o=l.indexOf(r),a=0;break;default:if(n[f]===p)continue;"String"===n[f].getAttribute("d:constr")?(i=n[f].getAttribute("d:constr"),r=u[i](e[f]),r='"'+n[f].nodeName+'": '+("Number"===r?r:'"'+r+'"'),o=l.indexOf(r,g),a=0,g=o+1):(r=c(e[f],null,"\t").replace(/\t/g,""),o=l.indexOf(r),a=r.match(/\n/g).length)}s=l.substring(0,o).match(/\n/g).length+1,h.push([s,a])}return h}),Defiant.node.selectNodes=function(t,e){if(t.evaluate){for(var n=t.createNSResolver(t.documentElement),r=t.evaluate(e,t,n,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=[],o=0,s=r.snapshotLength;s>o;o++)i.push(r.snapshotItem(o));return i}return t.selectNodes(e)},Defiant.node.selectSingleNode=function(t,e){if(t.evaluate){var n=this.selectNodes(t,e);return n.length>0?n[0]:null}return t.selectSingleNode(e)},Defiant.node.prettyPrint=function(t){var e,n,r=Defiant,i=r.tabsize,o=r.xml_decl.toLowerCase();r.is_ie?n=t.xml:(e=new XMLSerializer,n=e.serializeToString(t)),"development"!==r.env&&(n=n.replace(/ \w+\:d=".*?"| d\:\w+=".*?"/g,""));for(var s,a,u=n.trim().replace(/(>)\s*(<)(\/*)/g,"$1\n$2$3"),c=u.split("\n"),l=-1,h=0,f=c.length;f>h;h++)(0!==h||c[h].toLowerCase()!==o)&&(s=null!==c[h].match(/<[A-Za-z_\:]+.*?>/g),a=null!==c[h].match(/<\/[\w\:]+>/g),null!==c[h].match(/<.*?\/>/g)&&(s=a=!0),s&&l++,c[h]=String().fill(l,"\t")+c[h],s&&a&&l--,!s&&a&&l--);return c.join("\n").replace(/\t/g,String().fill(i," "))},Defiant.node.toJSON=function(t,e){"use strict";var n=function(t){var e,r,i,o,s,a,u,c,l,h,f={},d=window;switch(t.nodeType){case 1:for(s=t.getAttribute("d:constr"),"Array"===s?f=[]:"String"===s&&""===t.textContent&&(f=""),e=t.attributes,c=0,l=e.length;l>c;c++)h=e.item(c),null===h.nodeName.match(/\:d|d\:/g)&&(s=t.getAttribute("d:"+h.nodeName),a=s&&"undefined"!==s?"null"===h.nodeValue?null:d[s]("false"===h.nodeValue?"":h.nodeValue):h.nodeValue,f["@"+h.nodeName]=a);break;case 3:r=t.parentNode.getAttribute("d:type"),a=r?d[r]("false"===t.nodeValue?"":t.nodeValue):t.nodeValue,f=a}if(t.hasChildNodes())for(c=0,l=t.childNodes.length;l>c;c++)if(i=t.childNodes.item(c),o=i.nodeName,e=t.attributes,"d:name"===o&&(o=i.getAttribute("d:name")),"#text"===o)s=t.getAttribute("d:constr"),"undefined"===s&&(s=void 0),u=i.textContent||i.text,a="Boolean"===s&&"false"===u?"":u,s||e.length?s&&1===l?f=d[s](a):t.hasChildNodes()&&e.length<3?f=s?d[s](a):a:f[o]=s?d[s](a):a:f=a;else{if(f[o]){f[o].push?f[o].push(n(i)):f[o]=[f[o],n(i)];continue}switch(s=i.getAttribute("d:constr")){case"null":f.push?f.push(null):f[o]=null;break;case"Array":i.parentNode.firstChild===i&&"Array"===s&&"d:item"!==o?"d:item"===o||"Array"===s?(a=n(i),f[o]=a.length?[a]:a):f[o]=n(i):f.push?f.push(n(i)):f[o]=n(i);break;case"String":case"Number":case"Boolean":u=i.textContent||i.text,a="Boolean"===s&&"false"===u?"":u,f.push?f.push(d[s](a)):f[o]=n(i);break;default:f.push?f.push(n(i)):f[o]=n(i)}}return 1===t.nodeType&&"ArrayItem"===t.getAttribute("d:type")&&(f=[f]),f},r=9===t.nodeType?t.documentElement:t,i=n(r),o=i[r.nodeName];return r===r.ownerDocument.documentElement&&o&&o.constructor===Array&&(i=o),e&&"true"===e.toString()&&(e="\t"),e?JSON.stringify(i,null,e):i},"undefined"!=typeof jQuery&&!function(t){"use strict";t.fn.defiant=function(t,e){return this.html(Defiant.render(t,e)),this}}(jQuery),window.JSON2=JSON,function(t,e,n){"use strict";function r(t){return function(){var e,n=arguments[0];for(e="["+(t?t+":":"")+n+"] http://errors.angularjs.org/1.4.7/"+(t?t+"/":"")+n,n=1;n<arguments.length;n++){e=e+(1==n?"?":"&")+"p"+(n-1)+"=";var r,i=encodeURIComponent;r=arguments[n],r="function"==typeof r?r.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof r?"undefined":"string"!=typeof r?JSON.stringify(r):r,e+=i(r)}return Error(e)}}function i(t){if(null==t||N(t))return!1;var e="length"in Object(t)&&t.length;return!(t.nodeType!==cr||!e)||(x(t)||tr(t)||0===e||"number"==typeof e&&0<e&&e-1 in t)}function o(t,e,n){var r,s;if(t)if(C(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(tr(t)||i(t)){var a="object"!=typeof t;for(r=0,s=t.length;r<s;r++)(a||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else if(S(t))for(r in t)e.call(n,t[r],r,t);else if("function"==typeof t.hasOwnProperty)for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);else for(r in t)Kn.call(t,r)&&e.call(n,t[r],r,t);return t}function s(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function a(t){return function(e,n){t(n,e)}}function u(){return++Qn}function c(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function l(t,e,n){for(var r=t.$$hashKey,i=0,o=e.length;i<o;++i){var s=e[i];if(w(s)||C(s))for(var a=Object.keys(s),u=0,h=a.length;u<h;u++){var f=a[u],d=s[f];n&&w(d)?A(d)?t[f]=new Date(d.valueOf()):R(d)?t[f]=new RegExp(d):(w(t[f])||(t[f]=tr(d)?[]:{}),l(t[f],[d],!0)):t[f]=d}}return c(t,r),t}function h(t){return l(t,Jn.call(arguments,1),!1)}function f(t){return l(t,Jn.call(arguments,1),!0)}function d(t){return parseInt(t,10)}function p(t,e){return h(Object.create(t),e)}function g(){}function v(t){return t}function m(t){return function(){return t}}function y(t){return C(t.toString)&&t.toString!==Object.prototype.toString}function b(t){return"undefined"==typeof t}function _(t){return"undefined"!=typeof t}function w(t){return null!==t&&"object"==typeof t}function S(t){return null!==t&&"object"==typeof t&&!Wn(t)}function x(t){return"string"==typeof t}function E(t){return"number"==typeof t}function A(t){return"[object Date]"===Xn.call(t)}function C(t){return"function"==typeof t}function R(t){return"[object RegExp]"===Xn.call(t)}function N(t){return t&&t.window===t}function O(t){return t&&t.$evalAsync&&t.$watch}function T(t){return"boolean"==typeof t}function k(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function I(t){var e={};t=t.split(",");var n;for(n=0;n<t.length;n++)e[t[n]]=!0;return e}function P(t){return Un(t.nodeName||t[0]&&t[0].nodeName)}function F(t,e){var n=t.indexOf(e);return 0<=n&&t.splice(n,1),n}function D(t,e,n,r){if(N(t)||O(t))throw Yn("cpws");if(er.test(Xn.call(e)))throw Yn("cpta");if(e){if(t===e)throw Yn("cpi");n=n||[],r=r||[],w(t)&&(n.push(t),r.push(e));var i;if(tr(t))for(i=e.length=0;i<t.length;i++)e.push(D(t[i],null,n,r));else{var s=e.$$hashKey;if(tr(e)?e.length=0:o(e,function(t,n){delete e[n]}),S(t))for(i in t)e[i]=D(t[i],null,n,r);else if(t&&"function"==typeof t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(e[i]=D(t[i],null,n,r));else for(i in t)Kn.call(t,i)&&(e[i]=D(t[i],null,n,r));c(e,s)}}else if(e=t,w(t)){if(n&&-1!==(s=n.indexOf(t)))return r[s];if(tr(t))return D(t,[],n,r);if(er.test(Xn.call(t)))e=new t.constructor(t);else if(A(t))e=new Date(t.getTime());else if(R(t))e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex;else{if(!C(t.cloneNode))return i=Object.create(Wn(t)),D(t,i,n,r);e=t.cloneNode(!0)}r&&(n.push(t),r.push(e))}return e}function $(t,e){if(tr(t)){e=e||[];for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}else if(w(t))for(n in e=e||{},t)"$"===n.charAt(0)&&"$"===n.charAt(1)||(e[n]=t[n]);return e||t}function j(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var n,r=typeof t;if(r==typeof e&&"object"==r){if(!tr(t)){if(A(t))return!!A(e)&&j(t.getTime(),e.getTime());if(R(t))return!!R(e)&&t.toString()==e.toString();if(O(t)||O(e)||N(t)||N(e)||tr(e)||A(e)||R(e))return!1;r=ct();for(n in t)if("$"!==n.charAt(0)&&!C(t[n])){if(!j(t[n],e[n]))return!1;r[n]=!0}for(n in e)if(!(n in r)&&"$"!==n.charAt(0)&&_(e[n])&&!C(e[n]))return!1;return!0}if(!tr(e))return!1;if((r=t.length)==e.length){for(n=0;n<r;n++)if(!j(t[n],e[n]))return!1;return!0}}return!1}function L(t,e,n){return t.concat(Jn.call(e,n))}function M(t,e){var n=2<arguments.length?Jn.call(arguments,2):[];return!C(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,L(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function B(t,r){var i=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=n:N(r)?i="$WINDOW":r&&e===r?i="$DOCUMENT":O(r)&&(i="$SCOPE"),i}function H(t,e){return"undefined"==typeof t?n:(E(e)||(e=e?2:null),JSON.stringify(t,B,e))}function U(t){return x(t)?JSON.parse(t):t}function K(t,e){var n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function q(t,e,n){n=n?-1:1;var r=K(e,t.getTimezoneOffset());return e=t,t=n*(r-t.getTimezoneOffset()),e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function J(t){t=Ln(t).clone();try{t.empty()}catch(e){}var n=Ln("<div>").append(t).html();try{return t[0].nodeType===lr?Un(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Un(e)})}catch(r){return Un(n)}}function V(t){try{return decodeURIComponent(t)}catch(e){}}function z(t){var e={};return o((t||"").split("&"),function(t){var n,r,i;t&&(r=t=t.replace(/\+/g,"%20"),n=t.indexOf("="),-1!==n&&(r=t.substring(0,n),i=t.substring(n+1)),r=V(r),_(r)&&(i=!_(i)||V(i),Kn.call(e,r)?tr(e[r])?e[r].push(i):e[r]=[e[r],i]:e[r]=i))}),e}function X(t){var e=[];return o(t,function(t,n){tr(t)?o(t,function(t){e.push(Y(n,!0)+(!0===t?"":"="+Y(t,!0)))}):e.push(Y(n,!0)+(!0===t?"":"="+Y(t,!0)))}),e.length?e.join("&"):""}function W(t){return Y(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function G(t,e){var n,r,i=sr.length;for(r=0;r<i;++r)if(n=sr[r]+e,x(n=t.getAttribute(n)))return n;return null}function Q(t,e){var n,r,i={};o(sr,function(e){e+="app",!n&&t.hasAttribute&&t.hasAttribute(e)&&(n=t,r=t.getAttribute(e))}),o(sr,function(e){e+="app";var i;!n&&(i=t.querySelector("["+e.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(e))}),n&&(i.strictDi=null!==G(n,"strict-di"),e(n,r?[r]:[],i))}function Z(n,r,i){w(i)||(i={}),i=h({strictDi:!1},i);var s=function(){if(n=Ln(n),n.injector()){var t=n[0]===e?"document":J(n);throw Yn("btstrpd",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}return r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng"),t=jt(r,i.strictDi),t.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),t},a=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&a.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(a,"")),t&&!u.test(t.name)?s():(t.name=t.name.replace(u,""),Gn.resumeBootstrap=function(t){return o(t,function(t){r.push(t)}),s()},void(C(Gn.resumeDeferredBootstrap)&&Gn.resumeDeferredBootstrap()))}function tt(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function et(t){if(t=Gn.element(t).injector(),!t)throw Yn("test");return t.get("$$testability")}function nt(t,e){return e=e||"_",t.replace(ar,function(t,n){return(n?e:"")+t.toLowerCase()})}function rt(){var e;if(!ur){var r=or();(Mn=b(r)?t.jQuery:r?t[r]:n)&&Mn.fn.on?(Ln=Mn,h(Mn.fn,{scope:xr.scope,isolateScope:xr.isolateScope,controller:xr.controller,injector:xr.injector,inheritedData:xr.inheritedData}),e=Mn.cleanData,Mn.cleanData=function(t){var n;if(Zn)Zn=!1;else for(var r,i=0;null!=(r=t[i]);i++)(n=Mn._data(r,"events"))&&n.$destroy&&Mn(r).triggerHandler("$destroy");e(t)}):Ln=gt,Gn.element=Ln,ur=!0}}function it(t,e,n){if(!t)throw Yn("areq",e||"?",n||"required");return t}function ot(t,e,n){return n&&tr(t)&&(t=t[t.length-1]),it(C(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function st(t,e){if("hasOwnProperty"===t)throw Yn("badname",e)}function at(t,e,n){if(!e)return t;e=e.split(".");for(var r,i=t,o=e.length,s=0;s<o;s++)r=e[s],t&&(t=(i=t)[r]);return!n&&C(t)?M(i,t):t}function ut(t){for(var e,n=t[0],r=t[t.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(e||t[i]!==n)&&(e||(e=Ln(Jn.call(t,0,i))),e.push(n));return e||t}function ct(){return Object.create(null)}function lt(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng");return t=e(t,"angular",Object),t.$$minErr=t.$$minErr||r,e(t,"module",function(){var t={};return function(r,o,s){if("hasOwnProperty"===r)throw i("badname","module");return o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,e,n,r){return r||(r=i),function(){return r[n||"push"]([t,e,arguments]),l}}function e(t,e){return function(n,o){return o&&C(o)&&(o.$$moduleName=r),i.push([t,e,arguments]),l}}if(!o)throw n("nomod",r);var i=[],a=[],u=[],c=t("$injector","invoke","push",a),l={_invokeQueue:i,_configBlocks:a,_runBlocks:u,requires:o,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),decorator:e("$provide","decorator"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:c,run:function(t){return u.push(t),this}};return s&&c(s),l})}})}function ht(e){h(e,{bootstrap:Z,copy:D,extend:h,merge:f,equals:j,element:Ln,forEach:o,injector:jt,noop:g,bind:M,toJson:H,fromJson:U,identity:v,isUndefined:b,isDefined:_,isString:x,isFunction:C,isObject:w,isNumber:E,isElement:k,isArray:tr,version:hr,isDate:A,lowercase:Un,uppercase:qn,callbacks:{counter:0},getTestability:et,$$minErr:r,$$csp:ir,reloadWithDebugInfo:tt}),(Bn=lt(t))("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:ze}),t.provider("$compile",Vt).directive({a:wi,input:ji,textarea:ji,form:Ai,script:Co,select:Oo,style:ko,option:To,ngBind:Bi,ngBindHtml:Ui,ngBindTemplate:Hi,ngClass:qi,ngClassEven:Vi,ngClassOdd:Ji,ngCloak:zi,ngController:Xi,ngForm:Ci,ngHide:_o,ngIf:Gi,ngInclude:Qi,ngInit:to,ngNonBindable:fo,ngPluralize:mo,ngRepeat:yo,ngShow:bo,ngStyle:wo,ngSwitch:So,ngSwitchWhen:xo,ngSwitchDefault:Eo,ngOptions:vo,ngTransclude:Ao,ngModel:co,ngList:eo,ngChange:Ki,pattern:Po,ngPattern:Po,required:Io,ngRequired:Io,minlength:Do,ngMinlength:Do,maxlength:Fo,ngMaxlength:Fo,ngValue:Mi,ngModelOptions:ho}).directive({ngInclude:Zi}).directive(Si).directive(Wi),t.provider({$anchorScroll:Lt,$animate:$r,$animateCss:jr,$$animateQueue:Dr,$$AnimateRunner:Fr,$browser:Kt,$cacheFactory:qt,$controller:Yt,$document:Gt,$exceptionHandler:Qt,$filter:un,$$forceReflow:Ur,$interpolate:le,$interval:he,$http:se,$httpParamSerializer:te,$httpParamSerializerJQLike:ee,$httpBackend:ue,$xhrFactory:ae,$location:xe,$log:Ee,$parse:He,$rootScope:Ve,$q:Ue,$$q:Ke,$sce:Ge,$sceDelegate:Ye,$sniffer:Qe,$templateCache:Jt,$templateRequest:Ze,$$testability:tn,$timeout:en,$window:on,$$rAF:Je,$$jqLite:Pt,$$HashMap:Rr,$$cookieReader:an})}])}function ft(t){return t.replace(pr,function(t,e,n,r){return r?n.toUpperCase():n}).replace(gr,"Moz$1")}function dt(t){return t=t.nodeType,t===cr||!t||9===t}function pt(t,e){var n,r,i=e.createDocumentFragment(),s=[];if(br.test(t)){for(n=n||i.appendChild(e.createElement("div")),r=(_r.exec(t)||["",""])[1].toLowerCase(),r=Sr[r]||Sr._default,n.innerHTML=r[1]+t.replace(wr,"<$1></$2>")+r[2],r=r[0];r--;)n=n.lastChild;s=L(s,n.childNodes),n=i.firstChild,n.textContent=""}else s.push(e.createTextNode(t));return i.textContent="",i.innerHTML="",o(s,function(t){i.appendChild(t)}),i}function gt(t){if(t instanceof gt)return t;var n;if(x(t)&&(t=nr(t),n=!0),!(this instanceof gt)){if(n&&"<"!=t.charAt(0))throw mr("nosel");return new gt(t)}if(n){n=e;var r;t=(r=yr.exec(t))?[n.createElement(r[1])]:(r=pt(t,n))?r.childNodes:[]}At(this,t)}function vt(t){return t.cloneNode(!0)}function mt(t,e){if(e||bt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;r<i;r++)bt(n[r])}function yt(t,e,n,r){if(_(r))throw mr("offargs");var i=(r=_t(t))&&r.events,s=r&&r.handle;if(s)if(e)o(e.split(" "),function(e){if(_(n)){var r=i[e];if(F(r||[],n),r&&0<r.length)return}t.removeEventListener(e,s,!1),delete i[e]});else for(e in i)"$destroy"!==e&&t.removeEventListener(e,s,!1),delete i[e]}function bt(t,e){var r=t.ng339,i=r&&fr[r];i&&(e?delete i.data[e]:(i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),yt(t)),delete fr[r],t.ng339=n))}function _t(t,e){var r=t.ng339,r=r&&fr[r];return e&&!r&&(t.ng339=r=++dr,r=fr[r]={events:{},data:{},handle:n}),r}function wt(t,e,n){if(dt(t)){var r=_(n),i=!r&&e&&!w(e),o=!e;if(t=(t=_t(t,!i))&&t.data,r)t[e]=n;else{if(o)return t;if(i)return t&&t[e];h(t,e)}}}function St(t,e){return!!t.getAttribute&&-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" ")}function xt(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",nr((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+nr(e)+" "," ")))})}function Et(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=nr(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",nr(n))}}function At(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;r<n;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function Ct(t,e){return Rt(t,"$"+(e||"ngController")+"Controller")}function Rt(t,e,n){for(9==t.nodeType&&(t=t.documentElement),e=tr(e)?e:[e];t;){for(var r=0,i=e.length;r<i;r++)if(_(n=Ln.data(t,e[r])))return n;t=t.parentNode||11===t.nodeType&&t.host}}function Nt(t){for(mt(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ot(t,e){e||mt(t);var n=t.parentNode;n&&n.removeChild(t)}function Tt(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):Ln(n).on("load",e)}function kt(t,e){var n=Er[e.toLowerCase()];return n&&Ar[P(t)]&&n}function It(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(b(n.immediatePropagationStopped)){var s=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),s&&s.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped},1<o&&(i=$(i));for(var a=0;a<o;a++)n.isImmediatePropagationStopped()||i[a].call(t,n)}};return n.elem=t,n}function Pt(){this.$get=function(){return h(gt,{hasClass:function(t,e){return t.attr&&(t=t[0]),St(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),Et(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),xt(t,e)}})}}function Ft(t,e){var n=t&&t.$$hashKey;return n?("function"==typeof n&&(n=t.$$hashKey()),n):(n=typeof t,n="function"==n||"object"==n&&null!==t?t.$$hashKey=n+":"+(e||u)():n+":"+t)}function Dt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function $t(t){return(t=t.toString().replace(kr,"").match(Nr))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function jt(t,e){function r(t){return function(e,n){return w(e)?void o(e,a(t)):t(e,n)}}function i(t,e){if(st(t,"service"),(C(e)||tr(e))&&(e=g.instantiate(e)),!e.$get)throw Ir("pget",t);return p[t+"Provider"]=e}function s(t,e){return function(){var n=y.invoke(e,this);if(b(n))throw Ir("undef",t);return n}}function u(t,e,n){return i(t,{$get:!1!==n?s(t,e):e})}function c(t){it(b(t)||tr(t),"modulesToLoad","not an array");var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;e<n;e++){var r=t[e],i=g.get(r[0]);i[r[1]].apply(i,r[2])}}if(!d.get(t)){d.put(t,!0);try{x(t)?(e=Bn(t),n=n.concat(c(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):C(t)?n.push(g.invoke(t)):tr(t)?n.push(g.invoke(t)):ot(t,"module")}catch(i){throw tr(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ir("modulerr",t,i.stack||i.message||i)}}}),n}function l(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===h)throw Ir("cdep",e+" <- "+f.join(" <- "));return t[e]}try{return f.unshift(e),t[e]=h,t[e]=n(e,r)}catch(i){throw t[e]===h&&delete t[e],i}finally{f.shift()}}function i(t,n,i,o){"string"==typeof i&&(o=i,i=null);var s,a,u,c=[],l=jt.$$annotate(t,e,o);for(a=0,s=l.length;a<s;a++){if(u=l[a],"string"!=typeof u)throw Ir("itkn",u);c.push(i&&i.hasOwnProperty(u)?i[u]:r(u,o))}return tr(t)&&(t=t[s]),t.apply(n,c)}return{invoke:i,instantiate:function(t,e,n){var r=Object.create((tr(t)?t[t.length-1]:t).prototype||null);return t=i(t,r,e,n),w(t)||C(t)?t:r},get:r,annotate:jt.$$annotate,has:function(e){return p.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}e=!0===e;var h={},f=[],d=new Dt([],(!0)),p={$provide:{provider:r(i),factory:r(u),service:r(function(t,e){return u(t,["$injector",function(t){return t.instantiate(e)}])}),value:r(function(t,e){return u(t,m(e),!1)}),constant:r(function(t,e){st(t,"constant"),p[t]=e,v[t]=e}),decorator:function(t,e){var n=g.get(t+"Provider"),r=n.$get;n.$get=function(){var t=y.invoke(r,n);return y.invoke(e,null,{$delegate:t})}}}},g=p.$injector=l(p,function(t,e){throw Gn.isString(e)&&f.push(e),Ir("unpr",f.join(" <- "))}),v={},y=v.$injector=l(v,function(t,e){var r=g.get(t+"Provider",e);return y.invoke(r.$get,r,n,t)});return o(c(t),function(t){t&&y.invoke(t)}),y}function Lt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function i(t){var e=null;return Array.prototype.some.call(t,function(t){if("a"===P(t))return e=t,!0}),e}function o(t){if(t){t.scrollIntoView();var n;n=s.yOffset,C(n)?n=n():k(n)?(n=n[0],n="fixed"!==e.getComputedStyle(n).position?0:n.getBoundingClientRect().bottom):E(n)||(n=0),n&&(t=t.getBoundingClientRect().top,e.scrollBy(0,t-n))}else e.scrollTo(0,0)}function s(t){t=x(t)?t:n.hash();var e;t?(e=a.getElementById(t))?o(e):(e=i(a.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var a=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||Tt(function(){r.$evalAsync(s)})}),s}]}function Mt(t,e){return t||e?t?e?(tr(t)&&(t=t.join(" ")),tr(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function Bt(t){x(t)&&(t=t.split(" "));var e=ct();return o(t,function(t){t.length&&(e[t]=!0)}),e}function Ht(t){return w(t)?t:{}}function Ut(t,e,n,r){function i(t){try{t.apply(null,Jn.call(arguments,1))}finally{if(v--,0===v)for(;m.length;)try{m.pop()()}catch(e){n.error(e)}}}function s(){x=null,a(),u()}function a(){t:{try{y=h.state;break t}catch(t){}y=void 0}y=b(y)?null:y,j(y,C)&&(y=C),C=y}function u(){w===c.url()&&_===y||(w=c.url(),_=y,o(E,function(t){t(c.url(),y)}))}var c=this,l=t.location,h=t.history,f=t.setTimeout,d=t.clearTimeout,p={};c.isMock=!1;var v=0,m=[];c.$$completeOutstandingRequest=i,c.$$incOutstandingRequestCount=function(){v++},c.notifyWhenNoOutstandingRequests=function(t){0===v?t():m.push(t)};var y,_,w=l.href,S=e.find("base"),x=null;a(),_=y,c.url=function(e,n,i){if(b(i)&&(i=null),l!==t.location&&(l=t.location),h!==t.history&&(h=t.history),e){var o=_===i;if(w===e&&(!r.history||o))return c;var s=w&&ve(w)===ve(e);return w=e,_=i,!r.history||s&&o?(s&&!x||(x=e),n?l.replace(e):s?(n=l,i=e.indexOf("#"),i=-1===i?"":e.substr(i),n.hash=i):l.href=e,l.href!==e&&(x=e)):(h[n?"replaceState":"pushState"](i,"",e),a(),_=y),c}return x||l.href.replace(/%27/g,"'")},c.state=function(){return y};var E=[],A=!1,C=null;c.onUrlChange=function(e){return A||(r.history&&Ln(t).on("popstate",s),Ln(t).on("hashchange",s),A=!0),E.push(e),e},c.$$applicationDestroyed=function(){Ln(t).off("hashchange popstate",s)},c.$$checkUrlChange=u,c.baseHref=function(){var t=S.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""},c.defer=function(t,e){var n;return v++,n=f(function(){delete p[n],i(t)},e||0),p[n]=!0,n},c.defer.cancel=function(t){return!!p[t]&&(delete p[t],d(t),i(g),!0)}}function Kt(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new Ut(t,r,e,n)}]}function qt(){this.$get=function(){function t(t,n){function i(t){t!=f&&(d?d==t&&(d=t.n):d=t,
o(t.n,t.p),o(t,f),f=t,f.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid",t);var s=0,a=h({},n,{id:t}),u={},c=n&&n.capacity||Number.MAX_VALUE,l={},f=null,d=null;return e[t]={put:function(t,e){if(!b(e)){if(c<Number.MAX_VALUE){var n=l[t]||(l[t]={key:t});i(n)}return t in u||s++,u[t]=e,s>c&&this.remove(d.key),e}},get:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=l[t];if(!e)return;e==f&&(f=e.p),e==d&&(d=e.n),o(e.n,e.p),delete l[t]}delete u[t],s--},removeAll:function(){u={},s=0,l={},f=d=null},destroy:function(){l=a=u=null,delete e[t]},info:function(){return h({},a,{size:s})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function Jt(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Vt(t,r){function i(t,e,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(t,function(t,o){var s=t.match(r);if(!s)throw Lr("iscp",e,o,t,n?"controller bindings definition":"isolate scope definition");i[o]={mode:s[1][0],collection:"*"===s[2],optional:"?"===s[3],attrName:s[4]||o}}),i}function s(t){var e=t.charAt(0);if(!e||e!==Un(e))throw Lr("baddir",t);if(t!==t.trim())throw Lr("baddir",t)}var u={},c=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,l=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=I("ngSrc,ngSrcset,src,srcset"),d=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,y=/^(on[a-z]+|formaction)$/;this.directive=function E(e,n){return st(e,"directive"),x(e)?(s(e),it(n,"directiveFactory"),u.hasOwnProperty(e)||(u[e]=[],t.factory(e+"Directive",["$injector","$exceptionHandler",function(t,n){var r=[];return o(u[e],function(o,s){try{var a=t.invoke(o);C(a)?a={compile:m(a)}:!a.compile&&a.link&&(a.compile=m(a.link)),a.priority=a.priority||0,a.index=s,a.name=a.name||e,a.require=a.require||a.controller&&a.name,a.restrict=a.restrict||"EA";var u=a,c=a,l=a.name,h={isolateScope:null,bindToController:null};if(w(c.scope)&&(!0===c.bindToController?(h.bindToController=i(c.scope,l,!0),h.isolateScope={}):h.isolateScope=i(c.scope,l,!1)),w(c.bindToController)&&(h.bindToController=i(c.bindToController,l,!0)),w(h.bindToController)){var f=c.controller,d=c.controllerAs;if(!f)throw Lr("noctrl",l);var p;t:if(d&&x(d))p=d;else{if(x(f)){var g=Hr.exec(f);if(g){p=g[3];break t}}p=void 0}if(!p)throw Lr("noident",l)}var v=u.$$bindings=h;w(v.isolateScope)&&(a.$$isolateBindings=v.isolateScope),a.$$moduleName=o.$$moduleName,r.push(a)}catch(y){n(y)}}),r}])),u[e].push(n)):o(e,a(E)),this},this.aHrefSanitizationWhitelist=function(t){return _(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return _(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(t){return _(t)?(S=t,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,r,i,s,a,m,_,E,A,R,N){function T(t,e){try{t.addClass(e)}catch(n){}}function k(t,e,n,r,i){t instanceof Ln||(t=Ln(t)),o(t,function(e,n){e.nodeType==lr&&e.nodeValue.match(/\S+/)&&(t[n]=Ln(e).wrap("<span></span>").parent()[0])});var s=I(t,e,t,n,r,i);k.$$addScopeClass(t);var a=null;return function(e,n,r){it(e,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers;if(r=r.futureParentElement,i&&i.$$boundTransclude&&(i=i.$$boundTransclude),a||(a=(r=r&&r[0])&&"foreignobject"!==P(r)&&r.toString().match(/SVG/)?"svg":"html"),r="html"!==a?Ln(Y(a,Ln("<div>").append(t).html())):n?xr.clone.call(t):t,o)for(var u in o)r.data("$"+u+"Controller",o[u].instance);return k.$$addScopeInfo(r,e),n&&n(r,e),s&&s(e,r,r,i),r}}function I(t,e,r,i,o,s){function a(t,r,i,o){var s,a,u,c,l,h,p;if(f)for(p=Array(r.length),c=0;c<d.length;c+=3)s=d[c],p[s]=r[s];else p=r;for(c=0,l=d.length;c<l;)a=p[d[c++]],r=d[c++],s=d[c++],r?(r.scope?(u=t.$new(),k.$$addScopeInfo(Ln(a),u),(h=r.$$destroyBindings)&&(r.$$destroyBindings=null,u.$on("$destroyed",h))):u=t,h=r.transcludeOnThisElement?D(t,r.transclude,o):!r.templateOnThisElement&&o?o:!o&&e?D(t,e):null,r(s,u,a,i,h,r)):s&&s(t,a.childNodes,n,o)}for(var u,c,l,h,f,d=[],p=0;p<t.length;p++)u=new ot,c=$(t[p],[],u,0===p?i:n,o),(s=c.length?B(c,t[p],u,e,r,null,[],[],s):null)&&s.scope&&k.$$addScopeClass(u.$$element),u=s&&s.terminal||!(l=t[p].childNodes)||!l.length?null:I(l,s?(s.transcludeOnThisElement||!s.templateOnThisElement)&&s.transclude:e),(s||u)&&(d.push(p,s,u),h=!0,f=f||s),s=null;return h?a:null}function D(t,e,n){return function(r,i,o,s,a){return r||(r=t.$new(!1,a),r.$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:s})}}function $(t,e,n,r,i){var o,s=n.$attr;switch(t.nodeType){case cr:U(e,zt(P(t)),"E",r,i);for(var a,u,h,f=t.attributes,d=0,p=f&&f.length;d<p;d++){var g=!1,v=!1;a=f[d],o=a.name,u=nr(a.value),a=zt(o),(h=lt.test(a))&&(o=o.replace(Mr,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var m=a.replace(/(Start|End)$/,"");K(m)&&a===m+"Start"&&(g=o,v=o.substr(0,o.length-5)+"end",o=o.substr(0,o.length-6)),a=zt(o.toLowerCase()),s[a]=o,!h&&n.hasOwnProperty(a)||(n[a]=u,kt(t,a)&&(n[a]=!0)),Q(t,e,u,a,h),U(e,a,"A",r,i,g,v)}if(t=t.className,w(t)&&(t=t.animVal),x(t)&&""!==t)for(;o=l.exec(t);)a=zt(o[2]),U(e,a,"C",r,i)&&(n[a]=nr(o[3])),t=t.substr(o.index+o[0].length);break;case lr:if(11===jn)for(;t.parentNode&&t.nextSibling&&t.nextSibling.nodeType===lr;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);W(e,t.nodeValue);break;case 8:try{(o=c.exec(t.nodeValue))&&(a=zt(o[1]),U(e,a,"M",r,i)&&(n[a]=nr(o[2])))}catch(y){}}return e.sort(z),e}function L(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw Lr("uterdir",e,n);t.nodeType==cr&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(0<i)}else r.push(t);return Ln(r)}function M(t,e,n){return function(r,i,o,s,a){return i=L(i[0],e,n),t(r,i,o,s,a)}}function B(t,r,o,s,a,u,c,l,h){function f(t,e,n,r){t&&(n&&(t=M(t,n,r)),t.require=y.require,t.directiveName=b,(N===y||y.$$isolateScope)&&(t=tt(t,{isolateScope:!0})),c.push(t)),e&&(n&&(e=M(e,n,r)),e.require=y.require,e.directiveName=b,(N===y||y.$$isolateScope)&&(e=tt(e,{isolateScope:!0})),l.push(e))}function p(t,e,n,r){var i;if(x(e)){var o=e.match(d);e=e.substring(o[0].length);var s=o[1]||o[3],o="?"===o[2];if("^^"===s?n=n.parent():i=(i=r&&r[e])&&i.instance,i||(r="$"+e+"Controller",i=s?n.inheritedData(r):n.data(r)),!i&&!o)throw Lr("ctreq",e,t)}else if(tr(e))for(i=[],s=0,o=e.length;s<o;s++)i[s]=p(t,e[s],n,r);return i||null}function g(t,e,n,r,i,o){var s,a=ct();for(s in r){var u=r[s],c={$scope:u===N||u.$$isolateScope?i:o,$element:t,$attrs:e,$transclude:n},l=u.controller;"@"==l&&(l=e[u.name]),c=m(l,c,!0,u.controllerAs),a[u.name]=c,D||t.data("$"+u.name+"Controller",c.instance)}return a}function v(t,e,i,s,a,u){function h(t,e,r){var i;return O(t)||(r=e,e=t,t=n),D&&(i=y),r||(r=D?_.parent():_),a(t,e,i,r,E)}var f,d,v,m,y,b,_;if(r===i?(s=o,_=o.$$element):(_=Ln(i),s=new ot(_,o)),N&&(m=e.$new(!0)),a&&(b=h,b.$$boundTransclude=a),R&&(y=g(_,s,b,R,m,e)),N&&(k.$$addScopeInfo(_,m,!0,!(T&&(T===N||T===N.$$originalDirective))),k.$$addScopeClass(_,!0),m.$$isolateBindings=N.$$isolateBindings,rt(e,s,m,m.$$isolateBindings,N,m)),y){var w,S=N||A;S&&y[S.name]&&(d=S.$$bindings.bindToController,(v=y[S.name])&&v.identifier&&d&&(w=v,u.$$destroyBindings=rt(e,s,v.instance,d,S)));for(f in y){v=y[f];var x=v();x!==v.instance&&(v.instance=x,_.data("$"+f+"Controller",x),v===w&&(u.$$destroyBindings(),u.$$destroyBindings=rt(e,s,x,d,S)))}}for(f=0,u=c.length;f<u;f++)d=c[f],et(d,d.isolateScope?m:e,_,s,d.require&&p(d.directiveName,d.require,_,y),b);var E=e;for(N&&(N.template||null===N.templateUrl)&&(E=m),t&&t(E,i.childNodes,n,a),f=l.length-1;0<=f;f--)d=l[f],et(d,d.isolateScope?m:e,_,s,d.require&&p(d.directiveName,d.require,_,y),b)}h=h||{};for(var y,b,_,S,E=-Number.MAX_VALUE,A=h.newScopeDirective,R=h.controllerDirectives,N=h.newIsolateScopeDirective,T=h.templateDirective,I=h.nonTlbTranscludeDirective,P=!1,F=!1,D=h.hasElementTranscludeDirective,j=o.$$element=Ln(r),B=s,U=0,K=t.length;U<K;U++){y=t[U];var z=y.$$start,W=y.$$end;if(z&&(j=L(r,z,W)),_=n,E>y.priority)break;if((_=y.scope)&&(y.templateUrl||(w(_)?(X("new/isolated scope",N||A,y,j),N=y):X("new/isolated scope",N,y,j)),A=A||y),b=y.name,!y.templateUrl&&y.controller&&(_=y.controller,R=R||ct(),X("'"+b+"' controller",R[b],y,j),R[b]=y),(_=y.transclude)&&(P=!0,y.$$tlb||(X("transclusion",I,y,j),I=y),"element"==_?(D=!0,E=y.priority,_=j,j=o.$$element=Ln(e.createComment(" "+b+": "+o[b]+" ")),r=j[0],Z(a,Jn.call(_,0),r),B=k(_,s,E,u&&u.name,{nonTlbTranscludeDirective:I})):(_=Ln(vt(r)).contents(),j.empty(),B=k(_,s))),y.template)if(F=!0,X("template",T,y,j),T=y,_=C(y.template)?y.template(j,o):y.template,_=ut(_),y.replace){if(u=y,_=br.test(_)?Wt(Y(y.templateNamespace,nr(_))):[],r=_[0],1!=_.length||r.nodeType!==cr)throw Lr("tplrt",b,"");Z(a,j,r),K={$attr:{}},_=$(r,[],K);var G=t.splice(U+1,t.length-(U+1));N&&H(_),t=t.concat(_).concat(G),q(o,K),K=t.length}else j.html(_);if(y.templateUrl)F=!0,X("template",T,y,j),T=y,y.replace&&(u=y),v=V(t.splice(U,t.length-U),j,o,a,P&&B,c,l,{controllerDirectives:R,newScopeDirective:A!==y&&A,newIsolateScopeDirective:N,templateDirective:T,nonTlbTranscludeDirective:I}),K=t.length;else if(y.compile)try{S=y.compile(j,o,B),C(S)?f(null,S,z,W):S&&f(S.pre,S.post,z,W)}catch(Q){i(Q,J(j))}y.terminal&&(v.terminal=!0,E=Math.max(E,y.priority))}return v.scope=A&&!0===A.scope,v.transcludeOnThisElement=P,v.templateOnThisElement=F,v.transclude=B,h.hasElementTranscludeDirective=D,v}function H(t){for(var e=0,n=t.length;e<n;e++)t[e]=p(t[e],{$$isolateScope:!0})}function U(e,n,r,o,s,a,c){if(n===s)return null;if(s=null,u.hasOwnProperty(n)){var l;n=t.get(n+"Directive");for(var h=0,f=n.length;h<f;h++)try{l=n[h],(b(o)||o>l.priority)&&-1!=l.restrict.indexOf(r)&&(a&&(l=p(l,{$$start:a,$$end:c})),e.push(l),s=l)}catch(d){i(d)}}return s}function K(e){if(u.hasOwnProperty(e))for(var n=t.get(e+"Directive"),r=0,i=n.length;r<i;r++)if(e=n[r],e.multiElement)return!0;return!1}function q(t,e){var n=e.$attr,r=t.$attr,i=t.$$element;o(t,function(r,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,o){"class"==o?(T(i,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(i.attr("style",i.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,r[o]=n[o])})}function V(t,e,n,r,i,a,u,c){var l,h,f=[],d=e[0],g=t.shift(),v=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),m=C(g.templateUrl)?g.templateUrl(e,n):g.templateUrl,y=g.templateNamespace;return e.empty(),s(m).then(function(s){var p,b;if(s=ut(s),g.replace){if(s=br.test(s)?Wt(Y(y,nr(s))):[],p=s[0],1!=s.length||p.nodeType!==cr)throw Lr("tplrt",g.name,m);s={$attr:{}},Z(r,e,p);var _=$(p,[],s);w(g.scope)&&H(_),t=_.concat(t),q(n,s)}else p=d,e.html(s);for(t.unshift(v),l=B(t,p,n,i,e,g,a,u,c),o(r,function(t,n){t==p&&(r[n]=e[0])}),h=I(e[0].childNodes,i);f.length;){s=f.shift(),b=f.shift();var S=f.shift(),x=f.shift(),_=e[0];if(!s.$$destroyed){if(b!==d){var E=b.className;c.hasElementTranscludeDirective&&g.replace||(_=vt(p)),Z(S,Ln(b),_),T(Ln(_),E)}b=l.transcludeOnThisElement?D(s,l.transclude,x):x,l(h,s,_,r,b,l)}}f=null}),function(t,e,n,r,i){t=i,e.$$destroyed||(f?f.push(e,n,r,t):(l.transcludeOnThisElement&&(t=D(e,l.transclude,i)),l(h,e,n,r,t,l)))}}function z(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function X(t,e,n,r){function i(t){return t?" (module: "+t+")":""}if(e)throw Lr("multidir",e.name,i(e.$$moduleName),n.name,i(n.$$moduleName),t,J(r))}function W(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){t=t.parent();var e=!!t.length;return e&&k.$$addBindingClass(t),function(t,r){var i=r.parent();e||k.$$addBindingClass(i),k.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){r[0].nodeValue=t})}}})}function Y(t,n){switch(t=Un(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function G(t,e){if("srcdoc"==e)return A.HTML;var n=P(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?A.RESOURCE_URL:void 0}function Q(t,e,n,i,o){var s=G(t,i);o=f[i]||o;var a=r(n,!0,s,o);if(a){if("multiple"===i&&"select"===P(t))throw Lr("selmulti",J(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){if(e=u.$$observers||(u.$$observers=ct()),y.test(i))throw Lr("nodomevents");var c=u[i];c!==n&&(a=c&&r(c,!0,s,o),n=c),a&&(u[i]=a(t),(e[i]||(e[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(a,function(t,e){"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function Z(t,n,r){var i,o,s=n[0],a=n.length,u=s.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]==s){t[i++]=r,o=i+a-1;for(var c=t.length;i<c;i++,o++)o<c?t[i]=t[o]:delete t[i];t.length-=a-1,t.context===s&&(t.context=r);break}for(u&&u.replaceChild(r,s),t=e.createDocumentFragment(),t.appendChild(s),Ln.hasData(s)&&(Ln(r).data(Ln(s).data()),Mn?(Zn=!0,Mn.cleanData([s])):delete Ln.cache[s[Ln.expando]]),s=1,a=n.length;s<a;s++)u=n[s],Ln(u).remove(),t.appendChild(u),delete n[s];n[0]=r,n.length=1}function tt(t,e){return h(function(){return t.apply(null,arguments)},t,e)}function et(t,e,n,r,o,s){try{t(e,n,r,o,s)}catch(a){i(a,J(n))}}function rt(t,e,n,i,s,u){var c;return o(i,function(i,o){var u,l,h,f,d=i.attrName,p=i.optional;switch(i.mode){case"@":p||Kn.call(e,d)||(n[o]=e[d]=void 0),e.$observe(d,function(t){x(t)&&(n[o]=t)}),e.$$observers[d].$$scope=t,x(e[d])&&(n[o]=r(e[d])(t));break;case"=":if(!Kn.call(e,d)){if(p)break;e[d]=void 0}if(p&&!e[d])break;l=a(e[d]),f=l.literal?j:function(t,e){return t===e||t!==t&&e!==e},h=l.assign||function(){throw u=n[o]=l(t),Lr("nonassign",e[d],s.name)},u=n[o]=l(t),p=function(e){return f(e,n[o])||(f(e,u)?h(t,e=n[o]):n[o]=e),u=e},p.$stateful=!0,p=i.collection?t.$watchCollection(e[d],p):t.$watch(a(e[d],p),null,l.literal),c=c||[],c.push(p);break;case"&":if(l=e.hasOwnProperty(d)?a(e[d]):g,l===g&&p)break;n[o]=function(e){return l(t,e)}}}),i=c?function(){for(var t=0,e=c.length;t<e;++t)c[t]()}:g,u&&i!==g?(u.$on("$destroy",i),g):i}var ot=function(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;n<r;n++)i=o[n],this[i]=e[i]}else this.$attr={};this.$$element=t};ot.prototype={$normalize:zt,$addClass:function(t){t&&0<t.length&&R.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&R.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Xt(t,e);n&&n.length&&R.addClass(this.$$element,n),(n=Xt(e,t))&&n.length&&R.removeClass(this.$$element,n)},$set:function(t,e,n,r){var s=kt(this.$$element[0],t),a=Cr[t],u=t;if(s?(this.$$element.prop(t,e),r=s):a&&(this[a]=e,u=a),this[t]=e,r?this.$attr[t]=r:(r=this.$attr[t])||(this.$attr[t]=r=nt(t,"-")),s=P(this.$$element),"a"===s&&"href"===t||"img"===s&&"src"===t)this[t]=e=N(e,"src"===t);else if("img"===s&&"srcset"===t){for(var s="",a=nr(e),c=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,c=/\s/.test(a)?c:/(,)/,a=a.split(c),c=Math.floor(a.length/2),l=0;l<c;l++)var h=2*l,s=s+N(nr(a[h]),!0),s=s+(" "+nr(a[h+1]));a=nr(a[2*l]).split(/\s/),s+=N(nr(a[0]),!0),2===a.length&&(s+=" "+nr(a[1])),this[t]=e=s}!1!==n&&(null===e||b(e)?this.$$element.removeAttr(r):this.$$element.attr(r,e)),(t=this.$$observers)&&o(t[u],function(t){try{t(e)}catch(n){i(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=ct()),i=r[t]||(r[t]=[]);return i.push(e),_.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(t)||b(n[t])||e(n[t])}),function(){F(i,e)}}};var st=r.startSymbol(),at=r.endSymbol(),ut="{{"==st||"}}"==at?v:function(t){return t.replace(/\{\{/g,st).replace(/}}/g,at)},lt=/^ngAttr[A-Z]/;return k.$$addBindingInfo=S?function(t,e){var n=t.data("$binding")||[];tr(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:g,k.$$addBindingClass=S?function(t){T(t,"ng-binding")}:g,k.$$addScopeInfo=S?function(t,e,n,r){t.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:g,k.$$addScopeClass=S?function(t,e){T(t,e?"ng-isolate-scope":"ng-scope")}:g,k}]}function zt(t){return ft(t.replace(Mr,""))}function Xt(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/),o=0;t:for(;o<r.length;o++){for(var s=r[o],a=0;a<i.length;a++)if(s==i[a])continue t;n+=(0<n.length?" ":"")+s}return n}function Wt(t){t=Ln(t);var e=t.length;if(1>=e)return t;for(;e--;)8===t[e].nodeType&&Vn.call(t,e,1);return t}function Yt(){var t={},e=!1;this.register=function(e,n){st(e,"controller"),w(e)?h(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(i,o){function s(t,e,n,i){if(!t||!w(t.$scope))throw r("$controller")("noscp",i,e);t.$scope[e]=n}return function(r,a,u,c){var l,f,d;if(u=!0===u,c&&x(c)&&(d=c),x(r)){if(c=r.match(Hr),!c)throw Br("ctrlfmt",r);f=c[1],d=d||c[3],r=t.hasOwnProperty(f)?t[f]:at(a.$scope,f,!0)||(e?at(o,f,!0):n),ot(r,f,!0)}return u?(u=(tr(r)?r[r.length-1]:r).prototype,l=Object.create(u||null),d&&s(a,d,l,f||r.name),h(function(){var t=i.invoke(r,l,a,f);return t!==l&&(w(t)||C(t))&&(l=t,d&&s(a,d,l,f||r.name)),l},{instance:l,identifier:d})):(l=i.instantiate(r,a,f),d&&s(a,d,l,f||r.name),l)}}]}function Gt(){this.$get=["$window",function(t){return Ln(t.document)}]}function Qt(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function Zt(t){return w(t)?A(t)?t.toISOString():H(t):t}function te(){this.$get=function(){return function(t){if(!t)return"";var e=[];return s(t,function(t,n){null===t||b(t)||(tr(t)?o(t,function(t,r){e.push(Y(n)+"="+Y(Zt(t)))}):e.push(Y(n)+"="+Y(Zt(t))))}),e.join("&")}}}function ee(){this.$get=function(){return function(t){function e(t,r,i){null===t||b(t)||(tr(t)?o(t,function(t,n){e(t,r+"["+(w(t)?n:"")+"]")}):w(t)&&!A(t)?s(t,function(t,n){e(t,r+(i?"":"[")+n+(i?"":"]"))}):n.push(Y(r)+"="+Y(Zt(t))))}if(!t)return"";var n=[];return e(t,"",!0),n.join("&")}}}function ne(t,e){if(x(t)){var n=t.replace(zr,"").trim();if(n){var r=e("Content-Type");(r=r&&0===r.indexOf(Kr))||(r=(r=n.match(Jr))&&Vr[r[0]].test(n)),r&&(t=U(n))}}return t}function re(t){var e,n=ct();return x(t)?o(t.split("\n"),function(t){e=t.indexOf(":");var r=Un(nr(t.substr(0,e)));t=nr(t.substr(e+1)),r&&(n[r]=n[r]?n[r]+", "+t:t)}):w(t)&&o(t,function(t,e){var r=Un(e),i=nr(t);r&&(n[r]=n[r]?n[r]+", "+i:i)}),n}function ie(t){var e;return function(n){return e||(e=re(t)),n?(n=e[Un(n)],void 0===n&&(n=null),n):e}}function oe(t,e,n,r){return C(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function se(){var t=this.defaults={transformResponse:[ne],transformRequest:[function(t){return w(t)&&"[object File]"!==Xn.call(t)&&"[object Blob]"!==Xn.call(t)&&"[object FormData]"!==Xn.call(t)?H(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:$(qr),put:$(qr),patch:$(qr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},e=!1;this.useApplyAsync=function(t){return _(t)?(e=!!t,this):e};var i=!0;this.useLegacyPromiseExtensions=function(t){return _(t)?(i=!!t,this):i};var s=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(a,u,c,l,f,d){function p(e){function s(t){var e=h({},t);return e.data=t.data?oe(t.data,t.headers,t.status,u.transformResponse):t.data,t=t.status,200<=t&&300>t?e:f.reject(e)}function a(t,e){var n,r={};return o(t,function(t,i){C(t)?(n=t(e),null!=n&&(r[i]=n)):r[i]=t}),r}if(!Gn.isObject(e))throw r("$http")("badreq",e);var u=h({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse,paramSerializer:t.paramSerializer},e);u.headers=function(e){var n,r,i,o=t.headers,s=h({},e.headers),o=h({},o.common,o[Un(e.method)]);t:for(n in o){r=Un(n);for(i in s)if(Un(i)===r)continue t;s[n]=o[n]}return a(s,$(e))}(e),u.method=qn(u.method),u.paramSerializer=x(u.paramSerializer)?d.get(u.paramSerializer):u.paramSerializer;var c=[function(e){var r=e.headers,i=oe(e.data,ie(r),n,e.transformRequest);return b(i)&&o(r,function(t,e){"content-type"===Un(e)&&delete r[e]}),b(e.withCredentials)&&!b(t.withCredentials)&&(e.withCredentials=t.withCredentials),g(e,i).then(s,s)},n],l=f.when(u);for(o(y,function(t){(t.request||t.requestError)&&c.unshift(t.request,t.requestError),(t.response||t.responseError)&&c.push(t.response,t.responseError)});c.length;){e=c.shift();var p=c.shift(),l=l.then(e,p)}return i?(l.success=function(t){return ot(t,"fn"),l.then(function(e){t(e.data,e.status,e.headers,u)}),l},l.error=function(t){return ot(t,"fn"),l.then(null,function(e){t(e.data,e.status,e.headers,u)}),l}):(l.success=Wr("success"),l.error=Wr("error")),l}function g(r,i){function o(t,n,r,i){function o(){s(n,t,r,i)}d&&(200<=t&&300>t?d.put(E,[t,n,re(r),i]):d.remove(E)),e?l.$applyAsync(o):(o(),l.$$phase||l.$apply())}function s(t,e,n,i){e=-1<=e?e:0,(200<=e&&300>e?y.resolve:y.reject)({data:t,status:e,headers:ie(n),config:r,statusText:i})}function c(t){s(t.data,t.status,$(t.headers()),t.statusText)}function h(){var t=p.pendingRequests.indexOf(r);-1!==t&&p.pendingRequests.splice(t,1)}var d,g,y=f.defer(),S=y.promise,x=r.headers,E=v(r.url,r.paramSerializer(r.params));return p.pendingRequests.push(r),S.then(h,h),!r.cache&&!t.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||(d=w(r.cache)?r.cache:w(t.cache)?t.cache:m),d&&(g=d.get(E),_(g)?g&&C(g.then)?g.then(c,c):tr(g)?s(g[1],g[0],$(g[2]),g[3]):s(g,200,{},"OK"):d.put(E,S)),b(g)&&((g=rn(r.url)?u()[r.xsrfCookieName||t.xsrfCookieName]:n)&&(x[r.xsrfHeaderName||t.xsrfHeaderName]=g),a(r.method,E,i,o,x,r.timeout,r.withCredentials,r.responseType)),S}function v(t,e){return 0<e.length&&(t+=(-1==t.indexOf("?")?"?":"&")+e),t}var m=c("$http");t.paramSerializer=x(t.paramSerializer)?d.get(t.paramSerializer):t.paramSerializer;var y=[];return o(s,function(t){y.unshift(x(t)?d.get(t):d.invoke(t))}),p.pendingRequests=[],function(t){o(arguments,function(t){p[t]=function(e,n){return p(h({},n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){o(arguments,function(t){p[t]=function(e,n,r){return p(h({},r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),p.defaults=t,p}]}function ae(){this.$get=function(){return function(){return new t.XMLHttpRequest}}}function ue(){this.$get=["$browser","$window","$document","$xhrFactory",function(t,e,n,r){return ce(t,r,t.defer,e.angular.callbacks,n[0])}]}function ce(t,e,n,r,i){function s(t,e,n){var o=i.createElement("script"),s=null;return o.type="text/javascript",o.src=t,o.async=!0,s=function(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",s,!1),i.body.removeChild(o),o=null;var a=-1,u="unknown";t&&("load"!==t.type||r[e].called||(t={type:"error"}),u=t.type,a="error"===t.type?404:200),n&&n(a,u)},o.addEventListener("load",s,!1),o.addEventListener("error",s,!1),i.body.appendChild(o),s}return function(i,a,u,c,l,h,f,d){function p(){y&&y(),w&&w.abort()}function v(e,r,i,o,s){_(x)&&n.cancel(x),y=w=null,e(r,i,o,s),t.$$completeOutstandingRequest(g)}if(t.$$incOutstandingRequestCount(),a=a||t.url(),"jsonp"==Un(i)){var m="_"+(r.counter++).toString(36);r[m]=function(t){r[m].data=t,r[m].called=!0};var y=s(a.replace("JSON_CALLBACK","angular.callbacks."+m),m,function(t,e){v(c,t,r[m].data,"",e),r[m]=g})}else{var w=e(i,a);if(w.open(i,a,!0),o(l,function(t,e){_(t)&&w.setRequestHeader(e,t)}),w.onload=function(){var t=w.statusText||"",e="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=e?200:"file"==nn(a).protocol?404:0),v(c,n,e,w.getAllResponseHeaders(),t)},i=function(){v(c,-1,null,null,"")},w.onerror=i,w.onabort=i,f&&(w.withCredentials=!0),d)try{w.responseType=d}catch(S){if("json"!==d)throw S}w.send(b(u)?null:u)}if(0<h)var x=n(p,h);else h&&C(h.then)&&h.then(p)}}function le(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function s(n){return n.replace(l,t).replace(f,e)}function a(o,a,l,f){function d(t){try{var e=t;t=l?i.getTrusted(l,e):i.valueOf(e);var n;if(f&&!_(t))n=t;else if(null==t)n="";else{switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=H(t)}n=t}return n}catch(s){r(Yr.interr(o,s))}}f=!!f;for(var p,g,v=0,m=[],y=[],w=o.length,S=[],x=[];v<w;){if(-1==(p=o.indexOf(t,v))||-1==(g=o.indexOf(e,p+u))){v!==w&&S.push(s(o.substring(v)));break}v!==p&&S.push(s(o.substring(v,p))),v=o.substring(p+u,g),m.push(v),y.push(n(v,d)),v=g+c,x.push(S.length),S.push("")}if(l&&1<S.length&&Yr.throwNoconcat(o),!a||m.length){var E=function(t){for(var e=0,n=m.length;e<n;e++){if(f&&b(t[e]))return;S[x[e]]=t[e]}return S.join("")};return h(function(t){var e=0,n=m.length,i=Array(n);try{for(;e<n;e++)i[e]=y[e](t);return E(i)}catch(s){r(Yr.interr(o,s))}},{exp:o,expressions:m,$$watchDelegate:function(t,e){var n;return t.$watchGroup(y,function(r,i){var o=E(r);C(e)&&e.call(this,o,r!==i?n:o,t),n=o})}})}}var u=t.length,c=e.length,l=new RegExp(t.replace(/./g,o),"g"),f=new RegExp(e.replace(/./g,o),"g");return a.startSymbol=function(){return t},a.endSymbol=function(){return e},a}]}function he(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,r){function i(i,s,a,u){var c=4<arguments.length,l=c?Jn.call(arguments,4):[],h=e.setInterval,f=e.clearInterval,d=0,p=_(u)&&!u,g=(p?r:n).defer(),v=g.promise;return a=_(a)?a:0,v.then(null,null,c?function(){i.apply(null,l)}:i),v.$$intervalId=h(function(){g.notify(d++),0<a&&d>=a&&(g.resolve(d),f(v.$$intervalId),delete o[v.$$intervalId]),p||t.$apply()},s),o[v.$$intervalId]=g,v}var o={};return i.cancel=function(t){return!!(t&&t.$$intervalId in o)&&(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0)},i}]}function fe(t){t=t.split("/");for(var e=t.length;e--;)t[e]=W(t[e]);return t.join("/")}function de(t,e){var n=nn(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=d(n.port)||Qr[n.protocol]||null}function pe(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=nn(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=z(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ge(t,e){if(0===e.indexOf(t))return e.substr(t.length)}function ve(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function me(t){return t.replace(/(#.+)|#$/,"$1")}function ye(t,e,n){this.$$html5=!0,n=n||"",de(t,this),this.$$parse=function(t){var n=ge(e,t);if(!x(n))throw Zr("ipthprfx",t,e);pe(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=X(this.$$search),n=this.$$hash?"#"+W(this.$$hash):"";this.$$url=fe(this.$$path)+(t?"?"+t:"")+n,this.$$absUrl=e+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s;return _(o=ge(t,r))?(s=o,s=_(o=ge(n,o))?e+(ge("/",o)||o):t+s):_(o=ge(e,r))?s=e+o:e==r+"/"&&(s=e),s&&this.$$parse(s),!!s}}function be(t,e,n){de(t,this),this.$$parse=function(r){var i,o=ge(t,r)||ge(e,r);b(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",b(o)&&(t=r,this.replace())):(i=ge(n,o),b(i)&&(i=o)),pe(i,this),r=this.$$path;var o=t,s=/^\/[A-Z]:(\/.*)/;0===i.indexOf(o)&&(i=i.replace(o,"")),s.exec(i)||(r=(i=s.exec(r))?i[1]:r),this.$$path=r,this.$$compose()},this.$$compose=function(){var e=X(this.$$search),r=this.$$hash?"#"+W(this.$$hash):"";this.$$url=fe(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return ve(t)==ve(e)&&(this.$$parse(e),!0)}}function _e(t,e,n){this.$$html5=!0,be.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,s;return t==ve(r)?o=r:(s=ge(e,r))?o=t+n+s:e===r+"/"&&(o=e),o&&this.$$parse(o),!!o},this.$$compose=function(){var e=X(this.$$search),r=this.$$hash?"#"+W(this.$$hash):"";this.$$url=fe(this.$$path)+(e?"?"+e:"")+r,this.$$absUrl=t+n+this.$$url}}function we(t){return function(){return this[t]}}function Se(t,e){return function(n){return b(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function xe(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return _(e)?(t=e,this):t},this.html5Mode=function(t){return T(t)?(e.enabled=t,this):w(t)?(T(t.enabled)&&(e.enabled=t.enabled),T(t.requireBase)&&(e.requireBase=t.requireBase),T(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,s){function a(t,e,n){var i=c.url(),o=c.$$state;try{r.url(t,e,n),c.$$state=r.state()}catch(s){throw c.url(i),c.$$state=o,s}}function u(t,e){n.$broadcast("$locationChangeSuccess",c.absUrl(),t,c.$$state,e)}var c,l;l=r.baseHref();var h,f=r.url();if(e.enabled){if(!l&&e.requireBase)throw Zr("nobase");h=f.substring(0,f.indexOf("/",f.indexOf("//")+2))+(l||"/"),l=i.history?ye:_e}else h=ve(f),l=be;var d=h.substr(0,ve(h).lastIndexOf("/")+1);c=new l(h,d,"#"+t),c.$$parseLinkUrl(f,f),c.$$state=r.state();var p=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=Ln(t.target);"a"!==P(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var a=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");w(a)&&"[object SVGAnimatedString]"===a.toString()&&(a=nn(a.animVal).href),p.test(a)||!a||i.attr("target")||t.isDefaultPrevented()||!c.$$parseLinkUrl(a,u)||(t.preventDefault(),c.absUrl()!=r.url()&&(n.$apply(),s.angular["ff-684208-preventDefault"]=!0))}}),me(c.absUrl())!=me(f)&&r.url(c.absUrl(),!0);var g=!0;return r.onUrlChange(function(t,e){b(ge(d,t))?s.location.href=t:(n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;c.$$parse(t),c.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,c.absUrl()===t&&(r?(c.$$parse(i),c.$$state=o,a(i,!1,o)):(g=!1,u(i,o)))}),n.$$phase||n.$digest())}),n.$watch(function(){var t=me(r.url()),e=me(c.absUrl()),o=r.state(),s=c.$$replace,l=t!==e||c.$$html5&&i.history&&o!==c.$$state;(g||l)&&(g=!1,n.$evalAsync(function(){var e=c.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,c.$$state,o).defaultPrevented;c.absUrl()===e&&(r?(c.$$parse(t),c.$$state=o):(l&&a(e,s,o===c.$$state?null:c.$$state),u(t,o)))})),c.$$replace=!1}),c}]}function Ee(){var t=!0,e=this;this.debugEnabled=function(e){return _(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||g;t=!1;try{t=!!i.apply}catch(s){}return t?function(){var t=[];return o(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function Ae(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw ei("isecfld",e);return t}function Ce(t,e){if(t+="",!x(t))throw ei("iseccst",e);return t}function Re(t,e){if(t){if(t.constructor===t)throw ei("isecfn",e);if(t.window===t)throw ei("isecwindow",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw ei("isecdom",e);if(t===Object)throw ei("isecobj",e)}return t}function Ne(t,e){if(t){if(t.constructor===t)throw ei("isecfn",e);if(t===ni||t===ri||t===ii)throw ei("isecff",e)}}function Oe(t,e){if(t&&(t===(0).constructor||t===(!1).constructor||t==="".constructor||t==={}.constructor||t===[].constructor||t===Function.constructor))throw ei("isecaf",e)}function Te(t,e){return"undefined"!=typeof t?t:e}function ke(t,e){return"undefined"==typeof t?e:"undefined"==typeof e?t:t+e}function Ie(t,e){var n,r;switch(t.type){case ui.Program:n=!0,o(t.body,function(t){Ie(t.expression,e),n=n&&t.expression.constant}),t.constant=n;
break;case ui.Literal:t.constant=!0,t.toWatch=[];break;case ui.UnaryExpression:Ie(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case ui.BinaryExpression:Ie(t.left,e),Ie(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case ui.LogicalExpression:Ie(t.left,e),Ie(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case ui.ConditionalExpression:Ie(t.test,e),Ie(t.alternate,e),Ie(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case ui.Identifier:t.constant=!1,t.toWatch=[t];break;case ui.MemberExpression:Ie(t.object,e),t.computed&&Ie(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case ui.CallExpression:n=!!t.filter&&!e(t.callee.name).$stateful,r=[],o(t.arguments,function(t){Ie(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=t.filter&&!e(t.callee.name).$stateful?r:[t];break;case ui.AssignmentExpression:Ie(t.left,e),Ie(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case ui.ArrayExpression:n=!0,r=[],o(t.elements,function(t){Ie(t,e),n=n&&t.constant,t.constant||r.push.apply(r,t.toWatch)}),t.constant=n,t.toWatch=r;break;case ui.ObjectExpression:n=!0,r=[],o(t.properties,function(t){Ie(t.value,e),n=n&&t.value.constant,t.value.constant||r.push.apply(r,t.value.toWatch)}),t.constant=n,t.toWatch=r;break;case ui.ThisExpression:t.constant=!1,t.toWatch=[]}}function Pe(t){if(1==t.length){t=t[0].expression;var e=t.toWatch;return 1!==e.length?e:e[0]!==t?e:n}}function Fe(t){return t.type===ui.Identifier||t.type===ui.MemberExpression}function De(t){if(1===t.body.length&&Fe(t.body[0].expression))return{type:ui.AssignmentExpression,left:t.body[0].expression,right:{type:ui.NGValueParameter},operator:"="}}function $e(t){return 0===t.body.length||1===t.body.length&&(t.body[0].expression.type===ui.Literal||t.body[0].expression.type===ui.ArrayExpression||t.body[0].expression.type===ui.ObjectExpression)}function je(t,e){this.astBuilder=t,this.$filter=e}function Le(t,e){this.astBuilder=t,this.$filter=e}function Me(t){return"constructor"==t}function Be(t){return C(t.valueOf)?t.valueOf():li.call(t)}function He(){var t=ct(),e=ct();this.$get=["$filter",function(r){function i(t,e){return null==t||null==e?t===e:("object"!=typeof t||(t=Be(t),"object"!=typeof t))&&(t===e||t!==t&&e!==e)}function s(t,e,r,o,s){var a,u=o.inputs;if(1===u.length){var c=i,u=u[0];return t.$watch(function(t){var e=u(t);return i(e,c)||(a=o(t,n,n,[e]),c=e&&Be(e)),a},e,r,s)}for(var l=[],h=[],f=0,d=u.length;f<d;f++)l[f]=i,h[f]=null;return t.$watch(function(t){for(var e=!1,r=0,s=u.length;r<s;r++){var c=u[r](t);(e||(e=!i(c,l[r])))&&(h[r]=c,l[r]=c&&Be(c))}return e&&(a=o(t,n,n,h)),a},e,r,s)}function a(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,C(e)&&e.apply(this,arguments),_(t)&&r.$$postDigest(function(){_(o)&&i()})},n)}function u(t,e,n,r){function i(t){var e=!0;return o(t,function(t){_(t)||(e=!1)}),e}var s,a;return s=t.$watch(function(t){return r(t)},function(t,n,r){a=t,C(e)&&e.call(this,t,n,r),i(t)&&r.$$postDigest(function(){i(a)&&s()})},n)}function c(t,e,n,r){var i;return i=t.$watch(function(t){return r(t)},function(t,n,r){C(e)&&e.apply(this,arguments),i()},n)}function l(t,e){if(!e)return t;var n=t.$$watchDelegate,n=n!==u&&n!==a?function(n,r,i,o){return i=t(n,r,i,o),e(i,n,r)}:function(n,r,i,o){return i=t(n,r,i,o),n=e(i,n,r),_(i)?n:i};return t.$$watchDelegate&&t.$$watchDelegate!==s?n.$$watchDelegate=t.$$watchDelegate:e.$stateful||(n.$$watchDelegate=s,n.inputs=t.inputs?t.inputs:[t]),n}var h=ir().noUnsafeEval,f={csp:h,expensiveChecks:!1},d={csp:h,expensiveChecks:!0};return function(n,i,o){var h,p,v;switch(typeof n){case"string":v=n=n.trim();var m=o?e:t;return h=m[v],h||(":"===n.charAt(0)&&":"===n.charAt(1)&&(p=!0,n=n.substring(2)),o=o?d:f,h=new ai(o),h=new ci(h,r,o).parse(n),h.constant?h.$$watchDelegate=c:p?h.$$watchDelegate=h.literal?u:a:h.inputs&&(h.$$watchDelegate=s),m[v]=h),l(h,i);case"function":return l(n,i);default:return g}}}]}function Ue(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return qe(function(e){t.$evalAsync(e)},e)}]}function Ke(){this.$get=["$browser","$exceptionHandler",function(t,e){return qe(function(e){t.defer(e)},e)}]}function qe(t,e){function i(t,e,n){function r(e){return function(n){i||(i=!0,e.call(t,n))}}var i=!1;return[r(e),r(n)]}function s(){this.$$state={status:0}}function a(t,e){return function(n){e.call(t,n)}}function u(r){!r.processScheduled&&r.pending&&(r.processScheduled=!0,t(function(){var t,i,o;o=r.pending,r.processScheduled=!1,r.pending=n;for(var s=0,a=o.length;s<a;++s){i=o[s][0],t=o[s][r.status];try{C(t)?i.resolve(t(r.value)):1===r.status?i.resolve(r.value):i.reject(r.value)}catch(u){i.reject(u),e(u)}}}))}function c(){this.promise=new s,this.resolve=a(this,this.resolve),this.reject=a(this,this.reject),this.notify=a(this,this.notify)}var l=r("$q",TypeError);h(s.prototype,{then:function(t,e,n){if(b(t)&&b(e)&&b(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),0<this.$$state.status&&u(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return d(e,!0,t)},function(e){return d(e,!1,t)},e)}}),h(c.prototype,{resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(l("qcycle",t)):this.$$resolve(t))},$$resolve:function(t){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(w(t)||C(t))&&(n=t&&t.then),C(n)?(this.promise.$$state.status=-1,n.call(t,r[0],r[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,u(this.promise.$$state))}catch(o){r[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;0>=this.promise.$$state.status&&r&&r.length&&t(function(){for(var t,i,o=0,s=r.length;o<s;o++){i=r[o][0],t=r[o][3];try{i.notify(C(t)?t(n):n)}catch(a){e(a)}}})}});var f=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},d=function(t,e,n){var r=null;try{C(n)&&(r=n())}catch(i){return f(i,!1)}return r&&C(r.then)?r.then(function(){return f(t,e)},function(t){return f(t,!1)}):f(t,e)},p=function(t,e,n,r){var i=new c;return i.resolve(t),i.promise.then(e,n,r)},g=function v(t){if(!C(t))throw l("norslvr",t);if(!(this instanceof v))return new v(t);var e=new c;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return g.defer=function(){return new c},g.reject=function(t){var e=new c;return e.reject(t),e.promise},g.when=p,g.resolve=p,g.all=function(t){var e=new c,n=0,r=tr(t)?[]:{};return o(t,function(t,i){n++,p(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise},g}function Je(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Ve(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++Qn,this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=r("$rootScope"),s=null,a=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,u,c,l){function h(t){t.currentScope.$$destroyed=!0}function f(){this.$id=++Qn,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function d(t){if(S.$$phase)throw n("inprog",S.$$phase);S.$$phase=t}function p(t,e){do t.$$watchersCount+=e;while(t=t.$parent)}function v(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function m(){}function y(){for(;A.length;)try{A.shift()()}catch(t){u(t)}a=null}function _(){null===a&&(a=l.defer(function(){S.$apply(y)}))}f.prototype={constructor:f,$new:function(e,n){var r;return n=n||this,e?(r=new f,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(e||n!=this)&&r.$on("$destroy",h),r},$watch:function(t,e,n,r){var i=c(t);if(i.$$watchDelegate)return i.$$watchDelegate(this,e,n,i,t);var o=this,a=o.$$watchers,u={fn:e,last:m,get:i,exp:r||t,eq:!!n};return s=null,C(e)||(u.fn=g),a||(a=o.$$watchers=[]),a.unshift(u),p(this,1),function(){0<=F(a,u)&&p(o,-1),s=null}},$watchGroup:function(t,e){function n(){u=!1,c?(c=!1,e(i,i,a)):e(i,r,a)}var r=Array(t.length),i=Array(t.length),s=[],a=this,u=!1,c=!0;if(!t.length){var l=!0;return a.$evalAsync(function(){l&&e(i,i,a)}),function(){l=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=a.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,a.$evalAsync(n))});s.push(o)}),function(){for(;s.length;)s.shift()()})},$watchCollection:function(t,e){function n(t){r=t;var e,n,s,a;if(!b(r)){if(w(r))if(i(r))for(o!==f&&(o=f,g=o.length=0,l++),t=r.length,g!==t&&(l++,o.length=g=t),e=0;e<t;e++)a=o[e],s=r[e],n=a!==a&&s!==s,n||a===s||(l++,o[e]=s);else{o!==d&&(o=d={},g=0,l++),t=0;for(e in r)Kn.call(r,e)&&(t++,s=r[e],a=o[e],e in o?(n=a!==a&&s!==s,n||a===s||(l++,o[e]=s)):(g++,o[e]=s,l++));if(g>t)for(e in l++,o)Kn.call(r,e)||(g--,delete o[e])}else o!==r&&(o=r,l++);return l}}n.$stateful=!0;var r,o,s,a=this,u=1<e.length,l=0,h=c(t,n),f=[],d={},p=!0,g=0;return this.$watch(h,function(){if(p?(p=!1,e(r,r,a)):e(r,s,a),u)if(w(r))if(i(r)){s=Array(r.length);for(var t=0;t<r.length;t++)s[t]=r[t]}else for(t in s={},r)Kn.call(r,t)&&(s[t]=r[t]);else s=r})},$digest:function(){var t,r,i,o,c,h,f,p,g,v=e,b=[];d("$digest"),l.$$checkUrlChange(),this===S&&null!==a&&(l.defer.cancel(a),y()),s=null;do{for(h=!1,f=this;x.length;){try{g=x.shift(),g.scope.$eval(g.expression,g.locals)}catch(_){u(_)}s=null}t:do{if(o=f.$$watchers)for(c=o.length;c--;)try{if(t=o[c])if((r=t.get(f))===(i=t.last)||(t.eq?j(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(t===s){h=!1;break t}}else h=!0,s=t,t.last=t.eq?D(r,null):r,t.fn(r,i===m?r:i,f),5>v&&(p=4-v,b[p]||(b[p]=[]),b[p].push({msg:C(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:r,oldVal:i}))}catch(w){u(w)}if(!(o=f.$$watchersCount&&f.$$childHead||f!==this&&f.$$nextSibling))for(;f!==this&&!(o=f.$$nextSibling);)f=f.$parent}while(f=o);if((h||x.length)&&!v--)throw S.$$phase=null,n("infdig",e,b)}while(h||x.length);for(S.$$phase=null;E.length;)try{E.shift()()}catch(A){u(A)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===S&&l.$$applicationDestroyed(),p(this,-this.$$watchersCount);for(var e in this.$$listenerCount)v(this,this.$$listenerCount[e],e);t&&t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t&&t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=g,this.$on=this.$watch=this.$watchGroup=function(){return g},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(t,e){return c(t)(this,e)},$evalAsync:function(t,e){S.$$phase||x.length||l.defer(function(){x.length&&S.$digest()}),x.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){E.push(t)},$apply:function(t){try{d("$apply");try{return this.$eval(t)}finally{S.$$phase=null}}catch(e){u(e)}finally{try{S.$digest()}catch(n){throw u(n),n}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&A.push(e),_()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,v(i,1,t))}},$emit:function(t,e){var n,r,i,o=[],s=this,a=!1,c={name:t,targetScope:s,stopPropagation:function(){a=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=L([c],arguments,1);do{for(n=s.$$listeners[t]||o,c.currentScope=s,r=0,i=n.length;r<i;r++)if(n[r])try{n[r].apply(null,l)}catch(h){u(h)}else n.splice(r,1),r--,i--;if(a)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=this,i={name:t,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return i;for(var o,s,a=L([i],arguments,1);n=r;){for(i.currentScope=n,r=n.$$listeners[t]||[],o=0,s=r.length;o<s;o++)if(r[o])try{r[o].apply(null,a)}catch(c){u(c)}else r.splice(o,1),o--,s--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var S=new f,x=S.$$asyncQueue=[],E=S.$$postDigestQueue=[],A=S.$$applyAsyncQueue=[];return S}]}function ze(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return _(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return _(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return i=nn(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function Xe(t){if("self"===t)return t;if(x(t)){if(-1<t.indexOf("***"))throw hi("iwcard",t);return t=rr(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(R(t))return new RegExp("^"+t.source+"$");throw hi("imatcher")}function We(t){var e=[];return _(t)&&o(t,function(t){e.push(Xe(t))}),e}function Ye(){this.SCE_CONTEXTS=fi;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=We(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=We(t)),e},this.$get=["$injector",function(n){function r(t,e){return"self"===t?rn(e):!!t.exec(e.href)}function i(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var o=function(t){throw hi("unsafe")};n.has("$sanitize")&&(o=n.get("$sanitize"));var s=i(),a={};return a[fi.HTML]=i(s),a[fi.CSS]=i(s),a[fi.URL]=i(s),a[fi.JS]=i(s),a[fi.RESOURCE_URL]=i(a[fi.URL]),{trustAs:function(t,e){var n=a.hasOwnProperty(t)?a[t]:null;if(!n)throw hi("icontext",t,e);if(null===e||b(e)||""===e)return e;if("string"!=typeof e)throw hi("itype",t);return new n(e)},getTrusted:function(n,i){if(null===i||b(i)||""===i)return i;var s=a.hasOwnProperty(n)?a[n]:null;if(s&&i instanceof s)return i.$$unwrapTrustedValue();if(n===fi.RESOURCE_URL){var u,c,s=nn(i.toString()),l=!1;for(u=0,c=t.length;u<c;u++)if(r(t[u],s)){l=!0;break}if(l)for(u=0,c=e.length;u<c;u++)if(r(e[u],s)){l=!1;break}if(l)return i;throw hi("insecurl",i.toString())}if(n===fi.HTML)return o(i);throw hi("unsafe")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function Ge(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>jn)throw hi("iequirks");var r=$(fi);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=v),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,s=r.getTrusted,a=r.trustAs;return o(fi,function(t,e){var n=Un(e);r[ft("parse_as_"+n)]=function(e){return i(t,e)},r[ft("get_trusted_"+n)]=function(e){return s(t,e)},r[ft("trust_as_"+n)]=function(e){return a(t,e)}}),r}]}function Qe(){this.$get=["$window","$document",function(t,e){var n,r={},i=d((/android (\d+)/.exec(Un((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),s=e[0]||{},a=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,c=!1,l=!1;if(u){for(var h in u)if(c=a.exec(h)){n=c[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),l=!!("animation"in u||n+"Animation"in u),!i||c&&l||(c=x(u.webkitTransition),l=x(u.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>i||o),hasEvent:function(t){if("input"===t&&11>=jn)return!1;if(b(r[t])){var e=s.createElement("div");r[t]="on"+t in e}return r[t]},csp:ir(),vendorPrefix:n,transitions:c,animations:l,android:i}}]}function Ze(){this.$get=["$templateCache","$http","$q","$sce",function(t,e,n,r){function i(o,s){i.totalPendingRequests++,x(o)&&t.get(o)||(o=r.getTrustedResourceUrl(o));var a=e.defaults&&e.defaults.transformResponse;return tr(a)?a=a.filter(function(t){return t!==ne}):a===ne&&(a=null),e.get(o,{cache:t,transformResponse:a})["finally"](function(){i.totalPendingRequests--}).then(function(e){return t.put(o,e.data),e.data},function(t){if(!s)throw Lr("tpload",o,t.status,t.statusText);return n.reject(t)})}return i.totalPendingRequests=0,i}]}function tn(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){t=t.getElementsByClassName("ng-binding");var r=[];return o(t,function(t){var i=Gn.element(t).data("$binding");i&&o(i,function(i){n?new RegExp("(^|\\s)"+rr(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!=i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=t.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function en(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,a,u){C(o)||(u=a,a=o,o=g);var c,l=Jn.call(arguments,3),h=_(u)&&!u,f=(h?r:n).defer(),d=f.promise;return c=e.defer(function(){try{f.resolve(o.apply(null,l))}catch(e){f.reject(e),i(e)}finally{delete s[d.$$timeoutId]}h||t.$apply()},a),d.$$timeoutId=c,s[c]=f,d}var s={};return o.cancel=function(t){return!!(t&&t.$$timeoutId in s)&&(s[t.$$timeoutId].reject("canceled"),delete s[t.$$timeoutId],e.defer.cancel(t.$$timeoutId))},o}]}function nn(t){return jn&&(di.setAttribute("href",t),t=di.href),di.setAttribute("href",t),{href:di.href,protocol:di.protocol?di.protocol.replace(/:$/,""):"",host:di.host,search:di.search?di.search.replace(/^\?/,""):"",hash:di.hash?di.hash.replace(/^#/,""):"",hostname:di.hostname,port:di.port,pathname:"/"===di.pathname.charAt(0)?di.pathname:"/"+di.pathname}}function rn(t){return t=x(t)?nn(t):t,t.protocol===pi.protocol&&t.host===pi.host}function on(){this.$get=m(t)}function sn(t){function e(t){try{return decodeURIComponent(t)}catch(e){return t}}var n=t[0]||{},r={},i="";return function(){var t,o,s,a,u;if(t=n.cookie||"",t!==i)for(i=t,t=i.split("; "),r={},s=0;s<t.length;s++)o=t[s],a=o.indexOf("="),0<a&&(u=e(o.substring(0,a)),b(r[u])&&(r[u]=e(o.substring(a+1))));return r}}function an(){this.$get=sn}function un(t){function e(n,r){if(w(n)){var i={};return o(n,function(t,n){i[n]=e(n,t)}),i}return t.factory(n+"Filter",r)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",dn),e("date",Sn),e("filter",cn),e("json",xn),e("limitTo",En),e("lowercase",bi),e("number",pn),e("orderBy",An),e("uppercase",_i)}function cn(){return function(t,e,n){if(!i(t)){if(null==t)return t;throw r("filter")("notarray",t)}var o;switch(fn(e)){case"function":break;case"boolean":case"null":case"number":case"string":o=!0;case"object":e=ln(e,n,o);break;default:return t}return Array.prototype.filter.call(t,e)}}function ln(t,e,n){var r=w(t)&&"$"in t;return!0===e?e=j:C(e)||(e=function(t,e){return!b(t)&&(null===t||null===e?t===e:!(w(e)||w(t)&&!y(t))&&(t=Un(""+t),e=Un(""+e),-1!==t.indexOf(e)))}),function(i){return r&&!w(i)?hn(i,t.$,e,!1):hn(i,t,e,n)}}function hn(t,e,n,r,i){var o=fn(t),s=fn(e);if("string"===s&&"!"===e.charAt(0))return!hn(t,e.substring(1),n,r);if(tr(t))return t.some(function(t){return hn(t,e,n,r)});switch(o){case"object":var a;if(r){for(a in t)if("$"!==a.charAt(0)&&hn(t[a],e,n,!0))return!0;return!i&&hn(t,e,n,!1)}if("object"===s){for(a in e)if(i=e[a],!C(i)&&!b(i)&&(o="$"===a,!hn(o?t:t[a],i,n,o,o)))return!1;return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function fn(t){return null===t?"null":typeof t}function dn(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return b(n)&&(n=e.CURRENCY_SYM),b(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:gn(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function pn(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:gn(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function gn(t,e,n,r,i){if(w(t))return"";var o=0>t;t=Math.abs(t);var s=1/0===t;if(!s&&!isFinite(t))return"";var a=t+"",u="",c=!1,l=[];if(s&&(u=""),!s&&-1!==a.indexOf("e")){var h=a.match(/([\d\.]+)e(-?)(\d+)/);h&&"-"==h[2]&&h[3]>i+1?t=0:(u=a,c=!0)}if(s||c)0<i&&1>t&&(u=t.toFixed(i),t=parseFloat(u),u=u.replace(gi,r));else{s=(a.split(gi)[1]||"").length,b(i)&&(i=Math.min(Math.max(e.minFrac,s),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var s=(""+t).split(gi),a=s[0],s=s[1]||"",h=0,f=e.lgSize,d=e.gSize;if(a.length>=f+d)for(h=a.length-f,c=0;c<h;c++)0===(h-c)%d&&0!==c&&(u+=n),u+=a.charAt(c);for(c=h;c<a.length;c++)0===(a.length-c)%f&&0!==c&&(u+=n),u+=a.charAt(c);for(;s.length<i;)s+="0";i&&"0"!==i&&(u+=r+s.substr(0,i))}return 0===t&&(o=!1),l.push(o?e.negPre:e.posPre,u,o?e.negSuf:e.posSuf),l.join("")}function vn(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function mn(t,e,n,r){return n=n||0,function(i){return i=i["get"+t](),(0<n||i>-n)&&(i+=n),0===i&&-12==n&&(i=12),vn(i,e,r)}}function yn(t,e){return function(n,r){var i=n["get"+t](),o=qn(e?"SHORT"+t:t);return r[o][i]}}function bn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function _n(t){return function(e){var n=bn(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+n,e=1+Math.round(e/6048e5),vn(e,t)}}function wn(t,e){return 0>=t.getFullYear()?e.ERAS[0]:e.ERAS[1]}function Sn(t){function e(t){var e;if(e=t.match(n)){t=new Date(0);var r=0,i=0,o=e[8]?t.setUTCFullYear:t.setFullYear,s=e[8]?t.setUTCHours:t.setHours;e[9]&&(r=d(e[9]+e[10]),i=d(e[9]+e[11])),o.call(t,d(e[1]),d(e[2])-1,d(e[3])),r=d(e[4]||0)-r,i=d(e[5]||0)-i,o=d(e[6]||0),e=Math.round(1e3*parseFloat("0."+(e[7]||0))),s.call(t,r,i,o,e)}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var s,a,u="",c=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,x(n)&&(n=yi.test(n)?d(n):e(n)),E(n)&&(n=new Date(n)),!A(n)||!isFinite(n.getTime()))return n;for(;r;)(a=mi.exec(r))?(c=L(c,a,1),r=c.pop()):(c.push(r),r=null);var l=n.getTimezoneOffset();return i&&(l=K(i,n.getTimezoneOffset()),n=q(n,i,!0)),o(c,function(e){s=vi[e],u+=s?s(n,t.DATETIME_FORMATS,l):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function xn(){return function(t,e){return b(e)&&(e=2),H(t,e)}}function En(){return function(t,e,n){return e=1/0===Math.abs(Number(e))?Number(e):d(e),isNaN(e)?t:(E(t)&&(t=t.toString()),tr(t)||x(t)?(n=!n||isNaN(n)?0:d(n),n=0>n&&n>=-t.length?t.length+n:n,0<=e?t.slice(n,n+e):0===n?t.slice(e,t.length):t.slice(Math.max(0,n+e),n)):t)}}function An(t){function e(e,n){return n=n?-1:1,e.map(function(e){var r=1,i=v;if(C(e))i=e;else if(x(e)&&("+"!=e.charAt(0)&&"-"!=e.charAt(0)||(r="-"==e.charAt(0)?-1:1,e=e.substring(1)),""!==e&&(i=t(e),i.constant)))var o=i(),i=function(t){return t[o]};return{get:i,descending:r*n}})}function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}return function(t,r,o){if(!i(t))return t;tr(r)||(r=[r]),0===r.length&&(r=["+"]);var s=e(r,o);return s.push({get:function(){return{}},descending:o?-1:1}),t=Array.prototype.map.call(t,function(t,e){return{value:t,predicateValues:s.map(function(r){var i=r.get(t);return r=typeof i,null===i?(r="string",i="null"):"string"===r?i=i.toLowerCase():"object"===r&&("function"==typeof i.valueOf&&(i=i.valueOf(),n(i))||y(i)&&(i=i.toString(),n(i))||(i=e)),{value:i,type:r}})}}),t.sort(function(t,e){for(var n=0,r=0,i=s.length;r<i;++r){var n=t.predicateValues[r],o=e.predicateValues[r],a=0;if(n.type===o.type?n.value!==o.value&&(a=n.value<o.value?-1:1):a=n.type<o.type?-1:1,n=a*s[r].descending)break}return n}),t=t.map(function(t){return t.value})}}function Cn(t){return C(t)&&(t={link:t}),t.restrict=t.restrict||"AC",m(t)}function Rn(t,e,r,i,s){var a=this,u=[];a.$error={},a.$$success={},a.$pending=n,a.$name=s(e.name||e.ngForm||"")(r),a.$dirty=!1,a.$pristine=!0,a.$valid=!0,a.$invalid=!1,a.$submitted=!1,a.$$parentForm=xi,a.$rollbackViewValue=function(){o(u,function(t){t.$rollbackViewValue()})},a.$commitViewValue=function(){o(u,function(t){t.$commitViewValue()})},a.$addControl=function(t){st(t.$name,"input"),u.push(t),t.$name&&(a[t.$name]=t),t.$$parentForm=a},a.$$renameControl=function(t,e){var n=t.$name;a[n]===t&&delete a[n],a[e]=t,t.$name=e},a.$removeControl=function(t){t.$name&&a[t.$name]===t&&delete a[t.$name],o(a.$pending,function(e,n){a.$setValidity(n,null,t)}),o(a.$error,function(e,n){a.$setValidity(n,null,t)}),o(a.$$success,function(e,n){a.$setValidity(n,null,t)}),F(u,t),t.$$parentForm=xi},Dn({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(F(r,n),0===r.length&&delete t[e])},$animate:i}),a.$setDirty=function(){i.removeClass(t,io),i.addClass(t,oo),a.$dirty=!0,a.$pristine=!1,a.$$parentForm.$setDirty()},a.$setPristine=function(){i.setClass(t,io,oo+" ng-submitted"),a.$dirty=!1,a.$pristine=!0,a.$submitted=!1,o(u,function(t){t.$setPristine()})},a.$setUntouched=function(){o(u,function(t){t.$setUntouched()})},a.$setSubmitted=function(){i.addClass(t,"ng-submitted"),a.$submitted=!0,a.$$parentForm.$setSubmitted()}}function Nn(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function On(t,e,n,r,i,o){var s=Un(e[0].type);if(!i.android){var a=!1;e.on("compositionstart",function(t){a=!0}),e.on("compositionend",function(){a=!1,u()})}var u=function(t){if(c&&(o.defer.cancel(c),c=null),!a){var i=e.val();t=t&&t.type,"password"===s||n.ngTrim&&"false"===n.ngTrim||(i=nr(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,t)}};if(i.hasEvent("input"))e.on("input",u);else{var c,l=function(t,e,n){c||(c=o.defer(function(){c=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||15<e&&19>e||37<=e&&40>=e||l(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",l)}e.on("change",u),r.$render=function(){var t=r.$isEmpty(r.$viewValue)?"":r.$viewValue;e.val()!==t&&e.val(t)}}function Tn(t,e){return function(n,r){var i,s;if(A(n))return n;if(x(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ri.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),s=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(s[e[n]]=+t)}),new Date(s.yyyy,s.MM-1,s.dd,s.HH,s.mm,s.ss||0,1e3*s.sss||0)}return NaN}}function kn(t,e,r,i){return function(o,s,a,u,c,l,h){function f(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function d(t){return _(t)&&!A(t)?r(t)||n:t}In(o,s,a,u),On(o,s,a,u,c,l);var p,g=u&&u.$options&&u.$options.timezone;if(u.$$parserName=t,u.$parsers.push(function(t){return u.$isEmpty(t)?null:e.test(t)?(t=r(t,p),g&&(t=q(t,g)),t):n}),u.$formatters.push(function(t){if(t&&!A(t))throw ao("datefmt",t);return f(t)?((p=t)&&g&&(p=q(p,g,!0)),h("date")(t,i,g)):(p=null,"")}),_(a.min)||a.ngMin){var v;u.$validators.min=function(t){return!f(t)||b(v)||r(t)>=v},a.$observe("min",function(t){v=d(t),u.$validate()})}if(_(a.max)||a.ngMax){var m;u.$validators.max=function(t){return!f(t)||b(m)||r(t)<=m},a.$observe("max",function(t){m=d(t),u.$validate()})}}}function In(t,e,r,i){(i.$$hasNativeValidators=w(e[0].validity))&&i.$parsers.push(function(t){var r=e.prop("validity")||{};return r.badInput&&!r.typeMismatch?n:t})}function Pn(t,e,n,r,i){if(_(r)){if(t=t(r),!t.constant)throw ao("constexpr",n,r);return t(e)}return i}function Fn(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[],r=0;t:for(;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function i(t){var e=[];return tr(t)?(o(t,function(t){e=e.concat(i(t))}),e):x(t)?t.split(" "):w(t)?(o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e):t}return{restrict:"AC",link:function(s,a,u){function c(t,e){var n=a.data("$classCounts")||ct(),r=[];return o(t,function(t){(0<e||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(0<e)&&r.push(t))}),a.data("$classCounts",n),r.join(" ")}function l(t){if(!0===e||s.$index%2===e){var o=i(t||[]);if(h){if(!j(t,h)){var l=i(h),f=r(o,l),o=r(l,o),f=c(f,1),o=c(o,-1);f&&f.length&&n.addClass(a,f),o&&o.length&&n.removeClass(a,o)}}else{var f=c(o,1);u.$addClass(f)}}h=$(t)}var h;s.$watch(u[t],l,!0),u.$observe("class",function(e){l(s.$eval(u[t]))}),"ngClass"!==t&&s.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var a=i(s.$eval(u[t]));o===e?(o=c(a,1),u.$addClass(o)):(o=c(a,-1),u.$removeClass(o))}})}}}]}function Dn(t){function e(t,e){e&&!s[t]?(c.addClass(o,t),s[t]=!0):!e&&s[t]&&(c.removeClass(o,t),s[t]=!1)}function r(t,n){t=t?"-"+nt(t,"-"):"",e(no+t,!0===n),e(ro+t,!1===n)}var i=t.ctrl,o=t.$element,s={},a=t.set,u=t.unset,c=t.$animate;s[ro]=!(s[no]=o.hasClass(no)),i.$setValidity=function(t,o,s){b(o)?(i.$pending||(i.$pending={}),a(i.$pending,t,s)):(i.$pending&&u(i.$pending,t,s),$n(i.$pending)&&(i.$pending=n)),T(o)?o?(u(i.$error,t,s),a(i.$$success,t,s)):(a(i.$error,t,s),u(i.$$success,t,s)):(u(i.$error,t,s),u(i.$$success,t,s)),i.$pending?(e(so,!0),i.$valid=i.$invalid=n,r("",null)):(e(so,!1),i.$valid=$n(i.$error),i.$invalid=!i.$valid,r("",i.$valid)),o=i.$pending&&i.$pending[t]?n:!i.$error[t]&&(!!i.$$success[t]||null),r(t,o),i.$$parentForm.$setValidity(t,o,i)}}function $n(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}var jn,Ln,Mn,Bn,Hn=/^\/(.+)\/([a-z]*)$/,Un=function(t){return x(t)?t.toLowerCase():t},Kn=Object.prototype.hasOwnProperty,qn=function(t){return x(t)?t.toUpperCase():t},Jn=[].slice,Vn=[].splice,zn=[].push,Xn=Object.prototype.toString,Wn=Object.getPrototypeOf,Yn=r("ng"),Gn=t.angular||(t.angular={}),Qn=0;jn=e.documentMode,g.$inject=[],v.$inject=[];var Zn,tr=Array.isArray,er=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,nr=function(t){return x(t)?t.trim():t},rr=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ir=function(){if(!_(ir.rules)){var t=e.querySelector("[ng-csp]")||e.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");ir.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else{t=ir;try{new Function(""),n=!1}catch(r){n=!0}t.rules={
noUnsafeEval:n,noInlineStyle:!1}}}return ir.rules},or=function(){if(_(or.name_))return or.name_;var t,n,r,i,o=sr.length;for(n=0;n<o;++n)if(r=sr[n],t=e.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return or.name_=i},sr=["ng-","data-ng-","ng:","x-ng-"],ar=/[A-Z]/g,ur=!1,cr=1,lr=3,hr={full:"1.4.7",major:1,minor:4,dot:7,codeName:"dark-luminescence"};gt.expando="ng339";var fr=gt.cache={},dr=1;gt._data=function(t){return this.cache[t[this.expando]]||{}};var pr=/([\:\-\_]+(.))/g,gr=/^moz([A-Z])/,vr={mouseleave:"mouseout",mouseenter:"mouseover"},mr=r("jqLite"),yr=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,br=/<|&#?\w+;/,_r=/<([\w:-]+)/,wr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Sr={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Sr.optgroup=Sr.option,Sr.tbody=Sr.tfoot=Sr.colgroup=Sr.caption=Sr.thead,Sr.th=Sr.td;var xr=gt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),gt(t).on("load",r))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return Ln(0<=t?this[t]:this[this.length+t])},length:0,push:zn,sort:[].sort,splice:[].splice},Er={};o("multiple selected checked disabled readOnly required open".split(" "),function(t){Er[Un(t)]=t});var Ar={};o("input select option textarea button form details".split(" "),function(t){Ar[t]=!0});var Cr={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:wt,removeData:bt,hasData:function(t){for(var e in fr[t.ng339])return!0;return!1}},function(t,e){gt[e]=t}),o({data:wt,inheritedData:Rt,scope:function(t){return Ln.data(t,"$scope")||Rt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return Ln.data(t,"$isolateScope")||Ln.data(t,"$isolateScopeNoTemplate")},controller:Ct,injector:function(t){return Rt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:St,css:function(t,e,n){return e=ft(e),_(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var i=t.nodeType;if(i!==lr&&2!==i&&8!==i)if(i=Un(e),Er[i]){if(!_(r))return t[e]||(t.attributes.getNamedItem(e)||g).specified?i:n;r?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(_(r))t.setAttribute(e,r);else if(t.getAttribute)return t=t.getAttribute(e,2),null===t?n:t},prop:function(t,e,n){return _(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(b(e)){var n=t.nodeType;return n===cr||n===lr?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(b(e)){if(t.multiple&&"select"===P(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return b(e)?t.innerHTML:(mt(t,!0),void(t.innerHTML=e))},empty:Nt},function(t,e){gt.prototype[e]=function(e,n){var r,i,o=this.length;if(t!==Nt&&b(2==t.length&&t!==St&&t!==Ct?e:n)){if(w(e)){for(r=0;r<o;r++)if(t===wt)t(this[r],e);else for(i in e)t(this[r],i,e[i]);return this}for(r=t.$dv,o=b(r)?Math.min(o,1):o,i=0;i<o;i++){var s=t(this[i],e,n);r=r?r+s:s}return r}for(r=0;r<o;r++)t(this[r],e,n);return this}}),o({removeData:bt,on:function $o(t,e,n,r){if(_(r))throw mr("onargs");if(dt(t)){var i=_t(t,!0);r=i.events;var o=i.handle;o||(o=i.handle=It(t,r));for(var i=0<=e.indexOf(" ")?e.split(" "):[e],s=i.length;s--;){e=i[s];var a=r[e];a||(r[e]=[],"mouseenter"===e||"mouseleave"===e?$o(t,vr[e],function(t){var n=t.relatedTarget;n&&(n===this||this.contains(n))||o(t,e)}):"$destroy"!==e&&t.addEventListener(e,o,!1),a=r[e]),a.push(n)}}},off:yt,one:function(t,e,n){t=Ln(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;mt(t),o(new gt(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===cr&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===cr||11===n){e=new gt(e);for(var n=0,r=e.length;n<r;n++)t.appendChild(e[n])}},prepend:function(t,e){if(t.nodeType===cr){var n=t.firstChild;o(new gt(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=Ln(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:Ot,detach:function(t){Ot(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new gt(e);for(var i=0,o=e.length;i<o;i++){var s=e[i];r.insertBefore(s,n.nextSibling),n=s}},addClass:Et,removeClass:xt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;b(r)&&(r=!St(t,e)),(r?Et:xt)(t,e)})},parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:vt,triggerHandler:function(t,e,n){var r,i,s=e.type||e,a=_t(t);(a=(a=a&&a.events)&&a[s])&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:g,type:s,target:t},e.type&&(r=h(r,e)),e=$(a),i=n?[r].concat(n):[r],o(e,function(e){r.isImmediatePropagationStopped()||e.apply(t,i)}))}},function(t,e){gt.prototype[e]=function(e,n,r){for(var i,o=0,s=this.length;o<s;o++)b(i)?(i=t(this[o],e,n,r),_(i)&&(i=Ln(i))):At(i,t(this[o],e,n,r));return _(i)?i:this},gt.prototype.bind=gt.prototype.on,gt.prototype.unbind=gt.prototype.off}),Dt.prototype={put:function(t,e){this[Ft(t,this.nextUid)]=e},get:function(t){return this[Ft(t,this.nextUid)]},remove:function(t){var e=this[t=Ft(t,this.nextUid)];return delete this[t],e}};var Rr=[function(){this.$get=[function(){return Dt}]}],Nr=/^[^\(]*\(\s*([^\)]*)\)/m,Or=/,/,Tr=/^\s*(_?)(\S+?)\1\s*$/,kr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ir=r("$injector");jt.$$annotate=function(t,e,n){var r;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw x(n)&&n||(n=t.name||$t(t)),Ir("strictdi",n);e=t.toString().replace(kr,""),e=e.match(Nr),o(e[1].split(Or),function(t){t.replace(Tr,function(t,e,n){r.push(n)})})}t.$inject=r}}else tr(t)?(e=t.length-1,ot(t[e],"fn"),r=t.slice(0,e)):ot(t,"fn",!0);return r};var Pr=r("$animate"),Fr=function(){this.$get=["$q","$$rAF",function(t,e){function n(){}return n.all=g,n.chain=g,n.prototype={end:g,cancel:g,resume:g,pause:g,complete:g,then:function(n,r){return t(function(t){e(function(){t()})}).then(n,r)}},n}]},Dr=function(){var t=new Dt,e=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(t,e,n){var r=!1;return e&&(e=x(e)?e.split(" "):tr(e)?e:[],o(e,function(e){e&&(r=!0,t[e]=n)})),r}function s(){o(e,function(e){var n=t.get(e);if(n){var r=Bt(e.attr("class")),i="",s="";o(n,function(t,e){t!==!!r[e]&&(t?i+=(i.length?" ":"")+e:s+=(s.length?" ":"")+e)}),o(e,function(t){i&&Et(t,i),s&&xt(t,s)}),t.remove(e)}}),e.length=0}return{enabled:g,on:g,off:g,pin:g,push:function(o,a,u,c){return c&&c(),u=u||{},u.from&&o.css(u.from),u.to&&o.css(u.to),(u.addClass||u.removeClass)&&(a=u.addClass,c=u.removeClass,u=t.get(o)||{},a=i(u,a,!0),c=i(u,c,!1),(a||c)&&(t.put(o,u),e.push(o),1===e.length&&r.$$postDigest(s))),new n}}}]},$r=["$provide",function(t){var e=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Pr("notcsel",n);var i=n+"-animation";e.$$registeredAnimations[n.substr(1)]=i,t.factory(i,r)},this.classNameFilter=function(t){if(1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null)&&/(\s+|\/)ng-animate(\s+|\/)/.test(this.$$classNameFilter.toString()))throw Pr("nongcls","ng-animate");return this.$$classNameFilter},this.$get=["$$animateQueue",function(t){function e(t,e,n){if(n){var r;t:{for(r=0;r<n.length;r++){var i=n[r];if(1===i.nodeType){r=i;break t}}r=void 0}!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(t):e.prepend(t)}return{on:t.on,off:t.off,pin:t.pin,enabled:t.enabled,cancel:function(t){t.end&&t.end()},enter:function(n,r,i,o){return r=r&&Ln(r),i=i&&Ln(i),r=r||i.parent(),e(n,r,i),t.push(n,"enter",Ht(o))},move:function(n,r,i,o){return r=r&&Ln(r),i=i&&Ln(i),r=r||i.parent(),e(n,r,i),t.push(n,"move",Ht(o))},leave:function(e,n){return t.push(e,"leave",Ht(n),function(){e.remove()})},addClass:function(e,n,r){return r=Ht(r),r.addClass=Mt(r.addclass,n),t.push(e,"addClass",r)},removeClass:function(e,n,r){return r=Ht(r),r.removeClass=Mt(r.removeClass,n),t.push(e,"removeClass",r)},setClass:function(e,n,r,i){return i=Ht(i),i.addClass=Mt(i.addClass,n),i.removeClass=Mt(i.removeClass,r),t.push(e,"setClass",i)},animate:function(e,n,r,i,o){return o=Ht(o),o.from=o.from?h(o.from,n):n,o.to=o.to?h(o.to,r):r,o.tempClasses=Mt(o.tempClasses,i||"ng-inline-animate"),t.push(e,"animate",o)}}}]}],jr=function(){this.$get=["$$rAF","$q",function(t,e){var n=function(){};return n.prototype={done:function(t){this.defer&&this.defer[!0===t?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=e.defer()),this.defer.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)}},function(e,r){function i(){return t(function(){r.addClass&&(e.addClass(r.addClass),r.addClass=null),r.removeClass&&(e.removeClass(r.removeClass),r.removeClass=null),r.to&&(e.css(r.to),r.to=null),o||s.done(),o=!0}),s}r.cleanupStyles&&(r.from=r.to=null),r.from&&(e.css(r.from),r.from=null);var o,s=new n;return{start:i,end:i}}}]},Lr=r("$compile");Vt.$inject=["$provide","$$sanitizeUriProvider"];var Mr=/^((?:x|data)[\:\-_])/i,Br=r("$controller"),Hr=/^(\S+)(\s+as\s+(\w+))?$/,Ur=function(){this.$get=["$document",function(t){return function(e){return e?!e.nodeType&&e instanceof Ln&&(e=e[0]):e=t[0].body,e.offsetWidth+1}}]},Kr="application/json",qr={"Content-Type":Kr+";charset=utf-8"},Jr=/^\[|^\{(?!\{)/,Vr={"[":/]$/,"{":/}$/},zr=/^\)\]\}',?\n/,Xr=r("$http"),Wr=function(t){return function(){throw Xr("legacy",t)}},Yr=Gn.$interpolateMinErr=r("$interpolate");Yr.throwNoconcat=function(t){throw Yr("noconcat",t)},Yr.interr=function(t,e){return Yr("interr",t,e.toString())};var Gr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Qr={http:80,https:443,ftp:21},Zr=r("$location"),ti={$$html5:!1,$$replace:!1,absUrl:we("$$absUrl"),url:function(t){if(b(t))return this.$$url;var e=Gr.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:we("$$protocol"),host:we("$$host"),port:we("$$port"),path:Se("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(x(t)||E(t))t=t.toString(),this.$$search=z(t);else{if(!w(t))throw Zr("isrcharg");t=D(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:b(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:Se("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([_e,be,ye],function(t){t.prototype=Object.create(ti),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ye||!this.$$html5)throw Zr("nostate");return this.$$state=b(e)?null:e,this}});var ei=r("$parse"),ni=Function.prototype.call,ri=Function.prototype.apply,ii=Function.prototype.bind,oi=ct();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){oi[t]=!0});var si={n:"\n",f:"\f",r:"\r",t:"\t",v:"\x0B","'":"'",'"':'"'},ai=function(t){this.options=t};ai.prototype={constructor:ai,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;)if(t=this.text.charAt(this.index),'"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var e=t+this.peek(),n=e+this.peek(2),r=oi[e],i=oi[n];oi[t]||r||i?(t=i?n:r?e:t,this.tokens.push({index:this.index,text:t,operator:!0}),this.index+=t.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){return t=t||1,this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(t){return"0"<=t&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\x0B"===t||""===t},isIdent:function(t){return"a"<=t&&"z">=t||"A"<=t&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){throw n=n||this.index,e=_(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n,ei("lexerr",t,e,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Un(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),r=r+o;if(i)"u"===o?(i=this.text.substring(this.index+1,this.index+5),i.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,n+=String.fromCharCode(parseInt(i,16))):n+=si[o]||o,i=!1;else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var ui=function(t,e){this.lexer=t,this.options=e};ui.Program="Program",ui.ExpressionStatement="ExpressionStatement",ui.AssignmentExpression="AssignmentExpression",ui.ConditionalExpression="ConditionalExpression",ui.LogicalExpression="LogicalExpression",ui.BinaryExpression="BinaryExpression",ui.UnaryExpression="UnaryExpression",ui.CallExpression="CallExpression",ui.MemberExpression="MemberExpression",ui.Identifier="Identifier",ui.Literal="Literal",ui.ArrayExpression="ArrayExpression",ui.Property="Property",ui.ObjectExpression="ObjectExpression",ui.ThisExpression="ThisExpression",ui.NGValueParameter="NGValueParameter",ui.prototype={ast:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:ui.Program,body:t}},expressionStatement:function(){return{type:ui.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();return this.expect("=")&&(t={type:ui.AssignmentExpression,left:t,right:this.assignment(),operator:"="}),t},ternary:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),{type:ui.ConditionalExpression,test:n,alternate:t,consequent:e}):n},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:ui.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:ui.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.relational()};return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.additive()};return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.multiplicative()};return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e={type:ui.BinaryExpression,operator:t.text,left:e,right:this.unary()};return e},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:ui.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.constants.hasOwnProperty(this.peek().text)?t=D(this.constants[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)"("===e.text?(t={type:ui.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):"["===e.text?(t={type:ui.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):"."===e.text?t={type:ui.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){t=[t];for(var e={type:ui.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return e},parseArguments:function(){var t=[];if(")"!==this.peekToken().text)do t.push(this.expression());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:ui.Identifier,name:t.text}},constant:function(){return{type:ui.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:ui.ArrayExpression,elements:t}},object:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t={type:ui.Property,kind:"init"},this.peek().constant?t.key=this.constant():this.peek().identifier?t.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),t.value=this.expression(),e.push(t)}while(this.expect(","));return this.consume("}"),{type:ui.ObjectExpression,properties:e}},throwError:function(t,e){throw ei("syntax",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(0===this.tokens.length)throw ei("ueoe",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(0===this.tokens.length)throw ei("ueoe",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){t=this.tokens[t];var o=t.text;if(o===e||o===n||o===r||o===i||!(e||n||r||i))return t}return!1},expect:function(t,e,n,r){return!!(t=this.peek(t,e,n,r))&&(this.tokens.shift(),t)},constants:{"true":{type:ui.Literal,value:!0},"false":{type:ui.Literal,value:!1},"null":{type:ui.Literal,value:null},undefined:{type:ui.Literal,value:n},"this":{type:ui.ThisExpression}}},je.prototype={compile:function(t,e){var r=this,i=this.astBuilder.ast(t);this.state={nextId:0,filters:{},expensiveChecks:e,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Ie(i,r.$filter);var s,a="";return this.stage="assign",(s=De(i))&&(this.state.computing="assign",a=this.nextId(),this.recurse(s,a),this.return_(a),a="fn.assign="+this.generateFunction("assign","s,v,l")),s=Pe(i.body),r.stage="inputs",o(s,function(t,e){var n="fn"+e;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(t,i),r.return_(i),r.state.inputs.push(n),t.watchId=e}),this.state.computing="fn",this.stage="main",this.recurse(i),a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+a+this.watchFns()+"return fn;",a=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",a)(this.$filter,Ae,Re,Ne,Ce,Oe,Te,ke,t),this.state=this.stage=n,a.literal=$e(i),a.constant=i.constant,a},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,n=this;return o(e,function(e){t.push("var "+e+"="+n.generateFunction(e,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return o(this.state.filters,function(n,r){t.push(n+"=$filter("+e.escape(r)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,i,s,a){var u,c,l,h,f=this;if(i=i||g,!a&&_(t.watchId))e=e||this.nextId(),this.if_("i",this.lazyAssign(e,this.computedMember("i",t.watchId)),this.lazyRecurse(t,e,r,i,s,!0));else switch(t.type){case ui.Program:o(t.body,function(e,r){f.recurse(e.expression,n,n,function(t){c=t}),r!==t.body.length-1?f.current().body.push(c,";"):f.return_(c)});break;case ui.Literal:h=this.escape(t.value),this.assign(e,h),i(h);break;case ui.UnaryExpression:this.recurse(t.argument,n,n,function(t){c=t}),h=t.operator+"("+this.ifDefined(c,0)+")",this.assign(e,h),i(h);break;case ui.BinaryExpression:this.recurse(t.left,n,n,function(t){u=t}),this.recurse(t.right,n,n,function(t){c=t}),h="+"===t.operator?this.plus(u,c):"-"===t.operator?this.ifDefined(u,0)+t.operator+this.ifDefined(c,0):"("+u+")"+t.operator+"("+c+")",this.assign(e,h),i(h);break;case ui.LogicalExpression:e=e||this.nextId(),f.recurse(t.left,e),f.if_("&&"===t.operator?e:f.not(e),f.lazyRecurse(t.right,e)),i(e);break;case ui.ConditionalExpression:e=e||this.nextId(),f.recurse(t.test,e),f.if_(e,f.lazyRecurse(t.alternate,e),f.lazyRecurse(t.consequent,e)),i(e);break;case ui.Identifier:e=e||this.nextId(),r&&(r.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),Ae(t.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",t.name)),function(){f.if_("inputs"===f.stage||"s",function(){s&&1!==s&&f.if_(f.not(f.nonComputedMember("s",t.name)),f.lazyAssign(f.nonComputedMember("s",t.name),"{}")),f.assign(e,f.nonComputedMember("s",t.name))})},e&&f.lazyAssign(e,f.nonComputedMember("l",t.name))),(f.state.expensiveChecks||Me(t.name))&&f.addEnsureSafeObject(e),i(e);break;case ui.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),f.recurse(t.object,u,n,function(){f.if_(f.notNull(u),function(){t.computed?(c=f.nextId(),f.recurse(t.property,c),f.getStringValue(c),f.addEnsureSafeMemberName(c),s&&1!==s&&f.if_(f.not(f.computedMember(u,c)),f.lazyAssign(f.computedMember(u,c),"{}")),h=f.ensureSafeObject(f.computedMember(u,c)),f.assign(e,h),r&&(r.computed=!0,r.name=c)):(Ae(t.property.name),s&&1!==s&&f.if_(f.not(f.nonComputedMember(u,t.property.name)),f.lazyAssign(f.nonComputedMember(u,t.property.name),"{}")),h=f.nonComputedMember(u,t.property.name),(f.state.expensiveChecks||Me(t.property.name))&&(h=f.ensureSafeObject(h)),f.assign(e,h),r&&(r.computed=!1,r.name=t.property.name))},function(){f.assign(e,"undefined")}),i(e)},!!s);break;case ui.CallExpression:e=e||this.nextId(),t.filter?(c=f.filter(t.callee.name),l=[],o(t.arguments,function(t){var e=f.nextId();f.recurse(t,e),l.push(e)}),h=c+"("+l.join(",")+")",f.assign(e,h),i(e)):(c=f.nextId(),u={},l=[],f.recurse(t.callee,c,u,function(){f.if_(f.notNull(c),function(){f.addEnsureSafeFunction(c),o(t.arguments,function(t){f.recurse(t,f.nextId(),n,function(t){l.push(f.ensureSafeObject(t))})}),u.name?(f.state.expensiveChecks||f.addEnsureSafeObject(u.context),h=f.member(u.context,u.name,u.computed)+"("+l.join(",")+")"):h=c+"("+l.join(",")+")",h=f.ensureSafeObject(h),f.assign(e,h)},function(){f.assign(e,"undefined")}),i(e)}));break;case ui.AssignmentExpression:if(c=this.nextId(),u={},!Fe(t.left))throw ei("lval");this.recurse(t.left,n,u,function(){f.if_(f.notNull(u.context),function(){f.recurse(t.right,c),f.addEnsureSafeObject(f.member(u.context,u.name,u.computed)),f.addEnsureSafeAssignContext(u.context),h=f.member(u.context,u.name,u.computed)+t.operator+c,f.assign(e,h),i(e||h)})},1);break;case ui.ArrayExpression:l=[],o(t.elements,function(t){f.recurse(t,f.nextId(),n,function(t){l.push(t)})}),h="["+l.join(",")+"]",this.assign(e,h),i(h);break;case ui.ObjectExpression:l=[],o(t.properties,function(t){f.recurse(t.value,f.nextId(),n,function(e){l.push(f.escape(t.key.type===ui.Identifier?t.key.name:""+t.key.value)+":"+e)})}),h="{"+l.join(",")+"}",this.assign(e,h),i(h);break;case ui.ThisExpression:this.assign(e,"s"),i("s");break;case ui.NGValueParameter:this.assign(e,"v"),i("v")}},getHasOwnProperty:function(t,e){var n=t+"."+e,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),r[n]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return this.state.filters.hasOwnProperty(t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,n){if(!0===t)e();else{var r=this.current().body;r.push("if(",t,"){"),e(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(t){return"!("+t+")"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){return t+"."+e},computedMember:function(t,e){return t+"["+e+"]"},member:function(t,e,n){return n?this.computedMember(t,e):this.nonComputedMember(t,e)},addEnsureSafeObject:function(t){this.current().body.push(this.ensureSafeObject(t),";")},addEnsureSafeMemberName:function(t){this.current().body.push(this.ensureSafeMemberName(t),";")},addEnsureSafeFunction:function(t){this.current().body.push(this.ensureSafeFunction(t),";")},addEnsureSafeAssignContext:function(t){this.current().body.push(this.ensureSafeAssignContext(t),";")},ensureSafeObject:function(t){return"ensureSafeObject("+t+",text)"},ensureSafeMemberName:function(t){return"ensureSafeMemberName("+t+",text)"},ensureSafeFunction:function(t){return"ensureSafeFunction("+t+",text)"},getStringValue:function(t){this.assign(t,"getStringValue("+t+",text)")},ensureSafeAssignContext:function(t){return"ensureSafeAssignContext("+t+",text)"},lazyRecurse:function(t,e,n,r,i,o){var s=this;return function(){s.recurse(t,e,n,r,i,o)}},lazyAssign:function(t,e){var n=this;return function(){n.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(x(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(E(t))return t.toString();if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if("undefined"==typeof t)return"undefined";throw ei("esc")},nextId:function(t,e){var n="v"+this.state.nextId++;return t||this.current().vars.push(n+(e?"="+e:"")),n},current:function(){return this.state[this.state.computing]}},Le.prototype={compile:function(t,e){var n=this,r=this.astBuilder.ast(t);this.expression=t,this.expensiveChecks=e,Ie(r,n.$filter);var i,s;(i=De(r))&&(s=this.recurse(i)),i=Pe(r.body);var a;i&&(a=[],o(i,function(t,e){var r=n.recurse(t);t.input=r,a.push(r),t.watchId=e}));var u=[];return o(r.body,function(t){u.push(n.recurse(t.expression))}),i=0===r.body.length?function(){}:1===r.body.length?u[0]:function(t,e){var n;return o(u,function(r){n=r(t,e)}),n},s&&(i.assign=function(t,e,n){return s(t,n,e)}),a&&(i.inputs=a),i.literal=$e(r),i.constant=r.constant,i},recurse:function(t,e,r){var i,s,a,u=this;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case ui.Literal:return this.value(t.value,e);case ui.UnaryExpression:return s=this.recurse(t.argument),this["unary"+t.operator](s,e);case ui.BinaryExpression:return i=this.recurse(t.left),s=this.recurse(t.right),this["binary"+t.operator](i,s,e);case ui.LogicalExpression:return i=this.recurse(t.left),s=this.recurse(t.right),this["binary"+t.operator](i,s,e);case ui.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case ui.Identifier:return Ae(t.name,u.expression),u.identifier(t.name,u.expensiveChecks||Me(t.name),e,r,u.expression);case ui.MemberExpression:return i=this.recurse(t.object,!1,!!r),t.computed||(Ae(t.property.name,u.expression),s=t.property.name),t.computed&&(s=this.recurse(t.property)),t.computed?this.computedMember(i,s,e,r,u.expression):this.nonComputedMember(i,s,u.expensiveChecks,e,r,u.expression);case ui.CallExpression:return a=[],o(t.arguments,function(t){a.push(u.recurse(t))}),t.filter&&(s=this.$filter(t.callee.name)),t.filter||(s=this.recurse(t.callee,!0)),t.filter?function(t,r,i,o){for(var u=[],c=0;c<a.length;++c)u.push(a[c](t,r,i,o));return t=s.apply(n,u,o),e?{context:n,name:n,value:t}:t}:function(t,n,r,i){var o,c=s(t,n,r,i);if(null!=c.value){Re(c.context,u.expression),Ne(c.value,u.expression),o=[];for(var l=0;l<a.length;++l)o.push(Re(a[l](t,n,r,i),u.expression));o=Re(c.value.apply(c.context,o),u.expression)}return e?{value:o}:o};case ui.AssignmentExpression:return i=this.recurse(t.left,!0,1),s=this.recurse(t.right),function(t,n,r,o){var a=i(t,n,r,o);return t=s(t,n,r,o),Re(a.value,u.expression),Oe(a.context),a.context[a.name]=t,e?{value:t}:t};case ui.ArrayExpression:return a=[],o(t.elements,function(t){a.push(u.recurse(t))}),function(t,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](t,n,r,i));return e?{value:o}:o};case ui.ObjectExpression:return a=[],o(t.properties,function(t){a.push({key:t.key.type===ui.Identifier?t.key.name:""+t.key.value,value:u.recurse(t.value)})}),function(t,n,r,i){for(var o={},s=0;s<a.length;++s)o[a[s].key]=a[s].value(t,n,r,i);return e?{value:o}:o};case ui.ThisExpression:return function(t){return e?{value:t}:t};case ui.NGValueParameter:return function(t,n,r,i){return e?{value:r}:r}}},"unary+":function(t,e){return function(n,r,i,o){return n=t(n,r,i,o),n=_(n)?+n:0,e?{value:n}:n}},"unary-":function(t,e){return function(n,r,i,o){return n=t(n,r,i,o),n=_(n)?-n:0,e?{value:n}:n}},"unary!":function(t,e){return function(n,r,i,o){return n=!t(n,r,i,o),e?{value:n}:n}},"binary+":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s);return r=e(r,i,o,s),a=ke(a,r),n?{value:a}:a}},"binary-":function(t,e,n){return function(r,i,o,s){var a=t(r,i,o,s);return r=e(r,i,o,s),a=(_(a)?a:0)-(_(r)?r:0),n?{value:a}:a}},"binary*":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)*e(r,i,o,s),n?{value:r}:r}},"binary/":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)/e(r,i,o,s),n?{value:r}:r}},"binary%":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)%e(r,i,o,s),n?{value:r}:r}},"binary===":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)===e(r,i,o,s),n?{value:r}:r}},"binary!==":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)!==e(r,i,o,s),n?{value:r}:r}},"binary==":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)==e(r,i,o,s),n?{value:r}:r}},"binary!=":function(t,e,n){return function(r,i,o,s){
return r=t(r,i,o,s)!=e(r,i,o,s),n?{value:r}:r}},"binary<":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)<e(r,i,o,s),n?{value:r}:r}},"binary>":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)>e(r,i,o,s),n?{value:r}:r}},"binary<=":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)<=e(r,i,o,s),n?{value:r}:r}},"binary>=":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)>=e(r,i,o,s),n?{value:r}:r}},"binary&&":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)&&e(r,i,o,s),n?{value:r}:r}},"binary||":function(t,e,n){return function(r,i,o,s){return r=t(r,i,o,s)||e(r,i,o,s),n?{value:r}:r}},"ternary?:":function(t,e,n,r){return function(i,o,s,a){return i=t(i,o,s,a)?e(i,o,s,a):n(i,o,s,a),r?{value:i}:i}},value:function(t,e){return function(){return e?{context:n,name:n,value:t}:t}},identifier:function(t,e,r,i,o){return function(s,a,u,c){return s=a&&t in a?a:s,i&&1!==i&&s&&!s[t]&&(s[t]={}),a=s?s[t]:n,e&&Re(a,o),r?{context:s,name:t,value:a}:a}},computedMember:function(t,e,n,r,i){return function(o,s,a,u){var c,l,h=t(o,s,a,u);return null!=h&&(c=e(o,s,a,u),c=Ce(c),Ae(c,i),r&&1!==r&&h&&!h[c]&&(h[c]={}),l=h[c],Re(l,i)),n?{context:h,name:c,value:l}:l}},nonComputedMember:function(t,e,r,i,o,s){return function(a,u,c,l){return a=t(a,u,c,l),o&&1!==o&&a&&!a[e]&&(a[e]={}),u=null!=a?a[e]:n,(r||Me(e))&&Re(u,s),i?{context:a,name:e,value:u}:u}},inputs:function(t,e){return function(n,r,i,o){return o?o[e]:t(n,r,i)}}};var ci=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n,this.ast=new ui(this.lexer),this.astCompiler=n.csp?new Le(this.ast,e):new je(this.ast,e)};ci.prototype={constructor:ci,parse:function(t){return this.astCompiler.compile(t,this.options.expensiveChecks)}},ct(),ct();var li=Object.prototype.valueOf,hi=r("$sce"),fi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Lr=r("$compile"),di=e.createElement("a"),pi=nn(t.location.href);sn.$inject=["$document"],un.$inject=["$provide"],dn.$inject=["$locale"],pn.$inject=["$locale"];var gi=".",vi={yyyy:mn("FullYear",4),yy:mn("FullYear",2,0,!0),y:mn("FullYear",1),MMMM:yn("Month"),MMM:yn("Month",!0),MM:mn("Month",2,1),M:mn("Month",1,1),dd:mn("Date",2),d:mn("Date",1),HH:mn("Hours",2),H:mn("Hours",1),hh:mn("Hours",2,-12),h:mn("Hours",1,-12),mm:mn("Minutes",2),m:mn("Minutes",1),ss:mn("Seconds",2),s:mn("Seconds",1),sss:mn("Milliseconds",3),EEEE:yn("Day"),EEE:yn("Day",!0),a:function(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]},Z:function(t,e,n){return t=-1*n,t=(0<=t?"+":"")+(vn(Math[0<t?"floor":"ceil"](t/60),2)+vn(Math.abs(t%60),2))},ww:_n(2),w:_n(1),G:wn,GG:wn,GGG:wn,GGGG:function(t,e){return 0>=t.getFullYear()?e.ERANAMES[0]:e.ERANAMES[1]}},mi=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,yi=/^\-?\d+$/;Sn.$inject=["$locale"];var bi=m(Un),_i=m(qn);An.$inject=["$parse"];var wi=m({restrict:"E",compile:function(t,e){if(!e.href&&!e.xlinkHref)return function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Xn.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Si={};o(Er,function(t,e){function n(t,n,i){t.$watch(i[r],function(t){i.$set(e,!!t)})}if("multiple"!=t){var r=zt("ng-"+e),i=n;"checked"===t&&(i=function(t,e,i){i.ngModel!==i[r]&&n(t,e,i)}),Si[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(Cr,function(t,e){Si[e]=function(){return{priority:100,link:function(t,n,r){return"ngPattern"===e&&"/"==r.ngPattern.charAt(0)&&(n=r.ngPattern.match(Hn))?void r.$set("ngPattern",new RegExp(n[1],n[2])):void t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=zt("ng-"+t);Si[e]=function(){return{priority:99,link:function(n,r,i){var o=t,s=t;"href"===t&&"[object SVGAnimatedString]"===Xn.call(r.prop("href"))&&(s="xlinkHref",i.$attr[s]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(s,e),jn&&o&&r.prop(o,i[s])):"href"===t&&i.$set(s,null)})}}}});var xi={$addControl:g,$$renameControl:function(t,e){t.$name=e},$removeControl:g,$setValidity:g,$setDirty:g,$setPristine:g,$setSubmitted:g};Rn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Ei=function(t){return["$timeout","$parse",function(e,r){function i(t){return""===t?r('this[""]').assign:r(t).assign||g}return{name:"form",restrict:t?"EAC":"E",require:["form","^^?form"],controller:Rn,compile:function(r,o){r.addClass(io).addClass(no);var s=o.name?"name":!(!t||!o.ngForm)&&"ngForm";return{pre:function(t,r,o,a){var u=a[0];if(!("action"in o)){var c=function(e){t.$apply(function(){u.$commitViewValue(),u.$setSubmitted()}),e.preventDefault()};r[0].addEventListener("submit",c,!1),r.on("$destroy",function(){e(function(){r[0].removeEventListener("submit",c,!1)},0,!1)})}(a[1]||u.$$parentForm).$addControl(u);var l=s?i(u.$name):g;s&&(l(t,u),o.$observe(s,function(e){u.$name!==e&&(l(t,n),u.$$parentForm.$$renameControl(u,e),(l=i(u.$name))(t,u))})),r.on("$destroy",function(){u.$$parentForm.$removeControl(u),l(t,n),h(u,xi)})}}}}}]},Ai=Ei(),Ci=Ei(!0),Ri=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Ni=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Oi=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ti=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ki=/^(\d{4})-(\d{2})-(\d{2})$/,Ii=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Pi=/^(\d{4})-W(\d\d)$/,Fi=/^(\d{4})-(\d\d)$/,Di=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,$i={text:function(t,e,n,r,i,o){On(t,e,n,r,i,o),Nn(r)},date:kn("date",ki,Tn(ki,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":kn("datetimelocal",Ii,Tn(Ii,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:kn("time",Di,Tn(Di,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:kn("week",Pi,function(t,e){if(A(t))return t;if(x(t)){Pi.lastIndex=0;var n=Pi.exec(t);if(n){var r=+n[1],i=+n[2],o=n=0,s=0,a=0,u=bn(r),i=7*(i-1);return e&&(n=e.getHours(),o=e.getMinutes(),s=e.getSeconds(),a=e.getMilliseconds()),new Date(r,0,u.getDate()+i,n,o,s,a)}}return NaN},"yyyy-Www"),month:kn("month",Fi,Tn(Fi,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,r,i,o,s){if(In(t,e,r,i),On(t,e,r,i,o,s),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:Ti.test(t)?parseFloat(t):n}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!E(t))throw ao("numfmt",t);t=t.toString()}return t}),_(r.min)||r.ngMin){var a;i.$validators.min=function(t){return i.$isEmpty(t)||b(a)||t>=a},r.$observe("min",function(t){_(t)&&!E(t)&&(t=parseFloat(t,10)),a=E(t)&&!isNaN(t)?t:n,i.$validate()})}if(_(r.max)||r.ngMax){var u;i.$validators.max=function(t){return i.$isEmpty(t)||b(u)||t<=u},r.$observe("max",function(t){_(t)&&!E(t)&&(t=parseFloat(t,10)),u=E(t)&&!isNaN(t)?t:n,i.$validate()})}},url:function(t,e,n,r,i,o){On(t,e,n,r,i,o),Nn(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||Ni.test(n)}},email:function(t,e,n,r,i,o){On(t,e,n,r,i,o),Nn(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||Oi.test(n)}},radio:function(t,e,n,r){b(n.name)&&e.attr("name",++Qn),e.on("click",function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)}),r.$render=function(){e[0].checked=n.value==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(t,e,n,r,i,o,s,a){var u=Pn(a,t,"ngTrueValue",n.ngTrueValue,!0),c=Pn(a,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return j(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:g,button:g,submit:g,reset:g,file:g},ji=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,s,a){a[0]&&($i[Un(s.type)]||$i.text)(i,o,s,a[0],e,t,n,r)}}}}],Li=/^(true|false|\d+)$/,Mi=function(){return{restrict:"A",priority:100,compile:function(t,e){return Li.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},Bi=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,n,r){t.$$addBindingInfo(n,r.ngBind),n=n[0],e.$watch(r.ngBind,function(t){n.textContent=b(t)?"":t})}}}}],Hi=["$interpolate","$compile",function(t,e){return{compile:function(n){return e.$$addBindingClass(n),function(n,r,i){n=t(r.attr(i.$attr.ngBindTemplate)),e.$$addBindingInfo(r,n.expressions),r=r[0],i.$observe("ngBindTemplate",function(t){r.textContent=b(t)?"":t})}}}}],Ui=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),s=e(i.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(s,function(){r.html(t.getTrustedHtml(o(e))||"")})}}}}],Ki=m({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),qi=Fn("",!0),Ji=Fn("Odd",0),Vi=Fn("Even",1),zi=Cn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),Xi=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Wi={},Yi={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=zt("ng-"+t);Wi[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var s=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){s(e,{$event:n})};Yi[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Gi=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,s){var a,u,c;n.$watch(i.ngIf,function(n){n?u||s(function(n,o){u=o,n[n.length++]=e.createComment(" end ngIf: "+i.ngIf+" "),a={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),a&&(c=ut(a.clone),t.leave(c).then(function(){c=null}),a=null))})}}}],Qi=["$templateRequest","$anchorScroll","$animate",function(t,e,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Gn.noop,compile:function(r,i){var o=i.ngInclude||i.src,s=i.onload||"",a=i.autoscroll;return function(r,i,u,c,l){var h,f,d,p=0,g=function(){f&&(f.remove(),f=null),h&&(h.$destroy(),h=null),d&&(n.leave(d).then(function(){f=null}),f=d,d=null)};r.$watch(o,function(o){var u=function(){!_(a)||a&&!r.$eval(a)||e()},f=++p;o?(t(o,!0).then(function(t){if(f===p){var e=r.$new();c.template=t,t=l(e,function(t){g(),n.enter(t,null,i).then(u)}),h=e,d=t,h.$emit("$includeContentLoaded",o),r.$eval(s)}},function(){f===p&&(g(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(g(),c.template=null)})}}}}],Zi=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){/SVG/.test(r[0].toString())?(r.empty(),t(pt(o.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(o.template),t(r.contents())(n))}}}],to=Cn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),eo=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var s=e.attr(r.$attr.ngList)||", ",a="false"!==r.ngTrim,u=a?nr(s):s;i.$parsers.push(function(t){if(!b(t)){var e=[];return t&&o(t.split(u),function(t){t&&e.push(a?nr(t):t)}),e}}),i.$formatters.push(function(t){return tr(t)?t.join(s):n}),i.$isEmpty=function(t){return!t||!t.length}}}},no="ng-valid",ro="ng-invalid",io="ng-pristine",oo="ng-dirty",so="ng-pending",ao=r("ngModel"),uo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,s,a,u,c,l,h){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=h(r.name||"",!1)(t),this.$$parentForm=xi;var f,d=s(r.ngModel),p=d.assign,v=d,m=p,y=null,w=this;this.$$setOptions=function(t){if((w.$options=t)&&t.getterSetter){var e=s(r.ngModel+"()"),n=s(r.ngModel+"($$$p)");v=function(t){var n=d(t);return C(n)&&(n=e(t)),n},m=function(t,e){C(d(t))?n(t,{$$$p:w.$modelValue}):p(t,w.$modelValue)}}else if(!d.assign)throw ao("nonassign",r.ngModel,J(i))},this.$render=g,this.$isEmpty=function(t){return b(t)||""===t||null===t||t!==t};var S=0;Dn({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},$animate:a}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,a.removeClass(i,oo),a.addClass(i,io)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,a.removeClass(i,io),a.addClass(i,oo),w.$$parentForm.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,a.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,a.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){u.cancel(y),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!E(w.$modelValue)||!isNaN(w.$modelValue)){var t=w.$$rawModelValue,e=w.$valid,r=w.$modelValue,i=w.$options&&w.$options.allowInvalid;w.$$runValidators(t,w.$$lastCommittedViewValue,function(o){i||e===o||(w.$modelValue=o?t:n,w.$modelValue!==r&&w.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var n=!0;return o(w.$validators,function(r,i){var o=r(t,e);n=n&&o,a(i,o)}),!!n||(o(w.$asyncValidators,function(t,e){a(e,null)}),!1)}function s(){var r=[],i=!0;o(w.$asyncValidators,function(o,s){var u=o(t,e);if(!u||!C(u.then))throw ao("$asyncValidators",u);a(s,n),r.push(u.then(function(){a(s,!0)},function(t){i=!1,a(s,!1)}))}),r.length?l.all(r).then(function(){u(i)},g):u(!0)}function a(t,e){c===S&&w.$setValidity(t,e)}function u(t){c===S&&r(t)}S++;var c=S;(function(){var t=w.$$parserName||"parse";return b(f)?(a(t,null),!0):(f||(o(w.$validators,function(t,e){a(e,null)}),o(w.$asyncValidators,function(t,e){a(e,null)})),a(t,f),f)})()&&i()?s():u(!1)},this.$commitViewValue=function(){var t=w.$viewValue;u.cancel(y),(w.$$lastCommittedViewValue!==t||""===t&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=t,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=w.$$lastCommittedViewValue;if(f=!b(e)||n)for(var r=0;r<w.$parsers.length;r++)if(e=w.$parsers[r](e),b(e)){f=!1;break}E(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=v(t));var i=w.$modelValue,o=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,o&&(w.$modelValue=e,w.$modelValue!==i&&w.$$writeModelToScope()),w.$$runValidators(e,w.$$lastCommittedViewValue,function(t){o||(w.$modelValue=t?e:n,w.$modelValue!==i&&w.$$writeModelToScope())})},this.$$writeModelToScope=function(){m(t,w.$modelValue),o(w.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){w.$viewValue=t,w.$options&&!w.$options.updateOnDefault||w.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n=0,r=w.$options;r&&_(r.debounce)&&(r=r.debounce,E(r)?n=r:E(r[e])?n=r[e]:E(r["default"])&&(n=r["default"])),u.cancel(y),n?y=u(function(){w.$commitViewValue()},n):c.$$phase?w.$commitViewValue():t.$apply(function(){w.$commitViewValue()})},t.$watch(function(){var e=v(t);if(e!==w.$modelValue&&(w.$modelValue===w.$modelValue||e===e)){w.$modelValue=w.$$rawModelValue=e,f=n;for(var r=w.$formatters,i=r.length,o=e;i--;)o=r[i](o);w.$viewValue!==o&&(w.$viewValue=w.$$lastCommittedViewValue=o,w.$render(),w.$$runValidators(e,o,g))}return e})}],co=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:uo,priority:1,compile:function(e){return e.addClass(io).addClass("ng-untouched").addClass(no),{pre:function(t,e,n,r){var i=r[0];e=r[1]||i.$$parentForm,i.$$setOptions(r[2]&&r[2].$options),e.$addControl(i),n.$observe("name",function(t){i.$name!==t&&i.$$parentForm.$$renameControl(i,t)}),t.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],lo=/(\s+|^)default(\s+|$)/,ho=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var n=this;this.$options=D(t.$eval(e.ngModelOptions)),_(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=nr(this.$options.updateOn.replace(lo,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},fo=Cn({terminal:!0,priority:1e3}),po=r("ngOptions"),go=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,vo=["$compile","$parse",function(t,n){function r(t,e,r){function o(t,e,n,r,i){this.selectValue=t,this.viewValue=e,this.label=n,this.group=r,this.disabled=i}function s(t){var e;if(!c&&i(t))e=t;else{e=[];for(var n in t)t.hasOwnProperty(n)&&"$"!==n.charAt(0)&&e.push(n)}return e}var a=t.match(go);if(!a)throw po("iexp",t,J(e));var u=a[5]||a[7],c=a[6];t=/ as /.test(a[0])&&a[1];var l=a[9];e=n(a[2]?a[1]:u);var h=t&&n(t)||e,f=l&&n(l),d=l?function(t,e){return f(r,e)}:function(t){return Ft(t)},p=function(t,e){return d(t,_(t,e))},g=n(a[2]||a[1]),v=n(a[3]||""),m=n(a[4]||""),y=n(a[8]),b={},_=c?function(t,e){return b[c]=e,b[u]=t,b}:function(t){return b[u]=t,b};return{trackBy:l,getTrackByValue:p,getWatchables:n(y,function(t){var e=[];t=t||[];for(var n=s(t),i=n.length,o=0;o<i;o++){var u=t===n?o:n[o],c=_(t[u],u),u=d(t[u],c);e.push(u),(a[2]||a[1])&&(u=g(r,c),e.push(u)),a[4]&&(c=m(r,c),e.push(c))}return e}),getOptions:function(){for(var t=[],e={},n=y(r)||[],i=s(n),a=i.length,u=0;u<a;u++){var c=n===i?u:i[u],f=_(n[c],c),b=h(r,f),c=d(b,f),w=g(r,f),S=v(r,f),f=m(r,f),b=new o(c,b,w,S,f);t.push(b),e[c]=b}return{items:t,selectValueMap:e,getOptionFromViewValue:function(t){return e[p(t)]},getViewValueFromOption:function(t){return l?Gn.copy(t.viewValue):t.viewValue}}}}}var s=e.createElement("option"),a=e.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(e,n,i,u){function c(t,e){t.element=e,e.disabled=t.disabled,t.label!==e.label&&(e.label=t.label,e.textContent=t.label),t.value!==e.value&&(e.value=t.selectValue)}function l(t,e,n,r){return e&&Un(e.nodeName)===n?n=e:(n=r.cloneNode(!1),e?t.insertBefore(n,e):t.appendChild(n)),n}function h(t){for(var e;t;)e=t.nextSibling,Ot(t),t=e}function f(t){var e=v&&v[0],n=w&&w[0];if(e||n)for(;t&&(t===e||t===n||e&&8===e.nodeType);)t=t.nextSibling;return t}function d(){var t=S&&g.readValue();S=x.getOptions();var e={},r=n[0].firstChild;if(_&&n.prepend(v),r=f(r),S.items.forEach(function(t){var i,o;t.group?(i=e[t.group],i||(i=l(n[0],r,"optgroup",a),r=i.nextSibling,i.label=t.group,i=e[t.group]={groupElement:i,currentOptionElement:i.firstChild}),o=l(i.groupElement,i.currentOptionElement,"option",s),c(t,o),i.currentOptionElement=o.nextSibling):(o=l(n[0],r,"option",s),c(t,o),r=o.nextSibling)}),Object.keys(e).forEach(function(t){h(e[t].currentOptionElement)}),h(r),p.$render(),!p.$isEmpty(t)){var i=g.readValue();(x.trackBy?j(t,i):t===i)||(p.$setViewValue(i),p.$render())}}var p=u[1];if(p){var g=u[0];u=i.multiple;for(var v,m=0,y=n.children(),b=y.length;m<b;m++)if(""===y[m].value){v=y.eq(m);break}var _=!!v,w=Ln(s.cloneNode(!1));w.val("?");var S,x=r(i.ngOptions,n,e);u?(p.$isEmpty=function(t){return!t||0===t.length},g.writeValue=function(t){S.items.forEach(function(t){t.element.selected=!1}),t&&t.forEach(function(t){(t=S.getOptionFromViewValue(t))&&!t.disabled&&(t.element.selected=!0)})},g.readValue=function(){var t=n.val()||[],e=[];return o(t,function(t){(t=S.selectValueMap[t])&&!t.disabled&&e.push(S.getViewValueFromOption(t))}),e},x.trackBy&&e.$watchCollection(function(){if(tr(p.$viewValue))return p.$viewValue.map(function(t){return x.getTrackByValue(t)})},function(){p.$render()})):(g.writeValue=function(t){var e=S.getOptionFromViewValue(t);e&&!e.disabled?n[0].value!==e.selectValue&&(w.remove(),_||v.remove(),n[0].value=e.selectValue,e.element.selected=!0,e.element.setAttribute("selected","selected")):null===t||_?(w.remove(),_||n.prepend(v),n.val(""),v.prop("selected",!0),v.attr("selected",!0)):(_||v.remove(),n.prepend(w),n.val("?"),w.prop("selected",!0),w.attr("selected",!0))},g.readValue=function(){var t=S.selectValueMap[n.val()];return t&&!t.disabled?(_||v.remove(),w.remove(),S.getViewValueFromOption(t)):null},x.trackBy&&e.$watch(function(){return x.getTrackByValue(p.$viewValue)},function(){p.$render()})),_?(v.remove(),t(v)(e),v.removeClass("ng-scope")):v=Ln(s.cloneNode(!1)),d(),e.$watchCollection(x.getWatchables,d)}}}}],mo=["$locale","$interpolate","$log",function(t,e,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(s,a,u){function c(t){a.text(t||"")}var l,h=u.count,f=u.$attr.when&&a.attr(u.$attr.when),d=u.offset||0,p=s.$eval(f)||{},v={},m=e.startSymbol(),y=e.endSymbol(),_=m+h+"-"+d+y,w=Gn.noop;o(u,function(t,e){var n=i.exec(e);n&&(n=(n[1]?"-":"")+Un(n[2]),p[n]=a.attr(u.$attr[e]))}),o(p,function(t,n){v[n]=e(t.replace(r,_))}),s.$watch(h,function(e){var r=parseFloat(e),i=isNaN(r);i||r in p||(r=t.pluralCat(r-d)),r===l||i&&E(l)&&isNaN(l)||(w(),i=v[r],b(i)?(null!=e&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=g,c()):w=s.$watch(i,c),l=r)})}}}],yo=["$parse","$animate",function(t,s){var a=r("ngRepeat"),u=function(t,e,n,r,i,o,s){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===s-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,c){var l=c.ngRepeat,h=e.createComment(" end ngRepeat: "+l+" "),f=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!f)throw a("iexp",l);var d=f[1],p=f[2],g=f[3],v=f[4],f=d.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!f)throw a("iidexp",d);var m=f[3]||f[1],y=f[2];if(g&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(g)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(g)))throw a("badident",g);var b,_,w,S,x={$id:Ft};return v?b=t(v):(w=function(t,e){return Ft(e)},S=function(t){return t}),function(t,e,r,c,f){b&&(_=function(e,n,r){return y&&(x[y]=e),x[m]=n,x.$index=r,b(t,x)});var d=ct();t.$watchCollection(p,function(r){var c,p,v,b,x,E,A,C,R,N,O=e[0],T=ct();if(g&&(t[g]=r),i(r))C=r,p=_||w;else for(N in p=_||S,C=[],r)Kn.call(r,N)&&"$"!==N.charAt(0)&&C.push(N);for(b=C.length,N=Array(b),c=0;c<b;c++)if(x=r===C?c:C[c],E=r[x],A=p(x,E,c),d[A])R=d[A],delete d[A],T[A]=R,N[c]=R;else{if(T[A])throw o(N,function(t){t&&t.scope&&(d[t.id]=t)}),a("dupes",l,A,E);N[c]={id:A,scope:n,clone:n},T[A]=!0}for(v in d){if(R=d[v],A=ut(R.clone),s.leave(A),A[0].parentNode)for(c=0,p=A.length;c<p;c++)A[c].$$NG_REMOVED=!0;R.scope.$destroy()}for(c=0;c<b;c++)if(x=r===C?c:C[c],E=r[x],R=N[c],R.scope){v=O;do v=v.nextSibling;while(v&&v.$$NG_REMOVED);R.clone[0]!=v&&s.move(ut(R.clone),null,Ln(O)),O=R.clone[R.clone.length-1],u(R.scope,c,m,E,y,x,b)}else f(function(t,e){R.scope=e;var n=h.cloneNode(!1);t[t.length++]=n,s.enter(t,null,Ln(O)),O=n,R.clone=t,T[R.id]=R,u(R.scope,c,m,E,y,x,b)});d=T})}}}}],bo=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],_o=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],wo=Cn(function(t,e,n){t.$watch(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)},!0)}),So=["$animate",function(t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,s){var a=[],u=[],c=[],l=[],h=function(t,e){return function(){t.splice(e,1)}};n.$watch(i.ngSwitch||i.on,function(n){var r,i;for(r=0,i=c.length;r<i;++r)t.cancel(c[r]);for(r=c.length=0,i=l.length;r<i;++r){var f=ut(u[r].clone);l[r].$destroy(),(c[r]=t.leave(f)).then(h(c,r))}u.length=0,l.length=0,(a=s.cases["!"+n]||s.cases["?"])&&o(a,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.createComment(" end ngSwitchWhen: "),u.push({clone:r}),t.enter(r,o.parent(),o)})})})}}}],xo=Cn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),Eo=Cn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),Ao=Cn({restrict:"EAC",link:function(t,e,n,i,o){if(!o)throw r("ngTransclude")("orphan",J(e));o(function(t){e.empty(),e.append(t)})}}),Co=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"==n.type&&t.put(n.id,e[0].text)}}}],Ro={$setViewValue:g,$render:g},No=["$element","$scope","$attrs",function(t,r,i){var o=this,s=new Dt;o.ngModelCtrl=Ro,o.unknownOption=Ln(e.createElement("option")),o.renderUnknownOption=function(e){e="? "+Ft(e)+" ?",o.unknownOption.val(e),t.prepend(o.unknownOption),t.val(e)},r.$on("$destroy",function(){o.renderUnknownOption=g}),o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.readValue=function(){return o.removeUnknownOption(),t.val()},o.writeValue=function(e){o.hasOption(e)?(o.removeUnknownOption(),t.val(e),""===e&&o.emptyOption.prop("selected",!0)):null==e&&o.emptyOption?(o.removeUnknownOption(),t.val("")):o.renderUnknownOption(e)},o.addOption=function(t,e){st(t,'"option value"'),""===t&&(o.emptyOption=e);var n=s.get(t)||0;s.put(t,n+1)},o.removeOption=function(t){var e=s.get(t);e&&(1===e?(s.remove(t),""===t&&(o.emptyOption=n)):s.put(t,e-1))},o.hasOption=function(t){return!!s.get(t)}}],Oo=function(){return{restrict:"E",require:["select","?ngModel"],controller:No,link:function(t,e,n,r){var i=r[1];if(i){var s=r[0];if(s.ngModelCtrl=i,i.$render=function(){s.writeValue(i.$viewValue)},e.on("change",function(){t.$apply(function(){i.$setViewValue(s.readValue())})}),n.multiple){s.readValue=function(){var t=[];return o(e.find("option"),function(e){e.selected&&t.push(e.value)}),t},s.writeValue=function(t){var n=new Dt(t);o(e.find("option"),function(t){t.selected=_(n.get(t.value))})};var a,u=NaN;t.$watch(function(){u!==i.$viewValue||j(a,i.$viewValue)||(a=$(i.$viewValue),i.$render()),u=i.$viewValue}),i.$isEmpty=function(t){return!t||0===t.length}}}}}},To=["$interpolate",function(t){return{restrict:"E",priority:100,compile:function(e,n){if(_(n.value))var r=t(n.value,!0);else{var i=t(e.text(),!0);i||n.$set("value",e.text())}return function(t,e,n){function o(t){a.addOption(t,e),a.ngModelCtrl.$render(),e[0].hasAttribute("selected")&&(e[0].selected=!0)}var s=e.parent(),a=s.data("$selectController")||s.parent().data("$selectController");if(a&&a.ngModelCtrl){if(r){var u;n.$observe("value",function(t){_(u)&&a.removeOption(u),u=t,o(t)})}else i?t.$watch(i,function(t,e){n.$set("value",t),e!==t&&a.removeOption(e),o(t)}):o(n.value);e.on("$destroy",function(){a.removeOption(n.value),a.ngModelCtrl.$render()})}}}}}],ko=m({restrict:"E",terminal:!1}),Io=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},Po=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,o){if(o){var s,a=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(x(t)&&0<t.length&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp",a,t,J(e));s=t||n,o.$validate()}),o.$validators.pattern=function(t,e){return o.$isEmpty(e)||b(s)||s.test(e)}}}}},Fo=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){t=d(t),i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>i||r.$isEmpty(e)||e.length<=i}}}}},Do=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=d(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(rt(),ht(Gn),Gn.module("ngLocale",[],["$provide",function(t){function e(t){t+="";var e=t.indexOf(".");return-1==e?0:t.length-e-1}t.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",pluralCat:function(t,r){var i=0|t,o=r;return n===o&&(o=Math.min(e(t),3)),Math.pow(10,o),1==i&&0==o?"one":"other"}})}]),Ln(e).ready(function(){Q(e,Z)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(t,e,n){"use strict";function r(t,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,o,s,a,u){function c(){d&&(r.cancel(d),d=null),h&&(h.$destroy(),h=null),f&&(d=r.leave(f),d.then(function(){d=null}),f=null)}function l(){var s=t.current&&t.current.locals;if(e.isDefined(s&&s.$template)){var s=i.$new(),a=t.current;f=u(s,function(t){r.enter(t,null,f||o).then(function(){!e.isDefined(p)||p&&!i.$eval(p)||n()}),c()}),h=a.scope=s,h.$emit("$viewContentLoaded"),h.$eval(g)}else c()}var h,f,d,p=s.autoscroll,g=s.onload||"";i.$on("$routeChangeSuccess",l),l()}}}function i(t,e,n){return{restrict:"ECA",priority:-400,link:function(r,i){var o=n.current,s=o.locals;i.html(s.$template);var a=t(i.contents());o.controller&&(s.$scope=r,s=e(o.controller,s),o.controllerAs&&(r[o.controllerAs]=s),i.data("$ngControllerController",s),i.children().data("$ngControllerController",s)),a(r)}}}t=e.module("ngRoute",["ng"]).provider("$route",function(){function t(t,n){return e.extend(Object.create(t),n)}function n(t,e){var n=e.caseInsensitiveMatch,r={originalPath:t,regexp:t},i=r.keys=[];return t=t.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(t,e,n,r){return t="?"===r?r:null,r="*"===r?r:null,i.push({name:n,optional:!!t}),e=e||"",""+(t?"":e)+"(?:"+(t?e:"")+(r&&"(.+?)"||"([^/]+)")+(t||"")+")"+(t||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+t+"$",n?"i":""),r}var r={};this.when=function(t,i){var o=e.copy(i);if(e.isUndefined(o.reloadOnSearch)&&(o.reloadOnSearch=!0),
e.isUndefined(o.caseInsensitiveMatch)&&(o.caseInsensitiveMatch=this.caseInsensitiveMatch),r[t]=e.extend(o,t&&n(t,o)),t){var s="/"==t[t.length-1]?t.substr(0,t.length-1):t+"/";r[s]=e.extend({redirectTo:t},n(s,o))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(t){return"string"==typeof t&&(t={redirectTo:t}),this.when(null,t),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,i,s,a,u,c,l){function h(t){var r=y.current;(v=(g=d())&&r&&g.$$route===r.$$route&&e.equals(g.pathParams,r.pathParams)&&!g.reloadOnSearch&&!m)||!r&&!g||n.$broadcast("$routeChangeStart",g,r).defaultPrevented&&t&&t.preventDefault()}function f(){var t=y.current,r=g;v?(t.params=r.params,e.copy(t.params,s),n.$broadcast("$routeUpdate",t)):(r||t)&&(m=!1,(y.current=r)&&r.redirectTo&&(e.isString(r.redirectTo)?i.path(p(r.redirectTo,r.params)).search(r.params).replace():i.url(r.redirectTo(r.pathParams,i.path(),i.search())).replace()),a.when(r).then(function(){if(r){var t,n,i=e.extend({},r.resolve);return e.forEach(i,function(t,n){i[n]=e.isString(t)?u.get(t):u.invoke(t,null,null,n)}),e.isDefined(t=r.template)?e.isFunction(t)&&(t=t(r.params)):e.isDefined(n=r.templateUrl)&&(e.isFunction(n)&&(n=n(r.params)),e.isDefined(n)&&(r.loadedTemplateUrl=l.valueOf(n),t=c(n))),e.isDefined(t)&&(i.$template=t),a.all(i)}}).then(function(i){r==y.current&&(r&&(r.locals=i,e.copy(r.params,s)),n.$broadcast("$routeChangeSuccess",r,t))},function(e){r==y.current&&n.$broadcast("$routeChangeError",r,t,e)}))}function d(){var n,o;return e.forEach(r,function(r,s){var a;if(a=!o){var u=i.path();a=r.keys;var c={};if(r.regexp)if(u=r.regexp.exec(u)){for(var l=1,h=u.length;l<h;++l){var f=a[l-1],d=u[l];f&&d&&(c[f.name]=d)}a=c}else a=null;else a=null;a=n=a}a&&(o=t(r,{params:e.extend({},i.search(),n),pathParams:n}),o.$$route=r)}),o||r[null]&&t(r[null],{params:{},pathParams:{}})}function p(t,n){var r=[];return e.forEach((t||"").split(":"),function(t,e){if(0===e)r.push(t);else{var i=t.match(/(\w+)(?:[?*])?(.*)/),o=i[1];r.push(n[o]),r.push(i[2]||""),delete n[o]}}),r.join("")}var g,v,m=!1,y={routes:r,reload:function(){m=!0,n.$evalAsync(function(){h(),f()})},updateParams:function(t){if(!this.current||!this.current.$$route)throw o("norout");t=e.extend({},this.current.params,t),i.path(p(this.current.$$route.originalPath,t)),i.search(t)}};return n.$on("$locationChangeStart",h),n.$on("$locationChangeSuccess",f),y}]});var o=e.$$minErr("ngRoute");t.provider("$routeParams",function(){this.$get=function(){return{}}}),t.directive("ngView",r),t.directive("ngView",i),r.$inject=["$route","$anchorScroll","$animate"],i.$inject=["$compile","$controller","$route"]}(window,window.angular),function(t,e,n){"use strict";function r(t,n,r){i.directive(t,["$parse","$swipe",function(i,o){return function(s,a,u){function c(t){if(!l)return!1;var e=Math.abs(t.y-l.y);return t=(t.x-l.x)*n,h&&75>e&&0<t&&30<t&&.3>e/t}var l,h,f=i(u[t]),d=["touch"];e.isDefined(u.ngSwipeDisableMouse)||d.push("mouse"),o.bind(a,{start:function(t,e){l=t,h=!0},cancel:function(t){h=!1},end:function(t,e){c(t)&&s.$apply(function(){a.triggerHandler(r),f(s,{$event:e})})}},d)}}])}var i=e.module("ngTouch",[]);i.factory("$swipe",[function(){function t(t){t=t.originalEvent||t;var e=t.touches&&t.touches.length?t.touches:[t];return t=t.changedTouches&&t.changedTouches[0]||e[0],{x:t.clientX,y:t.clientY}}function n(t,n){var i=[];return e.forEach(t,function(t){(t=r[t][n])&&i.push(t)}),i.join(" ")}var r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(e,r,i){var o,s,a,u,c=!1;i=i||["mouse","touch"],e.on(n(i,"start"),function(e){a=t(e),c=!0,s=o=0,u=a,r.start&&r.start(a,e)});var l=n(i,"cancel");l&&e.on(l,function(t){c=!1,r.cancel&&r.cancel(t)}),e.on(n(i,"move"),function(e){if(c&&a){var n=t(e);o+=Math.abs(n.x-u.x),s+=Math.abs(n.y-u.y),u=n,10>o&&10>s||(s>o?(c=!1,r.cancel&&r.cancel(e)):(e.preventDefault(),r.move&&r.move(n,e)))}}),e.on(n(i,"end"),function(e){c&&(c=!1,r.end&&r.end(t(e),e))})}}}]),i.config(["$provide",function(t){t.decorator("ngClickDirective",["$delegate",function(t){return t.shift(),t}])}]),i.directive("ngClick",["$parse","$timeout","$rootElement",function(t,n,r){function i(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r+1],o=n;if(25>Math.abs(t[r]-e)&&25>Math.abs(i-o))return t.splice(r,r+2),!0}return!1}function o(t){if(!(2500<Date.now()-a)){var n=t.touches&&t.touches.length?t.touches:[t],r=n[0].clientX,n=n[0].clientY;if(!(1>r&&1>n||c&&c[0]===r&&c[1]===n)){c&&(c=null);var o=t.target;"label"===e.lowercase(o.nodeName||o[0]&&o[0].nodeName)&&(c=[r,n]),i(u,r,n)||(t.stopPropagation(),t.preventDefault(),t.target&&t.target.blur&&t.target.blur())}}}function s(t){t=t.touches&&t.touches.length?t.touches:[t];var e=t[0].clientX,r=t[0].clientY;u.push(e,r),n(function(){for(var t=0;t<u.length;t+=2)if(u[t]==e&&u[t+1]==r){u.splice(t,t+2);break}},2500,!1)}var a,u,c;return function(n,c,l){var h,f,d,p,g=t(l.ngClick),v=!1;c.on("touchstart",function(t){v=!0,h=t.target?t.target:t.srcElement,3==h.nodeType&&(h=h.parentNode),c.addClass("ng-click-active"),f=Date.now(),t=t.originalEvent||t,t=(t.touches&&t.touches.length?t.touches:[t])[0],d=t.clientX,p=t.clientY}),c.on("touchcancel",function(t){v=!1,c.removeClass("ng-click-active")}),c.on("touchend",function(t){var n=Date.now()-f,g=t.originalEvent||t,m=(g.changedTouches&&g.changedTouches.length?g.changedTouches:g.touches&&g.touches.length?g.touches:[g])[0],g=m.clientX,m=m.clientY,y=Math.sqrt(Math.pow(g-d,2)+Math.pow(m-p,2));v&&750>n&&12>y&&(u||(r[0].addEventListener("click",o,!0),r[0].addEventListener("touchstart",s,!0),u=[]),a=Date.now(),i(u,g,m),h&&h.blur(),e.isDefined(l.disabled)&&!1!==l.disabled||c.triggerHandler("click",[t])),v=!1,c.removeClass("ng-click-active")}),c.onclick=function(t){},c.on("click",function(t,e){n.$apply(function(){g(n,{$event:e||t})})}),c.on("mousedown",function(t){c.addClass("ng-click-active")}),c.on("mousemove mouseup",function(t){c.removeClass("ng-click-active")})}}]),r("ngSwipeLeft",-1,"swipeleft"),r("ngSwipeRight",1,"swiperight")}(window,window.angular),function(t,e,n){"use strict";function r(t,e,n){if(!t)throw ngMinErr("areq",e||"?",n||"required");return t}function i(t,e){return t||e?t?e?(L(t)&&(t=t.join(" ")),L(e)&&(e=e.join(" ")),t+" "+e):t:e:""}function o(t){var e={};return t&&(t.to||t.from)&&(e.to=t.to,e.from=t.from),e}function s(t,e,n){var r="";return t=L(t)?t:t&&M(t)&&t.length?t.split(/\s+/):[],j(t,function(t,i){t&&0<t.length&&(r+=0<i?" ":"",r+=n?e+t:t+e)}),r}function a(t){if(t instanceof $)switch(t.length){case 0:return[];case 1:if(1===t[0].nodeType)return t;break;default:return $(u(t))}if(1===t.nodeType)return $(t)}function u(t){if(!t[0])return t;for(var e=0;e<t.length;e++){var n=t[e];if(1==n.nodeType)return n}}function c(t,e,n){j(e,function(e){t.addClass(e,n)})}function l(t,e,n){j(e,function(e){t.removeClass(e,n)})}function h(t){return function(e,n){n.addClass&&(c(t,e,n.addClass),n.addClass=null),n.removeClass&&(l(t,e,n.removeClass),n.removeClass=null)}}function f(t){if(t=t||{},!t.$$prepared){var e=t.domOperation||F;t.domOperation=function(){t.$$domOperationFired=!0,e(),e=F},t.$$prepared=!0}return t}function d(t,e){p(t,e),g(t,e)}function p(t,e){e.from&&(t.css(e.from),e.from=null)}function g(t,e){e.to&&(t.css(e.to),e.to=null)}function v(t,e,n){var r=(e.addClass||"")+" "+(n.addClass||""),i=(e.removeClass||"")+" "+(n.removeClass||"");return t=m(t.attr("class"),r,i),n.preparationClasses&&(e.preparationClasses=x(n.preparationClasses,e.preparationClasses),delete n.preparationClasses),r=e.domOperation!==F?e.domOperation:null,D(e,n),r&&(e.domOperation=r),e.addClass=t.addClass?t.addClass:null,e.removeClass=t.removeClass?t.removeClass:null,e}function m(t,e,n){function r(t){M(t)&&(t=t.split(" "));var e={};return j(t,function(t){t.length&&(e[t]=!0)}),e}var i={};t=r(t),e=r(e),j(e,function(t,e){i[e]=1}),n=r(n),j(n,function(t,e){i[e]=1===i[e]?null:-1});var o={addClass:"",removeClass:""};return j(i,function(e,n){var r,i;1===e?(r="addClass",i=!t[n]):-1===e&&(r="removeClass",i=t[n]),i&&(o[r].length&&(o[r]+=" "),o[r]+=n)}),o}function y(t){return t instanceof e.element?t[0]:t}function b(t,e,n){var r="";e&&(r=s(e,"ng-",!0)),n.addClass&&(r=x(r,s(n.addClass,"-add"))),n.removeClass&&(r=x(r,s(n.removeClass,"-remove"))),r.length&&(n.preparationClasses=r,t.addClass(r))}function _(t,e){var n=e?"-"+e+"s":"";return S(t,[z,n]),[z,n]}function w(t,e){var n=e?"paused":"",r=I+"PlayState";return S(t,[r,n]),[r,n]}function S(t,e){t.style[e[0]]=e[1]}function x(t,e){return t?e?t+" "+e:t:e}function E(t,e,n){var r=Object.create(null),i=t.getComputedStyle(e)||{};return j(n,function(t,e){var n=i[t];if(n){var o=n.charAt(0);("-"===o||"+"===o||0<=o)&&(n=A(n)),0===n&&(n=null),r[e]=n}}),r}function A(t){var e=0;return t=t.split(/\s*,\s*/),j(t,function(t){"s"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t=parseFloat(t)||0,e=e?Math.max(t,e):t}),e}function C(t){return 0===t||null!=t}function R(t,e){var n=T,r=t+"s";return e?n+="Duration":r+=" linear all",[n,r]}function N(){var t=Object.create(null);return{flush:function(){t=Object.create(null)},count:function(e){return(e=t[e])?e.total:0},get:function(e){return(e=t[e])&&e.value},put:function(e,n){t[e]?t[e].total++:t[e]={total:1,value:n}}}}function O(t,e,n){j(n,function(n){t[n]=U(t[n])?t[n]:e.style.getPropertyValue(n)})}var T,k,I,P,F=e.noop,D=e.extend,$=e.element,j=e.forEach,L=e.isArray,M=e.isString,B=e.isObject,H=e.isUndefined,U=e.isDefined,K=e.isFunction,q=e.isElement;H(t.ontransitionend)&&U(t.onwebkittransitionend)?(T="WebkitTransition",k="webkitTransitionEnd transitionend"):(T="transition",k="transitionend"),H(t.onanimationend)&&U(t.onwebkitanimationend)?(I="WebkitAnimation",P="webkitAnimationEnd animationend"):(I="animation",P="animationend");var J=I+"Delay",V=I+"Duration",z=T+"Delay";t=T+"Duration";var X={transitionDuration:t,transitionDelay:z,transitionProperty:T+"Property",animationDuration:V,animationDelay:J,animationIterationCount:I+"IterationCount"},W={transitionDuration:t,transitionDelay:z,animationDuration:V,animationDelay:J};e.module("ngAnimate",[]).directive("ngAnimateChildren",[function(){return function(t,n,r){t=r.ngAnimateChildren,e.isString(t)&&0===t.length?n.data("$$ngAnimateChildren",!0):r.$observe("ngAnimateChildren",function(t){n.data("$$ngAnimateChildren","on"===t||"true"===t)})}}]).factory("$$rAFScheduler",["$$rAF",function(t){function e(t){r=r.concat(t),n()}function n(){if(r.length){for(var e=r.shift(),o=0;o<e.length;o++)e[o]();i||t(function(){i||n()})}}var r,i;return r=e.queue=[],e.waitUntilQuiet=function(e){i&&i(),i=t(function(){i=null,e(),n()})},e}]).factory("$$AnimateRunner",["$q","$sniffer","$$animateAsyncRun",function(t,e,n){function r(t){this.setHost(t),this._doneCallbacks=[],this._runInAnimationFrame=n(),this._state=0}return r.chain=function(t,e){function n(){r===t.length?e(!0):t[r](function(t){!1===t?e(!1):(r++,n())})}var r=0;n()},r.all=function(t,e){function n(n){i=i&&n,++r===t.length&&e(i)}var r=0,i=!0;j(t,function(t){t.done(n)})},r.prototype={setHost:function(t){this.host=t||{}},done:function(t){2===this._state?t():this._doneCallbacks.push(t)},progress:F,getPromise:function(){if(!this.promise){var e=this;this.promise=t(function(t,n){e.done(function(e){!1===e?n():t()})})}return this.promise},then:function(t,e){return this.getPromise().then(t,e)},"catch":function(t){return this.getPromise()["catch"](t)},"finally":function(t){return this.getPromise()["finally"](t)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(t){var e=this;0===e._state&&(e._state=1,e._runInAnimationFrame(function(){e._resolve(t)}))},_resolve:function(t){2!==this._state&&(j(this._doneCallbacks,function(e){e(t)}),this._doneCallbacks.length=0,this._state=2)}},r}]).factory("$$animateAsyncRun",["$$rAF",function(t){function e(e){n.push(e),1<n.length||t(function(){for(var t=0;t<n.length;t++)n[t]();n=[]})}var n=[];return function(){var t=!1;return e(function(){t=!0}),function(n){t?n():e(n)}}}]).provider("$$animateQueue",["$animateProvider",function(t){function e(t,e,n,r){return i[t].some(function(t){return t(e,n,r)})}function n(t,e){t=t||{};var n=0<(t.addClass||"").length,r=0<(t.removeClass||"").length;return e?n&&r:n||r}var i=this.rules={skip:[],cancel:[],join:[]};i.join.push(function(t,e,r){return!e.structural&&n(e.options)}),i.skip.push(function(t,e,r){return!e.structural&&!n(e.options)}),i.skip.push(function(t,e,n){return"leave"==n.event&&e.structural}),i.skip.push(function(t,e,n){return n.structural&&2===n.state&&!e.structural}),i.cancel.push(function(t,e,n){return n.structural&&e.structural}),i.cancel.push(function(t,e,n){return 2===n.state&&e.structural}),i.cancel.push(function(t,e,n){return t=e.options,n=n.options,t.addClass&&t.addClass===n.removeClass||t.removeClass&&t.removeClass===n.addClass}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$HashMap","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow",function(i,o,s,c,l,p,g,m,_,w){function S(){var t=!1;return function(e){t?e():o.$$postDigest(function(){t=!0,e()})}}function x(t,e){var n=y(t),r=[],i=F[e];return i&&j(i,function(t){t.node.contains(n)&&r.push(t.callback)}),r}function E(t,r,s){function u(e,n,r,o){_(function(){var e=x(t,n);e.length&&i(function(){j(e,function(e){e(t,r,o)})})}),e.progress(n,r,o)}function c(e){var n=t,r=s;r.preparationClasses&&(n.removeClass(r.preparationClasses),r.preparationClasses=null),r.activeClasses&&(n.removeClass(r.activeClasses),r.activeClasses=null),V(t,s),d(t,s),s.domOperation(),m.complete(!e)}var l,h;(t=a(t))&&(l=y(t),h=t.parent()),s=f(s);var m=new g,_=S();if(L(s.addClass)&&(s.addClass=s.addClass.join(" ")),s.addClass&&!M(s.addClass)&&(s.addClass=null),L(s.removeClass)&&(s.removeClass=s.removeClass.join(" ")),s.removeClass&&!M(s.removeClass)&&(s.removeClass=null),s.from&&!B(s.from)&&(s.from=null),s.to&&!B(s.to)&&(s.to=null),!l)return c(),m;var w=[l.className,s.addClass,s.removeClass].join(" ");if(!J(w))return c(),m;var E=0<=["enter","move","leave"].indexOf(r),R=!I||k.get(l),w=!R&&T.get(l)||{},P=!!w.state;if(R||P&&1==w.state||(R=!N(t,h,r)),R)return c(),m;if(E&&A(t),h={structural:E,element:t,event:r,close:c,options:s,runner:m},P){if(e("skip",t,h,w))return 2===w.state?(c(),m):(v(t,w.options,s),w.runner);if(e("cancel",t,h,w))if(2===w.state)w.runner.end();else{if(!w.structural)return v(t,w.options,h.options),w.runner;w.close()}else if(e("join",t,h,w)){if(2!==w.state)return b(t,E?r:null,s),r=h.event=w.event,s=v(t,w.options,h.options),w.runner;v(t,s,{})}}else v(t,s,{});if((P=h.structural)||(P="animate"===h.event&&0<Object.keys(h.options.to||{}).length||n(h.options)),!P)return c(),C(t),m;var F=(w.counter||0)+1;return h.counter=F,O(t,1,h),o.$$postDigest(function(){var e=T.get(l),i=!e,e=e||{},o=0<(t.parent()||[]).length&&("animate"===e.event||e.structural||n(e.options));i||e.counter!==F||!o?(i&&(V(t,s),d(t,s)),(i||E&&e.event!==r)&&(s.domOperation(),m.end()),o||C(t)):(r=!e.structural&&n(e.options,!0)?"setClass":e.event,O(t,2),e=p(t,r,e.options),e.done(function(e){c(!e),(e=T.get(l))&&e.counter===F&&C(y(t)),u(m,r,"close",{})}),m.setHost(e),u(m,r,"start",{}))}),m}function A(t){t=y(t).querySelectorAll("[data-ng-animate]"),j(t,function(t){var e=parseInt(t.getAttribute("data-ng-animate")),n=T.get(t);switch(e){case 2:n.runner.end();case 1:n&&T.remove(t)}})}function C(t){t=y(t),t.removeAttribute("data-ng-animate"),T.remove(t)}function R(t,e){return y(t)===y(e)}function N(t,e,n){n=$(c[0].body);var r,i=R(t,n)||"HTML"===t[0].nodeName,o=R(t,s),a=!1;for((t=t.data("$ngAnimatePin"))&&(e=t);e&&e.length&&(o||(o=R(e,s)),t=e[0],1===t.nodeType);){var u=T.get(t)||{};if(a||(a=u.structural||k.get(t)),(H(r)||!0===r)&&(t=e.data("$$ngAnimateChildren"),U(t)&&(r=t)),a&&!1===r)break;o||(o=R(e,s),o||(t=e.data("$ngAnimatePin"))&&(e=t)),i||(i=R(e,n)),e=e.parent()}return(!a||r)&&o&&i}function O(t,e,n){n=n||{},n.state=e,t=y(t),t.setAttribute("data-ng-animate",e),n=(e=T.get(t))?D(e,n):n,T.put(t,n)}var T=new l,k=new l,I=null,P=o.$watch(function(){return 0===m.totalPendingRequests},function(t){t&&(P(),o.$$postDigest(function(){o.$$postDigest(function(){null===I&&(I=!0)})}))}),F={},K=t.classNameFilter(),J=K?function(t){return K.test(t)}:function(){return!0},V=h(_);return{on:function(t,e,n){e=u(e),F[t]=F[t]||[],F[t].push({node:e,callback:n})},off:function(t,e,n){function r(t,e,n){var r=u(e);return t.filter(function(t){return!(t.node===r&&(!n||t.callback===n))})}var i=F[t];i&&(F[t]=1===arguments.length?null:r(i,e,n))},pin:function(t,e){r(q(t),"element","not an element"),r(q(e),"parentElement","not an element"),t.data("$ngAnimatePin",e)},push:function(t,e,n,r){return n=n||{},n.domOperation=r,E(t,e,n)},enabled:function(t,e){var n=arguments.length;if(0===n)e=!!I;else if(q(t)){var r=y(t),i=k.get(r);1===n?e=!i:(e=!!e)?i&&k.remove(r):k.put(r,!0)}else e=I=!!t;return e}}}]}]).provider("$$animation",["$animateProvider",function(t){function e(t){return t.data("$$animationRunner")}var n=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$HashMap","$$rAFScheduler",function(t,r,o,s,a,u){function c(t){function e(t){if(t.processed)return t;t.processed=!0;var n=t.domNode,o=n.parentNode;i.put(n,t);for(var s;o;){if(s=i.get(o)){s.processed||(s=e(s));break}o=o.parentNode}return(s||r).children.push(t),t}var n,r={children:[]},i=new a;for(n=0;n<t.length;n++){var o=t[n];i.put(o.domNode,t[n]={domNode:o.domNode,fn:o.fn,children:[]})}for(n=0;n<t.length;n++)e(t[n]);return function(t){var e,n=[],r=[];for(e=0;e<t.children.length;e++)r.push(t.children[e]);t=r.length;var i=0,o=[];for(e=0;e<r.length;e++){var s=r[e];0>=t&&(t=i,i=0,n.push(o),o=[]),o.push(s.fn),s.children.forEach(function(t){i++,r.push(t)}),t--}return o.length&&n.push(o),n}(r)}var l=[],p=h(t);return function(a,h,g){function v(t){t=t.hasAttribute("ng-animate-ref")?[t]:t.querySelectorAll("[ng-animate-ref]");var e=[];return j(t,function(t){var n=t.getAttribute("ng-animate-ref");n&&n.length&&e.push(t)}),e}function m(t){var e=[],n={};j(t,function(t,r){var i=y(t.element),o=0<=["enter","move"].indexOf(t.event),i=t.structural?v(i):[];if(i.length){var s=o?"to":"from";j(i,function(t){var e=t.getAttribute("ng-animate-ref");n[e]=n[e]||{},n[e][s]={animationID:r,element:$(t)}})}else e.push(t)});var r={},i={};return j(n,function(n,o){var s=n.from,a=n.to;if(s&&a){var u=t[s.animationID],c=t[a.animationID],l=s.animationID.toString();if(!i[l]){var h=i[l]={structural:!0,beforeStart:function(){u.beforeStart(),c.beforeStart()},close:function(){u.close(),c.close()},classes:b(u.classes,c.classes),from:u,to:c,anchors:[]};h.classes.length?e.push(h):(e.push(u),e.push(c))}i[l].anchors.push({out:s.element,"in":a.element})}else s=s?s.animationID:a.animationID,a=s.toString(),r[a]||(r[a]=!0,e.push(t[s]))}),e}function b(t,e){t=t.split(" "),e=e.split(" ");for(var n=[],r=0;r<t.length;r++){var i=t[r];if("ng-"!==i.substring(0,3))for(var o=0;o<e.length;o++)if(i===e[o]){n.push(i);break}}return n.join(" ")}function _(t){for(var e=n.length-1;0<=e;e--){var r=n[e];if(o.has(r)&&(r=o.get(r)(t)))return r}}function w(t,n){t.from&&t.to?(e(t.from.element).setHost(n),e(t.to.element).setHost(n)):e(t.element).setHost(n)}function S(){var t=e(a);!t||"leave"===h&&g.$$domOperationFired||t.end()}function x(e){a.off("$destroy",S),a.removeData("$$animationRunner"),p(a,g),d(a,g),g.domOperation(),R&&t.removeClass(a,R),a.removeClass("ng-animate"),A.complete(!e)}g=f(g);var E=0<=["enter","move","leave"].indexOf(h),A=new s({end:function(){x()},cancel:function(){x(!0)}});if(!n.length)return x(),A;a.data("$$animationRunner",A);var C=i(a.attr("class"),i(g.addClass,g.removeClass)),R=g.tempClasses;return R&&(C+=" "+R,g.tempClasses=null),l.push({element:a,classes:C,event:h,structural:E,options:g,beforeStart:function(){a.addClass("ng-animate"),R&&t.addClass(a,R)},close:x}),a.on("$destroy",S),1<l.length?A:(r.$$postDigest(function(){var t=[];j(l,function(n){e(n.element)?t.push(n):n.close()}),l.length=0;var n=m(t),r=[];j(n,function(t){r.push({domNode:y(t.from?t.from.element:t.element),fn:function(){t.beforeStart();var n,r=t.close;if(e(t.anchors?t.from.element||t.to.element:t.element)){var i=_(t);i&&(n=i.start)}n?(n=n(),n.done(function(t){r(!t)}),w(t,n)):r()}})}),u(c(r))}),A)}}]}]).provider("$animateCss",["$animateProvider",function(t){var e=N(),n=N();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$animate",function(t,r,i,a,u,c,l,v){function m(t,e){var n=t.parentNode;return(n.$$ngAnimateParentKey||(n.$$ngAnimateParentKey=++D))+"-"+t.getAttribute("class")+"-"+e}function b(i,o,a,u){var c;return 0<e.count(a)&&(c=n.get(a),c||(o=s(o,"-stagger"),r.addClass(i,o),c=E(t,i,u),c.animationDuration=Math.max(c.animationDuration,0),c.transitionDuration=Math.max(c.transitionDuration,0),r.removeClass(i,o),n.put(a,c))),c||{}}function x(t){$.push(t),l.waitUntilQuiet(function(){e.flush(),n.flush();for(var t=u(),r=0;r<$.length;r++)$[r](t);$.length=0})}function A(n,r,i){return r=e.get(i),r||(r=E(t,n,X),"infinite"===r.animationIterationCount&&(r.animationIterationCount=1)),e.put(i,r),n=r,i=n.animationDelay,r=n.transitionDelay,n.maxDelay=i&&r?Math.max(i,r):i||r,n.maxDuration=Math.max(n.animationDuration*n.animationIterationCount,n.transitionDuration),n}var N=h(r),D=0,$=[];return function(t,n){function u(){h()}function l(){h(!0)}function h(e){H||K&&U||(H=!0,U=!1,n.$$skipPreparationClasses||r.removeClass(t,st),r.removeClass(t,ut),w(B,!1),_(B,!1),j(tt,function(t){B.style[t[0]]=""}),N(t,n),d(t,n),Object.keys(M).length&&j(M,function(t,e){t?B.style.setProperty(e,t):B.style.removeProperty(e)}),n.onDone&&n.onDone(),q&&q.complete(!e))}function E(t){pt.blockTransition&&_(B,t),pt.blockKeyframeAnimation&&w(B,!!t)}function D(){return q=new i({end:u,cancel:l}),x(F),h(),{$$willAnimate:!1,start:function(){return q},end:u}}function $(){function e(){if(!H){if(E(!1),j(tt,function(t){B.style[t[0]]=t[1]}),N(t,n),r.addClass(t,ut),pt.recalculateTimingStyles){if(at=B.className+" "+st,ct=m(B,at),ft=A(B,at,ct),dt=ft.maxDelay,Y=Math.max(dt,0),Q=ft.maxDuration,0===Q)return void h();pt.hasTransitions=0<ft.transitionDuration,pt.hasAnimations=0<ft.animationDuration}if(pt.applyAnimationDelay&&(dt="boolean"!=typeof n.delay&&C(n.delay)?parseFloat(n.delay):dt,Y=Math.max(dt,0),ft.animationDelay=dt,gt=[J,dt+"s"],tt.push(gt),B.style[gt[0]]=gt[1]),G=1e3*Y,Z=1e3*Q,n.easing){var e,c=n.easing;pt.hasTransitions&&(e=T+"TimingFunction",tt.push([e,c]),B.style[e]=c),pt.hasAnimations&&(e=I+"TimingFunction",tt.push([e,c]),B.style[e]=c)}ft.transitionDuration&&u.push(k),ft.animationDuration&&u.push(P),s=Date.now();var l=G+1.5*Z;e=s+l;var c=t.data("$$animateCss")||[],f=!0;if(c.length){var d=c[0];(f=e>d.expectedEndTime)?a.cancel(d.timer):c.push(h)}f&&(l=a(i,l,!1),c[0]={timer:l,expectedEndTime:e},c.push(h),t.data("$$animateCss",c)),t.on(u.join(" "),o),n.to&&(n.cleanupStyles&&O(M,B,Object.keys(n.to)),g(t,n))}}function i(){var e=t.data("$$animateCss");if(e){for(var n=1;n<e.length;n++)e[n]();t.removeData("$$animateCss")}}function o(t){t.stopPropagation();var e=t.originalEvent||t;t=e.$manualTimeStamp||e.timeStamp||Date.now(),e=parseFloat(e.elapsedTime.toFixed(3)),Math.max(t-s,0)>=G&&e>=Q&&(K=!0,h())}if(!H)if(B.parentNode){var s,u=[],c=function(t){if(K)U&&t&&(U=!1,h());else if(U=!t,ft.animationDuration)if(t=w(B,U),U)tt.push(t);else{var e=tt,n=e.indexOf(t);0<=t&&e.splice(n,1)}},l=0<ht&&(ft.transitionDuration&&0===lt.transitionDuration||ft.animationDuration&&0===lt.animationDuration)&&Math.max(lt.animationDelay,lt.transitionDelay);l?a(e,Math.floor(l*ht*1e3),!1):e(),X.resume=function(){c(!0)},X.pause=function(){c(!1)}}else h()}var M={},B=y(t);if(!B||!B.parentNode||!v.enabled())return D();n=f(n);var H,U,K,q,X,Y,G,Q,Z,tt=[],et=t.attr("class"),nt=o(n);if(0===n.duration||!c.animations&&!c.transitions)return D();var rt=n.event&&L(n.event)?n.event.join(" "):n.event,it="",ot="";rt&&n.structural?it=s(rt,"ng-",!0):rt&&(it=rt),n.addClass&&(ot+=s(n.addClass,"-add")),n.removeClass&&(ot.length&&(ot+=" "),ot+=s(n.removeClass,"-remove")),n.applyClassesEarly&&ot.length&&N(t,n);var st=[it,ot].join(" ").trim(),at=et+" "+st,ut=s(st,"-active"),et=nt.to&&0<Object.keys(nt.to).length;if(!(0<(n.keyframeStyle||"").length||et||st))return D();var ct,lt;0<n.stagger?(nt=parseFloat(n.stagger),lt={transitionDelay:nt,animationDelay:nt,transitionDuration:0,animationDuration:0}):(ct=m(B,at),lt=b(B,st,ct,W)),n.$$skipPreparationClasses||r.addClass(t,st),n.transitionStyle&&(nt=[T,n.transitionStyle],S(B,nt),tt.push(nt)),0<=n.duration&&(nt=0<B.style[T].length,nt=R(n.duration,nt),S(B,nt),tt.push(nt)),n.keyframeStyle&&(nt=[I,n.keyframeStyle],S(B,nt),tt.push(nt));var ht=lt?0<=n.staggerIndex?n.staggerIndex:e.count(ct):0;(rt=0===ht)&&!n.skipBlocking&&_(B,9999);var ft=A(B,at,ct),dt=ft.maxDelay;Y=Math.max(dt,0),Q=ft.maxDuration;var pt={};if(pt.hasTransitions=0<ft.transitionDuration,pt.hasAnimations=0<ft.animationDuration,pt.hasTransitionAll=pt.hasTransitions&&"all"==ft.transitionProperty,pt.applyTransitionDuration=et&&(pt.hasTransitions&&!pt.hasTransitionAll||pt.hasAnimations&&!pt.hasTransitions),pt.applyAnimationDuration=n.duration&&pt.hasAnimations,pt.applyTransitionDelay=C(n.delay)&&(pt.applyTransitionDuration||pt.hasTransitions),pt.applyAnimationDelay=C(n.delay)&&pt.hasAnimations,pt.recalculateTimingStyles=0<ot.length,(pt.applyTransitionDuration||pt.applyAnimationDuration)&&(Q=n.duration?parseFloat(n.duration):Q,pt.applyTransitionDuration&&(pt.hasTransitions=!0,ft.transitionDuration=Q,nt=0<B.style[T+"Property"].length,tt.push(R(Q,nt))),pt.applyAnimationDuration&&(pt.hasAnimations=!0,ft.animationDuration=Q,tt.push([V,Q+"s"]))),0===Q&&!pt.recalculateTimingStyles)return D();if(null!=n.delay){var gt=parseFloat(n.delay);pt.applyTransitionDelay&&tt.push([z,gt+"s"]),pt.applyAnimationDelay&&tt.push([J,gt+"s"])}return null==n.duration&&0<ft.transitionDuration&&(pt.recalculateTimingStyles=pt.recalculateTimingStyles||rt),G=1e3*Y,Z=1e3*Q,n.skipBlocking||(pt.blockTransition=0<ft.transitionDuration,pt.blockKeyframeAnimation=0<ft.animationDuration&&0<lt.animationDelay&&0===lt.animationDuration),n.from&&(n.cleanupStyles&&O(M,B,Object.keys(n.from)),p(t,n)),pt.blockTransition||pt.blockKeyframeAnimation?E(Q):n.skipBlocking||_(B,!1),{$$willAnimate:!0,end:u,start:function(){if(!H)return X={end:u,cancel:l,resume:null,pause:null},q=new i(X),x($),q}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(t){t.drivers.push("$$animateCssDriver"),this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(t,e,n,r,i,o,s){function a(t){return t.replace(/\bng-\S+\b/g,"")}function u(t,e){return M(t)&&(t=t.split(" ")),M(e)&&(e=e.split(" ")),t.filter(function(t){return-1===e.indexOf(t)}).join(" ")}function c(e,r,i){function o(t){var e={},n=y(t).getBoundingClientRect();return j(["width","height","top","left"],function(t){var r=n[t];switch(t){case"top":r+=d.scrollTop;break;case"left":r+=d.scrollLeft}e[t]=Math.floor(r)+"px"}),e}function s(){var e=a(i.attr("class")||""),n=u(e,h),e=u(h,e),n=t(l,{to:o(i),addClass:"ng-anchor-in "+n,removeClass:"ng-anchor-out "+e,delay:!0});return n.$$willAnimate?n:null}function c(){l.remove(),r.removeClass("ng-animate-shim"),i.removeClass("ng-animate-shim")}var l=$(y(r).cloneNode(!0)),h=a(l.attr("class")||"");r.addClass("ng-animate-shim"),i.addClass("ng-animate-shim"),l.addClass("ng-anchor"),p.append(l);var f;if(e=function(){var e=t(l,{addClass:"ng-anchor-out",delay:!0,from:o(r)});return e.$$willAnimate?e:null}(),!e&&(f=s(),!f))return c();var g=e||f;return{start:function(){function t(){r&&r.end()}var e,r=g.start();return r.done(function(){return r=null,!f&&(f=s())?(r=f.start(),r.done(function(){r=null,c(),e.complete()}),r):(c(),void e.complete())}),e=new n({end:t,cancel:t})}}}function l(t,e,r,i){var o=f(t,F),s=f(e,F),a=[];if(j(i,function(t){(t=c(r,t.out,t["in"]))&&a.push(t)}),o||s||0!==a.length)return{start:function(){function t(){j(e,function(t){t.end()})}var e=[];o&&e.push(o.start()),s&&e.push(s.start()),j(a,function(t){e.push(t.start())});var r=new n({end:t,cancel:t});return n.all(e,function(t){r.complete(t)}),r}}}function f(e){var n=e.element,r=e.options||{};return e.structural&&(r.event=e.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===e.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=x(r.event,r.preparationClasses)),e=t(n,r),e.$$willAnimate?e:null}if(!i.animations&&!i.transitions)return F;var d=s[0].body;e=y(r);var p=$(e.parentNode&&11===e.parentNode.nodeType||d.contains(e)?e:d);return h(o),function(t){return t.from&&t.to?l(t.from,t.to,t.classes,t.anchors):f(t)}}]}]).provider("$$animateJs",["$animateProvider",function(t){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(e,n,r){function i(n){n=L(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var s=n[o],a=t.$$registeredAnimations[s];a&&!i[s]&&(r.push(e.get(a)),i[s]=!0)}return r}var o=h(r);return function(t,e,r,s){function a(){s.domOperation(),o(t,s)}function u(t,e,r,i,o){switch(r){case"animate":e=[e,i.from,i.to,o];break;case"setClass":e=[e,g,v,o];break;case"addClass":e=[e,g,o];break;case"removeClass":e=[e,v,o];break;default:e=[e,o]}if(e.push(i),t=t.apply(t,e))if(K(t.start)&&(t=t.start()),t instanceof n)t.done(o);else if(K(t))return t;return F}function c(t,e,r,i,o){var s=[];return j(i,function(i){var a=i[o];a&&s.push(function(){var i,o,s=!1,c=function(t){s||(s=!0,(o||F)(t),i.complete(!t))};return i=new n({end:function(){c()},cancel:function(){c(!0)}}),o=u(a,t,e,r,function(t){c(!1===t)}),i})}),s}function l(t,e,r,i,o){var s=c(t,e,r,i,o);if(0===s.length){var a,u;"beforeSetClass"===o?(a=c(t,"removeClass",r,i,"beforeRemoveClass"),u=c(t,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(a=c(t,"removeClass",r,i,"removeClass"),u=c(t,"addClass",r,i,"addClass")),a&&(s=s.concat(a)),u&&(s=s.concat(u))}if(0!==s.length)return function(t){var e=[];return s.length&&j(s,function(t){e.push(t())}),e.length?n.all(e,t):t(),function(t){j(e,function(e){t?e.cancel():e.end()})}}}3===arguments.length&&B(r)&&(s=r,r=null),s=f(s),r||(r=t.attr("class")||"",s.addClass&&(r+=" "+s.addClass),s.removeClass&&(r+=" "+s.removeClass));var h,p,g=s.addClass,v=s.removeClass,m=i(r);if(m.length){var y,b;"leave"==e?(b="leave",y="afterLeave"):(b="before"+e.charAt(0).toUpperCase()+e.substr(1),y=e),"enter"!==e&&"move"!==e&&(h=l(t,e,s,m,b)),p=l(t,e,s,m,y)}if(h||p)return{start:function(){function e(e){o=!0,a(),d(t,s),u.complete(e)}var r,i=[];h&&i.push(function(t){r=h(t)}),i.length?i.push(function(t){a(),t(!0)}):a(),p&&i.push(function(t){r=p(t)});var o=!1,u=new n({end:function(){o||((r||F)(void 0),e(void 0))},cancel:function(){o||((r||F)(!0),e(!0))}});return n.chain(i,e),u}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(t){t.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(t,e){function n(e){return t(e.element,e.event,e.classes,e.options)}return function(t){if(!t.from||!t.to)return n(t);var r=n(t.from),i=n(t.to);return r||i?{start:function(){function t(){return function(){j(n,function(t){t.end()})}}var n=[];r&&n.push(r.start()),i&&n.push(i.start()),e.all(n,function(t){o.complete(t)});var o=new e({end:t(),cancel:t()});return o}}:void 0}}]}])}(window,window.angular),function(t,e,n){"use strict";function r(t){var n=[];return u(n,e.noop).chars(t),n.join("")}function i(t,n){var r,i={},o=t.split(",");for(r=0;r<o.length;r++)i[n?e.lowercase(o[r]):o[r]]=!0;return i}function o(t,n){function r(t,r,o,a){if(r=e.lowercase(r),S[r])for(;y.last()&&x[y.last()];)i("",y.last());w[r]&&y.last()==r&&i("",r),(a=_[r]||!!a)||y.push(r);var u={};o.replace(f,function(t,e,n,r,i){u[e]=s(n||r||i||"")}),n.start&&n.start(r,u,a)}function i(t,r){var i,o=0;if(r=e.lowercase(r))for(o=y.length-1;0<=o&&y[o]!=r;o--);if(0<=o){for(i=y.length-1;i>=o;i--)n.end&&n.end(y[i]);
y.length=o}}"string"!=typeof t&&(t=null===t||"undefined"==typeof t?"":""+t);var o,a,u,y=[],b=t;for(y.last=function(){return y[y.length-1]};t;){if(u="",a=!0,y.last()&&E[y.last()]?(t=t.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+y.last()+"[^>]*>","i"),function(t,e){return e=e.replace(g,"$1").replace(m,"$1"),n.chars&&n.chars(s(e)),""}),i("",y.last())):(0===t.indexOf("<!--")?(o=t.indexOf("--",4),0<=o&&t.lastIndexOf("-->",o)===o&&(n.comment&&n.comment(t.substring(4,o)),t=t.substring(o+3),a=!1)):v.test(t)?(o=t.match(v))&&(t=t.replace(o[0],""),a=!1):p.test(t)?(o=t.match(h))&&(t=t.substring(o[0].length),o[0].replace(h,i),a=!1):d.test(t)&&((o=t.match(l))?(o[4]&&(t=t.substring(o[0].length),o[0].replace(l,r)),a=!1):(u+="<",t=t.substring(1))),a&&(o=t.indexOf("<"),u+=0>o?t:t.substring(0,o),t=0>o?"":t.substring(o),n.chars&&n.chars(s(u)))),t==b)throw c("badparse",t);b=t}i()}function s(t){return t?(N.innerHTML=t.replace(/</g,"&lt;"),N.textContent):""}function a(t){return t.replace(/&/g,"&amp;").replace(y,function(t){var e=t.charCodeAt(0);return t=t.charCodeAt(1),"&#"+(1024*(e-55296)+(t-56320)+65536)+";"}).replace(b,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(t,n){var r=!1,i=e.bind(t,t.push);return{start:function(t,o,s){t=e.lowercase(t),!r&&E[t]&&(r=t),r||!0!==A[t]||(i("<"),i(t),e.forEach(o,function(r,o){var s=e.lowercase(o),u="img"===t&&"src"===s||"background"===s;!0!==R[s]||!0===C[s]&&!n(r,u)||(i(" "),i(o),i('="'),i(a(r)),i('"'))}),i(s?"/>":">"))},end:function(t){t=e.lowercase(t),r||!0!==A[t]||(i("</"),i(t),i(">")),t==r&&(r=!1)},chars:function(t){r||i(a(t))}}}var c=e.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,f=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,d=/^</,p=/^<\//,g=/\x3c!--(.*?)--\x3e/g,v=/<!DOCTYPE([^>]*?)>/i,m=/<!\[CDATA\[(.*?)]]\x3e/g,y=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/([^\#-~| |!])/g,_=i("area,br,col,hr,img,wbr");t=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),n=i("rp,rt");var w=e.extend({},n,t),S=e.extend({},t,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),x=e.extend({},n,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));t=i("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var E=i("script,style"),A=e.extend({},_,S,x,w,t),C=i("background,cite,href,longdesc,src,usemap,xlink:href");t=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),n=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0);var R=e.extend({},C,n,t),N=document.createElement("pre");e.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(t){return function(e){var n=[];return o(e,u(n,function(e,n){return!/^unsafe/.test(t(e,n))})),n.join("")}}]}),e.module("ngSanitize").filter("linky",["$sanitize",function(t){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i;return function(o,s){function a(t){t&&d.push(r(t))}function u(t,n){d.push("<a "),e.isDefined(s)&&d.push('target="',s,'" '),d.push('href="',t.replace(/"/g,"&quot;"),'">'),a(n),d.push("</a>")}if(!o)return o;for(var c,l,h,f=o,d=[];c=f.match(n);)l=c[0],c[2]||c[4]||(l=(c[3]?"http://":"mailto:")+l),h=c.index,a(f.substr(0,h)),u(l,c[0].replace(i,"")),f=f.substring(h+c[0].length);return a(f),t(d.join(""))}}])}(window,window.angular),function(t,e,n){"use strict";function r(t){return["$animate",function(t){return{restrict:"AE",transclude:"element",terminal:!0,require:"^^ngMessages",link:function(e,n,r,o,s){var a,u=n[0],c=r.ngMessage||r.when;r=r.ngMessageExp||r.whenExp;var l=function(t){a=t?i(t)?t:t.split(/[\s,]+/):null,o.reRender()};r?(l(e.$eval(r)),e.$watchCollection(r,l)):l(c);var h,f;o.register(u,f={test:function(t){var e=a;return t=e?i(e)?0<=e.indexOf(t):e.hasOwnProperty(t):void 0},attach:function(){h||s(e,function(e){t.enter(e,null,n),h=e;var r=h.$$attachId=o.getAttachId();h.on("$destroy",function(){h&&h.$$attachId===r&&(o.deregister(u),f.detach())})})},detach:function(){if(h){var e=h;h=null,t.leave(e)}}})}}}]}var i=e.isArray,o=e.forEach,s=e.isString,a=e.element;e.module("ngMessages",[]).directive("ngMessages",["$animate",function(t){function e(t,e){return s(e)&&0===e.length||n(t.$eval(e))}function n(t){return s(t)?t.length:!!t}return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(r,i,s){function a(t,e){for(var n=e,r=[];n&&n!==t;){var i=n.$$ngMessageNode;if(i&&i.length)return d[i];n.childNodes.length&&-1==r.indexOf(n)?(r.push(n),n=n.childNodes[n.childNodes.length-1]):n=n.previousSibling||n.parentNode}}var u=this,c=0,l=0;this.getAttachId=function(){return l++};var h,f,d=this.messages={};this.render=function(a){a=a||{},h=!1,f=a;for(var c=e(i,s.ngMessagesMultiple)||e(i,s.multiple),l=[],d={},p=u.head,g=!1,v=0;null!=p;){v++;var m=p.message,y=!1;g||o(a,function(t,e){!y&&n(t)&&m.test(e)&&!d[e]&&(y=d[e]=!0,m.attach())}),y?g=!c:l.push(m),p=p.next}o(l,function(t){t.detach()}),l.length!==v?t.setClass(r,"ng-active","ng-inactive"):t.setClass(r,"ng-inactive","ng-active")},i.$watchCollection(s.ngMessages||s["for"],u.render),this.reRender=function(){h||(h=!0,i.$evalAsync(function(){h&&f&&u.render(f)}))},this.register=function(t,e){var n=c.toString();d[n]={message:e};var i=r[0],o=d[n];u.head?(i=a(i,t))?(o.next=i.next,i.next=o):(o.next=u.head,u.head=o):u.head=o,t.$$ngMessageNode=n,c++,u.reRender()},this.deregister=function(t){var e=t.$$ngMessageNode;delete t.$$ngMessageNode;var n=d[e];(t=a(r[0],t))?t.next=n.next:u.head=n.next,delete d[e],u.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(t,e,n){return{restrict:"AE",require:"^^ngMessages",link:function(r,i,o){var s=o.ngMessagesInclude||o.src;t(s).then(function(t){n(t)(r,function(t){i.after(t),t=a(e[0].createComment(" ngMessagesInclude: "+s+" ")),i.after(t),i.remove()})})}}}]).directive("ngMessage",r("AE")).directive("ngMessageExp",r("A"))}(window,window.angular),!function(t,e){"use strict";function n(t){return/^-?\d+\.?\d*$/.test(t.replace(/["']/g,""))}var r=e.isDefined,i=e.isUndefined,o=e.isNumber,s=e.isObject,a=e.isArray,u=e.extend,c=e.toJson,l=e.fromJson,h=e.module("LocalStorageModule",[]);h.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(t){return this.prefix=t,this},this.setStorageType=function(t){return this.storageType=t,this},this.setStorageCookie=function(t,e){return this.cookie={expiry:t,path:e},this},this.setStorageCookieDomain=function(t){return this.cookie.domain=t,this},this.setNotify=function(t,e){return this.notify={setItem:t,removeItem:e},this},this.$get=["$rootScope","$window","$document","$parse",function(t,e,h,f){var d,p=this,g=p.prefix,v=p.cookie,m=p.notify,y=p.storageType;h?h[0]&&(h=h[0]):h=document,"."!==g.substr(-1)&&(g=g?g+".":"");var b=function(t){return g+t},_=function(){try{var n=y in e&&null!==e[y],r=b("__"+Math.round(1e7*Math.random()));return n&&(d=e[y],d.setItem(r,""),d.removeItem(r)),n}catch(i){return y="cookie",t.$broadcast("LocalStorageModule.notification.error",i.message),!1}}(),w=function(e,n){if(i(n)?n=null:(s(n)||a(n)||o(+n||n))&&(n=c(n)),!_||"cookie"===p.storageType)return _||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:"cookie"}),R(e,n);try{(s(n)||a(n))&&(n=c(n)),d&&d.setItem(b(e),n),m.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:p.storageType})}catch(r){return t.$broadcast("LocalStorageModule.notification.error",r.message),R(e,n)}return!0},S=function(e){if(!_||"cookie"===p.storageType)return _||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),N(e);var r=d?d.getItem(b(e)):null;return r&&"null"!==r?"{"===r.charAt(0)||"["===r.charAt(0)||n(r)?l(r):r:null},x=function(e){if(!_||"cookie"===p.storageType)return _||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:"cookie"}),O(e);try{d.removeItem(b(e)),m.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:e,storageType:p.storageType})}catch(n){return t.$broadcast("LocalStorageModule.notification.error",n.message),O(e)}return!0},E=function(){if(!_)return t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var e=g.length,n=[];for(var r in d)if(r.substr(0,e)===g)try{n.push(r.substr(e))}catch(i){return t.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return n},A=function(e){e=e||"";var n=g.slice(0,-1),r=new RegExp(n+"."+e);if(!_||"cookie"===p.storageType)return _||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T();var i=g.length;for(var o in d)if(r.test(o))try{x(o.substr(i))}catch(s){return t.$broadcast("LocalStorageModule.notification.error",s.message),T()}return!0},C=function(){try{return e.navigator.cookieEnabled||"cookie"in h&&(h.cookie.length>0||(h.cookie="test").indexOf.call(h.cookie,"test")>-1)}catch(n){return t.$broadcast("LocalStorageModule.notification.error",n.message),!1}}(),R=function(e,n){if(i(n))return!1;if((a(n)||s(n))&&(n=c(n)),!C)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var r="",o=new Date,u="";if(null===n?(o.setTime(o.getTime()+-864e5),r="; expires="+o.toGMTString(),n=""):0!==v.expiry&&(o.setTime(o.getTime()+24*v.expiry*60*60*1e3),r="; expires="+o.toGMTString()),e){var l="; path="+v.path;v.domain&&(u="; domain="+v.domain),h.cookie=b(e)+"="+encodeURIComponent(n)+r+l+u}}catch(f){return t.$broadcast("LocalStorageModule.notification.error",f.message),!1}return!0},N=function(e){if(!C)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=h.cookie&&h.cookie.split(";")||[],r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(b(e)+"=")){var o=decodeURIComponent(i.substring(g.length+e.length+1,i.length));try{var s=JSON.parse(o);return l(s)}catch(a){return o}}}return null},O=function(t){R(t,null)},T=function(){for(var t=null,e=g.length,n=h.cookie.split(";"),r=0;r<n.length;r++){for(t=n[r];" "===t.charAt(0);)t=t.substring(1,t.length);var i=t.substring(e,t.indexOf("="));O(i)}},k=function(){return y},I=function(t,e,n,i){i=i||e;var o=S(i);return null===o&&r(n)?o=n:s(o)&&s(n)&&(o=u(n,o)),f(e).assign(t,o),t.$watch(e,function(t){w(i,t)},s(t[e]))},P=function(){for(var t=0,n=e[y],r=0;r<n.length;r++)0===n.key(r).indexOf(g)&&t++;return t};return{isSupported:_,getStorageType:k,set:w,add:w,get:S,keys:E,remove:x,clearAll:A,bind:I,deriveKey:b,length:P,cookie:{isSupported:C,set:R,add:R,get:N,remove:O,clearAll:T}}}]})}(window,window.angular),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.PouchDB=t()}}(function(){var t;return function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(t){return function(){var e=arguments.length;if(e){for(var n=[],r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}return t.call(this,[])}}e.exports=r},{}],2:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}}function a(){var t;try{t=n.storage.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(t){}}n=e.exports=t(3),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(a())},{3:3}],3:[function(t,e,n){function r(){return n.colors[l++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(c||e);t.diff=o,t.prev=c,t.curr=e,c=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];e=i.call(t,o),s.splice(a,1),a--}return e}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s));var u=i.log||n.log||console.log.bind(console);u.apply(t,s)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function s(){n.enable("")}function a(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=u,n.disable=s,n.enable=o,n.enabled=a,n.humanize=t(9),n.names=[],n.skips=[],n.formatters={};var c,l=0},{9:9}],4:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],5:[function(t,e,n){(function(t){"use strict";function n(){l=!0;for(var t,e,n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}l=!1}function r(t){1!==h.push(t)||l||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(n),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var c=new t.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var l,h=[];e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],7:[function(t,e,n){(function(t){t("object"==typeof n?n:this)}).call(this,function(t){var e=Array.prototype.slice,n=Array.prototype.forEach,r=function(t){if("object"!=typeof t)throw t+" is not an object";var i=e.call(arguments,1);return n.call(i,function(e){if(e)for(var n in e)"object"==typeof e[n]&&t[n]?r.call(t,t[n],e[n]):t[n]=e[n]}),t};t.extend=r})},{}],8:[function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=y,this.queue=[],this.outcome=void 0,t!==r&&u(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function s(t,e,n){p(function(){var r;try{r=e(n)}catch(i){return g.reject(t,i)}r===t?g.reject(t,new TypeError("Cannot resolve promise with itself")):g.resolve(t,r)})}function a(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function n(e){o||(o=!0,g.reject(t,e))}function r(e){o||(o=!0,g.resolve(t,e))}function i(){e(r,n)}var o=!1,s=c(i);"error"===s.status&&n(s.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}function l(t){return t instanceof this?t:g.resolve(new this(r),t)}function h(t){var e=new this(r);return g.reject(e,t)}function f(t){function e(t,e){function r(t){s[e]=t,++a!==i||o||(o=!0,g.resolve(c,s))}n.resolve(t).then(r,function(t){o||(o=!0,g.reject(c,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=new Array(i),a=0,u=-1,c=new this(r);++u<i;)e(t[u],u);return c}function d(t){function e(t){n.resolve(t).then(function(t){o||(o=!0,g.resolve(a,t))},function(t){o||(o=!0,g.reject(a,t))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var i=t.length,o=!1;if(!i)return this.resolve([]);for(var s=-1,a=new this(r);++s<i;)e(t[s]);return a}var p=t(5),g={},v=["REJECTED"],m=["FULFILLED"],y=["PENDING"];e.exports=n=i,i.prototype["catch"]=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===m||"function"!=typeof e&&this.state===v)return this;var n=new this.constructor(r);if(this.state!==y){var i=this.state===m?t:e;s(n,i,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){g.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){s(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){g.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){s(this.promise,this.onRejected,t)},g.resolve=function(t,e){var n=c(a,e);if("error"===n.status)return g.reject(t,n.value);var r=n.value;if(r)u(t,r);else{t.state=m,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},g.reject=function(t,e){t.state=v,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},n.resolve=l,n.reject=h,n.all=f,n.race=d},{5:5}],9:[function(t,e,n){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*h;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=c?Math.round(t/c)+"h":t>=u?Math.round(t/u)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function o(t){return s(t,l,"day")||s(t,c,"hour")||s(t,u,"minute")||s(t,a,"second")||t+" ms"}function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,u=60*a,c=60*u,l=24*c,h=365.25*l;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?o(t):i(t)}},{}],10:[function(t,e,n){"use strict";function r(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return l(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),r=e?t:Object.keys(t),i=-1,o=r.length,s="";if(e)for(;++i<o;)s+=n.toIndexableString(r[i]);else for(;++i<o;){var a=r[i];s+=n.toIndexableString(a)+n.toIndexableString(t[a])}return s}return""}function i(t,e){var n,r=e,i="1"===t[e];if(i)n=0,e++;else{var o="0"===t[e];e++;var s="",a=t.substring(e,e+f),u=parseInt(a,10)+h;for(o&&(u=-u),e+=f;;){var c=t[e];if("\0"===c)break;s+=c,e++}s=s.split("."),n=1===s.length?parseInt(s,10):parseFloat(s[0]+"."+s[1]),o&&(n-=10),0!==u&&(n=parseFloat(n+"e"+u))}return{num:n,length:e-r}}function o(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===t.length-2){var s=t.pop();i[s]=n}else t.push(n)}}function s(t,e){for(var r=Math.min(t.length,e.length),i=0;i<r;i++){var o=n.collate(t[i],e[i]);if(0!==o)return o}return t.length===e.length?0:t.length>e.length?1:-1}function a(t,e){return t===e?0:t>e?1:-1}function u(t,e){for(var r=Object.keys(t),i=Object.keys(e),o=Math.min(r.length,i.length),s=0;s<o;s++){var a=n.collate(r[s],i[s]);if(0!==a)return a;if(a=n.collate(t[r[s]],e[i[s]]),0!==a)return a}return r.length===i.length?0:r.length>i.length?1:-1}function c(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function l(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",o=(r?-n:n)-h,s=p.padLeft(o.toString(),"0",f);i+=d+s;var a=Math.abs(parseFloat(e[0]));r&&(a=10-a);var u=a.toFixed(20);return u=u.replace(/\.?0+$/,""),i+=d+u}var h=-324,f=3,d="",p=t(11);n.collate=function(t,e){if(t===e)return 0;t=n.normalizeKey(t),e=n.normalizeKey(e);var r=c(t),i=c(e);if(r-i!==0)return r-i;if(null===t)return 0;switch(typeof t){case"number":return t-e;case"boolean":return t===e?0:t<e?-1:1;case"string":return a(t,e)}return Array.isArray(t)?s(t,e):u(t,e)},n.normalizeKey=function(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-(1/0)||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var r=t.length;t=new Array(r);for(var i=0;i<r;i++)t[i]=n.normalizeKey(e[i])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var o in e)if(e.hasOwnProperty(o)){var s=e[o];"undefined"!=typeof s&&(t[o]=n.normalizeKey(s))}}}}return t},n.toIndexableString=function(t){var e="\0";return t=n.normalizeKey(t),c(t)+d+r(t)+e},n.parseIndexableString=function(t){for(var e=[],n=[],r=0;;){var s=t[r++];if("\0"!==s)switch(s){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var a=i(t,r);e.push(a.num),r+=a.length;break;case"4":for(var u="";;){var c=t[r];if("\0"===c)break;u+=c,r++}u=u.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(u);break;case"5":var l={element:[],index:e.length};e.push(l.element),n.push(l);break;case"6":var h={element:{},index:e.length};e.push(h.element),n.push(h);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+s)}else{if(1===e.length)return e.pop();o(e,n)}}}},{11:11}],11:[function(t,e,n){"use strict";function r(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}n.padLeft=function(t,e,n){var i=r(t,e,n);return i+t},n.padRight=function(t,e,n){var i=r(t,e,n);return t+i},n.stringLexCompare=function(t,e){var n,r=t.length,i=e.length;for(n=0;n<r;n++){if(n===i)return 1;var o=t.charAt(n),s=e.charAt(n);if(o!==s)return o<s?-1:1}return r<i?-1:0},n.intToDecimalForm=function(t){var e=t<0,n="";do{var r=e?-Math.ceil(t%10):Math.floor(t%10);n=r+n,t=e?Math.ceil(t/10):Math.floor(t/10)}while(t);return e&&"0"!==n&&(n="-"+n),n}},{}],12:[function(t,e,n){"use strict";function r(){this.store={}}function i(t){if(this.store=new r,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}n.Map=r,n.Set=i,r.prototype.mangle=function(t){if("string"!=typeof t)throw new TypeError("key must be a string but Got "+t);return"$"+t},r.prototype.unmangle=function(t){return t.substring(1)},r.prototype.get=function(t){var e=this.mangle(t);if(e in this.store)return this.store[e]},r.prototype.set=function(t,e){var n=this.mangle(t);return this.store[n]=e,!0},r.prototype.has=function(t){var e=this.mangle(t);return e in this.store},r.prototype["delete"]=function(t){var e=this.mangle(t);return e in this.store&&(delete this.store[e],!0)},r.prototype.forEach=function(t){for(var e=Object.keys(this.store),n=0,r=e.length;n<r;n++){var i=e[n],o=this.store[i];i=this.unmangle(i),t(o,i)}},i.prototype.add=function(t){return this.store.set(t,!0)},i.prototype.has=function(t){return this.store.has(t)},i.prototype["delete"]=function(t){return this.store["delete"](t)}},{}],13:[function(t,e,n){function r(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},c=[],l=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],14:[function(t,e,n){(function(){var t={}.hasOwnProperty,n=[].slice;e.exports=function(e,r){var i,o,s,a;o=[],a=[];for(i in r)t.call(r,i)&&(s=r[i],"this"!==i&&(o.push(i),a.push(s)));return Function.apply(null,n.call(o).concat([e])).apply(r["this"],a)}}).call(this)},{}],15:[function(e,n,r){!function(e){if("object"==typeof r)n.exports=e();else if("function"==typeof t&&t.amd)t(e);else{var i;try{i=window}catch(o){i=self}i.SparkMD5=e()}}(function(t){"use strict";function e(t,e,n,r,i,o){return e=b(b(e,t),b(r,o)),b(e<<i|e>>>32-i,n)}function n(t,n,r,i,o,s,a){return e(n&r|~n&i,t,n,o,s,a)}function r(t,n,r,i,o,s,a){return e(n&i|r&~i,t,n,o,s,a)}function i(t,n,r,i,o,s,a){
return e(n^r^i,t,n,o,s,a)}function o(t,n,r,i,o,s,a){return e(r^(n|~i),t,n,o,s,a)}function s(t,e){var s=t[0],a=t[1],u=t[2],c=t[3];s=n(s,a,u,c,e[0],7,-680876936),c=n(c,s,a,u,e[1],12,-389564586),u=n(u,c,s,a,e[2],17,606105819),a=n(a,u,c,s,e[3],22,-1044525330),s=n(s,a,u,c,e[4],7,-176418897),c=n(c,s,a,u,e[5],12,1200080426),u=n(u,c,s,a,e[6],17,-1473231341),a=n(a,u,c,s,e[7],22,-45705983),s=n(s,a,u,c,e[8],7,1770035416),c=n(c,s,a,u,e[9],12,-1958414417),u=n(u,c,s,a,e[10],17,-42063),a=n(a,u,c,s,e[11],22,-1990404162),s=n(s,a,u,c,e[12],7,1804603682),c=n(c,s,a,u,e[13],12,-40341101),u=n(u,c,s,a,e[14],17,-1502002290),a=n(a,u,c,s,e[15],22,1236535329),s=r(s,a,u,c,e[1],5,-165796510),c=r(c,s,a,u,e[6],9,-1069501632),u=r(u,c,s,a,e[11],14,643717713),a=r(a,u,c,s,e[0],20,-373897302),s=r(s,a,u,c,e[5],5,-701558691),c=r(c,s,a,u,e[10],9,38016083),u=r(u,c,s,a,e[15],14,-660478335),a=r(a,u,c,s,e[4],20,-405537848),s=r(s,a,u,c,e[9],5,568446438),c=r(c,s,a,u,e[14],9,-1019803690),u=r(u,c,s,a,e[3],14,-187363961),a=r(a,u,c,s,e[8],20,1163531501),s=r(s,a,u,c,e[13],5,-1444681467),c=r(c,s,a,u,e[2],9,-51403784),u=r(u,c,s,a,e[7],14,1735328473),a=r(a,u,c,s,e[12],20,-1926607734),s=i(s,a,u,c,e[5],4,-378558),c=i(c,s,a,u,e[8],11,-2022574463),u=i(u,c,s,a,e[11],16,1839030562),a=i(a,u,c,s,e[14],23,-35309556),s=i(s,a,u,c,e[1],4,-1530992060),c=i(c,s,a,u,e[4],11,1272893353),u=i(u,c,s,a,e[7],16,-155497632),a=i(a,u,c,s,e[10],23,-1094730640),s=i(s,a,u,c,e[13],4,681279174),c=i(c,s,a,u,e[0],11,-358537222),u=i(u,c,s,a,e[3],16,-722521979),a=i(a,u,c,s,e[6],23,76029189),s=i(s,a,u,c,e[9],4,-640364487),c=i(c,s,a,u,e[12],11,-421815835),u=i(u,c,s,a,e[15],16,530742520),a=i(a,u,c,s,e[2],23,-995338651),s=o(s,a,u,c,e[0],6,-198630844),c=o(c,s,a,u,e[7],10,1126891415),u=o(u,c,s,a,e[14],15,-1416354905),a=o(a,u,c,s,e[5],21,-57434055),s=o(s,a,u,c,e[12],6,1700485571),c=o(c,s,a,u,e[3],10,-1894986606),u=o(u,c,s,a,e[10],15,-1051523),a=o(a,u,c,s,e[1],21,-2054922799),s=o(s,a,u,c,e[8],6,1873313359),c=o(c,s,a,u,e[15],10,-30611744),u=o(u,c,s,a,e[6],15,-1560198380),a=o(a,u,c,s,e[13],21,1309151649),s=o(s,a,u,c,e[4],6,-145523070),c=o(c,s,a,u,e[11],10,-1120210379),u=o(u,c,s,a,e[2],15,718787259),a=o(a,u,c,s,e[9],21,-343485551),t[0]=b(s,t[0]),t[1]=b(a,t[1]),t[2]=b(u,t[2]),t[3]=b(c,t[3])}function a(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function u(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function c(t){var e,n,r,i,o,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)s(l,a(t.substring(e-64,e)));for(t=t.substring(e-64),n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(s(l,r),e=0;e<16;e+=1)r[e]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),u=parseInt(i[1],16)||0,r[14]=o,r[15]=u,s(l,r),l}function l(t){var e,n,r,i,o,a,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)s(l,u(t.subarray(e-64,e)));for(t=e-64<c?t.subarray(e-64):new Uint8Array(0),n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t[e]<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(s(l,r),e=0;e<16;e+=1)r[e]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),a=parseInt(i[1],16)||0,r[14]=o,r[15]=a,s(l,r),l}function h(t){var e,n="";for(e=0;e<4;e+=1)n+=_[t>>8*e+4&15]+_[t>>8*e&15];return n}function f(t){var e;for(e=0;e<t.length;e+=1)t[e]=h(t[e]);return t.join("")}function d(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function p(t,e){var n,r=t.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=t.charCodeAt(n);return e?o:i}function g(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function v(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function m(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function y(){this.reset()}var b=function(t,e){return t+e&4294967295},_=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==f(c("hello"))&&(b=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||!function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var i,o,s,a,u=this.byteLength,c=e(n,u),l=u;return r!==t&&(l=e(r,u)),c>l?new ArrayBuffer(0):(i=l-c,o=new ArrayBuffer(i),s=new Uint8Array(o),a=new Uint8Array(this,c,i),s.set(a),o)}}(),y.prototype.append=function(t){return this.appendBinary(d(t)),this},y.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,n=this._buff.length;for(e=64;e<=n;e+=64)s(this._hash,a(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},y.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(o,i),n=f(this._hash),t&&(n=m(n)),this.reset(),n},y.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},y.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},y.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},y.prototype._finish=function(t,e){var n,r,i,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(s(this._hash,t),o=0;o<16;o+=1)t[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=r,t[15]=i,s(this._hash,t)},y.hash=function(t,e){return y.hashBinary(d(t),e)},y.hashBinary=function(t,e){var n=c(t),r=f(n);return e?m(r):r},y.ArrayBuffer=function(){this.reset()},y.ArrayBuffer.prototype.append=function(t){var e,n=v(this._buff.buffer,t,!0),r=n.length;for(this._length+=t.byteLength,e=64;e<=r;e+=64)s(this._hash,u(n.subarray(e-64,e)));return this._buff=e-64<r?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0),this},y.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r[e]<<(e%4<<3);return this._finish(o,i),n=f(this._hash),t&&(n=m(n)),this.reset(),n},y.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},y.ArrayBuffer.prototype.getState=function(){var t=y.prototype.getState.call(this);return t.buff=g(t.buff),t},y.ArrayBuffer.prototype.setState=function(t){return t.buff=p(t.buff,!0),y.prototype.setState.call(this,t)},y.ArrayBuffer.prototype.destroy=y.prototype.destroy,y.ArrayBuffer.prototype._finish=y.prototype._finish,y.ArrayBuffer.hash=function(t,e){var n=l(new Uint8Array(t)),r=f(n);return e?m(r):r},y})},{}],16:[function(t,e,n){"use strict";function r(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(t);else if(o===e.length-2){var s=e.pop();i[s]=t}else e.push(t)}n.stringify=function(t){var e=[];e.push({obj:t});for(var n,r,i,o,s,a,u,c,l,h,f,d="";n=e.pop();)if(r=n.obj,i=n.prefix||"",o=n.val||"",d+=i,o)d+=o;else if("object"!=typeof r)d+="undefined"==typeof r?null:JSON.stringify(r);else if(null===r)d+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),s=r.length-1;s>=0;s--)a=0===s?"":",",e.push({obj:r[s],prefix:a});e.push({val:"["})}else{u=[];for(c in r)r.hasOwnProperty(c)&&u.push(c);for(e.push({val:"}"}),s=u.length-1;s>=0;s--)l=u[s],h=r[l],f=s>0?",":"",f+=JSON.stringify(l)+":",e.push({obj:h,prefix:f});e.push({val:"{"})}return d},n.parse=function(t){for(var e,n,i,o,s,a,u,c,l,h=[],f=[],d=0;;)if(e=t[d++],"}"!==e&&"]"!==e&&"undefined"!=typeof e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":d+=3,r(null,h,f);break;case"t":d+=3,r(!0,h,f);break;case"f":d+=4,r(!1,h,f);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(n="",d--;;){if(i=t[d++],!/[\d\.\-e\+]/.test(i)){d--;break}n+=i}r(parseFloat(n),h,f);break;case'"':for(o="",s=void 0,a=0;;){if(u=t[d++],'"'===u&&("\\"!==s||a%2!==1))break;o+=u,s=u,"\\"===s?a++:a=0}r(JSON.parse('"'+o+'"'),h,f);break;case"[":c={element:[],index:h.length},h.push(c.element),f.push(c);break;case"{":l={element:{},index:h.length},h.push(l.element),f.push(l);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();r(h.pop(),h,f)}}},{}],17:[function(t,e,n){(function(n,r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t["default"]:t}function o(t,e){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];o in t&&(n[o]=t[o])}return n}function s(t){return t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function a(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}function u(t){if(t instanceof ArrayBuffer)return a(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}function c(t){var e,n,r;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=c(t[n]);return e}if(t instanceof Date)return t.toISOString();if(s(t))return u(t);e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=c(t[n]);"undefined"!=typeof i&&(e[n]=i)}return e}function l(t){var e=!1;return rr(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function h(t){return rr(function(e){e=c(e);var r,i=this,o="function"==typeof e[e.length-1]&&e.pop();o&&(r=function(t,e){n.nextTick(function(){o(t,e)})});var s=new lr(function(n,r){var o;try{var s=l(function(t,e){t?r(t):n(e)});e.push(s),o=t.apply(i,e),o&&"function"==typeof o.then&&n(o)}catch(a){r(a)}});return r&&s.then(function(t){r(null,t)},r),s})}function f(t,e){function n(t,e,n){if(hr.enabled){for(var r=[t._db_name,e],i=0;i<n.length-1;i++)r.push(n[i]);hr.apply(null,r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=[t._db_name,e];i=i.concat(n?["error",n]:["success",r]),hr.apply(null,i),o(n,r)}}}return h(rr(function(r){if(this._closed)return lr.reject(new Error("database is closed"));if(this._destroyed)return lr.reject(new Error("database is destroyed"));var i=this;return n(i,t,r),this.taskqueue.isReady?e.apply(this,r):new lr(function(e,n){i.taskqueue.addTask(function(o){o?n(o):e(i[t].apply(i,r))})})}))}function d(t,e,n){return new lr(function(r,i){t.get(e,function(o,s){if(o){if(404!==o.status)return i(o);s={}}var a=s._rev,u=n(s);return u?(u._id=e,u._rev=a,void r(p(t,u,n))):r({updated:!1,rev:a})})})}function p(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(r){if(409!==r.status)throw r;return d(t,e._id,n)})}function g(t){for(var e,n,r,i,o=t.rev_tree.slice();i=o.pop();){var s=i.ids,a=s[2],u=i.pos;if(a.length)for(var c=0,l=a.length;c<l;c++)o.push({pos:u+1,ids:a[c]});else{var h=!!s[1].deleted,f=s[0];e&&!(r!==h?r:n!==u?n<u:e<f)||(e=f,n=u,r=h)}}return n+"-"+e}function v(t){return t.ids}function m(t,e){e||(e=g(t));for(var n,r=e.substring(e.indexOf("-")+1),i=t.rev_tree.map(v);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function y(t){return or("return "+t+";",{})}function b(t){return new Function("doc",["var emitted = false;","var emit = function (a, b) {","  emitted = true;","};","var view = "+t+";","view(doc);","if (emitted) {","  return true;","}"].join("\n"))}function _(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function w(t){var e=_(t);return e?e.join("/"):null}function S(t,e){for(var n,r=t.slice();n=r.pop();)for(var i=n.pos,o=n.ids,s=o[2],a=e(0===s.length,i,o[0],n.ctx,o[1]),u=0,c=s.length;u<c;u++)r.push({pos:i+1,ids:s[u],ctx:a})}function x(t,e){return t.pos-e.pos}function E(t){var e=[];S(t,function(t,n,r,i,o){t&&e.push({rev:n+"-"+r,pos:n,opts:o})}),e.sort(x).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function A(t){for(var e=g(t),n=E(t.rev_tree),r=[],i=0,o=n.length;i<o;i++){var s=n[i];s.rev===e||s.opts.deleted||r.push(s.rev)}return r}function C(t){Error.call(this,t.reason),this.status=t.status,this.name=t.error,this.message=t.reason,this.error=!0}function R(t,e,n){function r(e){for(var r in t)"function"!=typeof t[r]&&(this[r]=t[r]);void 0!==n&&(this.name=n),void 0!==e&&(this.reason=e)}return r.prototype=C.prototype,new r(e)}function N(t){var e,n,r,i,o;return n=t.error===!0&&"string"==typeof t.name?t.name:t.error,o=t.reason,r=jr("name",n,o),t.missing||"missing"===o||"deleted"===o||"not_found"===n?r=pr:"doc_validation"===n?(r=Er,i=o):"bad_request"===n&&r.message!==o&&(r=Ar),r||(r=jr("status",t.status,o)||_r),e=R(r,o,n),i&&(e.message=i),t.id&&(e.id=t.id),t.status&&(e.status=t.status),t.missing&&(e.missing=t.missing),e}function O(t,e,n){function r(){i.cancel()}ir.EventEmitter.call(this);var i=this;this.db=t,e=e?c(e):{};var o=e.complete=l(function(e,n){e?i.emit("error",e):i.emit("complete",n),i.removeAllListeners(),t.removeListener("destroyed",r)});n&&(i.on("complete",function(t){n(null,t)}),i.on("error",n)),t.once("destroyed",r),e.onChange=function(t){e.isCancelled||(i.emit("change",t),i.startSeq&&i.startSeq<=t.seq&&(i.startSeq=!1))};var s=new lr(function(t,n){e.complete=function(e,r){e?n(e):t(r)}});i.once("cancel",function(){t.removeListener("destroyed",r),e.complete(null,{status:"cancelled"})}),this.then=s.then.bind(s),this["catch"]=s["catch"].bind(s),this.then(function(t){o(null,t)},o),t.taskqueue.isReady?i.doChanges(e):t.taskqueue.addTask(function(){i.isCancelled?i.emit("cancel"):i.doChanges(e)})}function T(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=E(e.rev_tree).map(function(t){return{rev:t.rev}}));var i={id:e.id,changes:r,doc:t};return m(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=A(e),i.doc._conflicts.length||delete i.doc._conflicts),i}function k(t,e,n){function r(){var t=[];h.forEach(function(e){e.docs.forEach(function(n){t.push({id:e.id,docs:[n]})})}),n(null,{results:t})}function i(){++l===c&&r()}function s(t,e,n){h[t]={id:e,docs:n},i()}var a=Array.isArray(e)?e:e.docs,u={};a.forEach(function(t){t.id in u?u[t.id].push(t):u[t.id]=[t]});var c=Object.keys(u).length,l=0,h=new Array(c);Object.keys(u).forEach(function(n,r){var i=u[n],a=o(i[0],["atts_since","attachments"]);a.open_revs=i.map(function(t){return t.rev}),a.open_revs=a.open_revs.filter(function(t){return t});var c=function(t){return t};0===a.open_revs.length&&(delete a.open_revs,c=function(t){return[{ok:t}]}),["revs","attachments","binary"].forEach(function(t){t in e&&(a[t]=e[t])}),t.get(n,a,function(t,e){s(r,n,t?[{error:t}]:c(e))})})}function I(t){return/^_local/.test(t)}function P(t){for(var e,n=[],r=t.slice();e=r.pop();){var i=e.pos,o=e.ids,s=o[0],a=o[1],u=o[2],c=0===u.length,l=e.history?e.history.slice():[];l.push({id:s,opts:a}),c&&n.push({pos:i+1-l.length,ids:l});for(var h=0,f=u.length;h<f;h++)r.push({pos:i+1,ids:u[h],history:l})}return n.reverse()}function F(t){return 0|Math.random()*t}function D(t,e){e=e||Lr.length;var n="",r=-1;if(t){for(;++r<t;)n+=Lr[F(e)];return n}for(;++r<36;)switch(r){case 8:case 13:case 18:case 23:n+="-";break;case 19:n+=Lr[3&F(16)|8];break;default:n+=Lr[F(16)]}return n}function $(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}function j(t){var e;if(t?"string"!=typeof t?e=R(vr):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=R(yr)):e=R(mr),e)throw e}function L(t){if(!/^\d+\-./.test(t))return R(Ir);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function M(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],o=1,s=r.length;o<s;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}function B(t,e){var n,r,i,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=D()),r=D(32,16).toLowerCase(),t._rev){if(i=L(t._rev),i.error)return i;t._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[r,o,[]]]]}],n=i.prefix+1}else t._rev_tree=[{pos:1,ids:[r,o,[]]}],n=1;else if(t._revisions&&(t._rev_tree=M(t._revisions,o),n=t._revisions.start,r=t._revisions.ids[0]),!t._rev_tree){if(i=L(t._rev),i.error)return i;n=i.prefix,r=i.id,t._rev_tree=[{pos:n,ids:[r,o,[]]}]}j(t._id),t._rev=n+"-"+r;var s={metadata:{},data:{}};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u="_"===a[0];if(u&&!Mr[a]){var c=R(Er,a);throw c.message=Er.message+": "+a,c}u&&!Br[a]?s.metadata[a.slice(1)]=t[a]:s.data[a]=t[a]}return s}function H(t,e){return t<e?-1:t>e?1:0}function U(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n)===!0)return t[n]}function K(t){return function(e,n){e||n[0]&&n[0].error?t(e||n[0]):t(null,n.length?n[0]:n)}}function q(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=o(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}function J(t,e){var n=H(t._id,e._id);if(0!==n)return n;var r=t._revisions?t._revisions.start:0,i=e._revisions?e._revisions.start:0;return H(r,i)}function V(t){var e={},n=[];return S(t,function(t,r,i,o){var s=r+"-"+i;return t&&(e[s]=0),void 0!==o&&n.push({from:o,to:s}),s}),n.reverse(),n.forEach(function(t){void 0===e[t.from]?e[t.from]=1+e[t.to]:e[t.from]=Math.min(e[t.from],1+e[t.to])}),e}function z(t,e,n){var r="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;if(e.descending&&r.reverse(),!r.length)return t._allDocs({limit:0},n);var i={offset:e.skip};return lr.all(r.map(function(n){var r=Gn.extend({key:n,deleted:"ok"},e);return["limit","skip","keys"].forEach(function(t){delete r[t]}),new lr(function(e,o){t._allDocs(r,function(t,r){return t?o(t):(i.total_rows=r.total_rows,void e(r.rows[0]||{key:n,error:"not_found"}))})})})).then(function(t){return i.rows=t,i})}function X(t){var e=t._compactionQueue[0],r=e.opts,i=e.callback;t.get("_local/compaction")["catch"](function(){return!1}).then(function(e){e&&e.last_seq&&(r.last_seq=e.last_seq),t._compact(r,function(e,r){e?i(e):i(null,r),n.nextTick(function(){t._compactionQueue.shift(),t._compactionQueue.length&&X(t)})})})}function W(t){return"_"===t.charAt(0)&&t+"is not a valid attachment name, attachment names cannot start with '_'"}function Y(t,e,n,r){e.seq=e.seq||0;var i={doc_ids:["_design/"+n],limit:1,since:e.seq};t.changes(i).then(function(t){var n=t.results&&t.results.length&&t.results[0].seq;n&&n>e.seq&&(e.seq=n,delete e.promise),r()})["catch"](r)}function G(t,e,n){t._ddocCache=t._ddocCache||{},t._ddocCache[e]=t._ddocCache[e]||{};var r=t._ddocCache[e];Y(t,r,e,function(i){return i?n(i):(r.promise||(r.promise=new lr(function(n,r){t._get("_design/"+e,{},function(t,e){if(t)return r(t);var i={};["views","filters"].forEach(function(t){i[t]=e.doc[t]}),n(i)})})),void r.promise.then(function(t){n(null,t)})["catch"](n))})}function Q(t,e,n,r,i){G(t,e,function(t,e){if(t)return i(t);var o=e[n]&&e[n][r];return o?void i(null,o):i(R(pr))})}function Z(){ir.EventEmitter.call(this)}function tt(){this.isReady=!1,this.failed=!1,this.queue=[]}function et(t){t&&r.debug&&console.error(t)}function nt(t,e){function n(){o.emit("destroyed",i)}function r(){t.removeListener("destroyed",n),t.emit("destroyed",t)}var i=e.originalName,o=t.constructor,s=o._destructionListeners;t.once("destroyed",n),s.has(i)||s.set(i,[]),s.get(i).push(r)}function rt(t,e,n){if(!(this instanceof rt))return new rt(t,e,n);var r=this;"function"!=typeof e&&"undefined"!=typeof e||(n=e,e={}),t&&"object"==typeof t&&(e=t,t=void 0),"undefined"==typeof n&&(n=et),t=t||e.name,e=c(e),delete e.name,this.__opts=e;var i=n;r.auto_compaction=e.auto_compaction,r.prefix=rt.prefix,Z.call(r),r.taskqueue=new tt;var o=new lr(function(i,o){n=function(t,e){return t?o(t):(delete e.then,void i(e))},e=c(e);var s,a,u=e.name||t;return function(){try{if("string"!=typeof u)throw a=new Error("Missing/invalid DB name"),a.code=400,a;if(s=rt.parseAdapter(u,e),e.originalName=u,e.name=s.name,e.prefix&&"http"!==s.adapter&&"https"!==s.adapter&&(e.name=e.prefix+e.name),e.adapter=e.adapter||s.adapter,r._adapter=e.adapter,Zn("pouchdb:adapter")("Picked adapter: "+e.adapter),r._db_name=u,!rt.adapters[e.adapter])throw a=new Error("Adapter is missing"),a.code=404,a;if(!rt.adapters[e.adapter].valid())throw a=new Error("Invalid Adapter"),a.code=404,a}catch(t){r.taskqueue.fail(t)}}(),a?o(a):(r.adapter=e.adapter,r.replicate={},r.replicate.from=function(t,e,n){return r.constructor.replicate(t,r,e,n)},r.replicate.to=function(t,e,n){return r.constructor.replicate(r,t,e,n)},r.sync=function(t,e,n){return r.constructor.sync(r,t,e,n)},r.replicate.sync=r.sync,void rt.adapters[e.adapter].call(r,e,function(t){return t?(r.taskqueue.fail(t),void n(t)):(nt(r,e),r.emit("created",r),rt.emit("created",e.originalName),r.taskqueue.ready(r),void n(null,r))}))});o.then(function(t){i(null,t)},i),r.then=o.then.bind(o),r["catch"]=o["catch"].bind(o)}function it(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function ot(){return Hr}function st(t){Object.keys(ir.EventEmitter.prototype).forEach(function(e){"function"==typeof ir.EventEmitter.prototype[e]&&(t[e]=Kr[e].bind(Kr))});var e=t._destructionListeners=new nr.Map;t.on("destroyed",function(t){e.has(t)&&(e.get(t).forEach(function(t){t()}),e["delete"](t))})}function at(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(n){if("TypeError"!==n.name)throw n;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new r,o=0;o<t.length;o+=1)i.append(t[o]);return i.getBlob(e.type)}}function ut(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}function ct(){for(var t={},e=new lr(function(e,n){t.resolve=e,t.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.promise=e,lr.resolve().then(function(){return fetch.apply(null,n)}).then(function(e){t.resolve(e)})["catch"](function(e){t.reject(e)}),t}function lt(t,e){var n,r,i,o=new Headers,s={method:t.method,credentials:"include",headers:o};return t.json&&(o.set("Accept","application/json"),o.set("Content-Type",t.headers["Content-Type"]||"application/json")),t.body&&t.body instanceof Blob?ut(t.body,function(t){s.body=t}):t.body&&t.processData&&"string"!=typeof t.body?s.body=JSON.stringify(t.body):"body"in t?s.body=t.body:s.body=null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&o.set(e,t.headers[e])}),n=ct(t.url,s),t.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),n.promise.then(function(e){return i={statusCode:e.status},t.timeout>0&&clearTimeout(r),i.statusCode>=200&&i.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){i.statusCode>=200&&i.statusCode<300?e(null,i,t):e(t,i)})["catch"](function(t){e(t,i)}),{abort:n.reject}}function ht(t,e){var n,r,i=function(){n.abort()};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(o){e(o,{statusCode:413})}n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null);for(var s in t.headers)t.headers.hasOwnProperty(s)&&n.setRequestHeader(s,t.headers[s]);return t.timeout>0&&(r=setTimeout(i,t.timeout),n.onprogress=function(){clearTimeout(r),r=setTimeout(i,t.timeout)},"undefined"!=typeof n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var i;i=t.binary?at([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,r,i)}else{var o={};try{o=JSON.parse(n.response)}catch(s){}e(o,r)}}},t.body&&t.body instanceof Blob?ut(t.body,function(t){n.send(t)}):n.send(t.body),{abort:i}}function ft(){try{return new XMLHttpRequest,!0}catch(t){return!1}}function dt(t,e){return qr||t.xhr?ht(t,e):lt(t,e)}function pt(){return""}function gt(t,e){function n(e,n,r){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(i){return r(i)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?N(t):t})),t.binary&&Jr(e,n),r(null,e,n)}function r(t,e){var n,r;if(t.code&&t.status){var i=new Error(t.message||t.code);return i.status=t.status,e(i)}try{n=JSON.parse(t.responseText),r=N(n)}catch(o){r=N(t)}e(r)}t=c(t);var i={method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1};return t=Gn.extend(i,t),t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),dt(t,function(i,o,s){if(i)return i.status=o?o.statusCode:400,r(i,e);var a,u=o.headers&&o.headers["content-type"],c=s||pt();if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof c&&(/json/.test(u)||/^[\s]*\{/.test(c)&&/\}[\s]*$/.test(c)))try{c=JSON.parse(c.toString())}catch(l){}o.statusCode>=200&&o.statusCode<300?n(c,o,e):(a=N(c),a.status=o.statusCode,e(a))})}function vt(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=n.indexOf("safari")!==-1&&n.indexOf("chrome")===-1,i=n.indexOf("msie")!==-1,o=n.indexOf("edge")!==-1,s=r&&"POST"===t.method||(i||o)&&"GET"===t.method,a=!("cache"in t)||t.cache;if(s||!a){var u=t.url.indexOf("?")!==-1;t.url+=(u?"&":"?")+"_nonce="+Date.now()}return gt(t,e)}function mt(t){for(var e=Wr.exec(t),n={},r=14;r--;){var i=Vr[r],o=e[r]||"",s=["user","password"].indexOf(i)!==-1;n[i]=s?decodeURIComponent(o):o}return n[zr]={},n[Vr[12]].replace(Xr,function(t,e,r){e&&(n[zr][e]=r)}),n}function yt(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function bt(t,e){return at([yt(t)],{type:e})}function _t(t,e,n){try{return!t(e,n)}catch(r){var i="Filter function threw: "+r.toString();return R(Ar,i)}}function wt(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(r){r.doc||(r.doc={});var i=n&&_t(t.filter,r.doc,e);if("object"==typeof i)return i;if(i)return!1;if(t.include_docs){if(!t.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function St(t,e){"console"in r&&"info"in console&&console.info("The above "+t+" is totally normal. "+e)}function xt(t,e,n,r,i){return t.get(e)["catch"](function(n){if(404===n.status)return"http"===t.type()&&St(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:ni,version:ei};throw n}).then(function(o){if(!i.cancelled)return o.history=(o.history||[]).filter(function(t){return t.session_id!==r}),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,ri),o.version=ei,o.replicator=ni,o.session_id=r,o.last_seq=n,t.put(o)["catch"](function(o){if(409===o.status)return xt(t,e,n,r,i);throw o})})}function Et(t,e,n,r){this.src=t,this.target=e,this.id=n,this.returnValue=r}function At(t,e){if(t.session_id===e.session_id)return{last_seq:t.last_seq,history:t.history||[]};var n=t.history||[],r=e.history||[];return Ct(n,r)}function Ct(t,e){var n=t[0],r=t.slice(1),i=e[0],o=e.slice(1);if(!n||0===e.length)return{last_seq:ii,history:[]};var s=n.session_id;if(Rt(s,e))return{last_seq:n.last_seq,history:t};var a=i.session_id;return Rt(a,r)?{last_seq:i.last_seq,history:o}:Ct(r,o)}function Rt(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Rt(t,r))}function Nt(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function Ot(t,e){t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e+=1;var n=Math.random(),r=e-t;return~~(r*n+t)}function Tt(t){var e=0;return t||(e=2e3),Ot(t,e)}function kt(t,e,n,r){return t.retry===!1?(e.emit("error",n),void e.removeAllListeners()):("function"!=typeof t.back_off_function&&(t.back_off_function=Tt),e.emit("requestError",n),"active"!==e.state&&"pending"!==e.state||(e.emit("paused",n),e.state="stopped",e.once("active",function(){t.current_back_off=si})),t.current_back_off=t.current_back_off||si,t.current_back_off=t.back_off_function(t.current_back_off),void setTimeout(r,t.current_back_off))}function It(t){return Gr(t)}function Pt(t,e,n,r){(n>0||r<e.byteLength)&&(e=new Uint8Array(e,n,Math.min(r,e.byteLength)-n)),t.append(e)}function Ft(t,e,n,r){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e)}function Dt(t){return Object.keys(t).sort(sr.collate).reduce(function(e,n){return e[n]=t[n],e},{})}function $t(t,e,n){var r=n.doc_ids?n.doc_ids.sort(sr.collate):"",i=n.filter?n.filter.toString():"",o="",s="";return n.filter&&n.query_params&&(o=JSON.stringify(Dt(n.query_params))),n.filter&&"_view"===n.filter&&(s=n.view.toString()),lr.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+i+s+o+r;return ci(e)}).then(function(t){return t=t.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+t})}function jt(t){return/^1-/.test(t)}function Lt(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n].missing;r.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,attachments:!0,binary:!0}}function Mt(t,e,n){function r(){var r=Lt(e);if(r.docs.length)return t.bulkGet(r).then(function(t){if(n.cancelled)throw new Error("cancelled");t.results.forEach(function(t){t.docs.forEach(function(t){t.ok&&u.push(t.ok)})})})}function i(t){return t._attachments&&Object.keys(t._attachments).length>0}function o(r){return t.allDocs({keys:r,include_docs:!0}).then(function(t){if(n.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){!t.deleted&&t.doc&&jt(t.value.rev)&&!i(t.doc)&&(u.push(t.doc),delete e[t.id])})})}function s(){var t=Object.keys(e).filter(function(t){var n=e[t].missing;return 1===n.length&&jt(n[0])});if(t.length>0)return o(t)}function a(){return u}e=c(e);var u=[];return lr.resolve().then(s).then(r).then(a)}function Bt(t,e,n,r,i){function o(){return x?lr.resolve():$t(t,e,n).then(function(n){S=n,x=new Et(t,e,S,r)})}function s(){if(j=[],0!==w.docs.length){var t=w.docs;return e.bulkDocs({docs:t,new_edits:!1}).then(function(e){if(r.cancelled)throw p(),new Error("cancelled");var n=[],o={};e.forEach(function(t){t.error&&(i.doc_write_failures++,n.push(t),o[t.id]=t)}),$=$.concat(n),i.docs_written+=w.docs.length-n.length;var s=n.filter(function(t){return"unauthorized"!==t.name&&"forbidden"!==t.name});if(t.forEach(function(t){var e=o[t._id];e?r.emit("denied",c(e)):j.push(t)}),s.length>0){var a=new Error("bulkDocs error");throw a.other_errors=n,d("target.bulkDocs failed to write docs",a),new Error("bulkWrite partial failure")}},function(e){throw i.doc_write_failures+=t.length,e})}}function a(){i.last_seq=O=w.seq;var t=c(i);return j.length&&(t.docs=j,r.emit("change",t)),C=!0,x.writeCheckpoint(w.seq,L).then(function(){if(C=!1,r.cancelled)throw p(),new Error("cancelled");w=void 0,y()})["catch"](function(t){throw C=!1,d("writeCheckpoint completed with error",t),t})}function u(){var t={};return w.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(r.cancelled)throw p(),new Error("cancelled");w.diffs=t})}function l(){return Mt(t,w.diffs,r).then(function(t){t.forEach(function(t){delete w.diffs[t._id],i.docs_read++,w.docs.push(t)})})}function h(){if(!r.cancelled&&!w){if(0===E.length)return void f(!0);
w=E.shift(),u().then(l).then(s).then(a).then(h)["catch"](function(t){d("batch processing terminated with error",t)})}}function f(t){return 0===A.changes.length?void(0!==E.length||w||((T&&M.live||R)&&(r.state="pending",r.emit("paused")),R&&p())):void((t||R||A.changes.length>=k)&&(E.push(A),A={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),h()))}function d(t,e){N||(e.message||(e.message=t),i.ok=!1,i.status="aborting",i.errors.push(e),$=$.concat(e),E=[],A={seq:0,changes:[],docs:[]},p())}function p(){if(!(N||r.cancelled&&(i.status="cancelled",C))){i.status=i.status||"complete",i.end_time=new Date,i.last_seq=O,N=!0;var o=$.filter(function(t){return"unauthorized"!==t.name&&"forbidden"!==t.name});if(o.length>0){var s=$.pop();$.length>0&&(s.other_errors=$),s.result=i,kt(n,r,s,function(){Bt(t,e,n,r)})}else i.errors=$,r.emit("complete",i),r.removeAllListeners()}}function g(t){if(r.cancelled)return p();var e=wt(n)(t);e&&(A.seq=t.seq,A.changes.push(t),f(M.live))}function v(t){return P=!1,r.cancelled?p():(t.results.length>0?(M.since=t.last_seq,y()):T?(M.live=!0,y()):R=!0,void f(!0))}function m(t){return P=!1,r.cancelled?p():void d("changes rejected",t)}function y(){function e(){o.cancel()}function i(){r.removeListener("cancel",e)}if(!P&&!R&&E.length<I){P=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",e);var o=t.changes(M).on("change",g);o.then(i,i),o.then(v)["catch"](m),n.retry&&(r._changes=o,r._abortChanges=e)}}function b(){o().then(function(){return r.cancelled?void p():x.getCheckpoint().then(function(t){O=t,M={since:O,limit:k,batch_size:k,style:"all_docs",doc_ids:F,return_docs:!0},n.filter&&("string"!=typeof n.filter?M.include_docs=!0:M.filter=n.filter),"heartbeat"in n&&(M.heartbeat=n.heartbeat),"timeout"in n&&(M.timeout=n.timeout),n.query_params&&(M.query_params=n.query_params),n.view&&(M.view=n.view),y()})})["catch"](function(t){d("getCheckpoint rejected with ",t)})}function _(t){throw C=!1,d("writeCheckpoint completed with error",t),t}var w,S,x,E=[],A={seq:0,changes:[],docs:[]},C=!1,R=!1,N=!1,O=0,T=n.continuous||n.live||!1,k=n.batch_size||100,I=n.batches_limit||10,P=!1,F=n.doc_ids,$=[],j=[],L=D();i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var M={};return r.ready(t,e),r.cancelled?void p():(r._addedListeners||(r.once("cancel",p),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(t){n.complete(null,t)})),r._addedListeners=!0),void("undefined"==typeof n.since?b():o().then(function(){return C=!0,x.writeCheckpoint(n.since,L)}).then(function(){return C=!1,r.cancelled?void p():(O=n.since,void b())})["catch"](_)))}function Ht(){ir.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new lr(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(t,n){return e.then(t,n)},t["catch"]=function(t){return e["catch"](t)},t["catch"](function(){})}function Ut(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function Kt(t,e,n,r){if("function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw R(Ar,"`doc_ids` filter parameter is not a list.");n.complete=r,n=c(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new Ht(n),o=Ut(t,n),s=Ut(e,n);return Bt(o,s,n,i),i}function qt(t,e,n,r){return"function"==typeof n&&(r=n,n={}),"undefined"==typeof n&&(n={}),n=c(n),n.PouchConstructor=n.PouchConstructor||this,t=li.toPouch(t,n),e=li.toPouch(e,n),new Jt(t,e,n,r)}function Jt(t,e,n,r){function i(t){d.emit("change",{direction:"pull",change:t})}function o(t){d.emit("change",{direction:"push",change:t})}function s(t){d.emit("denied",{direction:"push",doc:t})}function a(t){d.emit("denied",{direction:"pull",doc:t})}function u(){d.pushPaused=!0,d.pullPaused&&d.emit("paused")}function c(){d.pullPaused=!0,d.pushPaused&&d.emit("paused")}function l(){d.pushPaused=!1,d.pullPaused&&d.emit("active",{direction:"push"})}function h(){d.pullPaused=!1,d.pushPaused&&d.emit("active",{direction:"pull"})}function f(t){return function(e,n){var r="change"===e&&(n===i||n===o),f="denied"===e&&(n===a||n===s),p="paused"===e&&(n===c||n===u),g="active"===e&&(n===h||n===l);(r||f||p||g)&&(e in v||(v[e]={}),v[e][t]=!0,2===Object.keys(v[e]).length&&d.removeAllListeners(e))}}var d=this;this.canceled=!1;var p=n.push?Gn.extend({},n,n.push):n,g=n.pull?Gn.extend({},n,n.pull):n;this.push=hi(t,e,p),this.pull=hi(e,t,g),this.pushPaused=!0,this.pullPaused=!0;var v={};n.live&&(this.push.on("complete",d.pull.cancel.bind(d.pull)),this.pull.on("complete",d.push.cancel.bind(d.push))),this.on("newListener",function(t){"change"===t?(d.pull.on("change",i),d.push.on("change",o)):"denied"===t?(d.pull.on("denied",a),d.push.on("denied",s)):"active"===t?(d.pull.on("active",h),d.push.on("active",l)):"paused"===t&&(d.pull.on("paused",c),d.push.on("paused",u))}),this.on("removeListener",function(t){"change"===t?(d.pull.removeListener("change",i),d.push.removeListener("change",o)):"denied"===t?(d.pull.removeListener("denied",a),d.push.removeListener("denied",s)):"active"===t?(d.pull.removeListener("active",h),d.push.removeListener("active",l)):"paused"===t&&(d.pull.removeListener("paused",c),d.push.removeListener("paused",u))}),this.pull.on("removeListener",f("pull")),this.push.on("removeListener",f("push"));var m=lr.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return d.emit("complete",e),r&&r(null,e),d.removeAllListeners(),e},function(t){if(d.cancel(),r?r(t):d.emit("error",t),d.removeAllListeners(),r)throw t});this.then=function(t,e){return m.then(t,e)},this["catch"]=function(t){return m["catch"](t)}}function Vt(t,e){return bt(Yr(t),e)}function zt(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}function Xt(t,e){if("undefined"==typeof FileReader)return e(zt((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";return r?e(n):void e(zt(n))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Wt(t){return new lr(function(e){Xt(t,function(t){e(Gr(t))})})}function Yt(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function Gt(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];n.data=Vt(n.data,n.content_type)})}function Qt(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function Zt(t){return t._attachments&&Object.keys(t._attachments)?lr.all(Object.keys(t._attachments).map(function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return Wt(n.data).then(function(t){n.data=t})})):lr.resolve()}function te(t){var e=mt(t);(e.user||e.password)&&(e.auth={username:e.user,password:e.password});var n=e.path.replace(/(^\/|\/$)/g,"").split("/");return e.db=n.pop(),e.db.indexOf("%")===-1&&(e.db=encodeURIComponent(e.db)),e.path=n.join("/"),e}function ee(t,e){return ne(t,t.db+"/"+e)}function ne(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function re(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function ie(t,e){function n(t,e,n){var r=t.ajax||{},i=Gn.extend(c(p),r,e);return vi(i.method+" "+i.url),Zr.ajax(i,n)}function r(t,e){return new lr(function(r,i){n(t,e,function(t,e){return t?i(t):void r(e)})})}function i(t,e){return f(t,rr(function(t){s().then(function(){return e.apply(this,t)})["catch"](function(e){var n=t.pop();n(e)})}))}function s(){if(t.skipSetup||t.skip_setup)return lr.resolve();if(y)return y;var e={method:"GET",url:d};return y=r({},e)["catch"](function(t){return t&&t.status&&404===t.status?(St(404,"PouchDB is just detecting if the remote exists."),r({},{method:"PUT",url:d})):lr.reject(t)})["catch"](function(t){return!(!t||!t.status||412!==t.status)||lr.reject(t)}),y["catch"](function(){y=null}),y}function a(t){return t.split("/").map(encodeURIComponent).join("/")}var u=this,l=te;t.getHost&&(l=t.getHost);var h=l(t.name,t),d=ee(h,"");t=c(t);var p=t.ajax||{};if(u.getUrl=function(){return d},u.getHeaders=function(){return p.headers||{}},t.auth||h.auth){var g=t.auth||h.auth,v=g.username+":"+g.password,m=Gr(unescape(encodeURIComponent(v)));p.headers=p.headers||{},p.headers.Authorization="Basic "+m}var y;setTimeout(function(){e(null,u)}),u.type=function(){return"http"},u.id=i("id",function(t){n({},{method:"GET",url:ne(h,"")},function(e,n){var r=n&&n.uuid?n.uuid+h.db:ee(h,"");t(null,r)})}),u.request=i("request",function(t,e){t.url=ee(h,t.url),n({},t,e)}),u.compact=i("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=c(t),n(t,{url:ee(h,"_compact"),method:"POST"},function(){function n(){u.info(function(r,i){i&&!i.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)})}n()})}),u.bulkGet=f("bulkGet",function(t,e){function r(e){var r={};t.revs&&(r.revs=!0),t.attachments&&(r.attachments=!0),n({},{url:ee(h,"_bulk_get"+re(r)),method:"POST",body:{docs:t.docs}},e)}function i(){function n(t){return function(n,r){u[t]=r.results,++a===i&&e(null,{results:Yt(u)})}}for(var r=di,i=Math.ceil(t.docs.length/r),a=0,u=new Array(i),c=0;c<i;c++){var l=o(t,["revs","attachments"]);l.docs=t.docs.slice(c*r,Math.min(t.docs.length,(c+1)*r)),k(s,l,n(c))}}var s=this,a=ne(h,""),u=pi[a];"boolean"!=typeof u?r(function(t,n){if(t){var r=Math.floor(t.status/100);4===r||5===r?(pi[a]=!1,St(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),i()):e(t)}else pi[a]=!0,e(null,n)}):u?r(e):i()}),u._info=function(t){s().then(function(){n({},{method:"GET",url:ee(h,"")},function(e,n){return e?t(e):(n.host=ee(h,""),void t(null,n))})})["catch"](t)},u.get=i("get",function(t,e,n){function i(t){var n=t._attachments,i=n&&Object.keys(n);if(n&&i.length)return lr.all(i.map(function(i){var o=n[i],s=Qt(t._id)+"/"+a(i)+"?rev="+t._rev;return r(e,{method:"GET",url:ee(h,s),binary:!0}).then(function(t){return e.binary?t:Wt(t)}).then(function(t){delete o.stub,delete o.length,o.data=t})}))}function o(t){return Array.isArray(t)?lr.all(t.map(function(t){if(t.ok)return i(t.ok)})):i(t)}"function"==typeof e&&(n=e,e={}),e=c(e);var s={};e.revs&&(s.revs=!0),e.revs_info&&(s.revs_info=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),s.open_revs=e.open_revs),e.rev&&(s.rev=e.rev),e.conflicts&&(s.conflicts=e.conflicts),t=Qt(t);var u={method:"GET",url:ee(h,t+re(s))};r(e,u).then(function(t){return lr.resolve().then(function(){if(e.attachments)return o(t)}).then(function(){n(null,t)})})["catch"](n)}),u.remove=i("remove",function(t,e,r,i){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof r&&(i=r,r={})):(o=t,"function"==typeof e?(i=e,r={}):(i=r,r=e));var s=o._rev||r.rev;n(r,{method:"DELETE",url:ee(h,Qt(o._id))+"?rev="+s},i)}),u.getAttachment=i("getAttachment",function(t,e,r,i){"function"==typeof r&&(i=r,r={});var o=r.rev?"?rev="+r.rev:"",s=ee(h,Qt(t))+"/"+a(e)+o;n(r,{method:"GET",url:s,binary:!0},i)}),u.removeAttachment=i("removeAttachment",function(t,e,r,i){var o=ee(h,Qt(t)+"/"+a(e))+"?rev="+r;n({},{method:"DELETE",url:o},i)}),u.putAttachment=i("putAttachment",function(t,e,r,i,o,s){"function"==typeof o&&(s=o,o=i,i=r,r=null);var u=Qt(t)+"/"+a(e),c=ee(h,u);if(r&&(c+="?rev="+r),"string"==typeof i){var l;try{l=Yr(i)}catch(f){return s(R(wr,"Attachment is not a valid base64 string"))}i=l?bt(l,o):""}var d={headers:{"Content-Type":o},method:"PUT",url:c,processData:!1,body:i,timeout:p.timeout||6e4};n({},d,s)}),u._bulkDocs=function(t,e,r){t.new_edits=e.new_edits,s().then(function(){return lr.all(t.docs.map(Zt))}).then(function(){n(e,{method:"POST",url:ee(h,"_bulk_docs"),body:t},function(t,e){return t?r(t):(e.forEach(function(t){t.ok=!0}),void r(null,e))})})["catch"](r)},u.allDocs=i("allDocs",function(t,e){"function"==typeof t&&(e=t,t={}),t=c(t);var n,i={},o="GET";t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),t.include_docs&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.key&&(i.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(i.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(i.endkey=JSON.stringify(t.endkey)),"undefined"!=typeof t.inclusive_end&&(i.inclusive_end=!!t.inclusive_end),"undefined"!=typeof t.limit&&(i.limit=t.limit),"undefined"!=typeof t.skip&&(i.skip=t.skip);var s=re(i);if("undefined"!=typeof t.keys){var a="keys="+encodeURIComponent(JSON.stringify(t.keys));a.length+s.length+1<=gi?s+="&"+a:(o="POST",n={keys:t.keys})}r(t,{method:o,url:ee(h,"_all_docs"+s),body:n}).then(function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(Gt),e(null,n)})["catch"](e)}),u._changes=function(t){var e="batch_size"in t?t.batch_size:fi;t=c(t),t.timeout="timeout"in t?t.timeout:"timeout"in p?p.timeout:3e4;var r,i=t.timeout?{timeout:t.timeout-5e3}:{},o="undefined"!=typeof t.limit&&t.limit;r="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var a=o;if(t.style&&(i.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.continuous&&(i.feed="longpoll"),t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),"heartbeat"in t?t.heartbeat&&(i.heartbeat=t.heartbeat):i.heartbeat=1e4,t.filter&&"string"==typeof t.filter&&(i.filter=t.filter,"_view"===t.filter&&t.view&&"string"==typeof t.view&&(i.view=t.view)),t.query_params&&"object"==typeof t.query_params)for(var u in t.query_params)t.query_params.hasOwnProperty(u)&&(i[u]=t.query_params[u]);var l,f="GET";if(t.doc_ids){i.filter="_doc_ids";var d=JSON.stringify(t.doc_ids);d.length<gi?i.doc_ids=d:(f="POST",l={doc_ids:t.doc_ids})}var g,v,m=function(r,u){if(!t.aborted){i.since=r,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),t.descending?o&&(i.limit=a):i.limit=!o||a>e?e:a;var c={method:f,url:ee(h,"_changes"+re(i)),timeout:t.timeout,body:l};v=r,t.aborted||s().then(function(){g=n(t,c,u)})["catch"](u)}},y={results:[]},b=function(n,i){if(!t.aborted){var s=0;if(i&&i.results){s=i.results.length,y.last_seq=i.last_seq;var u={};u.query=t.query_params,i.results=i.results.filter(function(e){a--;var n=wt(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&Gt(e),r&&y.results.push(e),t.onChange(e)),n})}else if(n)return t.aborted=!0,void t.complete(n);i&&i.last_seq&&(v=i.last_seq);var c=o&&a<=0||i&&s<e||t.descending;(!t.continuous||o&&a<=0)&&c?t.complete(null,y):setTimeout(function(){m(v,b)},0)}};return m(t.since||0,b),{cancel:function(){t.aborted=!0,g&&g.abort()}}},u.revsDiff=i("revsDiff",function(t,e,r){"function"==typeof e&&(r=e,e={}),n(e,{method:"POST",url:ee(h,"_revs_diff"),body:t},r)}),u._close=function(t){t()},u._destroy=function(e,r){n(e,{url:ee(h,""),method:"DELETE"},function(e,n){return e&&e.status&&404!==e.status?r(e):(u.emit("destroyed"),u.constructor.emit("destroyed",t.name),void r(null,n))})}}function oe(){this.promise=new lr(function(t){t()})}function se(t){return ur.hash(t)}function ae(t){var e=t.db,n=t.viewName,r=t.map,i=t.reduce,o=t.temporary,s=r.toString()+(i&&i.toString())+"undefined";if(!o&&e._cachedViews){var a=e._cachedViews[s];if(a)return lr.resolve(a)}return e.info().then(function(t){function a(t){t.views=t.views||{};var e=n;e.indexOf("/")===-1&&(e=n+"/"+n);var r=t.views[e]=t.views[e]||{};if(!r[u])return r[u]=!0,t}var u=t.db_name+"-mrview-"+(o?"temp":se(s));return d(e,"_local/mrviews",a).then(function(){return e.registerDependentDatabase(u).then(function(t){var n=t.db;n.auto_compaction=!0;var a={name:u,db:n,sourceDB:e,adapter:e.adapter,mapFun:r,reduceFun:i};return a.db.get("_local/lastSeq")["catch"](function(t){if(404!==t.status)throw t}).then(function(t){return a.seq=t?t.seq:0,o||(e._cachedViews=e._cachedViews||{},e._cachedViews[s]=a,a.db.once("destroyed",function(){delete e._cachedViews[s]})),a})})})})}function ue(t,e,n,r,i,o){return or("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:n,log:r,isArray:i,toJSON:o})}function ce(t){return t.indexOf("/")===-1?[t,t]:t.split("/")}function le(t){return 1===t.length&&/^1-/.test(t[0].rev)}function he(t,e){try{t.emit("error",e)}catch(n){console.error("The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),console.error(e)}}function fe(t,e,n){try{return{output:e.apply(null,n)}}catch(r){return he(t,r),{error:r}}}function de(t,e){var n=Ei(t.key,e.key);return 0!==n?n:Ei(t.value,e.value)}function pe(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function ge(t){var e=t.value,n=e&&"object"==typeof e&&e._id||t.id;return n}function ve(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];e[t].data=Vt(n.data,n.content_type)})})}function me(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&ve(e),e}}function ye(t){var e="builtin "+t+" function requires map values to be numbers or number arrays";return new He(e)}function be(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if("number"!=typeof i){if(!Array.isArray(i))throw ye("_sum");e="number"==typeof e?[e]:e;for(var o=0,s=i.length;o<s;o++){var a=i[o];if("number"!=typeof a)throw ye("_sum");"undefined"==typeof e[o]?e.push(a):e[o]+=a}}else"number"==typeof e?e+=i:e[0]+=i}return e}function _e(t,e,n,r){var i=e[t];"undefined"!=typeof i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(t+"="+i))}function we(t){if("undefined"!=typeof t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function Se(t){return t.group_level=we(t.group_level),t.limit=we(t.limit),t.skip=we(t.skip),t}function xe(t){if(t){if("number"!=typeof t)return new Be('Invalid value for integer: "'+t+'"');if(t<0)return new Be('Invalid value for positive integer: "'+t+'"')}}function Ee(t,e){var n=t.descending?"endkey":"startkey",r=t.descending?"startkey":"endkey";if("undefined"!=typeof t[n]&&"undefined"!=typeof t[r]&&Ei(t[n],t[r])>0)throw new Be("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&t.reduce!==!1){if(t.include_docs)throw new Be("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new Be("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=xe(t[e]);if(n)throw n})}function Ae(t,e,n){var r,i=[],o="GET";if(_e("reduce",n,i),_e("include_docs",n,i),_e("attachments",n,i),_e("limit",n,i),_e("descending",n,i),_e("group",n,i),_e("group_level",n,i),_e("skip",n,i),_e("stale",n,i),_e("conflicts",n,i),_e("startkey",n,i,!0),_e("start_key",n,i,!0),_e("endkey",n,i,!0),_e("end_key",n,i,!0),_e("inclusive_end",n,i),_e("key",n,i,!0),i=i.join("&"),i=""===i?"":"?"+i,"undefined"!=typeof n.keys){var s=2e3,a="keys="+encodeURIComponent(JSON.stringify(n.keys));a.length+i.length+1<=s?i+=("?"===i[0]?"&":"?")+a:(o="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var u=ce(e);return t.request({method:o,url:"_design/"+u[0]+"/_view/"+u[1]+i,body:r}).then(me(n))}return r=r||{},Object.keys(e).forEach(function(t){Array.isArray(e[t])?r[t]=e[t]:r[t]=e[t].toString()}),t.request({method:"POST",url:"_temp_view"+i,body:r}).then(me(n))}function Ce(t,e,n){return new lr(function(r,i){t._query(e,n,function(t,e){return t?i(t):void r(e)})})}function Re(t){return new lr(function(e,n){t._viewCleanup(function(t,r){return t?n(t):void e(r)})})}function Ne(t){return function(e){if(404===e.status)return t;throw e}}function Oe(t,e,n){function r(){return le(l)?lr.resolve(a):e.db.get(s)["catch"](Ne(a))}function i(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):lr.resolve({rows:[]})}function o(t,e){for(var n=[],r={},i=0,o=e.rows.length;i<o;i++){var s=e.rows[i],a=s.doc;if(a&&(n.push(a),r[a._id]=!0,a._deleted=!c[a._id],!a._deleted)){var u=c[a._id];"value"in u&&(a.value=u.value)}}var l=Object.keys(c);return l.forEach(function(t){if(!r[t]){var e={_id:t},i=c[t];"value"in i&&(e.value=i.value),n.push(e)}}),t.keys=Ti(l.concat(t.keys)),n.push(t),n}var s="_local/doc_"+t,a={_id:s,keys:[]},u=n[t],c=u.indexableKeysToKeyValues,l=u.changes;return r().then(function(t){return i(t).then(function(e){return o(t,e)})})}function Te(t,e,n){var r="_local/lastSeq";return t.db.get(r)["catch"](Ne({_id:r,seq:0})).then(function(r){var i=Object.keys(e);return lr.all(i.map(function(n){return Oe(n,t,e)})).then(function(e){var i=Yt(e);return r.seq=n,i.push(r),t.db.bulkDocs({docs:i})})})}function ke(t){var e="string"==typeof t?t:t.name,n=Pi[e];return n||(n=Pi[e]=new oe),n}function Ie(t){return Oi(ke(t),function(){return Pe(t)})()}function Pe(t){function e(t,e){var n={id:i._id,key:Ci(t)};"undefined"!=typeof e&&null!==e&&(n.value=Ci(e)),r.push(n)}function n(e,n){return function(){return Te(t,e,n)}}var r,i,o;if("function"==typeof t.mapFun&&2===t.mapFun.length){var s=t.mapFun;o=function(t){return s(t,e)}}else o=ue(t.mapFun.toString(),e,be,mi,Array.isArray,JSON.parse);var a=t.seq||0,u=new oe;return new lr(function(e,s){function c(){u.finish().then(function(){t.seq=a,e()})}function l(){function e(t){s(t)}t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:a,limit:Di}).on("complete",function(e){var s=e.results;if(!s.length)return c();for(var h={},f=0,d=s.length;f<d;f++){var p=s[f];if("_"!==p.doc._id[0]){r=[],i=p.doc,i._deleted||fe(t.sourceDB,o,[i]),r.sort(de);for(var g,v={},m=0,y=r.length;m<y;m++){var b=r[m],_=[b.key,b.id];0===Ei(b.key,g)&&_.push(m);var w=Ai(_);v[w]=b,g=b.key}h[p.doc._id]={indexableKeysToKeyValues:v,changes:p.changes}}a=p.seq}return u.add(n(h,a)),s.length<Di?c():l()}).on("error",e)}l()})}function Fe(t,e,n){0===n.group_level&&delete n.group_level;var r,i=n.group||n.group_level;r=$i[t.reduceFun]?$i[t.reduceFun]:ue(t.reduceFun.toString(),null,be,mi,Array.isArray,JSON.parse);var o=[],s=isNaN(n.group_level)?Number.POSITIVE_INFINITY:n.group_level;e.forEach(function(t){var e=o[o.length-1],n=i?t.key:null;return i&&Array.isArray(n)&&(n=n.slice(0,s)),e&&0===Ei(e.groupKey,n)?(e.keys.push([t.key,t.id]),void e.values.push(t.value)):void o.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var a=0,u=o.length;a<u;a++){var c=o[a],l=fe(t.sourceDB,r,[c.keys,c.values,!1]);if(l.error&&l.error instanceof He)throw l.error;e.push({value:l.error?null:l.output,key:c.groupKey})}return{rows:pe(e,n.limit,n.skip)}}function De(t,e){return Oi(ke(t),function(){return $e(t,e)})()}function $e(t,e){function n(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return i=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var r=Ri(t.doc._id);return{key:r[0],id:r[1],value:"value"in t.doc?t.doc.value:null}})})}function r(n){var r;if(r=o?Fe(t,n,e):{total_rows:i,offset:s,rows:n},e.include_docs){var a=Ti(n.map(ge));return t.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e={};return t.rows.forEach(function(t){t.doc&&(e["$"+t.id]=t.doc)}),n.forEach(function(t){var n=ge(t),r=e["$"+n];r&&(t.doc=r)}),r})}return r}var i,o=t.reduceFun&&e.reduce!==!1,s=e.skip||0;if("undefined"==typeof e.keys||e.keys.length||(e.limit=0,delete e.keys),"undefined"!=typeof e.keys){var a=e.keys,u=a.map(function(t){var e={startkey:Ai([t]),endkey:Ai([t,{}])};return n(e)});return lr.all(u).then(Yt).then(r)}var c={descending:e.descending};if(e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"undefined"!=typeof e.startkey&&(c.startkey=Ai(e.descending?[e.startkey,{}]:[e.startkey])),"undefined"!=typeof e.endkey){var l=e.inclusive_end!==!1;e.descending&&(l=!l),c.endkey=Ai(l?[e.endkey,{}]:[e.endkey])}if("undefined"!=typeof e.key){var h=Ai([e.key]),f=Ai([e.key,{}]);c.descending?(c.endkey=h,c.startkey=f):(c.startkey=h,c.endkey=f)}return o||("number"==typeof e.limit&&(c.limit=e.limit),c.skip=s),n(c).then(r)}function je(t){return t.request({method:"POST",url:"_view_cleanup"})}function Le(t){return t.get("_local/mrviews").then(function(e){var n={};Object.keys(e.views).forEach(function(t){var e=ce(t),r="_design/"+e[0],i=e[1];n[r]=n[r]||{},n[r][i]=!0});var r={keys:Object.keys(n),include_docs:!0};return t.allDocs(r).then(function(r){var i={};r.rows.forEach(function(t){var r=t.key.substring(8);Object.keys(n[t.key]).forEach(function(n){var o=r+"/"+n;e.views[o]||(o=n);var s=Object.keys(e.views[o]),a=t.doc&&t.doc.views&&t.doc.views[n];s.forEach(function(t){i[t]=i[t]||a})})});var o=Object.keys(i).filter(function(t){return!i[t]}),s=o.map(function(e){return Oi(ke(e),function(){return new t.constructor(e,t.__opts).destroy()})()});return lr.all(s).then(function(){return{ok:!0}})})},Ne({ok:!0}))}function Me(t,e,r){if("http"===t.type())return Ae(t,e,r);if("function"==typeof t._query)return Ce(t,e,r);if("string"!=typeof e){Ee(r,e);var i={db:t,viewName:"temp_view/temp_view",map:e.map,reduce:e.reduce,temporary:!0};return Fi.add(function(){return ae(i).then(function(t){function e(){return t.db.destroy()}return ki(Ie(t).then(function(){return De(t,r)}),e)})}),Fi.finish()}var o=e,s=ce(o),a=s[0],u=s[1];return t.getView(a,u).then(function(e){Ee(r,e);var i={db:t,viewName:o,map:e.map,reduce:e.reduce};return ae(i).then(function(t){return"ok"===r.stale||"update_after"===r.stale?("update_after"===r.stale&&n.nextTick(function(){Ie(t)}),De(t,r)):Ie(t).then(function(){return De(t,r)})})})}function Be(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,Be)}catch(e){}}function He(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,He)}catch(e){}}function Ue(t){return Gr(zt(t))}function Ke(t,e,n){function r(t){try{return Yr(t)}catch(e){var n=R(wr,"Attachment is not a valid base64 string");return{error:n}}}function i(t,n){if(t.stub)return n();if("string"==typeof t.data){var i=r(t.data);if(i.error)return n(i.error);t.length=i.length,"blob"===e?t.data=bt(i,t.content_type):"base64"===e?t.data=Gr(i):t.data=i,ci(i).then(function(e){t.digest="md5-"+e,n()})}else ut(t.data,function(r){"binary"===e?t.data=zt(r):"base64"===e&&(t.data=Ue(r)),ci(r).then(function(e){t.digest="md5-"+e,t.length=r.byteLength,n()})})}function o(){a++,t.length===a&&(s?n(s):n())}if(!t.length)return n();var s,a=0;t.forEach(function(t){function e(t){s=t,r++,r===n.length&&o()}var n=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],r=0;if(!n.length)return o();for(var a in t.data._attachments)t.data._attachments.hasOwnProperty(a)&&i(t.data._attachments[a],e)})}function qe(t,e){return t.pos-e.pos}function Je(t,e,n){for(var r,i=0,o=t.length;i<o;)r=i+o>>>1,n(t[r],e)<0?i=r+1:o=r;return i}function Ve(t,e,n){var r=Je(t,e,n);t.splice(r,0,e)}function ze(t,e){for(var n,r,i=e,o=t.length;i<o;i++){var s=t[i],a=[s.id,s.opts,[]];r?(r[2].push(a),r=a):n=r=a}return n}function Xe(t,e){return t[0]<e[0]?-1:1}function We(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,s=i.tree2;(o[1].status||s[1].status)&&(o[1].status="available"===o[1].status||"available"===s[1].status?"available":"missing");for(var a=0;a<s[2].length;a++)if(o[2][0]){for(var u=!1,c=0;c<o[2].length;c++)o[2][c][0]===s[2][a][0]&&(n.push({tree1:o[2][c],tree2:s[2][a]}),u=!0);u||(r="new_branch",Ve(o[2],s[2][a],Xe))}else r="new_leaf",o[2][0]=s[2][a]}return{conflicts:r,tree:t}}function Ye(t,e,n){var r,i=[],o=!1,s=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var a=0,u=t.length;a<u;a++){var c=t[a];if(c.pos===e.pos&&c.ids[0]===e.ids[0])r=We(c.ids,e.ids),i.push({pos:c.pos,ids:r.tree}),o=o||r.conflicts,s=!0;else if(n!==!0){var l=c.pos<e.pos?c:e,h=c.pos<e.pos?e:c,f=h.pos-l.pos,d=[],p=[];for(p.push({ids:l.ids,diff:f,parent:null,parentIdx:null});p.length>0;){var g=p.pop();if(0!==g.diff)for(var v=g.ids[2],m=0,y=v.length;m<y;m++)p.push({ids:v[m],diff:g.diff-1,parent:g.ids,parentIdx:m});else g.ids[0]===h.ids[0]&&d.push(g)}var b=d[0];b?(r=We(b.ids,h.ids),b.parent[2][b.parentIdx]=r.tree,i.push({pos:l.pos,ids:l.ids}),o=o||r.conflicts,s=!0):i.push(c)}else i.push(c)}return s||i.push(e),i.sort(qe),{tree:i,conflicts:o||"internal_node"}}function Ge(t,e){for(var n,r=P(t),i={},o=0,s=r.length;o<s;o++){for(var a=r[o],u=a.ids,c=Math.max(0,u.length-e),l={pos:a.pos+c,ids:ze(u,c)},h=0;h<c;h++){var f=a.pos+h+"-"+u[h].id;i[f]=!0}n=n?Ye(n,l,!0).tree:[l]}return S(n,function(t,e,n){delete i[e+"-"+n]}),{tree:n,revs:Object.keys(i)}}function Qe(t,e,n){var r=Ye(t,e),i=Ge(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function Ze(t,e){for(var n,r=t.slice(),i=e.split("-"),o=parseInt(i[0],10),s=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===s)return!0;for(var a=n.ids[2],u=0,c=a.length;u<c;u++)r.push({pos:n.pos+1,ids:a[u]})}return!1}function tn(t,e,n,r,i,o,s,a){if(Ze(e.rev_tree,n.metadata.rev))return r[i]=n,o();var u=e.winningRev||g(e),c="deleted"in e?e.deleted:m(e,u),l="deleted"in n.metadata?n.metadata.deleted:m(n.metadata),h=/^1-/.test(n.metadata.rev);if(c&&!l&&a&&h){var f=n.data;f._rev=u,f._id=n.metadata.id,n=B(f,a)}var d=Qe(e.rev_tree,n.metadata.rev_tree[0],t),p=a&&(c&&l||!c&&"new_leaf"!==d.conflicts||c&&!l&&"new_branch"===d.conflicts);if(p){var v=R(gr);return r[i]=v,o()}var y=n.metadata.rev;n.metadata.rev_tree=d.tree,n.stemmedRevs=d.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var b,_=g(n.metadata),w=m(n.metadata,_),S=c===w?0:c<w?-1:1;b=y===_?w:m(n.metadata,y),s(n,_,w,b,!0,S,i,o)}function en(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}function nn(t,e,n,r,i,o,s,a,u){function c(t,e,n){var r=g(t.metadata),i=m(t.metadata,r);if("was_delete"in a&&i)return o[e]=R(pr,"deleted"),n();var u=h&&en(t);if(u){var c=R(gr);return o[e]=c,n()}var l=i?0:1;s(t,r,i,i,!1,l,e,n)}function l(){++d===p&&u&&u()}t=t||1e3;var h=a.new_edits,f=new nr.Map,d=0,p=e.length;e.forEach(function(t,e){if(t._id&&I(t._id)){var r=t._deleted?"_removeLocal":"_putLocal";return void n[r](t,{ctx:i},function(t,n){o[e]=t||n,l()})}var s=t.metadata.id;f.has(s)?(p--,f.get(s).push([t,e])):f.set(s,[[t,e]])}),f.forEach(function(e,n){function i(){++u<e.length?a():l()}function a(){var a=e[u],l=a[0],f=a[1];if(r.has(n))tn(t,r.get(n),l,o,f,i,s,h);else{var d=Qe([],l.metadata.rev_tree[0],t);l.metadata.rev_tree=d.tree,l.stemmedRevs=d.stemmedRevs||[],c(l,f,i)}}var u=0;a()})}function rn(t){var e=[];return S(t.rev_tree,function(t,n,r,i,o){"available"!==o.status||t||(e.push(n+"-"+r),o.status="missing")}),e}function on(t){try{return JSON.parse(t)}catch(e){return cr.parse(t)}}function sn(t){return t.length<5e4?JSON.parse(t):on(t)}function an(t){try{return JSON.stringify(t)}catch(e){return cr.stringify(t)}}function un(t,e,n,r){try{t.apply(e,n)}catch(i){r.emit("error",i)}}function cn(t){if(!Xi.running&&Xi.queue.length){Xi.running=!0;var e=Xi.queue.shift();e.action(function(r,i){un(e.callback,this,[r,i],t),Xi.running=!1,n.nextTick(function(){cn(t)})})}}function ln(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(R(Nr,n,e.type))}}function hn(t,e,n){return{data:an(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function fn(t){if(!t)return null;var e=sn(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function dn(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function pn(t,e,n,r){n?r(t?"string"!=typeof t?t:Vt(t,e):at([""],{type:e})):t?"string"!=typeof t?Xt(t,function(t){r(Gr(t))}):r(t):r("")}function gn(t,e,n,r){function i(){++a===s.length&&r&&r()}function o(t,e){var r=t._attachments[e],o=r.digest,s=n.objectStore(Ki).get(o);s.onsuccess=function(t){
r.body=t.target.result.body,i()}}var s=Object.keys(t._attachments||{});if(!s.length)return r&&r();var a=0;s.forEach(function(n){e.attachments&&e.include_docs?o(t,n):(t._attachments[n].stub=!0,i())})}function vn(t,e){return lr.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return lr.all(n.map(function(n){var r=t.doc._attachments[n];if("body"in r){var i=r.body,s=r.content_type;return new lr(function(a){pn(i,s,e,function(e){t.doc._attachments[n]=Gn.extend(o(r,["digest","content_type"]),{data:e}),a()})})}}))}}))}function mn(t,e,n){function r(){c--,c||i()}function i(){o.length&&o.forEach(function(t){var e=u.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::",!1,!1));e.onsuccess=function(e){var n=e.target.result;n||a["delete"](t)}})}var o=[],s=n.objectStore(Ui),a=n.objectStore(Ki),u=n.objectStore(qi),c=t.length;t.forEach(function(t){var n=s.index("_doc_id_rev"),i=e+"::"+t;n.getKey(i).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return r();s["delete"](e);var n=u.index("seq").openCursor(IDBKeyRange.only(e));n.onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];o.push(n),u["delete"](e.primaryKey),e["continue"]()}else r()}}})}function yn(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}function bn(t,e,n,r,i,o,s){function a(){var t=[Hi,Ui,Ki,Vi,qi],e=yn(i,t,"readwrite");return e.error?s(e.error):(b=e.txn,b.onabort=ln(s),b.ontimeout=ln(s),b.oncomplete=l,_=b.objectStore(Hi),w=b.objectStore(Ui),S=b.objectStore(Ki),x=b.objectStore(qi),void f(function(t){return t?(F=!0,s(t)):void c()}))}function u(){nn(t.revs_limit,A,r,P,b,k,d,n)}function c(){function t(){++n===A.length&&u()}function e(e){var n=fn(e.target.result);n&&P.set(n.id,n),t()}if(A.length)for(var n=0,r=0,i=A.length;r<i;r++){var o=A[r];if(o._id&&I(o._id))t();else{var s=_.get(o.metadata.id);s.onsuccess=e}}}function l(){F||(o.notify(r._meta.name),r._meta.docCount+=C,s(null,k))}function h(t,e){var n=S.get(t);n.onsuccess=function(n){if(n.target.result)e();else{var r=R(Fr,"unknown stub attachment with digest "+t);r.status=412,e(r)}}}function f(t){function e(){++i===n.length&&t(r)}var n=[];if(A.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,i=0;n.forEach(function(t){h(t,function(t){t&&!r&&(r=t),e()})})}function d(t,e,n,r,i,o,s,a){C+=o,t.metadata.winningRev=e,t.metadata.deleted=n;var u=t.data;u._id=t.metadata.id,u._rev=t.metadata.rev,r&&(u._deleted=!0);var c=u._attachments&&Object.keys(u._attachments).length;return c?v(t,e,n,i,s,a):void g(t,e,n,i,s,a)}function p(t){var e=rn(t.metadata);mn(e,t.metadata.id,b)}function g(t,e,n,i,o,s){function a(o){i&&r.auto_compaction?p(t):t.stemmedRevs.length&&mn(t.stemmedRevs,t.metadata.id,b),h.seq=o.target.result,delete h.rev;var s=hn(h,e,n),a=_.put(s);a.onsuccess=c}function u(t){t.preventDefault(),t.stopPropagation();var e=w.index("_doc_id_rev"),n=e.getKey(l._doc_id_rev);n.onsuccess=function(t){var e=w.put(l,t.target.result);e.onsuccess=a}}function c(){k[o]={ok:!0,id:h.id,rev:e},P.set(t.metadata.id,t.metadata),m(t,h.seq,s)}var l=t.data,h=t.metadata;l._doc_id_rev=h.id+"::"+h.rev,delete l._id,delete l._rev;var f=w.put(l);f.onsuccess=a,f.onerror=u}function v(t,e,n,r,i,o){function s(){c===l.length&&g(t,e,n,r,i,o)}function a(){c++,s()}var u=t.data,c=0,l=Object.keys(u._attachments);l.forEach(function(e){var n=t.data._attachments[e];if(n.stub)c++,s();else{var r=n.data;delete n.data;var i=n.digest;y(i,r,a)}})}function m(t,e,n){function r(){++o===s.length&&n()}function i(n){var i=t.data._attachments[n].digest,o=x.put({seq:e,digestSeq:i+"::"+e});o.onsuccess=r,o.onerror=function(t){t.preventDefault(),t.stopPropagation(),r()}}var o=0,s=Object.keys(t.data._attachments||{});if(!s.length)return n();for(var a=0;a<s.length;a++)i(s[a])}function y(t,e,n){var r=S.count(t);r.onsuccess=function(r){var i=r.target.result;if(i)return n();var o={digest:t,body:e},s=S.put(o);s.onsuccess=n}}for(var b,_,w,S,x,E,A=e.docs,C=0,N=0,O=A.length;N<O;N++){var T=A[N];T._id&&I(T._id)||(T=A[N]=B(T,n.new_edits),T.error&&!E&&(E=T))}if(E)return s(E);var k=new Array(A.length),P=new nr.Map,F=!1,D=r._meta.blobSupport?"blob":"base64";Ke(A,D,function(t){return t?s(t):void a()})}function _n(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(o){return{error:o}}return null}function wn(t,e,n,r){return"DataError"===n.name&&0===n.code?r(null,{total_rows:t._meta.docCount,offset:e.skip,rows:[]}):void r(R(Nr,n.name,n.message))}function Sn(t,e,n,r){function i(t,r){function i(e,n,r){var i=e.id+"::"+r;x.get(i).onsuccess=function(r){n.doc=dn(r.target.result),t.conflicts&&(n.doc._conflicts=A(e)),gn(n.doc,t,b)}}function o(e,n,r){var o={id:r.id,key:r.id,value:{rev:n}},s=r.deleted;if("ok"===t.deleted)E.push(o),s?(o.value.deleted=!0,o.doc=null):t.include_docs&&i(r,o,n);else if(!s&&f--<=0&&(E.push(o),t.include_docs&&i(r,o,n),0===--d))return;e["continue"]()}function s(t){C=e._meta.docCount;var n=t.target.result;if(n){var r=fn(n.value),i=r.winningRev;o(n,i,r)}}function a(){r(null,{total_rows:C,offset:t.skip,rows:E})}function u(){t.attachments?vn(E,t.binary).then(a):a()}var c="startkey"in t&&t.startkey,l="endkey"in t&&t.endkey,h="key"in t&&t.key,f=t.skip||0,d="number"==typeof t.limit?t.limit:-1,p=t.inclusive_end!==!1,g="descending"in t&&t.descending?"prev":null,v=_n(c,l,p,h,g);if(v&&v.error)return wn(e,t,v.error,r);var m=[Hi,Ui];t.attachments&&m.push(Ki);var y=yn(n,m,"readonly");if(y.error)return r(y.error);var b=y.txn,_=b.objectStore(Hi),w=b.objectStore(Ui),S=g?_.openCursor(v,g):_.openCursor(v),x=w.index("_doc_id_rev"),E=[],C=0;b.oncomplete=u,S.onsuccess=s}function o(t,n){return 0===t.limit?n(null,{total_rows:e._meta.docCount,offset:t.skip,rows:[]}):void i(t,n)}o(t,r)}function xn(t){return new lr(function(e){var n=at([""]);t.objectStore(zi).put(n,"key"),t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},t.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})["catch"](function(){return!1})}function En(t){it()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):ot()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function An(){ir.EventEmitter.call(this),this._listeners={},En(this)}function Cn(t,e){var n=this;Xi.queue.push({action:function(e){Rn(n,t,e)},callback:e}),cn(n.constructor)}function Rn(t,e,r){function i(t){var e=t.createObjectStore(Hi,{keyPath:"id"});t.createObjectStore(Ui,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(Ki,{keyPath:"digest"}),t.createObjectStore(Ji,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(zi),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(Vi,{keyPath:"_id"});var n=t.createObjectStore(qi,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function o(t,e){var n=t.objectStore(Hi);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value,o=m(i);i.deletedOrLocal=o?"1":"0",n.put(i),r["continue"]()}else e()}}function s(t){t.createObjectStore(Vi,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function a(t,e){var n=t.objectStore(Vi),r=t.objectStore(Hi),i=t.objectStore(Ui),o=r.openCursor();o.onsuccess=function(t){var o=t.target.result;if(o){var s=o.value,a=s.id,u=I(a),c=g(s);if(u){var l=a+"::"+c,h=a+"::",f=a+"::~",d=i.index("_doc_id_rev"),p=IDBKeyRange.bound(h,f,!1,!1),v=d.openCursor(p);v.onsuccess=function(t){if(v=t.target.result){var e=v.value;e._doc_id_rev===l&&n.put(e),i["delete"](v.primaryKey),v["continue"]()}else r["delete"](o.primaryKey),o["continue"]()}}else o["continue"]()}else e&&e()}}function u(t){var e=t.createObjectStore(qi,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function l(t,e){var n=t.objectStore(Ui),r=t.objectStore(Ki),i=t.objectStore(qi),o=r.count();o.onsuccess=function(t){var r=t.target.result;return r?void(n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var r=n.value,o=n.primaryKey,s=Object.keys(r._attachments||{}),a={},u=0;u<s.length;u++){var c=r._attachments[s[u]];a[c.digest]=!0}var l=Object.keys(a);for(u=0;u<l.length;u++){var h=l[u];i.put({seq:o,digestSeq:h+"::"+o})}n["continue"]()}):e()}}function f(t){function e(t){return t.data?fn(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(Ui),r=t.objectStore(Hi),i=r.openCursor();i.onsuccess=function(t){function i(){var t=a.id+"::",e=a.id+"::",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),i=0;r.onsuccess=function(t){var e=t.target.result;if(!e)return a.seq=i,o();var n=e.primaryKey;n>i&&(i=n),e["continue"]()}}function o(){var t=hn(a,a.winningRev,a.deleted),e=r.put(t);e.onsuccess=function(){s["continue"]()}}var s=t.target.result;if(s){var a=e(s.value);return a.winningRev=a.winningRev||g(a),a.seq?o():void i()}}}var d=e.name,p=null;t._meta=null,t.type=function(){return"idb"},t._id=h(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,r,i){bn(e,n,r,t,p,Gi,i)},t._get=function(t,e,n){function r(){n(s,{doc:i,metadata:o,ctx:a})}var i,o,s,a=e.ctx;if(!a){var u=yn(p,[Hi,Ui,Ki],"readonly");if(u.error)return n(u.error);a=u.txn}a.objectStore(Hi).get(t).onsuccess=function(t){if(o=fn(t.target.result),!o)return s=R(pr,"missing"),r();if(m(o)&&!e.rev)return s=R(pr,"deleted"),r();var n=a.objectStore(Ui),u=e.rev||o.winningRev,c=o.id+"::"+u;n.index("_doc_id_rev").get(c).onsuccess=function(t){return i=t.target.result,i&&(i=dn(i)),i?void r():(s=R(pr,"missing"),r())}}},t._getAttachment=function(t,e,n){var r;if(e.ctx)r=e.ctx;else{var i=yn(p,[Hi,Ui,Ki],"readonly");if(i.error)return n(i.error);r=i.txn}var o=t.digest,s=t.content_type;r.objectStore(Ki).get(o).onsuccess=function(t){var r=t.target.result.body;pn(r,s,e.binary,function(t){n(null,t)})}},t._info=function(e){if(null===p||!Yi.has(d)){var n=new Error("db isn't open");return n.id="idbNull",e(n)}var r,i,o=yn(p,[Ui],"readonly");if(o.error)return e(o.error);var s=o.txn,a=s.objectStore(Ui).openCursor(null,"prev");a.onsuccess=function(e){var n=e.target.result;r=n?n.key:0,i=t._meta.docCount},s.oncomplete=function(){e(null,{doc_count:i,update_seq:r,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(e,n){Sn(e,t,p,n)},t._changes=function(e){function n(t){function n(){return c.seq!==s?t["continue"]():(u=s,c.winningRev===o._rev?i(o):void r())}function r(){var t=o._id+"::"+c.winningRev,e=m.get(t);e.onsuccess=function(t){i(dn(t.target.result))}}function i(n){var r=e.processChange(n,c,e);r.seq=c.seq;var i=_(r);return"object"==typeof i?e.complete(i):(i&&(b++,h&&y.push(r),e.attachments&&e.include_docs?gn(n,e,f,function(){vn([r],e.binary).then(function(){e.onChange(r)})}):e.onChange(r)),void(b!==l&&t["continue"]()))}var o=dn(t.value),s=t.key;if(a&&!a.has(o._id))return t["continue"]();var c;return(c=w.get(o._id))?n():void(v.get(o._id).onsuccess=function(t){c=fn(t.target.result),w.set(o._id,c),n()})}function r(t){var e=t.target.result;e&&n(e)}function i(){var t=[Hi,Ui];e.attachments&&t.push(Ki);var n=yn(p,t,"readonly");if(n.error)return e.complete(n.error);f=n.txn,f.onabort=ln(e.complete),f.oncomplete=o,g=f.objectStore(Ui),v=f.objectStore(Hi),m=g.index("_doc_id_rev");var i;i=e.descending?g.openCursor(null,"prev"):g.openCursor(IDBKeyRange.lowerBound(e.since,!0)),i.onsuccess=r}function o(){function t(){e.complete(null,{results:y,last_seq:u})}!e.continuous&&e.attachments?vn(y).then(t):t()}if(e=c(e),e.continuous){var s=d+":"+D();return Gi.addListener(d,s,t,e),Gi.notify(d),{cancel:function(){Gi.removeListener(d,s)}}}var a=e.doc_ids&&new nr.Set(e.doc_ids);e.since=e.since||0;var u=e.since,l="limit"in e?e.limit:-1;0===l&&(l=1);var h;h="return_docs"in e?e.return_docs:!("returnDocs"in e)||e.returnDocs;var f,g,v,m,y=[],b=0,_=wt(e),w=new nr.Map;i()},t._close=function(t){return null===p?t(R(br)):(p.close(),Yi["delete"](d),p=null,void t())},t._getRevisionTree=function(t,e){var n=yn(p,[Hi],"readonly");if(n.error)return e(n.error);var r=n.txn,i=r.objectStore(Hi).get(t);i.onsuccess=function(t){var n=fn(t.target.result);n?e(null,n.rev_tree):e(R(pr))}},t._doCompaction=function(t,e,n){var r=[Hi,Ui,Ki,qi],i=yn(p,r,"readwrite");if(i.error)return n(i.error);var o=i.txn,s=o.objectStore(Hi);s.get(t).onsuccess=function(n){var r=fn(n.target.result);S(r.rev_tree,function(t,n,r,i,o){var s=n+"-"+r;e.indexOf(s)!==-1&&(o.status="missing")}),mn(e,t,o);var i=r.winningRev,s=r.deleted;o.objectStore(Hi).put(hn(r,i,s))},o.onabort=ln(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=yn(p,[Vi],"readonly");if(n.error)return e(n.error);var r=n.txn,i=r.objectStore(Vi).get(t);i.onerror=ln(e),i.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(R(pr))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var r=t._rev,i=t._id;r?t._rev="0-"+(parseInt(r.split("-")[1],10)+1):t._rev="0-1";var o,s=e.ctx;if(!s){var a=yn(p,[Vi],"readwrite");if(a.error)return n(a.error);s=a.txn,s.onerror=ln(n),s.oncomplete=function(){o&&n(null,o)}}var u,c=s.objectStore(Vi);r?(u=c.get(i),u.onsuccess=function(i){var s=i.target.result;if(s&&s._rev===r){var a=c.put(t);a.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)}}else n(R(gr))}):(u=c.add(t),u.onerror=function(t){n(R(gr)),t.preventDefault(),t.stopPropagation()},u.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var r=e.ctx;if(!r){var i=yn(p,[Vi],"readwrite");if(i.error)return n(i.error);r=i.txn,r.oncomplete=function(){o&&n(null,o)}}var o,s=t._id,a=r.objectStore(Vi),u=a.get(s);u.onerror=ln(n),u.onsuccess=function(r){var i=r.target.result;i&&i._rev===t._rev?(a["delete"](s),o={ok:!0,id:s,rev:"0-0"},e.ctx&&n(null,o)):n(R(pr))}},t._destroy=function(t,e){Gi.removeAllListeners(d);var n=Qi.get(d);n&&n.result&&(n.result.close(),Yi["delete"](d));var r=indexedDB.deleteDatabase(d);r.onsuccess=function(){Qi["delete"](d),ot()&&d in localStorage&&delete localStorage[d],e(null,{ok:!0})},r.onerror=ln(e)};var v=Yi.get(d);if(v)return p=v.idb,t._meta=v.global,void n.nextTick(function(){r(null,t)});var y;y=e.storage?Nn(d,e.storage):indexedDB.open(d,Bi),Qi.set(d,y),y.onupgradeneeded=function(t){function e(){var t=c[h-1];h++,t&&t(r,e)}var n=t.target.result;if(t.oldVersion<1)return i(n);var r=t.currentTarget.transaction;t.oldVersion<3&&s(n),t.oldVersion<4&&u(n);var c=[o,a,l,f],h=t.oldVersion;e()},y.onsuccess=function(e){p=e.target.result,p.onversionchange=function(){p.close(),Yi["delete"](d)},p.onabort=function(t){console.error("Database has a global failure",t.target.error),p.close(),Yi["delete"](d)};var n=p.transaction([Ji,zi,Hi],"readwrite"),i=n.objectStore(Ji).get(Ji),o=null,s=null,a=null;i.onsuccess=function(e){var i=function(){null!==o&&null!==s&&null!==a&&(t._meta={name:d,instanceId:a,blobSupport:o,docCount:s},Yi.set(d,{idb:p,global:t._meta}),r(null,t))},u=e.target.result||{id:Ji};d+"_id"in u?(a=u[d+"_id"],i()):(a=D(),u[d+"_id"]=a,n.objectStore(Ji).put(u).onsuccess=function(){i()}),Wi||(Wi=xn(n)),Wi.then(function(t){o=t,i()});var c=n.objectStore(Hi).index("deletedOrLocal");c.count(IDBKeyRange.only("0")).onsuccess=function(t){s=t.target.result,i()}}},y.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";console.error(t),r(R(Nr,t))}}function Nn(t,e){try{return indexedDB.open(t,{version:Bi,storage:e})}catch(n){return indexedDB.open(t,Bi)}}function On(t){return decodeURIComponent(window.escape(t))}function Tn(t){return t<65?t-48:t-55}function kn(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(Tn(t.charCodeAt(e++))<<4|Tn(t.charCodeAt(e++)));return r}function In(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(Tn(t.charCodeAt(e+2))<<12|Tn(t.charCodeAt(e+3))<<8|Tn(t.charCodeAt(e))<<4|Tn(t.charCodeAt(e+1))),e+=4;return r}function Pn(t,e){return"UTF-8"===e?On(kn(t,0,t.length)):In(t,0,t.length)}function Fn(t){return"'"+t+"'"}function Dn(){return"undefined"!=typeof sqlitePlugin?sqlitePlugin.openDatabase.bind(sqlitePlugin):"undefined"!=typeof openDatabase?function(t){return openDatabase(t.name,t.version,t.description,t.size)}:void 0}function $n(){return"undefined"!=typeof openDatabase||"undefined"!=typeof SQLitePlugin}function jn(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function Ln(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function Mn(t){return delete t._id,delete t._rev,JSON.stringify(t)}function Bn(t,e,n){return t=JSON.parse(t),t._id=e,t._rev=n,t}function Hn(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function Un(t,e,n,r,i){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function Kn(t,e,n){function r(){++o===t.length&&i()}function i(){if(s.length){var t="SELECT DISTINCT digest AS digest FROM "+oo+" WHERE seq IN "+Hn(s.length);n.executeSql(t,s,function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).digest);if(n.length){var i="DELETE FROM "+oo+" WHERE seq IN ("+s.map(function(){return"?"}).join(",")+")";t.executeSql(i,s,function(t){var e="SELECT digest FROM "+oo+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")";t.executeSql(e,n,function(t,e){for(var r=new nr.Set,i=0;i<e.rows.length;i++)r.add(e.rows.item(i).digest);n.forEach(function(e){r.has(e)||(t.executeSql("DELETE FROM "+oo+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+no+" WHERE digest=?",[e]))})})})}})}}if(t.length){var o=0,s=[];t.forEach(function(t){var i="SELECT seq FROM "+eo+" WHERE doc_id=? AND rev=?";n.executeSql(i,[e,t],function(t,e){if(!e.rows.length)return r();var n=e.rows.item(0).seq;s.push(n),t.executeSql("DELETE FROM "+eo+" WHERE seq=?",[n],r)})})}}function qn(t){return function(e){console.error("WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^\(]+)/),r=n&&n[1]||e.type,i=e.target||e.message;t(R(Or,i,r))}}function Jn(t){if("size"in t)return 1e6*t.size;var e="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent);return e?5e6:1}function Vn(t,e){try{return{db:t(e)}}catch(n){return{error:n}}}function zn(t){var e=so.get(t.name);if(!e){var n=Dn();e=Vn(n,t),so.set(t.name,e),e.db&&(e.db._sqlitePlugin="undefined"!=typeof sqlitePlugin)}return e}function Xn(t,e,n,r,i,o,s){function a(){return b?s(b):(o.notify(r._name),r._docCount=-1,void s(null,_))}function u(t,e){var n="SELECT count(*) as cnt FROM "+no+" WHERE digest=?";y.executeSql(n,[t],function(n,r){if(0===r.rows.item(0).cnt){var i=R(Fr,"unknown stub attachment with digest "+t);e(i)}else e()})}function c(t){function e(){++i===n.length&&t(r)}var n=[];if(v.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,i=0;n.forEach(function(t){u(t,function(t){t&&!r&&(r=t),e()})})}function l(t,e,n,i,o,s,a,u){function c(){function e(t,e){function r(){return++o===s.length&&e(),!1}function i(e){var i="INSERT INTO "+oo+" (digest, seq) VALUES (?,?)",o=[n._attachments[e].digest,t];y.executeSql(i,o,r,r)}var o=0,s=Object.keys(n._attachments||{});if(!s.length)return e();for(var a=0;a<s.length;a++)i(s[a])}var n=t.data,r=i?1:0,o=n._id,s=n._rev,a=Mn(n),u="INSERT INTO "+eo+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",c=[o,s,a,r];y.executeSql(u,c,function(t,n){var r=n.insertId;e(r,function(){f(t,r)})},function(){var t=Un("seq",eo,null,"doc_id=? AND rev=?");return y.executeSql(t,[o,s],function(t,n){var i=n.rows.item(0).seq,u="UPDATE "+eo+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",c=[a,r,o,s];t.executeSql(u,c,function(t){e(i,function(){f(t,i)})})}),!1})}function l(t){p||(t?(p=t,u(p)):g===v.length&&c())}function h(t){g++,l(t)}function f(n,i){var s=t.metadata.id;o&&r.auto_compaction?Kn(rn(t.metadata),s,n):t.stemmedRevs.length&&Kn(t.stemmedRevs,s,n),t.metadata.seq=i,delete t.metadata.rev;var c=o?"UPDATE "+to+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+eo+" WHERE doc_id="+to+".id AND rev=?) WHERE id=?":"INSERT INTO "+to+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",l=an(t.metadata),h=o?[l,i,e,s]:[s,i,i,l];n.executeSql(c,h,function(){_[a]={ok:!0,id:t.metadata.id,rev:e},w.set(s,t.metadata),u()})}var p=null,g=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var v=Object.keys(t.data._attachments||{});i&&(t.data._deleted=!0),v.forEach(function(e){var n=t.data._attachments[e];if(n.stub)g++,l();else{var r=n.data;delete n.data;var i=n.digest;d(i,r,h)}}),v.length||c()}function h(){nn(t.revs_limit,v,r,w,y,_,l,n)}function f(t){function e(){++n===v.length&&t()}if(!v.length)return t();var n=0;v.forEach(function(t){if(t._id&&I(t._id))return e();var n=t.metadata.id;y.executeSql("SELECT json FROM "+to+" WHERE id = ?",[n],function(t,r){if(r.rows.length){var i=sn(r.rows.item(0).json);w.set(n,i)}e()})})}function d(t,e,n){var r="SELECT digest FROM "+no+" WHERE digest=?";y.executeSql(r,[t],function(i,o){return o.rows.length?n():(r="INSERT INTO "+no+" (digest, body, escaped) VALUES (?,?,1)",void i.executeSql(r,[t,jn(e)],function(){n()},function(){return n(),!1}))})}var p=n.new_edits,g=e.docs,v=g.map(function(t){if(t._id&&I(t._id))return t;var e=B(t,p);return e}),m=v.filter(function(t){return t.error});if(m.length)return s(m[0]);var y,b,_=new Array(v.length),w=new nr.Map;Ke(v,"binary",function(t){return t?s(t):void i.transaction(function(t){y=t,c(function(t){t?b=t:f(h)})},qn(s),a)})}function Wn(t,e,n,r,i){function s(){++c===u.length&&i&&i()}function a(t,i){var a=t._attachments[i],u={binary:e.binary,ctx:r};n._getAttachment(a,u,function(e,n){t._attachments[i]=Gn.extend(o(a,["digest","content_type"]),{data:n}),s()})}var u=Object.keys(t._attachments||{});if(!u.length)return i&&i();var c=0;u.forEach(function(n){e.attachments&&e.include_docs?a(t,n):(t._attachments[n].stub=!0,s())})}function Yn(t,e){function n(){ot()&&(window.localStorage["_pouch__websqldb_"+b._name]=!0),e(null,b)}function r(t,e){t.executeSql(ho),t.executeSql("ALTER TABLE "+eo+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(co),t.executeSql("ALTER TABLE "+to+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+to+" (local, id)");var n="SELECT "+to+".winningseq AS seq, "+to+".json AS metadata FROM "+eo+" JOIN "+to+" ON "+eo+".seq = "+to+".winningseq";t.executeSql(n,[],function(t,n){for(var r=[],i=[],o=0;o<n.rows.length;o++){var s=n.rows.item(o),a=s.seq,u=JSON.parse(s.metadata);m(u)&&r.push(a),I(u.id)&&i.push(u.id)}t.executeSql("UPDATE "+to+"SET local = 1 WHERE id IN "+Hn(i.length),i,function(){t.executeSql("UPDATE "+eo+" SET deleted = 1 WHERE seq IN "+Hn(r.length),r,e)})})})})}function i(t,e){var n="CREATE TABLE IF NOT EXISTS "+ro+" (id UNIQUE, rev, json)";t.executeSql(n,[],function(){var n="SELECT "+to+".id AS id, "+eo+".json AS data FROM "+eo+" JOIN "+to+" ON "+eo+".seq = "+to+".winningseq WHERE local = 1";t.executeSql(n,[],function(t,n){function r(){if(!i.length)return e(t);var n=i.shift(),o=JSON.parse(n.data)._rev;t.executeSql("INSERT INTO "+ro+" (id, rev, json) VALUES (?,?,?)",[n.id,o,n.data],function(t){t.executeSql("DELETE FROM "+to+" WHERE id=?",[n.id],function(t){t.executeSql("DELETE FROM "+eo+" WHERE seq=?",[n.seq],function(){r()})})})}for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o));r()})})}function o(t,e){function n(n){function r(){if(!n.length)return e(t);var i=n.shift(),o=Pn(i.hex,y),s=o.lastIndexOf("::"),a=o.substring(0,s),u=o.substring(s+2),c="UPDATE "+eo+" SET doc_id=?, rev=? WHERE doc_id_rev=?";t.executeSql(c,[a,u,o],function(){r()})}r()}var r="ALTER TABLE "+eo+" ADD COLUMN doc_id";t.executeSql(r,[],function(t){var e="ALTER TABLE "+eo+" ADD COLUMN rev";t.executeSql(e,[],function(t){t.executeSql(lo,[],function(t){var e="SELECT hex(doc_id_rev) as hex FROM "+eo;t.executeSql(e,[],function(t,e){for(var r=[],i=0;i<e.rows.length;i++)r.push(e.rows.item(i));n(r)})})})})}function s(t,e){function n(t){var n="SELECT COUNT(*) AS cnt FROM "+no;t.executeSql(n,[],function(t,n){function r(){var n=Un(vo+", "+to+".id AS id",[to,eo],go,null,to+".id ");n+=" LIMIT "+s+" OFFSET "+o,o+=s,t.executeSql(n,[],function(t,n){function i(t,e){var n=o[t]=o[t]||[];n.indexOf(e)===-1&&n.push(e)}if(!n.rows.length)return e(t);for(var o={},s=0;s<n.rows.length;s++)for(var a=n.rows.item(s),u=Bn(a.data,a.id,a.rev),c=Object.keys(u._attachments||{}),l=0;l<c.length;l++){var h=u._attachments[c[l]];i(h.digest,a.seq)}var f=[];if(Object.keys(o).forEach(function(t){var e=o[t];e.forEach(function(e){f.push([t,e])})}),!f.length)return r();var d=0;f.forEach(function(e){var n="INSERT INTO "+oo+" (digest, seq) VALUES (?,?)";t.executeSql(n,e,function(){++d===f.length&&r()})})})}var i=n.rows.item(0).cnt;if(!i)return e(t);var o=0,s=10;r()})}var r="CREATE TABLE IF NOT EXISTS "+oo+" (digest, seq INTEGER)";t.executeSql(r,[],function(t){t.executeSql(po,[],function(t){t.executeSql(fo,[],n)})})}function a(t,e){var n="ALTER TABLE "+no+" ADD COLUMN escaped TINYINT(1) DEFAULT 0";t.executeSql(n,[],e)}function u(t,e){var n="ALTER TABLE "+to+" ADD COLUMN max_seq INTEGER";t.executeSql(n,[],function(t){var n="UPDATE "+to+" SET max_seq=(SELECT MAX(seq) FROM "+eo+" WHERE doc_id=id)";t.executeSql(n,[],function(t){var n="CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+to+" (max_seq)";t.executeSql(n,[],e)})})}function l(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,n){var r=n.rows.item(0).hex;y=2===r.length?"UTF-8":"UTF-16",e()})}function f(){for(;x.length>0;){var t=x.pop();t(null,_)}}function d(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+io+" (dbid, db_version INTEGER)",c="CREATE TABLE IF NOT EXISTS "+no+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",l="CREATE TABLE IF NOT EXISTS "+oo+" (digest, seq INTEGER)",h="CREATE TABLE IF NOT EXISTS "+to+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",d="CREATE TABLE IF NOT EXISTS "+eo+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",p="CREATE TABLE IF NOT EXISTS "+ro+" (id UNIQUE, rev, json)";t.executeSql(c),t.executeSql(p),t.executeSql(l,[],function(){t.executeSql(fo),t.executeSql(po)}),t.executeSql(h,[],function(){t.executeSql(ho),t.executeSql(d,[],function(){t.executeSql(co),t.executeSql(lo),t.executeSql(n,[],function(){var e="INSERT INTO "+io+" (db_version, dbid) VALUES (?,?)";_=D();var n=[Zi,_];t.executeSql(e,n,function(){f()})})})})}else{var g=function(){var n=e<Zi;n&&t.executeSql("UPDATE "+io+" SET db_version = "+Zi);var r="SELECT dbid FROM "+io;t.executeSql(r,[],function(t,e){_=e.rows.item(0).dbid,f()})},v=[r,i,o,s,a,u,g],m=e,y=function(t){v[m-1](t,y),m++};y(t)}}function p(){C.transaction(function(t){l(t,function(){g(t)})},qn(e),n)}function g(t){var e="SELECT sql FROM sqlite_master WHERE tbl_name = "+io;t.executeSql(e,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+io,[],function(t,e){var n=e.rows.item(0).db_version;d(t,n)}):t.executeSql("ALTER TABLE "+io+" ADD COLUMN db_version INTEGER",[],function(){d(t,1)}):d(t,0)})}function v(t,e){if(b._docCount!==-1)return e(b._docCount);var n=Un("COUNT("+to+".id) AS 'num'",[to,eo],go,eo+".deleted=0");t.executeSql(n,[],function(t,n){b._docCount=n.rows.item(0).num,e(b._docCount)})}var y,b=this,_=null,w=Jn(t),x=[];b._docCount=-1,b._name=t.name;var E=zn({name:b._name,version:uo,description:b._name,size:w,location:t.location,createFromLocation:t.createFromLocation,androidDatabaseImplementation:t.androidDatabaseImplementation});if(E.error)return qn(e)(E.error);var C=E.db;"function"!=typeof C.readTransaction&&(C.readTransaction=C.transaction),p(),b.type=function(){return"websql"},b._id=h(function(t){t(null,_)}),b._info=function(t){C.readTransaction(function(e){v(e,function(n){var r="SELECT MAX(seq) AS seq FROM "+eo;e.executeSql(r,[],function(e,r){var i=r.rows.item(0).seq||0;t(null,{doc_count:n,update_seq:i,sqlite_plugin:C._sqlitePlugin,websql_encoding:y})})})},qn(t))},b._bulkDocs=function(e,n,r){Xn(t,e,n,b,C,ao,r)},b._get=function(t,e,n){function r(){n(s,{doc:i,metadata:o,ctx:a})}var i,o,s,a=e.ctx;if(!a)return C.readTransaction(function(r){b._get(t,Gn.extend({ctx:r},e),n)});var u,c;e.rev?(u=Un(vo,[to,eo],to+".id="+eo+".doc_id",[eo+".doc_id=?",eo+".rev=?"]),c=[t,e.rev]):(u=Un(vo,[to,eo],go,to+".id=?"),c=[t]),a.executeSql(u,c,function(t,n){if(!n.rows.length)return s=R(pr,"missing"),r();var a=n.rows.item(0);return o=sn(a.metadata),a.deleted&&!e.rev?(s=R(pr,"deleted"),r()):(i=Bn(a.data,o.id,a.rev),void r())})},b._allDocs=function(t,e){var n,r=[],i="startkey"in t&&t.startkey,o="endkey"in t&&t.endkey,s="key"in t&&t.key,a="descending"in t&&t.descending,u="limit"in t?t.limit:-1,c="skip"in t?t.skip:0,l=t.inclusive_end!==!1,h=[],f=[];if(s!==!1)f.push(to+".id = ?"),h.push(s);else if(i!==!1||o!==!1){if(i!==!1&&(f.push(to+".id "+(a?"<=":">=")+" ?"),h.push(i)),o!==!1){var d=a?">":"<";l&&(d+="="),f.push(to+".id "+d+" ?"),h.push(o)}s!==!1&&(f.push(to+".id = ?"),h.push(s))}"ok"!==t.deleted&&f.push(eo+".deleted = 0"),C.readTransaction(function(e){v(e,function(i){if(n=i,0!==u){var o=Un(vo,[to,eo],go,f,to+".id "+(a?"DESC":"ASC"));o+=" LIMIT "+u+" OFFSET "+c,e.executeSql(o,h,function(e,n){for(var i=0,o=n.rows.length;i<o;i++){var s=n.rows.item(i),a=sn(s.metadata),u=a.id,c=Bn(s.data,u,s.rev),l=c._rev,h={id:u,key:u,value:{rev:l}};if(t.include_docs&&(h.doc=c,h.doc._rev=l,t.conflicts&&(h.doc._conflicts=A(a)),Wn(h.doc,t,b,e)),s.deleted){if("ok"!==t.deleted)continue;h.value.deleted=!0,h.doc=null}r.push(h)}})}})},qn(e),function(){e(null,{total_rows:n,offset:t.skip,rows:r})})},b._changes=function(t){function e(){var e=to+".json AS metadata, "+to+".max_seq AS maxSeq, "+eo+".json AS winningDoc, "+eo+".rev AS winningRev ",n=to+" JOIN "+eo,u=to+".id="+eo+".doc_id AND "+to+".winningseq="+eo+".seq",c=["maxSeq > ?"],l=[t.since];t.doc_ids&&(c.push(to+".id IN "+Hn(t.doc_ids.length)),l=l.concat(t.doc_ids));var h="maxSeq "+(r?"DESC":"ASC"),f=Un(e,n,u,c,h),d=wt(t);t.view||t.filter||(f+=" LIMIT "+i);var p=t.since||0;C.readTransaction(function(e){e.executeSql(f,l,function(e,n){function r(e){return function(){t.onChange(e)}}for(var u=0,c=n.rows.length;u<c;u++){var l=n.rows.item(u),h=sn(l.metadata);p=l.maxSeq;var f=Bn(l.winningDoc,h.id,l.winningRev),g=t.processChange(f,h,t);g.seq=l.maxSeq;var v=d(g);if("object"==typeof v)return t.complete(v);if(v&&(a++,o&&s.push(g),t.attachments&&t.include_docs?Wn(f,t,b,e,r(g)):r(g)()),a===i)break}})},qn(t.complete),function(){t.continuous||t.complete(null,{results:s,last_seq:p})})}if(t=c(t),t.continuous){var n=b._name+":"+D();return ao.addListener(b._name,n,b,t),ao.notify(b._name),{cancel:function(){ao.removeListener(b._name,n)}}}var r=t.descending;t.since=t.since&&!r?t.since:0;var i="limit"in t?t.limit:-1;0===i&&(i=1);var o;o="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var s=[],a=0;e()},b._close=function(t){t()},b._getAttachment=function(t,e,n){var r,i=e.ctx,o=t.digest,s=t.content_type,a="SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+no+" WHERE digest=?";i.executeSql(a,[o],function(t,i){var o=i.rows.item(0),a=o.escaped?Ln(o.body):Pn(o.body,y);r=e.binary?bt(a,s):Gr(a),n(null,r)})},b._getRevisionTree=function(t,e){C.readTransaction(function(n){var r="SELECT json AS metadata FROM "+to+" WHERE id = ?";n.executeSql(r,[t],function(t,n){if(n.rows.length){
var r=sn(n.rows.item(0).metadata);e(null,r.rev_tree)}else e(R(pr))})})},b._doCompaction=function(t,e,n){return e.length?void C.transaction(function(n){var r="SELECT json AS metadata FROM "+to+" WHERE id = ?";n.executeSql(r,[t],function(n,r){var i=sn(r.rows.item(0).metadata);S(i.rev_tree,function(t,n,r,i,o){var s=n+"-"+r;e.indexOf(s)!==-1&&(o.status="missing")});var o="UPDATE "+to+" SET json = ? WHERE id = ?";n.executeSql(o,[an(i),t])}),Kn(e,t,n)},qn(n),function(){n()}):n()},b._getLocal=function(t,e){C.readTransaction(function(n){var r="SELECT json, rev FROM "+ro+" WHERE id=?";n.executeSql(r,[t],function(n,r){if(r.rows.length){var i=r.rows.item(0),o=Bn(i.json,t,i.rev);e(null,o)}else e(R(pr))})})},b._putLocal=function(t,e,n){function r(t){var r,c;o?(r="UPDATE "+ro+" SET rev=?, json=? WHERE id=? AND rev=?",c=[i,u,s,o]):(r="INSERT INTO "+ro+" (id, rev, json) VALUES (?,?,?)",c=[s,i,u]),t.executeSql(r,c,function(t,r){r.rowsAffected?(a={ok:!0,id:s,rev:i},e.ctx&&n(null,a)):n(R(gr))},function(){return n(R(gr)),!1})}"function"==typeof e&&(n=e,e={}),delete t._revisions;var i,o=t._rev,s=t._id;i=o?t._rev="0-"+(parseInt(o.split("-")[1],10)+1):t._rev="0-1";var a,u=Mn(t);e.ctx?r(e.ctx):C.transaction(r,qn(n),function(){a&&n(null,a)})},b._removeLocal=function(t,e,n){function r(r){var o="DELETE FROM "+ro+" WHERE id=? AND rev=?",s=[t._id,t._rev];r.executeSql(o,s,function(r,o){return o.rowsAffected?(i={ok:!0,id:t._id,rev:"0-0"},void(e.ctx&&n(null,i))):n(R(pr))})}"function"==typeof e&&(n=e,e={});var i;e.ctx?r(e.ctx):C.transaction(r,qn(n),function(){i&&n(null,i)})},b._destroy=function(t,e){ao.removeAllListeners(b._name),C.transaction(function(t){var e=[to,eo,no,io,ro,oo];e.forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},qn(e),function(){ot()&&(delete window.localStorage["_pouch__websqldb_"+b._name],delete window.localStorage[b._name]),e(null,{ok:!0})})}}var Gn=t(7),Qn=i(Gn),Zn=i(t(2)),tr=i(t(6)),er=i(t(8)),nr=t(12),rr=i(t(1)),ir=t(4),or=i(t(14)),sr=t(10),ar=i(sr),ur=i(t(15)),cr=i(t(16)),lr="function"==typeof Promise?Promise:er,hr=Zn("pouchdb:api");tr(C,Error),C.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var fr=new C({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),dr=new C({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),pr=new C({status:404,error:"not_found",reason:"missing"}),gr=new C({status:409,error:"conflict",reason:"Document update conflict"}),vr=new C({status:400,error:"invalid_id",reason:"_id field must contain a string"}),mr=new C({status:412,error:"missing_id",reason:"_id is required for puts"}),yr=new C({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),br=new C({status:412,error:"precondition_failed",reason:"Database not open"}),_r=new C({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),wr=new C({status:500,error:"badarg",reason:"Some query argument is invalid"}),Sr=new C({status:400,error:"invalid_request",reason:"Request was invalid"}),xr=new C({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),Er=new C({status:500,error:"doc_validation",reason:"Bad special document member"}),Ar=new C({status:400,error:"bad_request",reason:"Something wrong with the request"}),Cr=new C({status:400,error:"bad_request",reason:"Document must be a JSON object"}),Rr=new C({status:404,error:"not_found",reason:"Database not found"}),Nr=new C({status:500,error:"indexed_db_went_bad",reason:"unknown"}),Or=new C({status:500,error:"web_sql_went_bad",reason:"unknown"}),Tr=new C({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),kr=new C({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),Ir=new C({status:400,error:"bad_request",reason:"Invalid rev format"}),Pr=new C({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),Fr=new C({status:412,error:"missing_stub"}),Dr=new C({status:413,error:"invalid_url",reason:"Provided URL is invalid"}),$r={UNAUTHORIZED:fr,MISSING_BULK_DOCS:dr,MISSING_DOC:pr,REV_CONFLICT:gr,INVALID_ID:vr,MISSING_ID:mr,RESERVED_ID:yr,NOT_OPEN:br,UNKNOWN_ERROR:_r,BAD_ARG:wr,INVALID_REQUEST:Sr,QUERY_PARSE_ERROR:xr,DOC_VALIDATION:Er,BAD_REQUEST:Ar,NOT_AN_OBJECT:Cr,DB_MISSING:Rr,WSQ_ERROR:Or,LDB_ERROR:Tr,FORBIDDEN:kr,INVALID_REV:Ir,FILE_EXISTS:Pr,MISSING_STUB:Fr,IDB_ERROR:Nr,INVALID_URL:Dr},jr=function(t,e,n){var r=Object.keys($r).filter(function(n){var r=$r[n];return"function"!=typeof r&&r[t]===e}),i=n&&r.filter(function(t){var e=$r[t];return e.message===n})[0]||r[0];return i?$r[i]:null};tr(O,ir.EventEmitter),O.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},O.prototype.doChanges=function(t){var e=this,n=t.complete;if(t=c(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=T,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"===t.since)return void this.db.info().then(function(r){return e.isCancelled?void n(null,{status:"cancelled"}):(t.since=r.update_seq,void e.doChanges(t))},n);if(t.continuous&&"now"!==t.since&&this.db.info().then(function(t){e.startSeq=t.update_seq},function(t){if("idbNull"!==t.id)throw t}),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=w(t.view):t.filter=w(t.filter),"http"!==this.db.type()&&!t.doc_ids))return this.filterChanges(t);"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var r=this.db._changes(t);if(r&&"function"==typeof r.cancel){var i=e.cancel;e.cancel=rr(function(t){r.cancel(),i.apply(this,t)})}},O.prototype.filterChanges=function(t){var e=this,n=t.complete;if("_view"===t.filter){if(!t.view||"string"!=typeof t.view){var r=R(Ar,"`view` filter parameter not found or invalid.");return n(r)}var i=_(t.view);this.db.getView(i[0],i[1],function(r,i){return e.isCancelled?n(null,{status:"cancelled"}):r?n(N(r)):i.map?(t.filter=b(i.map),void e.doChanges(t)):n(R(pr))})}else{var o=_(t.filter);if(!o)return e.doChanges(t);this.db.getFilter(o[0],o[1],function(r,i){return e.isCancelled?n(null,{status:"cancelled"}):r?n(N(r)):(t.filter=y(i),void e.doChanges(t))})}};var Lr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),Mr=$(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),Br=$(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);tr(Z,ir.EventEmitter),Z.prototype.post=f("post",function(t,e,n){return"function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t)?n(R(Cr)):void this.bulkDocs({docs:[t]},e,K(n))}),Z.prototype.put=f("put",rr(function(t){var e,n,r,i,o=t.shift(),s="_id"in o;if("object"!=typeof o||Array.isArray(o))return(i=t.pop())(R(Cr));for(;;)if(e=t.shift(),n=typeof e,"string"!==n||s?"string"!==n||!s||"_rev"in o?"object"===n?r=e:"function"===n&&(i=e):o._rev=e:(o._id=e,s=!0),!t.length)break;return r=r||{},j(o._id),I(o._id)&&"function"==typeof this._putLocal?o._deleted?this._removeLocal(o,i):this._putLocal(o,i):void this.bulkDocs({docs:[o]},r,K(i))})),Z.prototype.putAttachment=f("putAttachment",function(t,e,n,r,i){function o(t){return t._attachments=t._attachments||{},t._attachments[e]={content_type:i,data:r},s.put(t)}var s=this;return"function"==typeof i&&(i=r,r=n,n=null),"undefined"==typeof i&&(i=r,r=n,n=null),s.get(t).then(function(t){if(t._rev!==n)throw R(gr);return o(t)},function(e){if(e.reason===pr.message)return o({_id:t});throw e})}),Z.prototype.removeAttachment=f("removeAttachment",function(t,e,n,r){var i=this;i.get(t,function(t,o){return t?void r(t):o._rev!==n?void r(R(gr)):o._attachments?(delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,void i.put(o,r)):r()})}),Z.prototype.remove=f("remove",function(t,e,n,r){var i;"string"==typeof e?(i={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(i=t,"function"==typeof e?(r=e,n={}):(r=n,n=e)),n=n||{},n.was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev};return o._deleted=!0,I(o._id)&&"function"==typeof this._removeLocal?this._removeLocal(i,r):void this.bulkDocs({docs:[o]},n,K(r))}),Z.prototype.revsDiff=f("revsDiff",function(t,e,n){function r(t,e){a.has(t)||a.set(t,{missing:[]}),a.get(t).missing.push(e)}function i(e,n){var i=t[e].slice(0);S(n,function(t,n,o,s,a){var u=n+"-"+o,c=i.indexOf(u);c!==-1&&(i.splice(c,1),"available"!==a.status&&r(e,u))}),i.forEach(function(t){r(e,t)})}"function"==typeof e&&(n=e,e={});var o=Object.keys(t);if(!o.length)return n(null,{});var s=0,a=new nr.Map;o.map(function(e){this._getRevisionTree(e,function(r,u){if(r&&404===r.status&&"missing"===r.message)a.set(e,{missing:t[e]});else{if(r)return n(r);i(e,u)}if(++s===o.length){var c={};return a.forEach(function(t,e){c[e]=t}),n(null,c)}})},this)}),Z.prototype.bulkGet=f("bulkGet",function(t,e){k(this,t,e)}),Z.prototype.compactDocument=f("compactDocument",function(t,e,n){var r=this;this._getRevisionTree(t,function(i,o){if(i)return n(i);var s=V(o),a=[],u=[];Object.keys(s).forEach(function(t){s[t]>e&&a.push(t)}),S(o,function(t,e,n,r,i){var o=e+"-"+n;"available"===i.status&&a.indexOf(o)!==-1&&u.push(o)}),r._doCompaction(t,u,n)})}),Z.prototype.compact=f("compact",function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&X(n)}),Z.prototype._compact=function(t,e){function n(t){s.push(i.compactDocument(t.id,0))}function r(t){var n=t.last_seq;lr.all(s).then(function(){return d(i,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<n)&&(t.last_seq=n,t)})}).then(function(){e(null,{ok:!0})})["catch"](e)}var i=this,o={return_docs:!1,last_seq:t.last_seq||0},s=[];i.changes(o).on("change",n).on("complete",r).on("error",e)},Z.prototype.get=f("get",function(t,e,n){function r(){var r=[],s=i.length;return s?void i.forEach(function(i){o.get(t,{rev:i,revs:e.revs,attachments:e.attachments},function(t,e){t?r.push({missing:i}):r.push({ok:e}),s--,s||n(null,r)})}):n(null,r)}if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(R(vr));if(I(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var i=[],o=this;if(!e.open_revs)return this._get(t,e,function(t,r){if(t)return n(t);var i=r.doc,s=r.metadata,a=r.ctx;if(e.conflicts){var u=A(s);u.length&&(i._conflicts=u)}if(m(s,i._rev)&&(i._deleted=!0),e.revs||e.revs_info){var c=P(s.rev_tree),l=U(c,function(t){return t.ids.map(function(t){return t.id}).indexOf(i._rev.split("-")[1])!==-1}),h=l.ids.map(function(t){return t.id}).indexOf(i._rev.split("-")[1])+1,f=l.ids.length-h;if(l.ids.splice(h,f),l.ids.reverse(),e.revs&&(i._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(t){return t.id})}),e.revs_info){var d=l.pos+l.ids.length;i._revs_info=l.ids.map(function(t){return d--,{rev:d+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&i._attachments){var p=i._attachments,g=Object.keys(p).length;if(0===g)return n(null,i);Object.keys(p).forEach(function(t){this._getAttachment(p[t],{binary:e.binary,ctx:a},function(e,r){var o=i._attachments[t];o.data=r,delete o.stub,delete o.length,--g||n(null,i)})},o)}else{if(i._attachments)for(var v in i._attachments)i._attachments.hasOwnProperty(v)&&(i._attachments[v].stub=!0);n(null,i)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){return t?n(t):(i=E(e).map(function(t){return t.rev}),void r())});else{if(!Array.isArray(e.open_revs))return n(R(_r,"function_clause"));i=e.open_revs;for(var s=0;s<i.length;s++){var a=i[s];if("string"!=typeof a||!/^\d+-/.test(a))return n(R(Ir))}r()}}),Z.prototype.getView=f("getView",function(t,e,n){Q(this,t,"views",e,n)}),Z.prototype.getFilter=f("getFilter",function(t,e,n){Q(this,t,"filters",e,n)}),Z.prototype.getAttachment=f("getAttachment",function(t,e,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(t,n,function(t,o){return t?r(t):o.doc._attachments&&o.doc._attachments[e]?(n.ctx=o.ctx,n.binary=!0,i._getAttachment(o.doc._attachments[e],n,r),void 0):r(R(pr))})}),Z.prototype.allDocs=f("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip="undefined"!=typeof t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(R(xr,"Query parameter `"+n+"` is not compatible with multi-get"));if("http"!==this.type())return z(this,t,e)}return this._allDocs(t,e)}),Z.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new O(this,t,e)},Z.prototype.close=f("close",function(t){return this._closed=!0,this._close(t)}),Z.prototype.info=f("info",function(t){var e=this;this._info(function(n,r){return n?t(n):(r.db_name=r.db_name||e._db_name,r.auto_compaction=!(!e.auto_compaction||"http"===e.type()),r.adapter=e.type(),void t(null,r))})}),Z.prototype.id=f("id",function(t){return this._id(t)}),Z.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},Z.prototype.bulkDocs=f("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(R(dr));for(var r=0;r<t.docs.length;++r)if("object"!=typeof t.docs[r]||Array.isArray(t.docs[r]))return n(R(Cr));var i;return t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(t){i=i||W(t)})}),i?n(R(Ar,i)):("new_edits"in e||("new_edits"in t?e.new_edits=t.new_edits:e.new_edits=!0),e.new_edits||"http"===this.type()||t.docs.sort(J),q(t.docs),this._bulkDocs(t,e,function(t,r){return t?n(t):(e.new_edits||(r=r.filter(function(t){return t.error})),void n(null,r))}))}),Z.prototype.registerDependentDatabase=f("registerDependentDatabase",function(t,e){function n(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}var r=new this.constructor(t,this.__opts);d(this,"_local/_pouch_dependentDbs",n).then(function(){e(null,{db:r})})["catch"](e)}),Z.prototype.destroy=f("destroy",function(t,e){function n(){r._destroy(t,function(t,n){return t?e(t):(r._destroyed=!0,r.emit("destroyed"),void e(null,n||{ok:!0}))})}"function"==typeof t&&(e=t,t={});var r=this,i=!("use_prefix"in r)||r.use_prefix;return"http"===r.type()?n():void r.get("_local/_pouch_dependentDbs",function(t,o){if(t)return 404!==t.status?e(t):n();var s=o.dependentDbs,a=r.constructor,u=Object.keys(s).map(function(t){var e=i?t.replace(new RegExp("^"+a.prefix),""):t;return new a(e,r.__opts).destroy()});lr.all(u).then(n,e)})}),tt.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},tt.prototype.fail=function(t){this.failed=t,this.execute()},tt.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},tt.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},tr(rt,Z),rt.debug=Zn;var Hr;if(it())Hr=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Hr=!!localStorage.getItem("_pouch_check_localstorage")}catch(Ur){Hr=!1}rt.adapters={},rt.preferredAdapters=[],rt.prefix="_pouch_";var Kr=new ir.EventEmitter;st(rt),rt.parseAdapter=function(t,e){var n,r,i=t.match(/([a-z\-]*):\/\/(.*)/);if(i){if(t=/http(s?)/.test(i[1])?i[1]+"://"+i[2]:i[2],n=i[1],!rt.adapters[n].valid())throw"Invalid adapter";return{name:t,adapter:i[1]}}var o="idb"in rt.adapters&&"websql"in rt.adapters&&ot()&&localStorage["_pouch__websqldb_"+rt.prefix+t];if(e.adapter)r=e.adapter;else if("undefined"!=typeof e&&e.db)r="leveldb";else for(var s=0;s<rt.preferredAdapters.length;++s)if(r=rt.preferredAdapters[s],r in rt.adapters){if(o&&"idb"===r){console.log('PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}n=rt.adapters[r];var a=!(n&&"use_prefix"in n)||n.use_prefix;return{name:a?rt.prefix+t:t,adapter:r}},rt.adapter=function(t,e,n){e.valid()&&(rt.adapters[t]=e,n&&rt.preferredAdapters.push(t))},rt.plugin=function(t){return Object.keys(t).forEach(function(e){rt.prototype[e]=t[e]}),rt},rt.defaults=function(t){function e(n,r,i){return this instanceof e?("function"!=typeof r&&"undefined"!=typeof r||(i=r,r={}),n&&"object"==typeof n&&(r=n,n=void 0),r=Gn.extend({},t,r),void rt.call(this,n,r,i)):new e(n,r,i)}return tr(e,rt),st(e),e.preferredAdapters=rt.preferredAdapters.slice(),Object.keys(rt).forEach(function(t){t in e||(e[t]=rt[t])}),e};var qr=ft(),Jr=function(){},Vr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],zr="queryKey",Xr=/(?:^|&)([^&=]*)=?([^&]*)/g,Wr=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Yr=function(t){return atob(t)},Gr=function(t){return btoa(t)},Qr=Qn.extend,Zr={ajax:vt,parseUri:mt,uuid:D,Promise:lr,atob:Yr,btoa:Gr,binaryStringToBlobOrBuffer:bt,clone:c,extend:Qr,createError:R},ti=ar.collate,ei=1,ni="pouchdb",ri=5,ii=0;Et.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Et.prototype.updateTarget=function(t,e){return xt(this.target,this.id,t,e,this.returnValue)},Et.prototype.updateSource=function(t,e){var n=this;return this.readOnlySource?lr.resolve(!0):xt(this.src,this.id,t,e,this.returnValue)["catch"](function(t){if(Nt(t))return n.readOnlySource=!0,!0;throw t})};var oi={undefined:function(t,e){return 0===ti(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return At(e,t).last_seq}};Et.prototype.getCheckpoint=function(){var t=this;return t.target.get(t.id).then(function(e){return t.readOnlySource?lr.resolve(e.last_seq):t.src.get(t.id).then(function(t){if(e.version!==t.version)return ii;var n;return n=e.version?e.version.toString():"undefined",n in oi?oi[n](e,t):ii},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:ii}).then(function(){return ii},function(n){return Nt(n)?(t.readOnlySource=!0,e.last_seq):ii});throw n})})["catch"](function(t){if(404!==t.status)throw t;return ii})};var si=0,ai=r.setImmediate||r.setTimeout,ui=32768,ci=h(function(t,e){function n(){var r=a*o,i=r+o;if(a++,a<s)c(u,t,r,i),ai(n);else{c(u,t,r,i);var l=u.end(!0),h=It(l);e(null,h),u.destroy()}}var r="string"==typeof t,i=r?t.length:t.byteLength,o=Math.min(ui,i),s=Math.ceil(i/o),a=0,u=r?new ur:new ur.ArrayBuffer,c=r?Ft:Pt;n()});tr(Ht,ir.EventEmitter),Ht.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Ht.prototype.ready=function(t,e){function n(){i.cancel()}function r(){t.removeListener("destroyed",n),e.removeListener("destroyed",n)}var i=this;i._readyCalled||(i._readyCalled=!0,t.once("destroyed",n),e.once("destroyed",n),i.once("complete",r))};var li={replicate:Kt,toPouch:Ut},hi=li.replicate;tr(Jt,ir.EventEmitter),Jt.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())};var fi=25,di=50,pi={},gi=1800,vi=Zn("pouchdb:http");ie.valid=function(){return!0},oe.prototype.add=function(t){return this.promise=this.promise["catch"](function(){}).then(function(){return t()}),this.promise},oe.prototype.finish=function(){return this.promise};var mi,yi=function(t,e){return e&&t.then(function(t){n.nextTick(function(){e(null,t)})},function(t){n.nextTick(function(){e(t)})}),t},bi=function(t){return rr(function(e){var n=e.pop(),r=t.apply(this,e);return"function"==typeof n&&yi(r,n),r})},_i=function(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})},wi=function(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}},Si=function(t){for(var e={},n=0,r=t.length;n<r;n++)e["$"+t[n]]=!0;var i=Object.keys(e),o=new Array(i.length);for(n=0,r=i.length;n<r;n++)o[n]=i[n].substring(1);return o},xi={uniq:Si,sequentialize:wi,fin:_i,callbackify:bi,promisedCallback:yi},Ei=ar.collate,Ai=ar.toIndexableString,Ci=ar.normalizeKey,Ri=ar.parseIndexableString;mi="undefined"!=typeof console&&"function"==typeof console.log?Function.prototype.bind.call(console.log,console):function(){};var Ni=xi.callbackify,Oi=xi.sequentialize,Ti=xi.uniq,ki=xi.fin,Ii=xi.promisedCallback,Pi={},Fi=new oe,Di=50,$i={_sum:function(t,e){return be(e)},_count:function(t,e){return e.length},_stats:function(t,e){function n(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];e+=i*i}return e}return{sum:be(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:n(e)}}},ji=Ni(function(){var t=this;return t._ddocCache&&delete t._ddocCache,"http"===t.type()?je(t):"function"==typeof t._viewCleanup?Re(t):Le(t)}),Li=function(t,e,n){"function"==typeof e&&(n=e,e={}),e=e?Se(e):{},"function"==typeof t&&(t={map:t});var r=this,i=lr.resolve().then(function(){return Me(r,t,e)});return Ii(i,n),i};tr(Be,Error),tr(He,Error);var Mi={query:Li,viewCleanup:ji},Bi=5,Hi="document-store",Ui="by-sequence",Ki="attach-store",qi="attach-seq-store",Ji="meta-store",Vi="local-store",zi="detect-blob-support",Xi={running:!1,queue:[]};tr(An,ir.EventEmitter),An.prototype.addListener=function(t,e,n,r){function i(){function t(){a=!1}if(s._listeners[e]){if(a)return void(a="waiting");a=!0;var u=o(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(u).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===a&&setTimeout(function(){i()},0),a=!1}).on("error",t)}}if(!this._listeners[e]){var s=this,a=!1;this._listeners[e]=i,this.on(t,i)}},An.prototype.removeListener=function(t,e){e in this._listeners&&ir.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e])},An.prototype.notifyLocalWindows=function(t){it()?chrome.storage.local.set({dbName:t}):ot()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},An.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var Wi,Yi=new nr.Map,Gi=new An,Qi=new nr.Map;Cn.valid=function(){var t="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e=!t&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange,n=window.cordova===!1;return!(e||!n||void 0===window.require)||e};var Zi=7,to=Fn("document-store"),eo=Fn("by-sequence"),no=Fn("attach-store"),ro=Fn("local-store"),io=Fn("metadata-store"),oo=Fn("attach-seq-store"),so=new nr.Map,ao=new An,uo=1,co="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+eo+" (seq, deleted)",lo="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+eo+" (doc_id, rev)",ho="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+to+" (winningseq)",fo="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+oo+" (seq)",po="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+oo+" (digest, seq)",go=eo+".seq = "+to+".winningseq",vo=eo+".seq AS seq, "+eo+".deleted AS deleted, "+eo+".json AS data, "+eo+".rev AS rev, "+to+".json AS metadata";Yn.use_prefix=!("undefined"!=typeof n&&!n.browser),Yn.valid=$n;var mo={idb:Cn,websql:Yn};rt.ajax=vt,rt.utils=Zr,rt.Errors=$r,rt.replicate=li.replicate,rt.sync=qt,rt.version="5.3.1",rt.adapter("http",ie),rt.adapter("https",ie),rt.plugin(Mi),Object.keys(mo).forEach(function(t){rt.adapter(t,mo[t],!0)}),e.exports=rt}).call(this,t(13),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1,10:10,12:12,13:13,14:14,15:15,16:16,2:2,4:4,6:6,7:7,8:8}]},{},[17])(17)}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.cryptoPouch=t()}}(function(){var define,module,exports;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(t,e){return d.isUndefined(e)?""+e:!d.isNumber(e)||!isNaN(e)&&isFinite(e)?d.isFunction(e)||d.isRegExp(e)?e.toString():e:e.toString()}function i(t,e){return d.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,r),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,r),128)}function s(t,e,n,r,i){throw new v.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",v.ok)}function u(t,e){if(t===e)return!0;if(d.isBuffer(t)&&d.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return d.isDate(t)&&d.isDate(e)?t.getTime()===e.getTime():d.isRegExp(t)&&d.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:d.isObject(t)||d.isObject(e)?l(t,e):t==e}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,e){if(d.isNullOrUndefined(t)||d.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(c(t))return!!c(e)&&(t=p.call(t),e=p.call(e),u(t,e));try{var n,r,i=m(t),o=m(e)}catch(s){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!u(t[n],e[n]))return!1;return!0}function h(t,e){return!(!t||!e)&&("[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e||e.call({},t)===!0)}function f(t,e,n,r){var i;d.isString(n)&&(r=n,n=null);try{e()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&s(i,n,"Missing expected exception"+r),!t&&h(i,n)&&s(i,n,"Got unwanted exception"+r),t&&i&&n&&!h(i,n)||!t&&i)throw i}var d=t("util/"),p=Array.prototype.slice,g=Object.prototype.hasOwnProperty,v=e.exports=a;v.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=e.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},d.inherits(v.AssertionError,Error),v.fail=s,v.ok=a,v.equal=function(t,e,n){t!=e&&s(t,e,n,"==",v.equal)},v.notEqual=function(t,e,n){t==e&&s(t,e,n,"!=",v.notEqual)},v.deepEqual=function(t,e,n){u(t,e)||s(t,e,n,"deepEqual",v.deepEqual)},v.notDeepEqual=function(t,e,n){u(t,e)&&s(t,e,n,"notDeepEqual",v.notDeepEqual)},v.strictEqual=function(t,e,n){t!==e&&s(t,e,n,"===",v.strictEqual)},v.notStrictEqual=function(t,e,n){t===e&&s(t,e,n,"!==",v.notStrictEqual)},v["throws"]=function(t,e,n){f.apply(this,[!0].concat(p.call(arguments)))},v.doesNotThrow=function(t,e){f.apply(this,[!1].concat(p.call(arguments)))},v.ifError=function(t){if(t)throw t};var m=Object.keys||function(t){var e=[];for(var n in t)g.call(t,n)&&e.push(n);return e}},{"util/":166}],2:[function(t,e,n){},{}],3:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)i=r.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&$(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(i>j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");var s;r.TYPED_ARRAY_SUPPORT?s=r._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)s._set(t);else if(C(t))if(r.isBuffer(t))for(a=0;a<i;a++)s[a]=t.readUInt8(a);else for(a=0;a<i;a++)s[a]=(t[a]%256+256)%256;else if("string"===o)s.write(t,0,e);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT&&!n)for(a=0;a<i;a++)s[a]=0;return i>0&&i<=r.poolSize&&(s.parent=L),s}function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var o=new r(t,e,n);return delete o.parent,o}function o(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[n+s]=a}return s}function s(t,e,n,r){var i=I(N(e,t.length-n),t,n,r);return i}function a(t,e,n,r){var i=I(O(e),t,n,r);return i}function u(t,e,n,r){return a(t,e,n,r)}function c(t,e,n,r){var i=I(k(e),t,n,r);return i}function l(t,e,n,r){var i=I(T(e,t.length-n),t,n,r,2);return i}function h(t,e,n){return 0===e&&n===t.length?F.fromByteArray(t):F.fromByteArray(t.slice(e,n))}function f(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=P(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+P(i)}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(127&t[i]);return r}function p(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function g(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;o++)i+=R(t[o]);return i}function v(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function m(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,n,i,o,s){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||e<s)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function b(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function _(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function w(t,e,n,r,i,o){if(e>i||e<o)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function S(t,e,n,r,i){return i||w(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),D.write(t,e,n,r,23,4),n+4}function x(t,e,n,r,i){return i||w(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),D.write(t,e,n,r,52,8),n+8}function E(t){if(t=A(t).replace(B,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return $(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var n,r=t.length,i=null;e=e||1/0;for(var o=[],s=0;s<r;s++){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<2097152))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128);
}}return o}function O(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function T(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function k(t){return F.toByteArray(E(t))}function I(t,e,n,r,i){i&&(r-=r%i);for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function P(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var F=t("base64-js"),D=t("ieee754"),$=t("is-array");n.Buffer=r,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var j=1073741823,L={};r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var n=t.length,i=e.length,o=0,s=Math.min(n,i);o<s&&t[o]===e[o];o++);return o!==s&&(n=t[o],i=e[o]),n<i?-1:i<n?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!$(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(i,o),o+=s.length}return i},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=N(t).length;break;case"base64":n=k(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,t||(t="utf8"),e<0&&(e=0),n>this.length&&(n=this.length),n<=e)return"";for(;;)switch(t){case"hex":return g(this,e,n);case"utf8":case"utf-8":return f(this,e,n);case"ascii":return d(this,e,n);case"binary":return p(this,e,n);case"base64":return h(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return r.compare(this,t)},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}if(e=Number(e)||0,n<0||e<0||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var h=this.length-e;n?(n=Number(n),n>h&&(n=h)):n=h,r=String(r||"utf8").toLowerCase();var f;switch(r){case"hex":f=o(this,t,e,n);break;case"utf8":case"utf-8":f=s(this,t,e,n);break;case"ascii":f=a(this,t,e,n);break;case"binary":f=u(this,t,e,n);break;case"base64":f=c(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":f=l(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return f},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var i;if(r.TYPED_ARRAY_SUPPORT)i=r._augment(this.subarray(t,e));else{var o=e-t;i=new r(o,(void 0),(!0));for(var s=0;s<o;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},r.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},r.prototype.readUInt8=function(t,e){return e||m(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||m(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||m(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},r.prototype.readInt8=function(t,e){return e||m(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},r.prototype.readInt16LE=function(t,e){e||m(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||m(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||y(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i>>>0&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||y(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):_(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):_(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||y(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,s=t<0?1:0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||y(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,s=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):_(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):_(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return S(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return S(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return x(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return x(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){var o=this;if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===o.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=o.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var s=i-n;if(s<1e3||!r.TYPED_ARRAY_SUPPORT)for(var a=0;a<s;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+s),e);return s},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),n<e)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;r<n;r++)this[r]=t;else{var i=N(t.toString()),o=i.length;for(r=e;r<n;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var M=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=M.get,t.set=M.set,t.write=M.write,t.toString=M.toString,t.toLocaleString=M.toString,t.toJSON=M.toJSON,t.equals=M.equals,t.compare=M.compare,t.copy=M.copy,t.slice=M.slice,t.readUIntLE=M.readUIntLE,t.readUIntBE=M.readUIntBE,t.readUInt8=M.readUInt8,t.readUInt16LE=M.readUInt16LE,t.readUInt16BE=M.readUInt16BE,t.readUInt32LE=M.readUInt32LE,t.readUInt32BE=M.readUInt32BE,t.readIntLE=M.readIntLE,t.readIntBE=M.readIntBE,t.readInt8=M.readInt8,t.readInt16LE=M.readInt16LE,t.readInt16BE=M.readInt16BE,t.readInt32LE=M.readInt32LE,t.readInt32BE=M.readInt32BE,t.readFloatLE=M.readFloatLE,t.readFloatBE=M.readFloatBE,t.readDoubleLE=M.readDoubleLE,t.readDoubleBE=M.readDoubleBE,t.writeUInt8=M.writeUInt8,t.writeUIntLE=M.writeUIntLE,t.writeUIntBE=M.writeUIntBE,t.writeUInt16LE=M.writeUInt16LE,t.writeUInt16BE=M.writeUInt16BE,t.writeUInt32LE=M.writeUInt32LE,t.writeUInt32BE=M.writeUInt32BE,t.writeIntLE=M.writeIntLE,t.writeIntBE=M.writeIntBE,t.writeInt8=M.writeInt8,t.writeInt16LE=M.writeInt16LE,t.writeInt16BE=M.writeInt16BE,t.writeInt32LE=M.writeInt32LE,t.writeInt32BE=M.writeInt32BE,t.writeFloatLE=M.writeFloatLE,t.writeFloatBE=M.writeFloatBE,t.writeDoubleLE=M.writeDoubleLE,t.writeDoubleBE=M.writeDoubleBE,t.fill=M.fill,t.inspect=M.inspect,t.toArrayBuffer=M.toArrayBuffer,t};var B=/[^+\/0-9A-z\-]/g},{"base64-js":4,ieee754:5,"is-array":6}],4:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){function e(t){var e=t.charCodeAt(0);return e===s||e===h?62:e===a||e===f?63:e<u?-1:e<u+10?e-u+26+26:e<l+26?e-l:e<c+26?e-c+26:void 0}function n(t){function n(t){c[h++]=t}var r,i,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var h=0;for(r=0,i=0;r<s;r+=4,i+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;i<s;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),h="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],5:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?f/u:f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*g}},{}],6:[function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],7:[function(t,e,n){(function(n){function r(t){u.call(this),this._hash=t,this.buffers=[]}function i(t){u.call(this),this._hash=t}var o=t("sha.js"),s=t("./md5"),a=t("ripemd160"),u=t("stream").Transform,c=t("util").inherits;e.exports=function(t){return"md5"===t?new r(s):"rmd160"===t?new r(a):new i(o(t))},c(r,u),r.prototype._transform=function(t,e,n){this.buffers.push(t),n()},r.prototype._flush=function(t){var e=n.concat(this.buffers),r=this._hash(e);this.buffers=null,this.push(r),t()},r.prototype.update=function(t,e){return this.write(t,e),this},r.prototype.digest=function(t){this.end();for(var e,r=new n("");e=this.read();)r=n.concat([r,e]);return t&&(r=r.toString(t)),r},c(i,u),i.prototype._transform=function(t,e,n){this._hash.update(t),n()},i.prototype._flush=function(t){this.push(this._hash.digest()),this._hash=null,t()},i.prototype.update=function(t,e){return this.write(t,e),this},i.prototype.digest=function(t){this.end();for(var e,r=new n("");e=this.read();)r=n.concat([r,e]);return t&&(r=r.toString(t)),r}}).call(this,t("buffer").Buffer)},{"./md5":11,buffer:3,ripemd160:137,"sha.js":139,stream:163,util:166}],8:[function(t,e,n){(function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);o.call(this),this._opad=c,this._alg=t;var s="sha512"===t||"sha384"===t?128:64;e=this._key=n.isBuffer(e)?e:new n(e),e.length>s?e=i(t).update(e).digest():e.length<s&&(e=n.concat([e,a],s));for(var u=this._ipad=new n(s),c=this._opad=new n(s),l=0;l<s;l++)u[l]=54^e[l],c[l]=92^e[l];this._hash=i(t).update(u)}var i=t("./create-hash"),o=t("stream").Transform,s=t("util").inherits,a=new n(128);a.fill(0),e.exports=r,s(r,o),r.prototype.update=function(t,e){return this.write(t,e),this},r.prototype._transform=function(t,e,n){this._hash.update(t),n()},r.prototype._flush=function(t){var e=this._hash.digest();this.push(i(this._alg).update(this._opad).update(e).digest()),t()},r.prototype.digest=function(t){this.end();for(var e,r=new n("");e=this.read();)r=n.concat([r,e]);return t&&(r=r.toString(t)),r}}).call(this,t("buffer").Buffer)},{"./create-hash":7,buffer:3,stream:163,util:166}],9:[function(t,e,n){(function(t){function n(e,n){if(e.length%o!==0){var r=e.length+(o-e.length%o);e=t.concat([e,s],r)}for(var i=[],a=n?e.readInt32BE:e.readInt32LE,u=0;u<e.length;u+=o)i.push(a.call(e,u));return i}function r(e,n,r){for(var i=new t(n),o=r?i.writeInt32BE:i.writeInt32LE,s=0;s<e.length;s++)o.call(i,e[s],4*s,!0);return i}function i(e,i,o,s){t.isBuffer(e)||(e=new t(e));var u=i(n(e,s),e.length*a);return r(u,o,s)}var o=4,s=new t(o);s.fill(0);var a=8;e.exports={hash:i}}).call(this,t("buffer").Buffer)},{buffer:3}],10:[function(t,e,n){function r(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function i(t,e){for(var n in t)e(t[n],n)}var o=n.rng=t("./rng"),s=n.prng=t("./prng");n.createHash=n.Hash=t("./create-hash"),n.createHmac=n.Hmac=t("./create-hmac"),n.randomBytes=function(t,e){if(!e||!e.call)return o(t);try{e.call(this,void 0,o(t))}catch(n){e(n)}},n.pseudoRandomBytes=function(t,e){if(!e||!e.call)return s(t);try{e.call(this,void 0,s(t))}catch(n){e(n)}};var a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Object.keys(t("browserify-sign/algos")));n.getHashes=function(){return a};var u=t("./pbkdf2")(n);n.pbkdf2=u.pbkdf2,n.pbkdf2Sync=u.pbkdf2Sync,t("browserify-aes/inject")(n,e.exports),t("browserify-sign/inject")(e.exports,n),t("diffie-hellman/inject")(n,e.exports),t("create-ecdh/inject")(e.exports,n),t("public-encrypt/inject")(e.exports,n),i(["createCredentials"],function(t){n[t]=function(){r("sorry,",t,"is not implemented yet")}})},{"./create-hash":7,"./create-hmac":8,"./pbkdf2":145,"./prng":146,"./rng":147,"browserify-aes/inject":19,"browserify-sign/algos":30,"browserify-sign/inject":31,"create-ecdh/inject":78,"diffie-hellman/inject":102,"public-encrypt/inject":109}],11:[function(t,e,n){function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,i=-1732584194,l=271733878,h=0;h<t.length;h+=16){var f=n,d=r,p=i,g=l;n=o(n,r,i,l,t[h+0],7,-680876936),l=o(l,n,r,i,t[h+1],12,-389564586),i=o(i,l,n,r,t[h+2],17,606105819),r=o(r,i,l,n,t[h+3],22,-1044525330),n=o(n,r,i,l,t[h+4],7,-176418897),l=o(l,n,r,i,t[h+5],12,1200080426),i=o(i,l,n,r,t[h+6],17,-1473231341),r=o(r,i,l,n,t[h+7],22,-45705983),n=o(n,r,i,l,t[h+8],7,1770035416),l=o(l,n,r,i,t[h+9],12,-1958414417),i=o(i,l,n,r,t[h+10],17,-42063),r=o(r,i,l,n,t[h+11],22,-1990404162),n=o(n,r,i,l,t[h+12],7,1804603682),l=o(l,n,r,i,t[h+13],12,-40341101),i=o(i,l,n,r,t[h+14],17,-1502002290),r=o(r,i,l,n,t[h+15],22,1236535329),n=s(n,r,i,l,t[h+1],5,-165796510),l=s(l,n,r,i,t[h+6],9,-1069501632),i=s(i,l,n,r,t[h+11],14,643717713),r=s(r,i,l,n,t[h+0],20,-373897302),n=s(n,r,i,l,t[h+5],5,-701558691),l=s(l,n,r,i,t[h+10],9,38016083),i=s(i,l,n,r,t[h+15],14,-660478335),r=s(r,i,l,n,t[h+4],20,-405537848),n=s(n,r,i,l,t[h+9],5,568446438),l=s(l,n,r,i,t[h+14],9,-1019803690),i=s(i,l,n,r,t[h+3],14,-187363961),r=s(r,i,l,n,t[h+8],20,1163531501),n=s(n,r,i,l,t[h+13],5,-1444681467),l=s(l,n,r,i,t[h+2],9,-51403784),i=s(i,l,n,r,t[h+7],14,1735328473),r=s(r,i,l,n,t[h+12],20,-1926607734),n=a(n,r,i,l,t[h+5],4,-378558),l=a(l,n,r,i,t[h+8],11,-2022574463),i=a(i,l,n,r,t[h+11],16,1839030562),r=a(r,i,l,n,t[h+14],23,-35309556),n=a(n,r,i,l,t[h+1],4,-1530992060),l=a(l,n,r,i,t[h+4],11,1272893353),i=a(i,l,n,r,t[h+7],16,-155497632),r=a(r,i,l,n,t[h+10],23,-1094730640),n=a(n,r,i,l,t[h+13],4,681279174),l=a(l,n,r,i,t[h+0],11,-358537222),i=a(i,l,n,r,t[h+3],16,-722521979),r=a(r,i,l,n,t[h+6],23,76029189),n=a(n,r,i,l,t[h+9],4,-640364487),l=a(l,n,r,i,t[h+12],11,-421815835),i=a(i,l,n,r,t[h+15],16,530742520),r=a(r,i,l,n,t[h+2],23,-995338651),n=u(n,r,i,l,t[h+0],6,-198630844),l=u(l,n,r,i,t[h+7],10,1126891415),i=u(i,l,n,r,t[h+14],15,-1416354905),r=u(r,i,l,n,t[h+5],21,-57434055),n=u(n,r,i,l,t[h+12],6,1700485571),l=u(l,n,r,i,t[h+3],10,-1894986606),i=u(i,l,n,r,t[h+10],15,-1051523),r=u(r,i,l,n,t[h+1],21,-2054922799),n=u(n,r,i,l,t[h+8],6,1873313359),l=u(l,n,r,i,t[h+15],10,-30611744),i=u(i,l,n,r,t[h+6],15,-1560198380),r=u(r,i,l,n,t[h+13],21,1309151649),n=u(n,r,i,l,t[h+4],6,-145523070),l=u(l,n,r,i,t[h+11],10,-1120210379),i=u(i,l,n,r,t[h+2],15,718787259),r=u(r,i,l,n,t[h+9],21,-343485551),n=c(n,f),r=c(r,d),i=c(i,p),l=c(l,g)}return Array(n,r,i,l)}function i(t,e,n,r,i,o){return c(l(c(c(e,t),c(r,o)),i),n)}function o(t,e,n,r,o,s,a){return i(e&n|~e&r,t,e,o,s,a)}function s(t,e,n,r,o,s,a){return i(e&r|n&~r,t,e,o,s,a)}function a(t,e,n,r,o,s,a){return i(e^n^r,t,e,o,s,a)}function u(t,e,n,r,o,s,a){return i(n^(e|~r),t,e,o,s,a)}function c(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function l(t,e){return t<<e|t>>>32-e}var h=t("./helpers");e.exports=function(t){return h.hash(t,r,16)}},{"./helpers":9}],12:[function(t,e,n){(function(t){e.exports=function(e,n,r,i){r/=8,i=i||0;for(var o,s,a,u=0,c=0,l=new t(r),h=new t(i),f=0;;){if(o=e.createHash("md5"),f++>0&&o.update(s),o.update(n),s=o.digest(),a=0,r>0)for(;;){if(0===r)break;if(a===s.length)break;l[u++]=s[a],r--,a++}if(i>0&&a!==s.length)for(;;){if(0===i)break;if(a===s.length)break;h[c++]=s[a],i--,a++}if(0===r&&0===i)break}for(a=0;a<s.length;a++)s[a]=0;return{key:l,iv:h}}}).call(this,t("buffer").Buffer)},{buffer:3}],13:[function(t,e,n){(function(t){function e(t){var e,n;return e=t>a||t<0?(n=Math.abs(t)%a,t<0?a-n:n):t}function r(t){var e,n,r;for(e=n=0,r=t.length;0<=r?n<r:n>r;e=0<=r?++n:--n)t[e]=0;return!1}function i(){var t;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var e,n;for(n=[],t=e=0;e<4;t=++e)n.push([]);return n}(),this.INV_SUB_MIX=function(){var e,n;for(n=[],t=e=0;e<4;t=++e)n.push([]);return n}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(t){for(var e=t.length/4,n=new Array(e),r=-1;++r<e;)n[r]=t.readUInt32BE(4*r);return n}function s(t){this._key=o(t),this._doReset()}var a=Math.pow(2,32);i.prototype.init=function(){var t,e,n,r,i,o,s,a,u,c;for(t=function(){var t,n;for(n=[],e=t=0;t<256;e=++t)e<128?n.push(e<<1):n.push(e<<1^283);return n}(),i=0,u=0,e=c=0;c<256;e=++c)n=u^u<<1^u<<2^u<<3^u<<4,n=n>>>8^255&n^99,this.SBOX[i]=n,this.INV_SBOX[n]=i,o=t[i],s=t[o],a=t[s],r=257*t[n]^16843008*n,this.SUB_MIX[0][i]=r<<24|r>>>8,this.SUB_MIX[1][i]=r<<16|r>>>16,this.SUB_MIX[2][i]=r<<8|r>>>24,this.SUB_MIX[3][i]=r,r=16843009*a^65537*s^257*o^16843008*i,this.INV_SUB_MIX[0][n]=r<<24|r>>>8,this.INV_SUB_MIX[1][n]=r<<16|r>>>16,this.INV_SUB_MIX[2][n]=r<<8|r>>>24,this.INV_SUB_MIX[3][n]=r,0===i?i=u=1:(i=o^t[t[t[a^o]]],u^=t[t[u]]);return!0};var u=new i;s.blockSize=16,s.prototype.blockSize=s.blockSize,s.keySize=32,s.prototype.keySize=s.keySize,s.prototype._doReset=function(){var t,e,n,r,i,o,s,a;for(n=this._key,e=n.length,this._nRounds=e+6,i=4*(this._nRounds+1),this._keySchedule=[],r=s=0;0<=i?s<i:s>i;r=0<=i?++s:--s)this._keySchedule[r]=r<e?n[r]:(o=this._keySchedule[r-1],r%e===0?(o=o<<8|o>>>24,o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o],o^=u.RCON[r/e|0]<<24):e>6&&r%e===4?o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o]:void 0,this._keySchedule[r-e]^o);for(this._invKeySchedule=[],t=a=0;0<=i?a<i:a>i;t=0<=i?++a:--a)r=i-t,o=this._keySchedule[r-(t%4?0:4)],this._invKeySchedule[t]=t<4||r<=4?o:u.INV_SUB_MIX[0][u.SBOX[o>>>24]]^u.INV_SUB_MIX[1][u.SBOX[o>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[o>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&o]];return!0},s.prototype.encryptBlock=function(e){e=o(new t(e));var n=this._doCryptBlock(e,this._keySchedule,u.SUB_MIX,u.SBOX),r=new t(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[1],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[3],12),r},s.prototype.decryptBlock=function(e){e=o(new t(e));var n=[e[3],e[1]];e[1]=n[0],e[3]=n[1];var r=this._doCryptBlock(e,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),i=new t(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},s.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},s.prototype._doCryptBlock=function(t,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v;for(a=t[0]^n[0],u=t[1]^n[1],c=t[2]^n[2],l=t[3]^n[3],o=4,s=g=1,v=this._nRounds;1<=v?g<v:g>v;s=1<=v?++g:--g)h=r[0][a>>>24]^r[1][u>>>16&255]^r[2][c>>>8&255]^r[3][255&l]^n[o++],f=r[0][u>>>24]^r[1][c>>>16&255]^r[2][l>>>8&255]^r[3][255&a]^n[o++],d=r[0][c>>>24]^r[1][l>>>16&255]^r[2][a>>>8&255]^r[3][255&u]^n[o++],p=r[0][l>>>24]^r[1][a>>>16&255]^r[2][u>>>8&255]^r[3][255&c]^n[o++],a=h,u=f,c=d,l=p;return h=(i[a>>>24]<<24|i[u>>>16&255]<<16|i[c>>>8&255]<<8|i[255&l])^n[o++],f=(i[u>>>24]<<24|i[c>>>16&255]<<16|i[l>>>8&255]<<8|i[255&a])^n[o++],d=(i[c>>>24]<<24|i[l>>>16&255]<<16|i[a>>>8&255]<<8|i[255&u])^n[o++],p=(i[l>>>24]<<24|i[a>>>16&255]<<16|i[u>>>8&255]<<8|i[255&c])^n[o++],[e(h),e(f),e(d),e(p)]},n.AES=s}).call(this,t("buffer").Buffer)},{buffer:3}],14:[function(t,e,n){(function(n){function r(t,e,i,a){if(!(this instanceof r))return new r(t,e,i);s.call(this),this._finID=n.concat([i,new n([0,0,0,1])]),i=n.concat([i,new n([0,0,0,2])]),this._cipher=new o.AES(e),this._prev=new n(i.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=a,this._alen=0,this._len=0,i.copy(this._prev),this._mode=t;var c=new n(4);c.fill(0),this._ghash=new u(this._cipher.encryptBlock(c)),this._authTag=null,this._called=!1}function i(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=-1;++i<r;)n+=t[i]^e[i];return n}var o=t("./aes"),s=t("./cipherBase"),a=t("inherits"),u=t("./ghash"),c=t("./xor");a(r,s),e.exports=r,r.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=new n(e),e.fill(0),this._ghash.update(e))}this._called=!0;var r=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(r),this._len+=t.length,r},r.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=c(this._ghash["final"](8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt){if(i(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data")}else this._authTag=t;this._cipher.scrub()},r.prototype.getAuthTag=function(){if(!this._decrypt&&n.isBuffer(this._authTag))return this._authTag;throw new Error("Attempting to get auth tag in unsupported state")},r.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},r.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length}}).call(this,t("buffer").Buffer)},{"./aes":13,"./cipherBase":15,"./ghash":18,"./xor":29,buffer:3,inherits:149}],15:[function(t,e,n){(function(n){function r(){i.call(this)}var i=t("stream").Transform,o=t("inherits");e.exports=r,o(r,i),r.prototype.update=function(t,e,r){"string"==typeof t&&(t=new n(t,e));var i=this._update(t);return r&&(i=i.toString(r)),i},r.prototype._transform=function(t,e,n){this.push(this._update(t)),n()},r.prototype._flush=function(t){try{this.push(this._final())}catch(e){return t(e)}t()},r.prototype["final"]=function(t){var e=this._final()||new n("");return t&&(e=e.toString(t)),e}}).call(this,t("buffer").Buffer)},{buffer:3,inherits:149,stream:163}],16:[function(t,e,n){(function(n){function r(t,e,o){return this instanceof r?(a.call(this),this._cache=new i,this._last=void 0,this._cipher=new s.AES(e),this._prev=new n(o.length),o.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new r(t,e,o)}function i(){return this instanceof i?void(this.cache=new n("")):new i}function o(t){for(var e=t[15],n=-1;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}var s=t("./aes"),a=t("./cipherBase"),u=t("inherits"),c=t("./modes"),l=t("./streamCipher"),h=t("./authCipher"),f=t("./EVP_BytesToKey");u(r,a),r.prototype._update=function(t){this._cache.add(t);for(var e,r,i=[];e=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,e),i.push(r);return n.concat(i)},r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return o(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(t){this._autopadding=!!t},i.prototype.add=function(t){this.cache=n.concat([this.cache,t])},i.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},i.prototype.flush=function(){if(this.cache.length)return this.cache};var d={ECB:t("./modes/ecb"),CBC:t("./modes/cbc"),CFB:t("./modes/cfb"),CFB8:t("./modes/cfb8"),CFB1:t("./modes/cfb1"),OFB:t("./modes/ofb"),CTR:t("./modes/ctr"),GCM:t("./modes/ctr")};e.exports=function(t){function e(t,e,i){var o=c[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new n(i)),"string"==typeof e&&(e=new n(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new l(d[o.mode],e,i,(!0)):"auth"===o.type?new h(d[o.mode],e,i,(!0)):new r(d[o.mode],e,i)}function i(n,r){var i=c[n.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var o=f(t,r,i.key,i.iv);return e(n,o.key,o.iv)}return{createDecipher:i,createDecipheriv:e}}}).call(this,t("buffer").Buffer)},{"./EVP_BytesToKey":12,"./aes":13,"./authCipher":14,"./cipherBase":15,"./modes":20,"./modes/cbc":21,"./modes/cfb":22,"./modes/cfb1":23,"./modes/cfb8":24,"./modes/ctr":25,"./modes/ecb":26,"./modes/ofb":27,"./streamCipher":28,buffer:3,inherits:149}],17:[function(t,e,n){(function(n){function r(t,e,a){return this instanceof r?(s.call(this),this._cache=new i,this._cipher=new o.AES(e),this._prev=new n(a.length),a.copy(this._prev),this._mode=t,void(this._autopadding=!0)):new r(t,e,a)}function i(){return this instanceof i?void(this.cache=new n("")):new i}var o=t("./aes"),s=t("./cipherBase"),a=t("inherits"),u=t("./modes"),c=t("./EVP_BytesToKey"),l=t("./streamCipher"),h=t("./authCipher");a(r,s),r.prototype._update=function(t){this._cache.add(t);for(var e,r,i=[];e=this._cache.get();)r=this._mode.encrypt(this,e),i.push(r);return n.concat(i)},r.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if("10101010101010101010101010101010"!==t.toString("hex"))throw this._cipher.scrub(),new Error("data not multiple of block length")},r.prototype.setAutoPadding=function(t){this._autopadding=!!t},i.prototype.add=function(t){this.cache=n.concat([this.cache,t])},i.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},i.prototype.flush=function(){for(var t=16-this.cache.length,e=new n(t),r=-1;++r<t;)e.writeUInt8(t,r);var i=n.concat([this.cache,e]);return i};var f={ECB:t("./modes/ecb"),CBC:t("./modes/cbc"),CFB:t("./modes/cfb"),CFB8:t("./modes/cfb8"),CFB1:t("./modes/cfb1"),OFB:t("./modes/ofb"),CTR:t("./modes/ctr"),GCM:t("./modes/ctr")};e.exports=function(t){function e(t,e,i){var o=u[t.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=new n(i)),"string"==typeof e&&(e=new n(e)),e.length!==o.key/8)throw new TypeError("invalid key length "+e.length);if(i.length!==o.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===o.type?new l(f[o.mode],e,i):"auth"===o.type?new h(f[o.mode],e,i):new r(f[o.mode],e,i)}function i(n,r){var i=u[n.toLowerCase()];if(!i)throw new TypeError("invalid suite type");
var o=c(t,r,i.key,i.iv);return e(n,o.key,o.iv)}return{createCipher:i,createCipheriv:e}}}).call(this,t("buffer").Buffer)},{"./EVP_BytesToKey":12,"./aes":13,"./authCipher":14,"./cipherBase":15,"./modes":20,"./modes/cbc":21,"./modes/cfb":22,"./modes/cfb1":23,"./modes/cfb8":24,"./modes/ctr":25,"./modes/ecb":26,"./modes/ofb":27,"./streamCipher":28,buffer:3,inherits:149}],18:[function(t,e,n){(function(t){function n(e){this.h=e,this.state=new t(16),this.state.fill(0),this.cache=new t("")}function r(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function i(e){e=e.map(o);var n=new t(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n}function o(t){var e,n;return e=t>u||t<0?(n=Math.abs(t)%u,t<0?u-n:n):t}function s(t,e){return[t[0]^e[0],t[1]^e[1],t[2]^e[2],t[3]^e[3]]}var a=new t(16);a.fill(0),e.exports=n,n.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},n.prototype._multiply=function(){for(var t,e,n,o=r(this.h),a=[0,0,0,0],u=-1;++u<128;){for(e=0!==(this.state[~~(u/8)]&1<<7-u%8),e&&(a=s(a,o)),n=0!==(1&o[3]),t=3;t>0;t--)o[t]=o[t]>>>1|(1&o[t-1])<<31;o[0]=o[0]>>>1,n&&(o[0]=o[0]^225<<24)}this.state=i(a)},n.prototype.update=function(e){this.cache=t.concat([this.cache,e]);for(var n;this.cache.length>=16;)n=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(n)},n.prototype["final"]=function(e,n){return this.cache.length&&this.ghash(t.concat([this.cache,a],16)),this.ghash(i([0,e,0,n])),this.state};var u=Math.pow(2,32)}).call(this,t("buffer").Buffer)},{buffer:3}],19:[function(t,e,n){e.exports=function(e,n){function r(){return Object.keys(s)}n=n||{};var i=t("./encrypter")(e);n.createCipher=n.Cipher=i.createCipher,n.createCipheriv=n.Cipheriv=i.createCipheriv;var o=t("./decrypter")(e);n.createDecipher=n.Decipher=o.createDecipher,n.createDecipheriv=n.Decipheriv=o.createDecipheriv;var s=t("./modes");n.listCiphers=n.getCiphers=r}},{"./decrypter":16,"./encrypter":17,"./modes":20}],20:[function(t,e,n){n["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},n["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},n["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},n["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},n["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},n["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},n.aes128=n["aes-128-cbc"],n.aes192=n["aes-192-cbc"],n.aes256=n["aes-256-cbc"],n["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},n["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},n["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},n["aes-128-cfb8"]={cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},n["aes-192-cfb8"]={cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},n["aes-256-cfb8"]={cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},n["aes-128-cfb1"]={cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},n["aes-192-cfb1"]={cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},n["aes-256-cfb1"]={cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},n["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},n["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},n["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},n["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},n["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},n["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},n["aes-128-gcm"]={cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},n["aes-192-gcm"]={cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},n["aes-256-gcm"]={cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},{}],21:[function(t,e,n){var r=t("../xor");n.encrypt=function(t,e){var n=r(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},n.decrypt=function(t,e){var n=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return r(i,n)}},{"../xor":29}],22:[function(t,e,n){(function(e){function r(t,n,r){var o=n.length,s=i(n,t._cache);return t._cache=t._cache.slice(o),t._prev=e.concat([t._prev,r?n:s]),s}var i=t("../xor");n.encrypt=function(t,n,i){for(var o,s=new e("");n.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=n.length)){s=e.concat([s,r(t,n,i)]);break}o=t._cache.length,s=e.concat([s,r(t,n.slice(0,o),i)]),n=n.slice(o)}return s}}).call(this,t("buffer").Buffer)},{"../xor":29,buffer:3}],23:[function(t,e,n){(function(t){function e(t,e,n){for(var i,o,s,a=-1,u=8,c=0;++a<u;)i=t._cipher.encryptBlock(t._prev),o=e&1<<7-a?128:0,s=i[0]^o,c+=(128&s)>>a%8,t._prev=r(t._prev,n?o:s);return c}function r(e,n){var r=e.length,i=-1,o=new t(e.length);for(e=t.concat([e,new t([n])]);++i<r;)o[i]=e[i]<<1|e[i+1]>>7;return o}n.encrypt=function(n,r,i){for(var o=r.length,s=new t(o),a=-1;++a<o;)s[a]=e(n,r[a],i);return s}}).call(this,t("buffer").Buffer)},{buffer:3}],24:[function(t,e,n){(function(t){function e(e,n,r){var i=e._cipher.encryptBlock(e._prev),o=i[0]^n;return e._prev=t.concat([e._prev.slice(1),new t([r?n:o])]),o}n.encrypt=function(n,r,i){for(var o=r.length,s=new t(o),a=-1;++a<o;)s[a]=e(n,r[a],i);return s}}).call(this,t("buffer").Buffer)},{buffer:3}],25:[function(t,e,n){(function(e){function r(t){var e=t._cipher.encryptBlock(t._prev);return i(t._prev),e}function i(t){for(var e,n=t.length;n--;){if(e=t.readUInt8(n),255!==e){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}var o=t("../xor");n.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,r(t)]);var i=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),o(n,i)}}).call(this,t("buffer").Buffer)},{"../xor":29,buffer:3}],26:[function(t,e,n){n.encrypt=function(t,e){return t._cipher.encryptBlock(e)},n.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},{}],27:[function(t,e,n){(function(e){function r(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}var i=t("../xor");n.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,r(t)]);var o=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),i(n,o)}}).call(this,t("buffer").Buffer)},{"../xor":29,buffer:3}],28:[function(t,e,n){(function(n){function r(t,e,s,a){return this instanceof r?(o.call(this),this._cipher=new i.AES(e),this._prev=new n(s.length),this._cache=new n(""),this._secCache=new n(""),this._decrypt=a,s.copy(this._prev),void(this._mode=t)):new r(t,e,s)}var i=t("./aes"),o=t("./cipherBase"),s=t("inherits");s(r,o),e.exports=r,r.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()}}).call(this,t("buffer").Buffer)},{"./aes":13,"./cipherBase":15,buffer:3,inherits:149}],29:[function(t,e,n){(function(t){function n(e,n){for(var r=Math.min(e.length,n.length),i=new t(r),o=-1;++o<r;)i.writeUInt8(e[o]^n[o],o);return i}e.exports=n}).call(this,t("buffer").Buffer)},{buffer:3}],30:[function(t,e,n){(function(t){n["RSA-SHA224"]=n.sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:new t("302d300d06096086480165030402040500041c","hex")},n["RSA-SHA256"]=n.sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:new t("3031300d060960864801650304020105000420","hex")},n["RSA-SHA384"]=n.sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:new t("3041300d060960864801650304020205000430","hex")},n["RSA-SHA512"]=n.sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:new t("3051300d060960864801650304020305000440","hex")},n["RSA-SHA1"]={sign:"rsa",hash:"sha1",id:new t("3021300906052b0e03021a05000414","hex")},n["ecdsa-with-SHA1"]={sign:"ecdsa",hash:"sha1",id:new t("","hex")},n.DSA=n["DSA-SHA1"]=n["DSA-SHA"]={sign:"dsa",hash:"sha1",id:new t("","hex")},n["RSA-RIPEMD160"]=n.ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:new t("3021300906052b2403020105000414","hex")},n["RSA-MD5"]=n.md5WithRSAEncryption={sign:"rsa",hash:"md5",id:new t("3020300c06082a864886f70d020505000410","hex")}}).call(this,t("buffer").Buffer)},{buffer:3}],31:[function(t,e,n){(function(n){function r(t,e){a.Writable.call(this);var n=c[t];if(!n)throw new Error("Unknown message digest");this._hash=e.createHash(n.hash),this._tag=n.id,this._crypto=e}function i(t,e){a.Writable.call(this);var n=c[t];if(!n)throw new Error("Unknown message digest");this._hash=e.createHash(n.hash),this._tag=n.id}var o=t("./sign"),s=t("./verify"),a=t("stream"),u=t("inherits"),c=t("./algos");e.exports=function(t,e){function n(t){return new r(t,e)}function o(t){return new i(t,e)}t.createSign=t.Sign=n,t.createVerify=t.Verify=o},u(r,a.Writable),r.prototype._write=function(t,e,n){this._hash.update(t),n()},r.prototype.update=function(t){return this.write(t),this},r.prototype.sign=function(t,e){this.end();var r=this._hash.digest(),i=o(n.concat([this._tag,r]),t,this._crypto);return e&&(i=i.toString(e)),i},u(i,a.Writable),i.prototype._write=function(t,e,n){this._hash.update(t),n()},i.prototype.update=function(t){return this.write(t),this},i.prototype.verify=function(t,e,r){this.end();var i=this._hash.digest();return n.isBuffer(e)||(e=new n(e,r)),s(e,n.concat([this._tag,i]),t)}}).call(this,t("buffer").Buffer)},{"./algos":30,"./sign":75,"./verify":76,buffer:3,inherits:149,stream:163}],32:[function(t,e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){return null!==t&&"object"==typeof t&&Array.isArray(t.words)?t:(this.sign=!1,this.words=null,this.length=0,this.red=null,"le"!==e&&"be"!==e||(n=e,e=10),void(null!==t&&this._init(t||0,e||10,n||"be")))}function s(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function a(){s.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){s.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function c(){s.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){s.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function h(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function f(t){h.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new o(1)).div(this.m).neg().mod(this.r)}"object"==typeof e&&(e.exports=o),o.BN=o,o.wordSize=26,o.prototype._init=function(t,e,n){if("number"==typeof t)return t<0&&(this.sign=!0,t=-t),void(t<67108864?(this.words=[67108863&t],this.length=1):(this.words=[67108863&t,t/67108864&67108863],this.length=2));if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.sign=!0),this.strip()},o.prototype._initArray=function(t,e,n){r("number"==typeof t.length),this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o=0;if("be"===n)for(var i=t.length-1,s=0;i>=0;i-=3){var a=t[i]|t[i-1]<<8|t[i-2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}else if("le"===n)for(var i=0,s=0;i<t.length;i+=3){var a=t[i]|t[i+1]<<8|t[i+2]<<16;this.words[s]|=a<<o&67108863,this.words[s+1]=a>>>26-o&67108863,o+=24,o>=26&&(o-=26,s++)}return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var r=0,n=t.length-6,i=0;n>=e;n-=6){var o=parseInt(t.slice(n,n+6),16);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303,r+=24,r>=26&&(r-=26,i++)}if(n+6!==e){var o=parseInt(t.slice(e,n+6),16);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303}this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var i=0,s=1,a=0,u=null,c=n;c<t.length;c++){var l,h=t[c];l=10===e||h<="9"?0|h:h>="a"?h.charCodeAt(0)-97+10:h.charCodeAt(0)-65+10,i*=e,i+=l,s*=e,a++,s>1048575&&(r(s<=67108863),u||(u=new o(s)),this.mul(u).copy(this),this.iadd(new o(i)),i=0,s=1,a=0)}0!==a&&(this.mul(new o(s)).copy(this),this.iadd(new o(i)))},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.sign=this.sign,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){if(t=t||10,16===t||"hex"===t){for(var n="",i=0,e=0|e||1,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,n=0!==o||s!==this.length-1?d[6-u.length]+u+n:u+n,i+=2,i>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!==0;)n="0"+n;return this.sign&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=p[t],l=g[t],n="",h=this.clone();for(h.sign=!1;0!==h.cmpn(0);){var f=h.modn(l).toString(t);h=h.idivn(l),n=0!==h.cmpn(0)?d[c-f.length]+f+n:f+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toArray=function(){this.strip();var t=new Array(this.byteLength());t[0]=0;for(var e=this.clone(),n=0;0!==e.cmpn(0);n++){var r=e.andln(255);e.ishrn(8),t[t.length-n-1]=r}return t},o.prototype._countBits=function(t){return t>=33554432?26:t>=16777216?25:t>=8388608?24:t>=4194304?23:t>=2097152?22:t>=1048576?21:t>=524288?20:t>=262144?19:t>=131072?18:t>=65536?17:t>=32768?16:t>=16384?15:t>=8192?14:t>=4096?13:t>=2048?12:t>=1024?11:t>=512?10:t>=256?9:t>=128?8:t>=64?7:t>=32?6:t>=16?5:t>=8?4:t>=4?3:t>=2?2:t>=1?1:0},o.prototype.bitLength=function(){var t=0,e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},o.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var t=this.clone();return t.sign=!this.sign,t},o.prototype.iadd=function(t){if(this.sign&&!t.sign){this.sign=!1;var e=this.isub(t);return this.sign=!this.sign,this._normSign()}if(!this.sign&&t.sign){t.sign=!1;var e=this.isub(t);return t.sign=!0,e._normSign()}var n,r;this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++){var e=n.words[o]+r.words[o]+i;this.words[o]=67108863&e,i=e>>>26}for(;0!==i&&o<n.length;o++){var e=n.words[o]+i;this.words[o]=67108863&e,i=e>>>26}if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){if(t.sign&&!this.sign){t.sign=!1;var e=this.sub(t);return t.sign=!0,e}if(!t.sign&&this.sign){this.sign=!1;var e=t.sub(this);return this.sign=!0,e}return this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(t.sign){t.sign=!1;var e=this.iadd(t);return t.sign=!0,e._normSign()}if(this.sign)return this.sign=!1,this.iadd(t),this.sign=!0,this._normSign();var n=this.cmp(t);if(0===n)return this.sign=!1,this.length=1,this.words[0]=0,this;if(n>0)var r=this,i=t;else var r=t,i=this;for(var o=0,s=0;s<i.length;s++){var e=r.words[s]-i.words[s]-o;e<0?(e+=67108864,o=1):o=0,this.words[s]=e}for(;0!==o&&s<r.length;s++){var e=r.words[s]-o;e<0?(e+=67108864,o=1):o=0,this.words[s]=e}if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.sign=!0),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)},o.prototype._smallMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var n=0,r=0;r<e.length-1;r++){for(var i=n>>>26,o=67108863&n,s=Math.min(r,t.length-1),a=Math.max(0,r-this.length+1);a<=s;a++){var u=r-a,c=0|this.words[u],l=0|t.words[a],h=c*l,f=67108863&h;i=i+(h/67108864|0)|0,f=f+o|0,o=67108863&f,i=i+(f>>>26)|0}e.words[r]=o,n=i}return 0!==n?e.words[r]=n:e.length--,e.strip()},o.prototype._bigMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var n=0,r=0,i=0;i<e.length-1;i++){var o=r;r=0;for(var s=67108863&n,a=Math.min(i,t.length-1),u=Math.max(0,i-this.length+1);u<=a;u++){var c=i-u,l=0|this.words[c],h=0|t.words[u],f=l*h,d=67108863&f;o=o+(f/67108864|0)|0,d=d+s|0,s=67108863&d,o=o+(d>>>26)|0,r+=o>>>26,o&=67108863}e.words[i]=s,n=o,o=r}return 0!==n?e.words[i]=n:e.length--,e.strip()},o.prototype.mulTo=function(t,e){var n;return n=this.length+t.length<63?this._smallMulTo(t,e):this._bigMulTo(t,e)},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.imul=function(t){if(0===this.cmpn(0)||0===t.cmpn(0))return this.words[0]=0,this.length=1,this;var e=this.length,n=t.length;this.sign=t.sign!==this.sign,this.length=this.length+t.length,this.words[this.length-1]=0;for(var r=this.length-2;r>=0;r--){for(var i=0,o=0,s=Math.min(r,n-1),a=Math.max(0,r-e+1);a<=s;a++){var u=r-a,c=this.words[u],l=t.words[a],h=c*l,f=67108863&h;i+=h/67108864|0,f+=o,o=67108863&f,i+=f>>>26}this.words[r]=o,this.words[r+1]+=i,i=0}for(var i=0,u=1;u<this.length;u++){var d=this.words[u]+i;this.words[u]=67108863&d,i=d>>>26}return this.strip()},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.mul(this)},o.prototype.ishln=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=67108863>>>26-e<<26-e;this.clone();if(0!==e){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,u=this.words[s]-a<<e;this.words[s]=u|o,o=a>>>26-e}o&&(this.words[s]=o,this.length++)}if(0!==n){for(var s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(var s=0;s<n;s++)this.words[s]=0;this.length+=n}return this.strip()},o.prototype.ishrn=function(t,e,n){r("number"==typeof t&&t>=0),e=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),s=67108863^67108863>>>i<<i,a=n;if(e-=o,e=Math.max(0,e),a){for(var u=0;u<o;u++)a.words[u]=this.words[u];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var u=0;u<this.length;u++)this.words[u]=this.words[u+o]}else this.words[0]=0,this.length=1;for(var c=0,u=this.length-1;u>=0&&(0!==c||u>=e);u--){var l=this.words[u];this.words[u]=c<<26-i|l>>>i,c=l&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),n?{hi:this,lo:a}:this},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){if(r("number"==typeof t),t<0)return this.isubn(-t);if(this.sign)return 1===this.length&&this.words[0]<t?(this.words[0]=t-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(t),this.sign=!0,this);this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),t<0)return this.iaddn(-t);if(this.sign)return this.sign=!1,this.iaddn(t),this.sign=!0,this;this.words[0]-=t;for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.sign=!1,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._wordDiv=function(t,e){for(var n=this.length-t.length,r=this.clone(),i=t,s="mod"!==e&&new o(0);r.length>i.length;){var a=67108864*r.words[r.length-1]+r.words[r.length-2],u=a/i.words[i.length-1],c=u/67108864|0,l=67108863&u;u=new o(null),u.words=[l,c],u.length=2;var n=26*(r.length-i.length-1);if(s){var h=u.shln(n);r.sign?s.isub(h):s.iadd(h)}u=u.mul(i).ishln(n),r.sign?r.iadd(u):r.isub(u)}for(;r.ucmp(i)>=0;){var a=r.words[r.length-1],u=new o(a/i.words[i.length-1]|0),n=26*(r.length-i.length);if(s){var h=u.shln(n);r.sign?s.isub(h):s.iadd(h)}u=u.mul(i).ishln(n),r.sign?r.iadd(u):r.isub(u)}return r.sign&&(s&&s.isubn(1),r.iadd(i)),{div:s?s:null,mod:r}},o.prototype.divmod=function(t,e){if(r(0!==t.cmpn(0)),this.sign&&!t.sign){var n,i,s=this.neg().divmod(t,e);return"mod"!==e&&(n=s.div.neg()),"div"!==e&&(i=0===s.mod.cmpn(0)?s.mod:t.sub(s.mod)),{div:n,mod:i}}if(!this.sign&&t.sign){var n,s=this.divmod(t.neg(),e);return"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}}return this.sign&&t.sign?this.neg().divmod(t.neg(),e):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div").div},o.prototype.mod=function(t){return this.divmod(t,"mod").mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(0===e.mod.cmpn(0))return e.div;var n=e.div.sign?e.mod.isub(t):e.mod,r=t.shrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:e.div.sign?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+this.words[i])%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype._egcd=function(t,e){r(!e.sign),r(0!==e.cmpn(0));var n=this,i=e.clone();n=n.sign?n.mod(e):n.clone();for(var s=new o(0);i.isEven();)i.ishrn(1);for(var a=i.clone();n.cmpn(1)>0&&i.cmpn(1)>0;){for(;n.isEven();)n.ishrn(1),t.isEven()?t.ishrn(1):t.iadd(a).ishrn(1);for(;i.isEven();)i.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);n.cmp(i)>=0?(n.isub(i),t.isub(s)):(i.isub(n),s.isub(t))}return 0===n.cmpn(1)?t:s},o.prototype.gcd=function(t){if(0===this.cmpn(0))return t.clone();if(0===t.cmpn(0))return this.clone();var e=this.clone(),n=t.clone();e.sign=!1,n.sign=!1;for(var r=0;e.isEven()&&n.isEven();r++)e.ishrn(1),n.ishrn(1);for(;e.isEven();)e.ishrn(1);do{for(;n.isEven();)n.ishrn(1);if(e.cmp(n)<0){var i=e;e=n,n=i}e.isub(e.div(n).mul(n))}while(0!==e.cmpn(0)&&0!==n.cmpn(0));return 0===e.cmpn(0)?n.ishln(r):e.ishln(r)},o.prototype.invm=function(t){return this._egcd(new o(1),t).mod(t)},o.prototype.isEven=function(t){return 0===(1&this.words[0])},o.prototype.isOdd=function(t){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n){for(var o=this.length;o<n+1;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}for(var s=i,o=n;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},o.prototype.cmpn=function(t){var e=t<0;if(e&&(t=-t),this.sign&&!e)return-1;if(!this.sign&&e)return 1;t&=67108863,this.strip();var n;if(this.length>1)n=1;else{var r=this.words[0];n=r===t?0:r<t?-1:1}return this.sign&&(n=-n),n},o.prototype.cmp=function(t){if(this.sign&&!t.sign)return-1;if(!this.sign&&t.sign)return 1;var e=this.ucmp(t);return this.sign?-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=this.words[n],i=t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.red=function(t){return new h(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};s.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},s.prototype.ireduce=function(t){var e,n=t;do{var r=n.ishrn(this.n,0,this.tmp);n=this.imulK(r.hi),n=n.iadd(r.lo),e=n.bitLength()}while(e>this.n);var i=e<this.n?-1:n.cmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},s.prototype.imulK=function(t){return t.imul(this.k)},i(a,s),a.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t.words[i];n+=64*o,r+=977*o,n+=r/67108864|0,e+=n/67108864|0,n&=67108863,r&=67108863,t.words[i]=r,r=n,n=e,e=0}return 0===t.words[t.length-1]&&t.length--,0===t.words[t.length-1]&&t.length--,t},i(u,s),i(c,s),i(l,s),l.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*t.words[n]+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function m(t){if(v[t])return v[t];var m;if("k256"===t)m=new a;else if("p224"===t)m=new u;else if("p192"===t)m=new c;else{if("p25519"!==t)throw new Error("Unknown prime "+t);m=new l}return v[t]=m,m},h.prototype._verify1=function(t){r(!t.sign,"red works only with positives"),r(t.red,"red works only with red numbers")},h.prototype._verify2=function(t,e){r(!t.sign&&!e.sign,"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},h.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.mod(this.m)._forceRed(this)},h.prototype.neg=function(t){var e=t.clone();return e.sign=!e.sign,e.iadd(this.m)._forceRed(this)},h.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},h.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},h.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},h.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},h.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.shln(e))},h.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},h.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},h.prototype.isqr=function(t){return this.imul(t,t)},h.prototype.sqr=function(t){return this.mul(t,t)},h.prototype.sqrt=function(t){if(0===t.cmpn(0))return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new o(1)).ishrn(2),i=this.pow(t,n);return i}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var u=new o(1).toRed(this),c=u.redNeg(),l=this.m.subn(1).ishrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var f=this.pow(h,s),i=this.pow(t,s.addn(1).ishrn(1)),d=this.pow(t,s),p=a;0!==d.cmp(u);){for(var g=d,v=0;0!==g.cmp(u);v++)g=g.redSqr();r(v<p);var m=this.pow(f,new o(1).ishln(p-v-1));i=i.redMul(m),f=m.redSqr(),d=d.redMul(f),p=v}return i},h.prototype.invm=function(t){var e=t._egcd(new o(1),this.m);return e.sign?(e.sign=!1,this.imod(e).redNeg()):this.imod(e)},h.prototype.pow=function(t,e){for(var n=[],r=e.clone();0!==r.cmpn(0);)n.push(r.andln(1)),r.ishrn(1);for(var i=t,o=0;o<n.length&&0===n[o];o++,i=this.sqr(i));if(++o<n.length)for(var r=this.sqr(i);o<n.length;o++,r=this.sqr(r))0!==n[o]&&(i=this.mul(i,r));return i},h.prototype.convertTo=function(t){return t.clone()},h.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new f(t)},i(f,h),f.prototype.convertTo=function(t){return this.imod(t.shln(this.shift))},f.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},f.prototype.imul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(t){var e=this.imod(t.invm(this.m).mul(this.r2));return e._forceRed(this)}},{}],33:[function(t,e,n){(function(n){function r(t,e){var n=o(t,e),r=n.toRed(s.mont(t.modulus)).redPow(new s(t.publicExponent)).fromRed();return{
blinder:r,unblinder:n.invm(t.modulus)}}function i(t,e,i){var o=r(e,i),a=e.modulus.byteLength(),u=(s.mont(e.modulus),new s(t).mul(o.blinder).mod(e.modulus)),c=u.toRed(s.mont(e.prime1)),l=u.toRed(s.mont(e.prime2)),h=e.coefficient,f=e.prime1,d=e.prime2,p=c.redPow(e.exponent1),g=l.redPow(e.exponent2);p=p.fromRed(),g=g.fromRed();var v=p.isub(g).imul(h).mod(f);v.imul(d),g.iadd(v);var m=new n(g.imul(o.unblinder).mod(e.modulus).toArray());if(m.length<a){var y=new n(a-m.length);y.fill(0),m=n.concat([y,m],a)}return m}function o(t,e){for(var n=t.modulus.byteLength(),r=new s(e.randomBytes(n));r.cmp(t.modulus)>=0||!r.mod(t.prime1)||!r.mod(t.prime2);)r=new s(e.randomBytes(n));return r}var s=t("bn.js");e.exports=i,i.getr=o}).call(this,t("buffer").Buffer)},{"bn.js":34,buffer:3}],34:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],35:[function(t,e,n){var r=n;r.version=t("../package.json").version,r.utils=t("./elliptic/utils"),r.rand=t("brorand"),r.hmacDRBG=t("./elliptic/hmac-drbg"),r.curve=t("./elliptic/curve"),r.curves=t("./elliptic/curves"),r.ec=t("./elliptic/ec")},{"../package.json":54,"./elliptic/curve":38,"./elliptic/curves":41,"./elliptic/ec":42,"./elliptic/hmac-drbg":45,"./elliptic/utils":46,brorand:47}],36:[function(t,e,n){function r(t,e){this.type=t,this.p=new s(e.p,16),this.red=e.prime?s.red(e.prime):s.mont(this.p),this.zero=new s(0).toRed(this.red),this.one=new s(1).toRed(this.red),this.two=new s(2).toRed(this.red),this.n=e.n&&new s(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4)}function i(t,e){this.curve=t,this.type=e,this.precomputed=null}var o=t("assert"),s=t("bn.js"),a=t("../../elliptic"),u=a.utils.getNAF,c=a.utils.getJSF;e.exports=r,r.prototype.point=function(){throw new Error("Not implemented")},r.prototype.validate=function(t){throw new Error("Not implemented")},r.prototype._fixedNafMul=function(t,e){var n=t._getDoubles(),r=u(e,1),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;for(var o=[],s=0;s<r.length;s+=n.step){for(var a=0,e=s+n.step-1;e>=s;e--)a=(a<<1)+r[e];o.push(a)}for(var c=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=i;h>0;h--){for(var s=0;s<o.length;s++){var a=o[s];a===h?l=l.mixedAdd(n.points[s]):a===-h&&(l=l.mixedAdd(n.points[s].neg()))}c=c.add(l)}return c.toP()},r.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=u(e,n),a=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var e=0;c>=0&&0===s[c];c--)e++;if(c>=0&&e++,a=a.dblp(e),c<0)break;var l=s[c];o(0!==l),a="affine"===t.type?l>0?a.mixedAdd(i[l-1>>1]):a.mixedAdd(i[-l-1>>1].neg()):l>0?a.add(i[l-1>>1]):a.add(i[-l-1>>1].neg())}return"affine"===t.type?a.toP():a},r.prototype._wnafMulAdd=function(t,e,n,r){for(var i=this._wnafT1,o=this._wnafT2,s=this._wnafT3,a=0,l=0;l<r;l++){var h=e[l],f=h._getNAFPoints(t);i[l]=f.wnd,o[l]=f.points}for(var l=r-1;l>=1;l-=2){var d=l-1,p=l;if(1===i[d]&&1===i[p]){var g=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(g[1]=e[d].add(e[p]),g[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(g[1]=e[d].toJ().mixedAdd(e[p]),g[2]=e[d].add(e[p].neg())):(g[1]=e[d].toJ().mixedAdd(e[p]),g[2]=e[d].toJ().mixedAdd(e[p].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],m=c(n[d],n[p]);a=Math.max(m[0].length,a),s[d]=new Array(a),s[p]=new Array(a);for(var y=0;y<a;y++){var b=0|m[0][y],_=0|m[1][y];s[d][y]=v[3*(b+1)+(_+1)],s[p][y]=0,o[d]=g}}else s[d]=u(n[d],i[d]),s[p]=u(n[p],i[p]),a=Math.max(s[d].length,a),a=Math.max(s[p].length,a)}for(var w=this.jpoint(null,null,null),S=this._wnafT4,l=a;l>=0;l--){for(var x=0;l>=0;){for(var E=!0,y=0;y<r;y++)S[y]=0|s[y][l],0!==S[y]&&(E=!1);if(!E)break;x++,l--}if(l>=0&&x++,w=w.dblp(x),l<0)break;for(var y=0;y<r;y++){var h,A=S[y];0!==A&&(A>0?h=o[y][A-1>>1]:A<0&&(h=o[y][-A-1>>1].neg()),w="affine"===h.type?w.mixedAdd(h):w.add(h))}}for(var l=0;l<r;l++)o[l]=null;return w.toP()},r.BasePoint=i,i.prototype.validate=function(){return this.curve.validate(this)},i.prototype.precompute=function(t,e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,t),n.beta=this._getBeta(),this.precomputed=n,this},i.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},i.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},i.prototype._getBeta=function(){return null},i.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},{"../../elliptic":35,assert:1,"bn.js":32}],37:[function(t,e,n){function r(t){this.twisted=1!=t.a,this.mOneA=this.twisted&&t.a==-1,this.extended=this.mOneA,l.call(this,"mont",t),this.a=new u(t.a,16).mod(this.red.m).toRed(this.red),this.c=new u(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new u(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==t.c}function i(t,e,n,r,i){l.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new u(e,16),this.y=new u(n,16),this.z=r?new u(r,16):this.curve.one,this.t=i&&new u(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}var o=t("assert"),s=t("../curve"),a=t("../../elliptic"),u=t("bn.js"),c=t("inherits"),l=s.base;a.utils.getNAF;c(r,l),e.exports=r,r.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},r.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},r.prototype.point=function(t,e,n,r){return new i(this,t,e,n,r)},r.prototype.jpoint=function(t,e,n,r){return this.point(t,e,n,r)},r.prototype.pointFromJSON=function(t){return i.fromJSON(this,t)},r.prototype.pointFromX=function(t,e){e=new u(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=r.redMul(i.redInvm()).redSqrt(),a=o.fromRed().isOdd();return(t&&!a||!t&&a)&&(o=o.redNeg()),this.point(e,o,s.one)},r.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),r=e.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===r.cmp(i)},c(i,l.BasePoint),i.fromJSON=function(t,e){return new i(t,e[0],e[1],e[2])},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},i.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),o=r.redAdd(e),s=o.redSub(n),a=r.redSub(e),u=i.redMul(s),c=o.redMul(a),l=i.redMul(a),h=s.redMul(o);return this.curve.point(u,c,h,l)},i.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),e=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var r=this.curve._mulA(e),i=r.redAdd(n);if(this.zOne)var o=t.redSub(e).redSub(n).redMul(i.redSub(this.curve.two)),s=i.redMul(r.redSub(n)),a=i.redSqr().redSub(i).redSub(i);else var u=this.z.redSqr(),c=i.redSub(u).redISub(u),o=t.redSub(e).redISub(n).redMul(c),s=i.redMul(r.redSub(n)),a=i.redMul(c)}else var r=e.redAdd(n),u=this.curve._mulC(redMul(this.z)).redSqr(),c=r.redSub(u).redSub(u),o=this.curve._mulC(t.redISub(r)).redMul(c),s=this.curve._mulC(r).redMul(e.redISub(n)),a=r.redMul(c);return this.curve.point(o,s,a)},i.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},i.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),o=n.redSub(e),s=i.redSub(r),a=i.redAdd(r),u=n.redAdd(e),c=o.redMul(s),l=a.redMul(u),h=o.redMul(u),f=s.redMul(a);return this.curve.point(c,l,f,h)},i.prototype._projAdd=function(t){var e=this.z.redMul(t.z),n=e.redSqr(),r=this.x.redMul(t.x),i=this.y.redMul(t.y),o=this.curve.d.redMul(r).redMul(i),s=n.redSub(o),a=n.redAdd(o),u=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(r).redISub(i),c=e.redMul(s).redMul(u);if(this.curve.twisted)var l=e.redMul(a).redMul(i.redSub(this.curve._mulA(r))),h=s.redMul(a);else var l=e.redMul(a).redMul(i.redSub(r)),h=this.curve._mulC(s).redMul(a);return this.curve.point(c,l,h)},i.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},i.prototype.mul=function(t){return this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},i.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2)},i.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},i.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},i.prototype.getY=function(){return this.normalize(),this.y.fromRed()},i.prototype.toP=i.prototype.normalize,i.prototype.mixedAdd=i.prototype.add},{"../../elliptic":35,"../curve":38,assert:1,"bn.js":32,inherits:149}],38:[function(t,e,n){var r=n;r.base=t("./base"),r["short"]=t("./short"),r.mont=t("./mont"),r.edwards=t("./edwards")},{"./base":36,"./edwards":37,"./mont":39,"./short":40}],39:[function(t,e,n){function r(t){c.call(this,"mont",t),this.a=new a(t.a,16).toRed(this.red),this.b=new a(t.b,16).toRed(this.red),this.i4=new a(4).toRed(this.red).redInvm(),this.two=new a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(t,e,n){c.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new a(e,16),this.z=new a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}var o=(t("assert"),t("../curve")),s=t("../../elliptic"),a=t("bn.js"),u=t("inherits"),c=o.base;s.utils.getNAF;u(r,c),e.exports=r,r.prototype.point=function(t,e){return new i(this,t,e)},r.prototype.pointFromJSON=function(t){return i.fromJSON(this,t)},r.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),r=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e),i=r.redSqrt();return 0===i.redSqr().cmp(r)},u(i,c.BasePoint),i.prototype.precompute=function(){},i.fromJSON=function(t,e){return new i(t,e[0],e[1]||t.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},i.prototype.dbl=function(){var t=this.x.redAdd(this.z),e=t.redSqr(),n=this.x.redSub(this.z),r=n.redSqr(),i=e.redSub(r),o=e.redMul(r),s=i.redMul(r.redAdd(this.curve.a24.redMul(i)));return this.curve.point(o,s)},i.prototype.add=function(t){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=t.x.redAdd(t.z),o=t.x.redSub(t.z),s=o.redMul(n),a=i.redMul(r),u=e.z.redMul(s.redAdd(a).redSqr()),c=e.x.redMul(s.redISub(a).redSqr());return this.curve.point(u,c)},i.prototype.mul=function(t){for(var e=t.clone(),n=this,r=this.curve.point(null,null),i=this,o=[];0!==e.cmpn(0);e.ishrn(1))o.push(e.andln(1));for(var s=o.length-1;s>=0;s--)0===o[s]?(n=n.diffAdd(r,i),r=r.dbl()):(r=n.diffAdd(r,i),n=n.dbl());return r},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../../elliptic":35,"../curve":38,assert:1,"bn.js":32,inherits:149}],40:[function(t,e,n){function r(t){h.call(this,"short",t),this.a=new c(t.a,16).toRed(this.red),this.b=new c(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function i(t,e,n,r){h.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new c(e,16),this.y=new c(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function o(t,e,n,r){h.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new c(0)):(this.x=new c(e,16),this.y=new c(n,16),this.z=new c(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}var s=t("assert"),a=t("../curve"),u=t("../../elliptic"),c=t("bn.js"),l=t("inherits"),h=a.base;u.utils.getNAF;l(r,h),e.exports=r,r.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new c(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=r[0].cmp(r[1])<0?r[0]:r[1],e=e.toRed(this.red)}if(t.lambda)n=new c(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?n=i[0]:(n=i[1],s(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}var o;return o=t.basis?t.basis.map(function(t){return{a:new c(t.a,16),b:new c(t.b,16)}}):this._getEndoBasis(n),{beta:e,lambda:n,basis:o}}},r.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:c.mont(t),n=new c(2).toRed(e).redInvm(),r=n.redNeg(),i=(new c(1).toRed(e),new c(3).toRed(e).redNeg().redSqrt().redMul(n)),o=r.redAdd(i).fromRed(),s=r.redSub(i).fromRed();return[o,s]},r.prototype._getEndoBasis=function(t){for(var e,n,r,i,o,s,a,u=this.n.shrn(Math.floor(this.n.bitLength()/2)),l=t,h=this.n.clone(),f=new c(1),d=new c(0),p=new c(0),g=new c(1),v=0;0!==l.cmpn(0);){var m=h.div(l),y=h.sub(m.mul(l)),b=p.sub(m.mul(f)),_=g.sub(m.mul(d));if(!r&&y.cmp(u)<0)e=a.neg(),n=f,r=y.neg(),i=b;else if(r&&2===++v)break;a=y,h=l,l=y,p=f,f=b,g=d,d=_}o=y.neg(),s=b;var w=r.sqr().add(i.sqr()),S=o.sqr().add(s.sqr());return S.cmp(w)>=0&&(o=e,s=n),r.sign&&(r=r.neg(),i=i.neg()),o.sign&&(o=o.neg(),s=s.neg()),[{a:r,b:i},{a:o,b:s}]},r.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),s=i.mul(n.a),a=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b),l=t.sub(s).sub(a),h=u.add(c).neg();return{k1:l,k2:h}},r.prototype.point=function(t,e,n){return new i(this,t,e,n)},r.prototype.pointFromX=function(t,e){e=new c(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt(),i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},r.prototype.jpoint=function(t,e,n){return new o(this,t,e,n)},r.prototype.pointFromJSON=function(t,e){return i.fromJSON(this,t,e)},r.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},r.prototype._endoWnafMulAdd=function(t,e){for(var n=this._endoWnafT1,r=this._endoWnafT2,i=0;i<t.length;i++){var o=this._endoSplit(e[i]),s=t[i],a=s._getBeta();o.k1.sign&&(o.k1.sign=!o.k1.sign,s=s.neg(!0)),o.k2.sign&&(o.k2.sign=!o.k2.sign,a=a.neg(!0)),n[2*i]=s,n[2*i+1]=a,r[2*i]=o.k1,r[2*i+1]=o.k2}for(var u=this._wnafMulAdd(1,n,r,2*i),c=0;c<2*i;c++)n[c]=null,r[c]=null;return u},l(i,h.BasePoint),i.prototype._getBeta=function(){function t(t){return r.point(t.x.redMul(r.endo.beta),t.y)}if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve;e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(t)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(t)}}}return n}},i.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},i.fromJSON=function(t,e,n){function r(e){return t.point(e[0],e[1],n)}"string"==typeof e&&(e=JSON.parse(e));var i=t.point(e[0],e[1],n);if(!e[2])return i;var o=e[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(r))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(r))}},i},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return this.inf},i.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},i.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},i.prototype.getX=function(){return this.x.fromRed()},i.prototype.getY=function(){return this.y.fromRed()},i.prototype.mul=function(t){return t=new c(t,16),this.precomputed&&this.precomputed.doubles?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},i.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},i.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},i.prototype.neg=function(t){function e(t){return t.neg()}if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var r=this.precomputed;n.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(e)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(e)}}}return n},i.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t},l(o,h.BasePoint),o.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},o.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},o.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(n.redMul(this.z)),a=r.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),l=c.redMul(a),h=r.redMul(c),f=u.redSqr().redIAdd(l).redISub(h).redISub(h),d=u.redMul(h.redISub(f)).redISub(o.redMul(l)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},o.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=n.redSub(r),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),l=n.redMul(u),h=a.redSqr().redIAdd(c).redISub(l).redISub(l),f=a.redMul(l.redISub(h)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(h,f,d)},o.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}for(var r=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s),n=0;n<t;n++){var l=o.redSqr(),h=c.redSqr(),f=h.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(u)),p=o.redMul(h),g=d.redSqr().redISub(p.redAdd(p)),v=p.redISub(g),m=d.redMul(v);m=m.redIAdd(m).redISub(f);var y=c.redMul(a);n+1<t&&(u=u.redMul(f)),o=g,a=y,c=m}return this.curve.jpoint(o,c.redMul(i),a)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},o.prototype._zeroDbl=function(){if(this.zOne){var t=this.x.redSqr(),e=this.y.redSqr(),n=e.redSqr(),r=this.x.redAdd(e).redSqr().redISub(t).redISub(n);r=r.redIAdd(r);var i=t.redAdd(t).redIAdd(t),o=i.redSqr().redISub(r).redISub(r),s=n.redIAdd(n);s=s.redIAdd(s),s=s.redIAdd(s);var a=o,u=i.redMul(r.redISub(o)).redISub(s),c=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),f=h.redSqr(),d=this.x.redAdd(h).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),v=f.redIAdd(f);v=v.redIAdd(v),v=v.redIAdd(v);var a=g.redISub(d).redISub(d),u=p.redMul(d.redISub(a)).redISub(v),c=this.y.redMul(this.z);c=c.redIAdd(c)}return this.curve.jpoint(a,u,c)},o.prototype._threeDbl=function(){if(this.zOne){var t=this.x.redSqr(),e=this.y.redSqr(),n=e.redSqr(),r=this.x.redAdd(e).redSqr().redISub(t).redISub(n);r=r.redIAdd(r);var i=t.redAdd(t).redIAdd(t).redIAdd(this.curve.a),o=i.redSqr().redISub(r).redISub(r),s=o,a=n.redIAdd(n);a=a.redIAdd(a),a=a.redIAdd(a);var u=i.redMul(r.redISub(o)).redISub(a),c=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),f=this.x.redMul(h),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f);p=p.redIAdd(p);var g=p.redAdd(p),s=d.redSqr().redISub(g),c=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l),v=h.redSqr();v=v.redIAdd(v),v=v.redIAdd(v),v=v.redIAdd(v);var u=d.redMul(p.redISub(s)).redISub(v)}return this.curve.jpoint(s,u,c)},o.prototype._dbl=function(){var t=this.curve.a,e=(this.curve.tinv,this.x),n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e);u=u.redIAdd(u);var c=u.redMul(s),l=a.redSqr().redISub(c.redAdd(c)),h=c.redISub(l),f=s.redSqr();f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=a.redMul(h).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(l,d,p)},o.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(r);s=s.redIAdd(s),s=s.redAdd(s).redIAdd(s),s=s.redISub(o);var a=s.redSqr(),u=r.redIAdd(r);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),l=e.redMul(c);l=l.redIAdd(l),l=l.redIAdd(l);var h=this.x.redMul(a).redISub(l);h=h.redIAdd(h),h=h.redIAdd(h);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=f.redIAdd(f),f=f.redIAdd(f),f=f.redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(h,f,d)},o.prototype.mul=function(t,e){return t=new c(t,e),this.curve._wnafMul(this,t)},o.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},o.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},o.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../../elliptic":35,"../curve":38,assert:1,"bn.js":32,inherits:149}],41:[function(t,e,n){function r(t){"short"===t.type?this.curve=new u.curve["short"](t):"edwards"===t.type?this.curve=new u.curve.edwards(t):this.curve=new u.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function i(t,e){Object.defineProperty(o,t,{configurable:!0,enumerable:!0,get:function(){var n=new r(e);return Object.defineProperty(o,t,{configurable:!0,enumerable:!0,value:n}),n}})}var o=n,s=t("assert"),a=t("hash.js"),u=(t("bn.js"),t("../elliptic"));o.PresetCurve=r,i("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),i("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),i("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),i("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"0",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),i("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]}),i("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]
},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]})},{"../elliptic":35,assert:1,"bn.js":32,"hash.js":48}],42:[function(t,e,n){function r(t){return this instanceof r?("string"==typeof t&&(i(s.curves.hasOwnProperty(t),"Unknown curve "+t),t=s.curves[t]),t instanceof s.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.shrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),void(this.hash=t.hash||t.curve.hash)):new r(t)}var i=t("assert"),o=t("bn.js"),s=t("../../elliptic"),a=(s.utils,t("./key")),u=t("./signature");e.exports=r,r.prototype.keyPair=function(t,e){return new a(this,t,e)},r.prototype.genKeyPair=function(t){t||(t={});for(var e=new s.hmacDRBG({hash:this.hash,pers:t.pers,entropy:t.entropy||s.rand(this.hash.hmacStrength),nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new o(2));;){var i=new o(e.generate(n));if(!(i.cmp(r)>0))return i.iaddn(1),this.keyPair(i)}},r.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.shrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},r.prototype.sign=function(t,e,n){e=this.keyPair(e,"hex"),t=this._truncateToN(new o(t,16)),n||(n={});for(var r=this.n.byteLength(),i=e.getPrivate().toArray(),a=i.length;a<21;a++)i.unshift(0);for(var c=t.toArray(),a=c.length;a<r;a++)c.unshift(0);for(var l=new s.hmacDRBG({hash:this.hash,entropy:i,nonce:c}),h=this.n.sub(new o(1));;){var f=new o(l.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(h)>=0)){var d=this.g.mul(f);if(!d.isInfinity()){var p=d.getX().mod(this.n);if(0!==p.cmpn(0)){var g=f.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t)).mod(this.n);if(0!==g.cmpn(0))return n.canonical&&g.cmp(this.nh)>0&&(g=this.n.sub(g)),new u(p,g)}}}}},r.prototype.verify=function(t,e,n){t=this._truncateToN(new o(t,16)),n=this.keyPair(n,"hex"),e=new u(e,"hex");var r=e.r,i=e.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;var s=i.invm(this.n),a=s.mul(t).mod(this.n),c=s.mul(r).mod(this.n),l=this.g.mulAdd(a,n.getPublic(),c);return!l.isInfinity()&&0===l.getX().mod(this.n).cmp(r)}},{"../../elliptic":35,"./key":43,"./signature":44,assert:1,"bn.js":32}],43:[function(t,e,n){function r(t,e,n){return e instanceof r?e:n instanceof r?n:(e||(e=n,n=null),null!==e&&"object"==typeof e&&(e.x?(n=e,e=null):(e.priv||e.pub)&&(n=e.pub,e=e.priv)),this.ec=t,this.priv=null,this.pub=null,void(this._importPublicHex(e,n)||("hex"===n&&(n=null),e&&this._importPrivate(e),n&&this._importPublic(n))))}var i=(t("assert"),t("bn.js")),o=t("../../elliptic"),s=o.utils;e.exports=r,r.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(t,e){if(this.pub||(this.pub=this.ec.g.mul(this.priv)),"string"==typeof t&&(e=t,t=null),!e)return this.pub;for(var n=this.ec.curve.p.byteLength(),r=this.pub.getX().toArray(),i=r.length;i<n;i++)r.unshift(0);if(t)var o=[this.pub.getY().isEven()?2:3].concat(r);else{for(var a=this.pub.getY().toArray(),i=a.length;i<n;i++)a.unshift(0);var o=[4].concat(r,a)}return s.encode(o,e)},r.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(t){this.priv=new i(t,16),this.priv=this.priv.mod(this.ec.curve.n)},r.prototype._importPublic=function(t){this.pub=this.ec.curve.point(t.x,t.y)},r.prototype._importPublicHex=function(t,e){t=s.toArray(t,e);var n=this.ec.curve.p.byteLength();if(4===t[0]&&t.length-1===2*n)this.pub=this.ec.curve.point(t.slice(1,1+n),t.slice(1+n,1+2*n));else{if(2!==t[0]&&3!==t[0]||t.length-1!==n)return!1;this.pub=this.ec.curve.pointFromX(3===t[0],t.slice(1,1+n))}return!0},r.prototype.derive=function(t){return t.mul(this.priv).getX()},r.prototype.sign=function(t){return this.ec.sign(t,this)},r.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../../elliptic":35,assert:1,"bn.js":32}],44:[function(t,e,n){function r(t,e){return t instanceof r?t:void(this._importDER(t,e)||(i(t&&e,"Signature without r or s"),this.r=new o(t,16),this.s=new o(e,16)))}var i=t("assert"),o=t("bn.js"),s=t("../../elliptic"),a=s.utils;e.exports=r,r.prototype._importDER=function(t,e){if(t=a.toArray(t,e),t.length<6||48!==t[0]||2!==t[2])return!1;var n=t[1];if(1+n>t.length)return!1;var r=t[3];if(r>=128)return!1;if(4+r+2>=t.length)return!1;if(2!==t[4+r])return!1;var i=t[5+r];return!(i>=128)&&(!(4+r+2+i>t.length)&&(this.r=new o(t.slice(4,4+r)),this.s=new o(t.slice(4+r+2,4+r+2+i)),!0))},r.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n));var r=e.length+n.length+4,i=[48,r,2,e.length];return i=i.concat(e,[2,n.length],n),a.encode(i,t)}},{"../../elliptic":35,assert:1,"bn.js":32}],45:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this.reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=a.toArray(t.entropy,t.entropyEnc),n=a.toArray(t.nonce,t.nonceEnc),o=a.toArray(t.pers,t.persEnc);i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,o)}var i=t("assert"),o=t("hash.js"),s=t("../elliptic"),a=s.utils;e.exports=r,r.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this.reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},r.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(t,e,n,r){"string"!=typeof e&&(r=n,n=e,e=null),t=a.toBuffer(t,e),n=a.toBuffer(n,r),i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this.reseed=1},r.prototype.generate=function(t,e,n,r){if(this.reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=n,n=e,e=null),n&&(n=a.toArray(n,r),this._update(n));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(n),this.reseed++,a.encode(o,e)}},{"../elliptic":35,assert:1,"hash.js":48}],46:[function(t,e,n){function r(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!==0&&(t="0"+t);for(var r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}else for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}function i(t){for(var e="",n=0;n<t.length;n++)e+=o(t[n].toString(16));return e}function o(t){return 1===t.length?"0"+t:t}function s(t,e){for(var n=[],r=1<<e+1,i=t.clone();i.cmpn(1)>=0;){var o;if(i.isOdd()){var s=i.andln(r-1);o=s>(r>>1)-1?(r>>1)-s:s,i.isubn(o)}else o=0;n.push(o);for(var a=0!==i.cmpn(0)&&0===i.andln(r-1)?e+1:1,u=1;u<a;u++)n.push(0);i.ishrn(a)}return n}function a(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;t.cmpn(-r)>0||e.cmpn(-i)>0;){var o=t.andln(3)+r&3,s=e.andln(3)+i&3;3===o&&(o=-1),3===s&&(s=-1);var a;if(0===(1&o))a=0;else{var u=t.andln(7)+r&7;a=3!==u&&5!==u||2!==s?o:-o}n[0].push(a);var c;if(0===(1&s))c=0;else{var u=e.andln(7)+i&7;c=3!==u&&5!==u||2!==o?s:-s}n[1].push(c),2*r===a+1&&(r=1-r),2*i===c+1&&(i=1-i),t.ishrn(1),e.ishrn(1)}return n}var u=(t("assert"),t("bn.js"),n);u.toArray=r,u.toHex=i,u.encode=function(t,e){return"hex"===e?i(t):t},u.zero2=o,u.getNAF=s,u.getJSF=a},{assert:1,"bn.js":32}],47:[function(t,e,n){function r(t){this.rand=t}var i;if(e.exports=function(t){return i||(i=new r(null)),i.generate(t)},e.exports.Rand=r,r.prototype.generate=function(t){return this._rand(t)},"object"==typeof window)window.crypto&&window.crypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return window.crypto.getRandomValues(e),e}:window.msCrypto&&window.msCrypto.getRandomValues?r.prototype._rand=function(t){var e=new Uint8Array(t);return window.msCrypto.getRandomValues(e),e}:r.prototype._rand=function(){throw new Error("Not implemented yet")};else try{var o=t("crypto");r.prototype._rand=function(t){return o.randomBytes(t)}}catch(s){r.prototype._rand=function(t){for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e}}},{}],48:[function(t,e,n){var r=n;r.utils=t("./hash/utils"),r.common=t("./hash/common"),r.sha=t("./hash/sha"),r.ripemd=t("./hash/ripemd"),r.hmac=t("./hash/hmac"),r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.ripemd160=r.ripemd.ripemd160},{"./hash/common":49,"./hash/hmac":50,"./hash/ripemd":51,"./hash/sha":52,"./hash/utils":53}],49:[function(t,e,n){function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.endian="big"}var i=t("../hash"),o=i.utils,s=o.assert;n.BlockHash=r,r.prototype.update=function(t,e){if(t=o.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this.blockSize/8){t=this.pending;var n=t.length%(this.blockSize/8);this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=o.join32(t.slice(0,t.length-n),this.endian);for(var r=0;r<t.length;r+=this.blockSize/32)this._update(t.slice(r,r+this.blockSize/32))}return this},r.prototype.digest=function(t){return this.update(this._pad()),s(null===this.pending),this._digest(t)},r.prototype._pad=function(){var t=this.pendingTotal,e=this.blockSize/8,n=e-(t+8)%e,r=new Array(n+8);r[0]=128;for(var i=1;i<n;i++)r[i]=0;return t<<=3,"big"===this.endian?(r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t):(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0),r}},{"../hash":48}],50:[function(t,e,n){function r(t,e,n){return this instanceof r?(this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,void this._init(o.toArray(e,n))):new r(t,e,n)}var i=t("../hash"),o=i.utils,s=o.assert;e.exports=r,r.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),s(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(var n=t.slice(),e=0;e<t.length;e++)t[e]^=54,n[e]^=92;this.hash={inner:(new this.Hash).update(t),outer:(new this.Hash).update(n)}},r.prototype.update=function(t,e){return this.hash.inner.update(t,e),this},r.prototype.digest=function(t){return this.hash.outer.update(this.hash.inner.digest()),this.hash.outer.digest(t)}},{"../hash":48}],51:[function(t,e,n){function r(){return this instanceof r?(d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],void(this.endian="little")):new r}function i(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function o(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function s(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var a=t("../hash"),u=a.utils,c=u.rotl32,l=u.sum32,h=u.sum32_3,f=u.sum32_4,d=a.common.BlockHash;u.inherits(r,d),n.ripemd160=r,r.blockSize=512,r.outSize=160,r.hmacStrength=192,r.prototype._update=function(t){for(var e=this.h[0],n=this.h[1],r=this.h[2],a=this.h[3],u=this.h[4],d=e,y=n,b=r,_=a,w=u,S=0;S<80;S++){var x=l(c(f(e,i(S,n,r,a),t[p[S]],o(S)),v[S]),u);e=u,u=a,a=c(r,10),r=n,n=x,x=l(c(f(d,i(79-S,y,b,_),t[g[S]],s(S)),m[S]),w),d=w,w=_,_=c(b,10),b=y,y=x}x=h(this.h[1],r,_),this.h[1]=h(this.h[2],a,w),this.h[2]=h(this.h[3],u,d),this.h[3]=h(this.h[4],e,y),this.h[4]=h(this.h[0],n,b),this.h[0]=x},r.prototype._digest=function(t){return"hex"===t?u.toHex32(this.h,"little"):u.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],v=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"../hash":48}],52:[function(t,e,n){function r(){return this instanceof r?(y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],void(this.k=b)):new r}function i(){return this instanceof i?(r.call(this),void(this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])):new i}function o(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}function a(t){return p(t,2)^p(t,13)^p(t,22)}function u(t){return p(t,6)^p(t,11)^p(t,25)}function c(t){return p(t,7)^p(t,18)^t>>>3}function l(t){return p(t,17)^p(t,19)^t>>>10}var h=t("../hash"),f=h.utils,d=f.assert,p=f.rotr32,g=(f.rotl32,f.sum32),v=f.sum32_4,m=f.sum32_5,y=h.common.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];f.inherits(r,y),n.sha256=r,r.blockSize=512,r.outSize=256,r.hmacStrength=192,r.prototype._update=function(t){for(var e=new Array(64),n=0;n<16;n++)e[n]=t[n];
for(;n<e.length;n++)e[n]=v(l(e[n-2]),e[n-7],c(e[n-15]),e[n-16]);var r=this.h[0],i=this.h[1],h=this.h[2],f=this.h[3],p=this.h[4],y=this.h[5],b=this.h[6],_=this.h[7];d(this.k.length===e.length);for(var n=0;n<e.length;n++){var w=m(_,u(p),o(p,y,b),this.k[n],e[n]),S=g(a(r),s(r,i,h));_=b,b=y,y=p,p=g(f,w),f=h,h=i,i=r,r=g(w,S)}this.h[0]=g(this.h[0],r),this.h[1]=g(this.h[1],i),this.h[2]=g(this.h[2],h),this.h[3]=g(this.h[3],f),this.h[4]=g(this.h[4],p),this.h[5]=g(this.h[5],y),this.h[6]=g(this.h[6],b),this.h[7]=g(this.h[7],_)},r.prototype._digest=function(t){return"hex"===t?f.toHex32(this.h,"big"):f.split32(this.h,"big")},f.inherits(i,r),n.sha224=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.prototype._digest=function(t){return"hex"===t?f.toHex32(this.h.slice(0,7),"big"):f.split32(this.h.slice(0,7),"big")}},{"../hash":48}],53:[function(t,e,n){function r(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"==typeof t)if(e){if("hex"===e){t=t.replace(/[^a-z0-9]+/gi,""),t.length%2!=0&&(t="0"+t);for(var r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}else for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}function i(t){for(var e="",n=0;n<t.length;n++)e+=s(t[n].toString(16));return e}function o(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=i>>>24|i>>>8&65280|i<<8&16711680|(255&i)<<24,i<0&&(i+=4294967296)),n+=a(i.toString(16))}return n}function s(t){return 1===t.length?"0"+t:t}function a(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}function u(t,e){v(t.length%4===0);for(var n=new Array(t.length/4),r=0,i=0;r<n.length;r++,i+=4){var o;o="big"===e?t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]:t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i],o<0&&(o+=4294967296),n[r]=o}return n}function c(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n}function l(t,e){return t>>>e|t<<32-e}function h(t,e){return t<<e|t>>>32-e}function f(t,e){var n=t+e&4294967295;return n<0&&(n+=4294967296),n}function d(t,e,n){var r=t+e+n&4294967295;return r<0&&(r+=4294967296),r}function p(t,e,n,r){var i=t+e+n+r&4294967295;return i<0&&(i+=4294967296),i}function g(t,e,n,r,i){var o=t+e+n+r+i&4294967295;return o<0&&(o+=4294967296),o}function v(t,e){if(!t)throw new Error(e||"Assertion failed")}var m=n;m.toArray=r,m.toHex=i,m.toHex32=o,m.zero2=s,m.zero8=a,m.join32=u,m.split32=c,m.rotr32=l,m.rotl32=h,m.sum32=f,m.sum32_3=d,m.sum32_4=p,m.sum32_5=g,m.assert=v,"function"==typeof Object.create?m.inherits=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:m.inherits=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],54:[function(t,e,n){e.exports={name:"elliptic",version:"0.15.17",description:"EC cryptography",main:"lib/elliptic.js",scripts:{test:"mocha --reporter=spec test/*-test.js"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:{name:"Fedor Indutny",email:"fedor@indutny.com"},license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{browserify:"^3.44.2",mocha:"^1.18.2","uglify-js":"^2.4.13"},dependencies:{"bn.js":"^0.16.0",brorand:"^1.0.1","hash.js":"^0.2.0",inherits:"^2.0.1"},readme:"# Elliptic [![Build Status](https://secure.travis-ci.org/indutny/elliptic.png)](http://travis-ci.org/indutny/elliptic)\n\nFast elliptic-curve cryptography in a plain javascript implementation.\n\nNOTE: Please take a look at http://safecurves.cr.yp.to/ before choosing a curve\nfor your cryptography operations.\n\n## Incentive\n\nECC is much slower than regular RSA cryptography, the JS implementations are\neven more slower.\n\n## Benchmarks\n\n```bash\n$ node benchmarks/index.js\nBenchmarking: sign\nelliptic#sign x 262 ops/sec 0.51% (177 runs sampled)\neccjs#sign x 55.91 ops/sec 0.90% (144 runs sampled)\n------------------------\nFastest is elliptic#sign\n========================\nBenchmarking: verify\nelliptic#verify x 113 ops/sec 0.50% (166 runs sampled)\neccjs#verify x 48.56 ops/sec 0.36% (125 runs sampled)\n------------------------\nFastest is elliptic#verify\n========================\nBenchmarking: gen\nelliptic#gen x 294 ops/sec 0.43% (176 runs sampled)\neccjs#gen x 62.25 ops/sec 0.63% (129 runs sampled)\n------------------------\nFastest is elliptic#gen\n========================\nBenchmarking: ecdh\nelliptic#ecdh x 136 ops/sec 0.85% (156 runs sampled)\n------------------------\nFastest is elliptic#ecdh\n========================\n```\n\n## API\n\n### ECDSA\n\n```javascript\nvar EC = require('elliptic').ec;\n\n// Create and initialize EC context\n// (better do it once and reuse it)\nvar ec = new EC('secp256k1');\n\n// Generate keys\nvar key = ec.genKeyPair();\n\n// Sign message (must be an array, or it'll be treated as a hex sequence)\nvar msg = [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 ];\nvar signature = key.sign(msg);\n\n// Export DER encoded signature in Array\nvar derSign = signature.toDER();\n\n// Verify signature\nconsole.log(key.verify(msg, derSign));\n```\n\n### ECDH\n\n```javascript\n// Generate keys\nvar key1 = ec.genKeyPair();\nvar key2 = ec.genKeyPair();\n\nvar shared1 = key1.derive(key2.getPublic());\nvar shared2 = key2.derive(key1.getPublic());\n\nconsole.log('Both shared secrets are BN instances');\nconsole.log(shared1.toString(16));\nconsole.log(shared2.toString(16));\n```\n\nNOTE: `.derive()` returns a [BN][1] instance.\n\n## Supported curves\n\nElliptic.js support following curve types:\n\n* Short Weierstrass\n* Montgomery\n* Edwards\n* Twisted Edwards\n\nFollowing curve 'presets' are embedded into the library:\n\n* `secp256k1`\n* `p192`\n* `p224`\n* `p256`\n* `curve25519`\n* `ed25519`\n\nNOTE: That `curve25519` could not be used for ECDSA, use `ed25519` instead.\n\n### Implementation details\n\nECDSA is using deterministic `k` value generation as per [RFC6979][0]. Most of\nthe curve operations are performed on non-affine coordinates (either projective\nor extended), various windowing techniques are used for different cases.\n\nAll operations are performed in reduction context using [bn.js][1], hashing is\nprovided by [hash.js][2]\n\n#### LICENSE\n\nThis software is licensed under the MIT License.\n\nCopyright Fedor Indutny, 2014.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to permit\npersons to whom the Software is furnished to do so, subject to the\nfollowing conditions:\n\nThe above copyright notice and this permission notice shall be included\nin all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\nNO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\nDAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\nOTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\nUSE OR OTHER DEALINGS IN THE SOFTWARE.\n\n[0]: http://tools.ietf.org/html/rfc6979\n[1]: https://github.com/indutny/bn.js\n[2]: https://github.com/indutny/hash.js\n",readmeFilename:"README.md",_id:"elliptic@0.15.17",_from:"elliptic@^0.15.14"}},{}],55:[function(t,e,n){(function(t){e.exports=function(e,n,r,i){i/=8;for(var o,s,a,u=0,c=new t(i),l=0;;){if(o=e.createHash("md5"),l++>0&&o.update(s),o.update(n),o.update(r),s=o.digest(),a=0,i>0)for(;;){if(0===i)break;if(a===s.length)break;c[u++]=s[a++],i--}if(0===i)break}for(a=0;a<s.length;a++)s[a]=0;return c}}).call(this,t("buffer").Buffer)},{buffer:3}],56:[function(t,e,n){e.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],57:[function(t,e,n){var r=t("asn1.js"),i=t("asn1.js-rfc3280"),o=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("modulus")["int"](),this.key("publicExponent")["int"](),this.key("privateExponent")["int"](),this.key("prime1")["int"](),this.key("prime2")["int"](),this.key("exponent1")["int"](),this.key("exponent2")["int"](),this.key("coefficient")["int"]())});n.RSAPrivateKey=o;var s=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus")["int"](),this.key("publicExponent")["int"]())});n.RSAPublicKey=s;var a=i.SubjectPublicKeyInfo;n.PublicKey=a;var u=r.define("ECPublicKey",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").bitstr())});n.ECPublicKey=u;var c=r.define("ECPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("curve").objid()),this.key("subjectPrivateKey").octstr())});n.ECPrivateWrap=c;var l=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").use(i.AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});n.PrivateKey=l;var h=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters")["int"]())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}),f=r.define("dsaParams",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]()))});n.EncryptedPrivateKey=h;var d=r.define("DSAPublicKey",function(){this.seq().obj(this.key("algorithm").use(f),this.key("subjectPublicKey").bitstr())});n.DSAPublicKey=d;var p=r.define("DSAPrivateWrap",function(){this.seq().obj(this.key("version")["int"](),this.key("algorithm").seq().obj(this.key("id").objid(),this.key("parameters").seq().obj(this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"]())),this.key("subjectPrivateKey").octstr())});n.DSAPrivateWrap=p;var g=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("p")["int"](),this.key("q")["int"](),this.key("g")["int"](),this.key("pub_key")["int"](),this.key("priv_key")["int"]())});n.DSAPrivateKey=g,n.DSAparam=r.define("DSAparam",function(){this["int"]()});var v=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(m),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=v;var m=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),y=r.define("ECPrivateKey2",function(){this.seq().obj(this.key("version")["int"](),this.key("privateKey").octstr(),this.key("publicKey").seq().obj(this.key("key").bitstr()))});n.ECPrivateKey2=y,n.signature=r.define("signature",function(){this.seq().obj(this.key("r")["int"](),this.key("s")["int"]())})},{"asn1.js":61,"asn1.js-rfc3280":60}],58:[function(t,e,n){(function(n){function r(t){for(var e=[];t;){if(t.length<64){e.push(t);break}e.push(t.slice(0,64)),t=t.slice(64)}return e.join("\n")}var i=/Proc-Type: 4,ENCRYPTED\n\r?DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)\n\r?\n\r?([0-9A-z\n\r\+\/\=]+)\n\r?/m,o=/^-----BEGIN (.*)-----\n/,s=t("./EVP_BytesToKey");e.exports=function(t,e,a){var u=t.toString(),c=u.match(i);if(!c)return t;var l="aes"+c[1],h=new n(c[2],"hex"),f=new n(c[3].replace(/\n\r?/g,""),"base64"),d=s(a,e,h.slice(0,8),parseInt(c[1])),p=[],g=a.createDecipheriv(l,d,h);p.push(g.update(f)),p.push(g["final"]());var v=n.concat(p).toString("base64"),m=u.match(o)[1];return"-----BEGIN "+m+"-----\n"+r(v)+"\n-----END "+m+"-----\n"}}).call(this,t("buffer").Buffer)},{"./EVP_BytesToKey":55,buffer:3}],59:[function(t,e,n){(function(n){function r(t,e){var r;"object"!=typeof t||n.isBuffer(t)||(r=t.passphrase,t=t.key),"string"==typeof t&&(t=new n(t)),r&&(t=u(t,r,e));var a,c,l=o.strip(t),h=l.tag,f=new n(l.base64,"base64");switch(h){case"PUBLIC KEY":switch(c=s.PublicKey.decode(f,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPublicKey.decode(c.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return{type:"ec",data:s.ECPublicKey.decode(f,"der")};case"1.2.840.10040.4.1":return c=s.DSAPublicKey.decode(f,"der"),c.algorithm.parameters.pub_key=s.DSAparam.decode(c.subjectPublicKey.data,"der"),{type:"dsa",data:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+h);case"ENCRYPTED PRIVATE KEY":f=s.EncryptedPrivateKey.decode(f,"der"),f=i(e,f,r);case"PRIVATE KEY":switch(c=s.PrivateKey.decode(f,"der"),a=c.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return s.RSAPrivateKey.decode(c.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return c=s.ECPrivateWrap.decode(f,"der"),{curve:c.algorithm.curve,privateKey:s.ECPrivateKey.decode(c.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return c=s.DSAPrivateWrap.decode(f,"der"),c.algorithm.parameters.priv_key=s.DSAparam.decode(c.subjectPrivateKey,"der"),{type:"dsa",params:c.algorithm.parameters};default:throw new Error("unknown key id "+a)}throw new Error("unknown key type "+h);case"RSA PUBLIC KEY":return s.RSAPublicKey.decode(f,"der");case"RSA PRIVATE KEY":return s.RSAPrivateKey.decode(f,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:s.DSAPrivateKey.decode(f,"der")};case"EC PRIVATE KEY":return f=s.ECPrivateKey.decode(f,"der"),{curve:f.parameters.value,privateKey:f.privateKey};default:throw new Error("unknown key type "+h)}}function i(t,e,r){var i=e.algorithm.decrypt.kde.kdeparams.salt,o=e.algorithm.decrypt.kde.kdeparams.iters,s=a[e.algorithm.decrypt.cipher.algo.join(".")],u=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,l=parseInt(s.split("-")[1],10)/8,h=t.pbkdf2Sync(r,i,o,l),f=t.createDecipheriv(s,h,u),d=[];return d.push(f.update(c)),d.push(f["final"]()),n.concat(d)}var o=t("pemstrip"),s=t("./asn1"),a=t("./aesid.json"),u=t("./fixProc");e.exports=r,r.signature=s.signature}).call(this,t("buffer").Buffer)},{"./aesid.json":56,"./asn1":57,"./fixProc":58,buffer:3,pemstrip:74}],60:[function(t,e,n){try{var r=t("asn1.js")}catch(i){var r=t("../..")}var o=r.define("CRLReason",function(){this["enum"]({0:"unspecified",1:"keyCompromise",2:"CACompromise",3:"affiliationChanged",4:"superseded",5:"cessationOfOperation",6:"certificateHold",8:"removeFromCRL",9:"privilegeWithdrawn",10:"AACompromise"})});n.CRLReason=o;var s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional().any())});n.AlgorithmIdentifier=s;var a=r.define("Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(s),this.key("signature").bitstr())});n.Certificate=a;var u=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").def("v1").explicit(0).use(c),this.key("serialNumber").use(l),this.key("signature").use(s),this.key("issuer").use(m),this.key("validity").use(h),this.key("subject").use(m),this.key("subjectPublicKeyInfo").use(p),this.key("issuerUniqueID").optional().explicit(1).use(d),this.key("subjectUniqueID").optional().explicit(2).use(d),this.key("extensions").optional().explicit(3).use(g))});n.TBSCertificate=u;var c=r.define("Version",function(){this["int"]({0:"v1",1:"v2",2:"v3"})});n.Version=c;var l=r.define("CertificateSerialNumber",function(){this["int"]()});n.CertificateSerialNumber=l;var h=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(f),this.key("notAfter").use(f))});n.Validity=h;var f=r.define("Time",function(){this.choice({utcTime:this.utctime(),genTime:this.gentime()})});n.Time=f;var d=r.define("UniqueIdentifier",function(){this.bitstr()});n.UniqueIdentifier=d;var p=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});n.SubjectPublicKeyInfo=p;var g=r.define("Extensions",function(){this.seqof(v)});n.Extensions=g;var v=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())});n.Extension=v;var m=r.define("Name",function(){this.choice({rdn:this.use(y)})});n.Name=m;var y=r.define("RDNSequence",function(){this.seqof(b)});n.RDNSequence=y;var b=r.define("RelativeDistinguishedName",function(){this.setof(_)});n.RelativeDistinguishedName=b;var _=r.define("AttributeTypeAndValue",function(){this.seq().obj(this.key("type").use(w),this.key("value").use(S))});n.AttributeTypeAndValue=_;var w=r.define("AttributeType",function(){this.objid()});n.AttributeType=w;var S=r.define("AttributeValue",function(){this.any()});n.AttributeValue=S},{"asn1.js":61}],61:[function(t,e,n){var r=n;r.bignum=t("bn.js"),r.define=t("./asn1/api").define,r.base=t("./asn1/base"),r.constants=t("./asn1/constants"),r.decoders=t("./asn1/decoders"),r.encoders=t("./asn1/encoders")},{"./asn1/api":62,"./asn1/base":64,"./asn1/constants":68,"./asn1/decoders":70,"./asn1/encoders":72,"bn.js":73}],62:[function(t,e,n){function r(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}var i=t("../asn1"),o=t("util"),s=t("vm"),a=n;a.define=function(t,e){return new r(t,e)},r.prototype._createNamed=function(t){var e=s.runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})");return o.inherits(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},r.prototype._getDecoder=function(t){return this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(i.decoders[t])),this.decoders[t]},r.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},r.prototype._getEncoder=function(t){return this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(i.encoders[t])),this.encoders[t]},r.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},{"../asn1":61,util:166,vm:167}],63:[function(t,e,n){function r(t,e){return s.call(this,e),a.isBuffer(t)?(this.base=t,this.offset=0,void(this.length=t.length)):void this.error("Input not Buffer")}function i(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof i||(t=new i(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=a.byteLength(t);else{if(!a.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}var o=(t("assert"),t("util")),s=t("../base").Reporter,a=t("buffer").Buffer;o.inherits(r,s),n.DecoderBuffer=r,r.prototype.save=function(){return{offset:this.offset}},r.prototype.restore=function(t){var e=new r(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,e},r.prototype.isEmpty=function(){return this.offset===this.length},r.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},r.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new r(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},r.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},n.EncoderBuffer=i,i.prototype.join=function(t,e){return t||(t=new a(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(t,e),e+=n.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):a.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},{"../base":64,assert:1,buffer:3,util:166}],64:[function(t,e,n){var r=n;r.Reporter=t("./reporter").Reporter,r.DecoderBuffer=t("./buffer").DecoderBuffer,r.EncoderBuffer=t("./buffer").EncoderBuffer,r.Node=t("./node")},{"./buffer":63,"./node":65,"./reporter":66}],65:[function(t,e,n){function r(t,e){var n={};this._baseState=n,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n["default"]=null,n.explicit=null,n.implicit=null,n.parent||(n.children=[],this._wrap())}var i=t("assert"),o=t("../base").Reporter,s=t("../base").EncoderBuffer,a=["seq","seqof","set","setof","octstr","bitstr","objid","bool","gentime","utctime","null_","enum","int","ia5str"],u=["key","obj","use","optional","explicit","implicit","def","choice","any"].concat(a),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];e.exports=r;var l=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit"];r.prototype.clone=function(){var t=this._baseState,e={};l.forEach(function(n){e[n]=t[n]});var n=new this.constructor(e.parent);return n._baseState=e,n},r.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}},this)},r.prototype._init=function(t){var e=this._baseState;i(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),i.equal(e.children.length,1,"Root node can have only one child")},r.prototype._useArgs=function(t){var e=this._baseState,n=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==n.length&&(i(null===e.children),e.children=n,n.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(i(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(n){n==(0|n)&&(n|=0);var r=t[n];e[r]=n}),e}))},c.forEach(function(t){r.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){r.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return i(null===e.tag),e.tag=t,this._useArgs(n),this}}),r.prototype.use=function(t){var e=this._baseState;return i(null===e.use),e.use=t,this},r.prototype.optional=function(){var t=this._baseState;return t.optional=!0,this},r.prototype.def=function(t){var e=this._baseState;return i(null===e["default"]),e["default"]=t,e.optional=!0,this},r.prototype.explicit=function(t){var e=this._baseState;return i(null===e.explicit&&null===e.implicit),e.explicit=t,this},r.prototype.implicit=function(t){var e=this._baseState;return i(null===e.explicit&&null===e.implicit),e.implicit=t,this},r.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},r.prototype.key=function h(h){var t=this._baseState;return i(null===t.key),t.key=h,this},r.prototype.any=function(){var t=this._baseState;return t.any=!0,this},r.prototype.choice=function(t){var e=this._baseState;return i(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},r.prototype._decode=function(t){var e=this._baseState;if(null===e.parent)return t.wrapResult(e.children[0]._decode(t));var n,r=e["default"],i=!0;if(null!==e.key&&(n=t.enterKey(e.key)),e.optional&&(i=this._peekTag(t,null!==e.explicit?e.explicit:null!==e.implicit?e.implicit:e.tag||0),t.isError(i)))return i;var o;if(e.obj&&i&&(o=t.enterObject()),i){if(null!==e.explicit){var s=this._decodeTag(t,e.explicit);if(t.isError(s))return s;t=s}if(null===e.use&&null===e.choice){if(e.any)var a=t.save();var u=this._decodeTag(t,null!==e.implicit?e.implicit:e.tag,e.any);if(t.isError(u))return u;e.any?r=t.raw(a):t=u}if(r=e.any?r:null===e.choice?this._decodeGeneric(e.tag,t):this._decodeChoice(t),t.isError(r))return r;if(!e.any&&null===e.choice&&null!==e.children){var c=e.children.some(function(e){e._decode(t)});if(c)return err}}return e.obj&&i&&(r=t.leaveObject(o)),null===e.key||null===r&&i!==!0||t.leaveKey(n,e.key,r),r},r.prototype._decodeGeneric=function(t,e){var n=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,n.args[0]):"octstr"===t||"bitstr"===t||"ia5str"===t?this._decodeStr(e,t):"objid"===t&&n.args?this._decodeObjid(e,n.args[0],n.args[1]):"objid"===t?this._decodeObjid(e,null,null):"gentime"===t||"utctime"===t?this._decodeTime(e,t):"null_"===t?this._decodeNull(e):"bool"===t?this._decodeBool(e):"int"===t||"enum"===t?this._decodeInt(e,n.args&&n.args[0]):null!==n.use?this._getUse(n.use,e._reporterState.obj)._decode(e):e.error("unknown tag: "+t)},r.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),i(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},r.prototype._decodeChoice=function(t){var e=this._baseState,n=null,r=!1;return Object.keys(e.choice).some(function(i){var o=t.save(),s=e.choice[i];try{var a=s._decode(t);if(t.isError(a))return!1;n={type:i,value:a},r=!0}catch(u){return t.restore(o),!1}return!0},this),r?n:t.error("Choice not matched")},r.prototype._createEncoderBuffer=function(t){return new s(t,this.reporter)},r.prototype._encode=function(t,e,n){var r=this._baseState;if(null===r["default"]||r["default"]!==t){var i=this._encodeValue(t,e,n);if(void 0!==i&&!this._skipDefault(i,e,n))return i}},r.prototype._encodeValue=function(t,e,n){var r=this._baseState;if(null===r.parent)return r.children[0]._encode(t,e||new o);var i=null;if(this.reporter=e,r.optional&&void 0===t){if(null===r["default"])return;t=r["default"]}var s=null,a=!1;if(r.any)i=this._createEncoderBuffer(t);else if(r.choice)i=this._encodeChoice(t,e);else if(r.children)s=r.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var r=e.enterKey(n._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var i=n._encode(t[n._baseState.key],e,t);return e.leaveKey(r),i},this).filter(function(t){return t}),s=this._createEncoderBuffer(s);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return e.error("Too many args for : "+r.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(n){var r=this._baseState;return this._getUse(r.args[0],t)._encode(n,e)},u))}else null!==r.use?i=this._getUse(r.use,n)._encode(t,e):(s=this._encodePrimitive(r.tag,t),a=!0);var i;if(!r.any&&null===r.choice){var c=null!==r.implicit?r.implicit:r.tag,l=null===r.implicit?"universal":"context";null===c?null===r.use&&e.error("Tag could be ommited only for .use()"):null===r.use&&(i=this._encodeComposite(c,a,l,s))}return null!==r.explicit&&(i=this._encodeComposite(r.explicit,!1,"context",i)),i},r.prototype._encodeChoice=function(t,e){var n=this._baseState,r=n.choice[t.type];return r||i(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},r.prototype._encodePrimitive=function(t,e){var n=this._baseState;if("octstr"===t||"bitstr"===t||"ia5str"===t)return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);throw new Error("Unsupported tag: "+t)}},{"../base":64,assert:1}],66:[function(t,e,n){function r(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function i(t,e){this.path=t,this.rethrow(e)}var o=t("util");n.Reporter=r,r.prototype.isError=function(t){return t instanceof i},r.prototype.enterKey=function(t){return this._reporterState.path.push(t)},r.prototype.leaveKey=function(t,e,n){var r=this._reporterState;r.path=r.path.slice(0,t-1),null!==r.obj&&(r.obj[e]=n)},r.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},r.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},r.prototype.error=function(t){var e,n=this._reporterState,r=t instanceof i;if(e=r?t:new i(n.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},r.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},o.inherits(i,Error),i.prototype.rethrow=function(t){return this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace(this,i),this}},{util:166}],67:[function(t,e,n){var r=t("../constants");n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=r._reverse(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=r._reverse(n.tag)},{"../constants":68}],68:[function(t,e,n){var r=n;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n=0|n);var r=t[n];e[r]=n}),e},r.der=t("./der")},{"./der":67}],69:[function(t,e,n){function r(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new i,this.tree._init(t.body)}function i(t){c.Node.call(this,"der",t)}function o(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var r=h.tagClass[n>>6],i=0===(32&n);if(31===(31&n)){var o=n;for(n=0;128===(128&o);){if(o=t.readUInt8(e),t.isError(o))return o;n<<=7,n|=127&o}}else n&=31;var s=h.tag[n];return{cls:r,primitive:i,tag:n,tagStr:s}}function s(t,e,n){var r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0===(128&r))return r;var i=127&r;if(i>=4)return t.error("length octect is too long");r=0;for(var o=0;o<i;o++){r<<=8;var s=t.readUInt8(n);if(t.isError(s))return s;r|=s}return r}var a=t("util"),u=t("../../asn1"),c=u.base,l=u.bignum,h=u.constants.der;e.exports=r,r.prototype.decode=function(t,e){return t instanceof c.DecoderBuffer||(t=new c.DecoderBuffer(t,e)),this.tree._decode(t,e)},a.inherits(i,c.Node),i.prototype._peekTag=function(t,e){if(t.isEmpty())return!1;var n=t.save(),r=o(t,'Failed to peek tag: "'+e+'"');return t.isError(r)?r:(t.restore(n),r.tag===e||r.tagStr===e)},i.prototype._decodeTag=function(t,e,n){
var r=o(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var i=s(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!n&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var a=t.start(),u=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(u)?u:t.cut(a)},i.prototype._skipUntilEnd=function(t,e){for(;;){var n=o(t,e);if(t.isError(n))return n;var r=s(t,n.primitive,e);if(t.isError(r))return r;var i;if(i=n.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(i))return i;if("end"===n.tagStr)break}},i.prototype._decodeList=function(t,e,n){for(var r=[];!t.isEmpty();){var i=this._peekTag(t,"end");if(t.isError(i))return i;var o=n.decode(t,"der");if(t.isError(o)&&i)break;r.push(o)}return r},i.prototype._decodeStr=function(t,e){if("octstr"===e)return t.raw();if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}return"ia5str"===e?t.raw().toString():this.error("Decoding of string type: "+e+" unsupported")},i.prototype._decodeObjid=function(t,e,n){for(var r=[],i=0;!t.isEmpty();){var o=t.readUInt8();i<<=7,i|=127&o,0===(128&o)&&(r.push(i),i=0)}128&o&&r.push(i);var s=r[0]/40|0,a=r[0]%40;return n?result=r:result=[s,a].concat(r.slice(1)),e&&(result=e[result.join(" ")]),result},i.prototype._decodeTime=function(t,e){var n=t.raw().toString();if("gentime"===e)var r=0|n.slice(0,4),i=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),a=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==e)return this.error("Decoding "+e+" time is not supported yet");var r=0|n.slice(0,2),i=0|n.slice(2,4),o=0|n.slice(4,6),s=0|n.slice(6,8),a=0|n.slice(8,10),u=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,o,s,a,u,0)},i.prototype._decodeNull=function(t){return null},i.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},i.prototype._decodeInt=function(t,e){var n=0,r=t.raw();if(r.length>3)return new l(r);for(;!t.isEmpty();){n<<=8;var i=t.readUInt8();if(t.isError(i))return i;n|=i}return e&&(n=e[n]||n),n},i.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},{"../../asn1":61,util:166}],70:[function(t,e,n){var r=n;r.der=t("./der")},{"./der":69}],71:[function(t,e,n){function r(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new i,this.tree._init(t.body)}function i(t){l.Node.call(this,"der",t)}function o(t){return t<=10?"0"+t:t}function s(t,e,n,r){var i;if("seqof"===t?t="seq":"setof"===t&&(t="set"),f.tagByName.hasOwnProperty(t))i=f.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}return i>=31?r.error("Multi-octet tag encoding unsupported"):(e||(i|=32),i|=f.tagClassByName[n||"universal"]<<6)}var a=t("util"),u=t("buffer").Buffer,c=t("../../asn1"),l=c.base,h=c.bignum,f=c.constants.der;e.exports=r,r.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},a.inherits(i,l.Node),i.prototype._encodeComposite=function(t,e,n,r){var i=s(t,e,n,this.reporter);if(r.length<128){var o=new u(2);return o[0]=i,o[1]=r.length,this._createEncoderBuffer([o,r])}for(var a=1,c=r.length;c>=256;c>>=8)a++;var o=new u(2+a);o[0]=i,o[1]=128|a;for(var c=1+a,l=r.length;l>0;c--,l>>=8)o[c]=255&l;return this._createEncoderBuffer([o,r])},i.prototype._encodeStr=function(t,e){return"octstr"===e?this._createEncoderBuffer(t):"bitstr"===e?this._createEncoderBuffer([0|t.unused,t.data]):"ia5str"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},i.prototype._encodeObjid=function(t,e,n){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/\s+/g);for(var r=0;r<t.length;r++)t[r]|=0}else Array.isArray(t)&&(t=t.slice());if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}for(var i=0,r=0;r<t.length;r++){var o=t[r];for(i++;o>=128;o>>=7)i++}for(var s=new u(i),a=s.length-1,r=t.length-1;r>=0;r--){var o=t[r];for(s[a--]=127&o;(o>>=7)>0;)s[a--]=128|127&o}return this._createEncoderBuffer(s)},i.prototype._encodeTime=function(t,e){var n,r=new Date(t);return"gentime"===e?n=[r.getFullYear(),o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[r.getFullYear()%100,o(r.getUTCMonth()+1),o(r.getUTCDate()),o(r.getUTCHours()),o(r.getUTCMinutes()),o(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},i.prototype._encodeNull=function(){return this._createEncoderBuffer("")},i.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if(null!==h&&t instanceof h){var n=t.toArray();t.sign===!1&&128&n[0]&&n.unshift(0),t=new u(n)}if(u.isBuffer(t)){var r=t.length;0===t.length&&r++;var i=new u(r);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);for(var r=1,o=t;o>=256;o>>=8)r++;for(var i=new Array(r),o=i.length-1;o>=0;o--)i[o]=255&t,t>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new u(i))},i.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},i.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},i.prototype._skipDefault=function(t,e,n){var r,i=this._baseState;if(null===i["default"])return!1;var o=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i["default"],e,n).join()),o.length!==i.defaultBuffer.length)return!1;for(r=0;r<o.length;r++)if(o[r]!==i.defaultBuffer[r])return!1;return!0}},{"../../asn1":61,buffer:3,util:166}],72:[function(t,e,n){var r=n;r.der=t("./der")},{"./der":71}],73:[function(t,e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e){return null!==t&&"object"==typeof t&&Array.isArray(t.words)?t:(this.sign=!1,this.words=null,this.length=0,this.red=null,void(null!==t&&this._init(t||0,e||10)))}function s(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).ishln(this.n).isub(this.p),this.tmp=this._tmp()}function a(){s.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function u(){s.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function c(){s.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function l(){s.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function h(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function f(t){h.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).ishln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.invm(this.m),this.minv=this.rinv.mul(this.r).sub(new o(1)).div(this.m).neg().mod(this.r)}"object"==typeof e&&(e.exports=o),o.BN=o,o.wordSize=26,o.prototype._init=function(t,e){if("number"==typeof t)return t<0&&(this.sign=!0,t=-t),void(t<67108864?(this.words=[67108863&t],this.length=1):(this.words=[67108863&t,t/67108864&67108863],this.length=2));if("object"==typeof t){r("number"==typeof t.length),this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var i=0,n=t.length-1,o=0;n>=0;n-=3){var s=t[n]|t[n-1]<<8|t[n-2]<<16;this.words[o]|=s<<i&67108863,this.words[o+1]=s>>>26-i&67108863,i+=24,i>=26&&(i-=26,o++)}return this.strip()}"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var a=0;"-"===t[0]&&a++,16===e?this._parseHex(t,a):this._parseBase(t,e,a),"-"===t[0]&&(this.sign=!0),this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;for(var r=0,n=t.length-6,i=0;n>=e;n-=6){var o=parseInt(t.slice(n,n+6),16);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303,r+=24,r>=26&&(r-=26,i++)}if(n+6!==e){var o=parseInt(t.slice(e,n+6),16);this.words[i]|=o<<r&67108863,this.words[i+1]|=o>>>26-r&4194303}this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var i=0,s=1,a=0,u=null,c=n;c<t.length;c++){var l,h=t[c];l=10===e||h<="9"?0|h:h>="a"?h.charCodeAt(0)-97+10:h.charCodeAt(0)-65+10,i*=e,i+=l,s*=e,a++,s>1048575&&(r(s<=67108863),u||(u=new o(s)),this.mul(u).copy(this),this.iadd(new o(i)),i=0,s=1,a=0)}0!==a&&(this.mul(new o(s)).copy(this),this.iadd(new o(i)))},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.sign=this.sign,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.sign=!1),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(t,e){if(t=t||10,16===t||"hex"===t){for(var n="",i=0,e=0|e||1,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,n=0!==o||s!==this.length-1?d[6-u.length]+u+n:u+n,i+=2,i>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!==0;)n="0"+n;return this.sign&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=p[t],l=g[t],n="",h=this.clone();for(h.sign=!1;0!==h.cmpn(0);){var f=h.modn(l).toString(t);h=h.idivn(l),n=0!==h.cmpn(0)?d[c-f.length]+f+n:f+n}return 0===this.cmpn(0)&&(n="0"+n),this.sign&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toArray=function(){this.strip();var t=new Array(this.byteLength());t[0]=0;for(var e=this.clone(),n=0;0!==e.cmpn(0);n++){var r=e.andln(255);e.ishrn(8),t[t.length-n-1]=r}return t},o.prototype._countBits=function(t){return t>=33554432?26:t>=16777216?25:t>=8388608?24:t>=4194304?23:t>=2097152?22:t>=1048576?21:t>=524288?20:t>=262144?19:t>=131072?18:t>=65536?17:t>=32768?16:t>=16384?15:t>=8192?14:t>=4096?13:t>=2048?12:t>=1024?11:t>=512?10:t>=256?9:t>=128?8:t>=64?7:t>=32?6:t>=16?5:t>=8?4:t>=4?3:t>=2?2:t>=1?1:0},o.prototype.bitLength=function(){var t=0,e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.byteLength=function(){this.words[this.length-1];return Math.ceil(this.bitLength()/8)},o.prototype.neg=function(){if(0===this.cmpn(0))return this.clone();var t=this.clone();return t.sign=!this.sign,t},o.prototype.iadd=function(t){if(this.sign&&!t.sign){this.sign=!1;var e=this.isub(t);return this.sign=!this.sign,this._normSign()}if(!this.sign&&t.sign){t.sign=!1;var e=this.isub(t);return t.sign=!0,e._normSign()}var n,r;this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++){var e=n.words[o]+r.words[o]+i;this.words[o]=67108863&e,i=e>>>26}for(;0!==i&&o<n.length;o++){var e=n.words[o]+i;this.words[o]=67108863&e,i=e>>>26}if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){if(t.sign&&!this.sign){t.sign=!1;var e=this.sub(t);return t.sign=!0,e}if(!t.sign&&this.sign){this.sign=!1;var e=t.sub(this);return this.sign=!0,e}return this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(t.sign){t.sign=!1;var e=this.iadd(t);return t.sign=!0,e._normSign()}if(this.sign)return this.sign=!1,this.iadd(t),this.sign=!0,this._normSign();var n=this.cmp(t);if(0===n)return this.sign=!1,this.length=1,this.words[0]=0,this;if(n>0)var r=this,i=t;else var r=t,i=this;for(var o=0,s=0;s<i.length;s++){var e=r.words[s]-i.words[s]-o;e<0?(e+=67108864,o=1):o=0,this.words[s]=e}for(;0!==o&&s<r.length;s++){var e=r.words[s]-o;e<0?(e+=67108864,o=1):o=0,this.words[s]=e}if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.sign=!0),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)},o.prototype._smallMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var n=0,r=0;r<e.length-1;r++){for(var i=n>>>26,o=67108863&n,s=Math.min(r,t.length-1),a=Math.max(0,r-this.length+1);a<=s;a++){var u=r-a,c=0|this.words[u],l=0|t.words[a],h=c*l,f=67108863&h;i=i+(h/67108864|0)|0,f=f+o|0,o=67108863&f,i=i+(f>>>26)|0}e.words[r]=o,n=i}return 0!==n?e.words[r]=n:e.length--,e.strip()},o.prototype._bigMulTo=function(t,e){e.sign=t.sign!==this.sign,e.length=this.length+t.length;for(var n=0,r=0,i=0;i<e.length-1;i++){var o=r;r=0;for(var s=67108863&n,a=Math.min(i,t.length-1),u=Math.max(0,i-this.length+1);u<=a;u++){var c=i-u,l=0|this.words[c],h=0|t.words[u],f=l*h,d=67108863&f;o=o+(f/67108864|0)|0,d=d+s|0,s=67108863&d,o=o+(d>>>26)|0,r+=o>>>26,o&=67108863}e.words[i]=s,n=o,o=r}return 0!==n?e.words[i]=n:e.length--,e.strip()},o.prototype.mulTo=function(t,e){var n;return n=this.length+t.length<63?this._smallMulTo(t,e):this._bigMulTo(t,e)},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.imul=function(t){if(0===this.cmpn(0)||0===t.cmpn(0))return this.words[0]=0,this.length=1,this;var e=this.length,n=t.length;this.sign=t.sign!==this.sign,this.length=this.length+t.length,this.words[this.length-1]=0;for(var r=this.length-2;r>=0;r--){for(var i=0,o=0,s=Math.min(r,n-1),a=Math.max(0,r-e+1);a<=s;a++){var u=r-a,c=this.words[u],l=t.words[a],h=c*l,f=67108863&h;i+=h/67108864|0,f+=o,o=67108863&f,i+=f>>>26}this.words[r]=o,this.words[r+1]+=i,i=0}for(var i=0,u=1;u<this.length;u++){var d=this.words[u]+i;this.words[u]=67108863&d,i=d>>>26}return this.strip()},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.mul(this)},o.prototype.ishln=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=67108863>>>26-e<<26-e;this.clone();if(0!==e){for(var o=0,s=0;s<this.length;s++){var a=this.words[s]&i,u=this.words[s]-a<<e;this.words[s]=u|o,o=a>>>26-e}o&&(this.words[s]=o,this.length++)}if(0!==n){for(var s=this.length-1;s>=0;s--)this.words[s+n]=this.words[s];for(var s=0;s<n;s++)this.words[s]=0;this.length+=n}return this.strip()},o.prototype.ishrn=function(t,e,n){r("number"==typeof t&&t>=0),e=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),s=67108863^67108863>>>i<<i,a=n;if(e-=o,e=Math.max(0,e),a){for(var u=0;u<o;u++)a.words[u]=this.words[u];a.length=o}if(0===o);else if(this.length>o){this.length-=o;for(var u=0;u<this.length;u++)this.words[u]=this.words[u+o]}else this.words[0]=0,this.length=1;for(var c=0,u=this.length-1;u>=0&&(0!==c||u>=e);u--){var l=this.words[u];this.words[u]=c<<26-i|l>>>i,c=l&s}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip(),n?{hi:this,lo:a}:this},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},o.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(!this.sign,"imaskn works only with positive numbers"),0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){if(r("number"==typeof t),t<0)return this.isubn(-t);if(this.sign)return 1===this.length&&this.words[0]<t?(this.words[0]=t-this.words[0],this.sign=!1,this):(this.sign=!1,this.isubn(t),this.sign=!0,this);this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"==typeof t),t<0)return this.iaddn(-t);if(this.sign)return this.sign=!1,this.iaddn(t),this.sign=!0,this;this.words[0]-=t;for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.sign=!1,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._wordDiv=function(t,e){for(var n=this.length-t.length,r=this.clone(),i=t,s="mod"!==e&&new o(0);r.length>i.length;){var a=67108864*r.words[r.length-1]+r.words[r.length-2],u=a/i.words[i.length-1],c=u/67108864|0,l=67108863&u;u=new o(null),u.words=[l,c],u.length=2;var n=26*(r.length-i.length-1);if(s){var h=u.shln(n);r.sign?s.isub(h):s.iadd(h)}u=u.mul(i).ishln(n),r.sign?r.iadd(u):r.isub(u)}for(;r.ucmp(i)>=0;){var a=r.words[r.length-1],u=new o(a/i.words[i.length-1]|0),n=26*(r.length-i.length);if(s){var h=u.shln(n);r.sign?s.isub(h):s.iadd(h)}u=u.mul(i).ishln(n),r.sign?r.iadd(u):r.isub(u)}return r.sign&&(s&&s.isubn(1),r.iadd(i)),{div:s?s:null,mod:r}},o.prototype.divmod=function(t,e){if(r(0!==t.cmpn(0)),this.sign&&!t.sign){var n,i,s=this.neg().divmod(t,e);return"mod"!==e&&(n=s.div.neg()),"div"!==e&&(i=0===s.mod.cmpn(0)?s.mod:t.sub(s.mod)),{div:n,mod:i}}if(!this.sign&&t.sign){var n,s=this.divmod(t.neg(),e);return"mod"!==e&&(n=s.div.neg()),{div:n,mod:s.mod}}return this.sign&&t.sign?this.neg().divmod(t.neg(),e):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div").div},o.prototype.mod=function(t){return this.divmod(t,"mod").mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(0===e.mod.cmpn(0))return e.div;var n=e.div.sign?e.mod.isub(t):e.mod,r=t.shrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:e.div.sign?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+this.words[i])%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=this.words[n]+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype._egcd=function(t,e){r(!e.sign),r(0!==e.cmpn(0));var n=this,i=e.clone();n=n.sign?n.mod(e):n.clone();for(var s=new o(0);i.isEven();)i.ishrn(1);for(var a=i.clone();n.cmpn(1)>0&&i.cmpn(1)>0;){for(;n.isEven();)n.ishrn(1),t.isEven()?t.ishrn(1):t.iadd(a).ishrn(1);for(;i.isEven();)i.ishrn(1),s.isEven()?s.ishrn(1):s.iadd(a).ishrn(1);n.cmp(i)>=0?(n.isub(i),t.isub(s)):(i.isub(n),s.isub(t))}return 0===n.cmpn(1)?t:s},o.prototype.gcd=function(t){if(0===this.cmpn(0))return t.clone();if(0===t.cmpn(0))return this.clone();var e=this.clone(),n=t.clone();e.sign=!1,n.sign=!1;for(var r=0;e.isEven()&&n.isEven();r++)e.ishrn(1),n.ishrn(1);for(;e.isEven();)e.ishrn(1);do{for(;n.isEven();)n.ishrn(1);if(e.cmp(n)<0){var i=e;e=n,n=i}e.isub(e.div(n).mul(n))}while(0!==e.cmpn(0)&&0!==n.cmpn(0));return 0===e.cmpn(0)?n.ishln(r):e.ishln(r)},o.prototype.invm=function(t){return this._egcd(new o(1),t).mod(t)},o.prototype.isEven=function(t){return 0===(1&this.words[0])},o.prototype.isOdd=function(t){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n){for(var o=this.length;o<n+1;o++)this.words[o]=0;return this.words[n]|=i,this.length=n+1,this}for(var s=i,o=n;0!==s&&o<this.length;o++){var a=this.words[o];a+=s,s=a>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},o.prototype.cmpn=function(t){var e=t<0;if(e&&(t=-t),this.sign&&!e)return-1;if(!this.sign&&e)return 1;t&=67108863,this.strip();var n;if(this.length>1)n=1;else{var r=this.words[0];n=r===t?0:r<t?-1:1}return this.sign&&(n=-n),n},o.prototype.cmp=function(t){if(this.sign&&!t.sign)return-1;if(!this.sign&&t.sign)return 1;var e=this.ucmp(t);return this.sign?-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=this.words[n],i=t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.red=function(t){return new h(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(!this.sign,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};s.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},s.prototype.ireduce=function(t){var e,n=t;do{var r=n.ishrn(this.n,0,this.tmp);n=this.imulK(r.hi),n=n.iadd(r.lo),e=n.bitLength()}while(e>this.n);var i=e<this.n?-1:n.cmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):n.strip(),n},s.prototype.imulK=function(t){return t.imul(this.k)},i(a,s),a.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=t.length-3;e>=0;e--){var n=t.words[e],r=64*n,i=977*n;r+=i/67108864|0;var o=r/67108864|0;r&=67108863,i&=67108863,t.words[e+2]+=o,t.words[e+1]+=r,t.words[e]=i}var n=t.words[t.length-2];return n>=67108864&&(t.words[t.length-1]+=n>>>26,t.words[t.length-2]=67108863&n),0===t.words[t.length-1]&&t.length--,0===t.words[t.length-1]&&t.length--,t},i(u,s),i(c,s),i(l,s),l.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*t.words[n]+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function m(t){if(v[t])return v[t];var m;if("k256"===t)m=new a;else if("p224"===t)m=new u;else if("p192"===t)m=new c;else{if("p25519"!==t)throw new Error("Unknown prime "+t);m=new l}return v[t]=m,m},h.prototype._verify1=function(t){r(!t.sign,"red works only with positives"),r(t.red,"red works only with red numbers")},h.prototype._verify2=function(t,e){r(!t.sign&&!e.sign,"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},h.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.mod(this.m)._forceRed(this)},h.prototype.neg=function(t){var e=t.clone();return e.sign=!e.sign,e.iadd(this.m)._forceRed(this)},h.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},h.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},h.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},h.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},h.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.shln(e))},h.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},h.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},h.prototype.isqr=function(t){return this.imul(t,t)},h.prototype.sqr=function(t){return this.mul(t,t)},h.prototype.sqrt=function(t){if(0===t.cmpn(0))return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new o(1)).ishrn(2),i=this.pow(t,n);return i}for(var s=this.m.subn(1),a=0;0!==s.cmpn(0)&&0===s.andln(1);)a++,s.ishrn(1);r(0!==s.cmpn(0));var u=new o(1).toRed(this),c=u.redNeg(),l=this.m.subn(1).ishrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,l).cmp(c);)h.redIAdd(c);for(var f=this.pow(h,s),i=this.pow(t,s.addn(1).ishrn(1)),d=this.pow(t,s),p=a;0!==d.cmp(u);){for(var g=d,v=0;0!==g.cmp(u);v++)g=g.redSqr();r(v<p);var m=this.pow(f,new o(1).ishln(p-v-1));i=i.redMul(m),f=m.redSqr(),d=d.redMul(f),p=v}return i},h.prototype.invm=function(t){var e=t._egcd(new o(1),this.m);return e.sign?(e.sign=!1,this.imod(e).redNeg()):this.imod(e)},h.prototype.pow=function(t,e){for(var n=[],r=e.clone();0!==r.cmpn(0);)n.push(r.andln(1)),r.ishrn(1);for(var i=t,o=0;o<n.length&&0===n[o];o++,i=this.sqr(i));if(++o<n.length)for(var r=this.sqr(i);o<n.length;o++,r=this.sqr(r))0!==n[o]&&(i=this.mul(i,r));return i},h.prototype.convertTo=function(t){return t.clone()},h.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new f(t)},i(f,h),f.prototype.convertTo=function(t){return this.imod(t.shln(this.shift))},f.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},f.prototype.imul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},f.prototype.mul=function(t,e){if(0===t.cmpn(0)||0===e.cmpn(0))return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).ishrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},f.prototype.invm=function(t){var e=this.imod(t.invm(this.m).mul(this.r2));return e._forceRed(this)}},{}],74:[function(t,e,n){n.strip=function(t){t=t.toString();var e=/^-----BEGIN (.*)-----\n/,n=e.exec(t),r=n[1],i=new RegExp("\n-----END "+r+"-----(\n*)$"),o=t.slice(n[0].length).replace(i,"").replace(/\n/g,"");return{tag:r,base64:o}};var r=function(t,e){for(var n=[];t;){if(t.length<e){n.push(t);break}n.push(t.substr(0,e)),t=t.substr(e)}return n.join("\n")};n.assemble=function(t){var e=t.tag,n=t.base64,i="-----BEGIN "+e+"-----",o="-----END "+e+"-----";return i+"\n"+r(n,64)+"\n"+o+"\n"}},{}],75:[function(t,e,n){(function(n){function r(t,e,n){var r=c(e,n);if(r.curve)return i(t,r,n);if("dsa"===r.type)return o(t,r,n);for(var s=r.modulus.byteLength(),a=[0,1];t.length+a.length+1<s;)a.push(255);a.push(0);for(var u=-1;++u<t.length;)a.push(t[u]);var l=f(a,r,n);return l}function i(t,e,r){h.rand=r.randomBytes;var i;"1.3.132.0.10"===e.curve.join(".")&&(i=new h.ec("secp256k1"));var o=i.genKeyPair();o._importPrivate(e.privateKey);var s=o.sign(t);return new n(s.toDER())}function o(t,e,n){for(var r,i=e.params.priv_key,o=e.params.p,c=e.params.q,h=(l.mont(c),e.params.g),f=new l(0),d=new l(t),p=!1;p===!1;){for(;!f.cmpn(0);)r=a(c,n),f=u(h,r,o,c);p=r.invm(c).imul(d.add(i.imul(f).mod(c)).mod(c)).mod(c),p.cmpn(0)||(p=!1,f=new l(0))}return s(f,p)}function s(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var r=t.length+e.length+4,i=[48,r,2,t.length];return i=i.concat(t,[2,e.length],e),new n(i)}function a(t,e){for(var n=new l(e.randomBytes(t.byteLength()));n.cmp(t)>=0;)n=new l(e.randomBytes(t.byteLength()));return n}function u(t,e,n,r){return t.toRed(l.mont(n)).redPow(e).fromRed().mod(r)}var c=t("parse-asn1"),l=t("bn.js"),h=t("elliptic"),f=t("browserify-rsa");e.exports=r}).call(this,t("buffer").Buffer)},{"bn.js":32,"browserify-rsa":33,buffer:3,elliptic:35,"parse-asn1":59}],76:[function(t,e,n){(function(n){function r(t,e,r){var s=a(r);if("ec"===s.type)return i(t,e,s);if("dsa"===s.type)return o(t,e,s);for(var u=s.modulus.byteLength(),l=[0,1];e.length+l.length+1<u;)l.push(255);l.push(0);for(var h=-1;++h<e.length;)l.push(e[h]);l=e;var f=c.mont(s.modulus);t=new c(t).toRed(f),t=t.redPow(new c(s.publicExponent)),t=new n(t.fromRed().toArray()),t=t.slice(t.length-e.length);var d=0;for(u=t.length,h=-1;++h<u;)d+=t[h]^e[h];return!d}function i(t,e,n){var r;"1.3.132.0.10"===n.data.algorithm.curve.join(".")&&(r=new u.ec("secp256k1"));var i=n.data.subjectPrivateKey.data;return r.verify(e.toString("hex"),t.toString("hex"),i.toString("hex"))}function o(t,e,n){var r=n.data.p,i=n.data.q,o=n.data.g,u=n.data.pub_key,l=a.signature.decode(t,"der"),h=l.s,f=l.r;s(h,i),s(f,i);var d=(c.mont(i),c.mont(r)),p=h.invm(i),g=o.toRed(d).redPow(new c(e).mul(p).mod(i)).fromRed().mul(u.toRed(d).redPow(f.mul(p).mod(i)).fromRed()).mod(r).mod(i);return!g.cmp(f)}function s(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}var a=t("parse-asn1"),u=t("elliptic"),c=t("bn.js");e.exports=r}).call(this,t("buffer").Buffer)},{"bn.js":32,buffer:3,elliptic:35,"parse-asn1":59}],77:[function(t,e,n){(function(n){function r(t,e){o.rand=e.randomBytes,this.curve=new o.ec(t),this.keys=void 0}function i(t,e){Array.isArray(t)||(t=t.toArray());var r=new n(t);return e?r.toString(e):r}var o=t("elliptic"),s=t("bn.js");e.exports=r,r.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},r.prototype.computeSecret=function(t,e,r){
e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),t=new s(t),t=t.toString(16);var o=this.curve.keyPair(t,"hex").getPublic(),a=o.mul(this.keys.getPrivate()).getX();return i(a,r)},r.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[n.length-1]%2?n[0]=7:n[0]=6),i(n,t)},r.prototype.getPrivateKey=function(t){return i(this.keys.getPrivate(),t)},r.prototype.setPublicKey=function(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e));var r=new s(t);r=r.toArray(),this.keys._importPublicHex(r)},r.prototype.setPrivateKey=function(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e));var r=new s(t);r=r.toString(16),this.keys._importPrivate(r)}}).call(this,t("buffer").Buffer)},{"bn.js":79,buffer:3,elliptic:80}],78:[function(t,e,n){var r=t("./ecdh");e.exports=function(t,e){e.createECDH=function(e){return new r(e,t)}}},{"./ecdh":77}],79:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],80:[function(t,e,n){arguments[4][35][0].apply(n,arguments)},{"../package.json":99,"./elliptic/curve":83,"./elliptic/curves":86,"./elliptic/ec":87,"./elliptic/hmac-drbg":90,"./elliptic/utils":91,brorand:92,dup:35}],81:[function(t,e,n){arguments[4][36][0].apply(n,arguments)},{"../../elliptic":80,assert:1,"bn.js":79,dup:36}],82:[function(t,e,n){arguments[4][37][0].apply(n,arguments)},{"../../elliptic":80,"../curve":83,assert:1,"bn.js":79,dup:37,inherits:149}],83:[function(t,e,n){arguments[4][38][0].apply(n,arguments)},{"./base":81,"./edwards":82,"./mont":84,"./short":85,dup:38}],84:[function(t,e,n){arguments[4][39][0].apply(n,arguments)},{"../../elliptic":80,"../curve":83,assert:1,"bn.js":79,dup:39,inherits:149}],85:[function(t,e,n){arguments[4][40][0].apply(n,arguments)},{"../../elliptic":80,"../curve":83,assert:1,"bn.js":79,dup:40,inherits:149}],86:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{"../elliptic":80,assert:1,"bn.js":79,dup:41,"hash.js":93}],87:[function(t,e,n){arguments[4][42][0].apply(n,arguments)},{"../../elliptic":80,"./key":88,"./signature":89,assert:1,"bn.js":79,dup:42}],88:[function(t,e,n){arguments[4][43][0].apply(n,arguments)},{"../../elliptic":80,assert:1,"bn.js":79,dup:43}],89:[function(t,e,n){arguments[4][44][0].apply(n,arguments)},{"../../elliptic":80,assert:1,"bn.js":79,dup:44}],90:[function(t,e,n){arguments[4][45][0].apply(n,arguments)},{"../elliptic":80,assert:1,dup:45,"hash.js":93}],91:[function(t,e,n){arguments[4][46][0].apply(n,arguments)},{assert:1,"bn.js":79,dup:46}],92:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{dup:47}],93:[function(t,e,n){arguments[4][48][0].apply(n,arguments)},{"./hash/common":94,"./hash/hmac":95,"./hash/ripemd":96,"./hash/sha":97,"./hash/utils":98,dup:48}],94:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{"../hash":93,dup:49}],95:[function(t,e,n){arguments[4][50][0].apply(n,arguments)},{"../hash":93,dup:50}],96:[function(t,e,n){arguments[4][51][0].apply(n,arguments)},{"../hash":93,dup:51}],97:[function(t,e,n){arguments[4][52][0].apply(n,arguments)},{"../hash":93,dup:52}],98:[function(t,e,n){arguments[4][53][0].apply(n,arguments)},{dup:53}],99:[function(t,e,n){arguments[4][54][0].apply(n,arguments)},{dup:54}],100:[function(t,e,n){(function(n){function r(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this._pub=new c(t)}function i(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this._priv=new c(t)}function o(t,e){var n=e.toString("hex"),r=[n,t.toString(16)].join("_");if(r in y)return y[r];var i=0;if(t.isEven()||!m.simpleSieve||!m.fermatTest(t)||!h.test(t))return i+=1,i+="02"===n||"05"===n?8:4,y[r]=i,i;h.test(t.shrn(1))||(i+=2);var o,n=e.toString("hex");switch(n){case"02":t.mod(f).cmp(d)&&(i+=8);break;case"05":o=t.mod(p),o.cmp(g)&&o.cmp(v)&&(i+=8);break;default:i+=4}return y[r]=i,i}function s(t,e){try{Object.defineProperty(t,"verifyError",{enumerable:!0,value:e,writable:!1})}catch(n){t.verifyError=e}}function a(t,e,n,a){this.setGenerator(e),this.__prime=new c(t),this._prime=c.mont(this.__prime),this._pub=void 0,this._priv=void 0,a?(this.setPublicKey=r,this.setPrivateKey=i,s(this,o(this.__prime,e))):s(this,8),this._makeNum=function(){return n.randomBytes(t.length)}}function u(t,e){var r=new n(t.toArray());return e?r.toString(e):r}var c=t("bn.js"),l=t("miller-rabin"),h=new l,f=new c(24),d=new c(11),p=new c(10),g=new c(3),v=new c(7),m=t("./generatePrime");e.exports=a;var y={};a.prototype.generateKeys=function(){return this._priv||(this._priv=new c(this._makeNum())),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},a.prototype.computeSecret=function(t){t=new c(t),t=t.toRed(this._prime);var e=t.redPow(this._priv).fromRed(),r=new n(e.toArray()),i=this.getPrime();if(r.length<i.length){var o=new n(i.length-r.length);o.fill(0),r=n.concat([o,r])}return r},a.prototype.getPublicKey=function(t){return u(this._pub,t)},a.prototype.getPrivateKey=function(t){return u(this._priv,t)},a.prototype.getPrime=function(t){return u(this.__prime,t)},a.prototype.getGenerator=function(t){return u(this._gen,t)},a.prototype.setGenerator=function(t,e){e=e||"utf8",n.isBuffer(t)||(t=new n(t,e)),this._gen=new c(t)}}).call(this,t("buffer").Buffer)},{"./generatePrime":101,"bn.js":103,buffer:3,"miller-rabin":104}],101:[function(t,e,n){function r(){if(null!==w)return w;var t=1048576,e=[];e[0]=2;for(var n=1,r=3;r<t;r+=2){for(var i=Math.ceil(Math.sqrt(r)),o=0;o<n&&e[o]<=i&&r%e[o]!==0;o++);n!==o&&e[o]<=i||(e[n++]=r)}return w=e,e}function i(t){for(var e=r(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function o(t){var e=a.mont(t);return 0===f.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function s(t,e,n){function r(t){s=-1;for(var r=new a(n.randomBytes(Math.ceil(t/8)));r.bitLength()>t;)r.ishrn(1);if(r.isEven()&&r.iadd(h),r.testn(1)||r.iadd(f),e.cmp(f))if(e.cmp(d))c={major:[b],minor:[f]};else{for(rem=r.mod(v);rem.cmp(m);)r.iadd(b),rem=r.mod(v);c={major:[b,p],minor:[f,g]}}else{for(;r.mod(u).cmp(y);)r.iadd(b);c={major:[u],minor:[_]}}return r}if(t<16)return new a(2===e||5===e?[140,123]:[140,39]);e=new a(e);for(var s,c,w=r(t),S=w.shrn(1);;){for(;w.bitLength()>t;)w=r(t),S=w.shrn(1);if(s++,i(S)&&i(w)&&o(S)&&o(w)&&l.test(S)&&l.test(w))return w;w.iadd(c.major[s%c.major.length]),S.iadd(c.minor[s%c.minor.length])}}e.exports=s,s.simpleSieve=i,s.fermatTest=o;var a=t("bn.js"),u=new a(24),c=t("miller-rabin"),l=new c,h=new a(1),f=new a(2),d=new a(5),p=new a(16),g=new a(8),v=new a(10),m=new a(3),y=(new a(7),new a(11)),b=new a(4),_=new a(12),w=null},{"bn.js":103,"miller-rabin":104}],102:[function(t,e,n){(function(n){var r=t("./primes.json"),i=t("./dh"),o=t("./generatePrime");e.exports=function(t,e){function s(e){return new i(new n(r[e].prime,"hex"),new n(r[e].gen,"hex"),t)}function a(e,r,s,a){return(n.isBuffer(r)||"string"==typeof r&&["hex","binary","base64"].indexOf(r)===-1)&&(a=s,s=r,r=void 0),r=r||"binary",a=a||"binary",s=s||new n([2]),n.isBuffer(s)||(s=new n(s,a)),"number"==typeof e?new i(o(e,s,t),s,t,(!0)):(n.isBuffer(e)||(e=new n(e,r)),new i(e,s,t,(!0)))}e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=s,e.createDiffieHellman=e.DiffieHellman=a}}).call(this,t("buffer").Buffer)},{"./dh":100,"./generatePrime":101,"./primes.json":107,buffer:3}],103:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],104:[function(t,e,n){function r(t){this.rand=t||new o.Rand}var i=t("bn.js"),o=t("brorand");e.exports=r,r.create=function(t){return new r(t)},r.prototype._rand=function(t){var e=t.bitLength(),n=this.rand.generate(Math.ceil(e/8));n[0]|=3;var r=7&e;return 0!==r&&(n[n.length-1]>>=7-r),new i(n)},r.prototype.test=function(t,e,n){var r=t.bitLength(),o=i.mont(t),s=new i(1).toRed(o);e||(e=Math.max(1,r/48|0));for(var a=t.subn(1),u=a.subn(1),c=0;!a.testn(c);c++);for(var l=t.shrn(c),h=a.toRed(o),f=!0;e>0;e--){var d=this._rand(u);n&&n(d);var p=d.toRed(o).redPow(l);if(0!==p.cmp(s)&&0!==p.cmp(h)){for(var g=1;g<c;g++){if(p=p.redSqr(),0===p.cmp(s))return!1;if(0===p.cmp(h))break}if(g===c)return!1}}return f},r.prototype.getDivisor=function(t,e){var n=t.bitLength(),r=i.mont(t),o=new i(1).toRed(r);e||(e=Math.max(1,n/48|0));for(var s=t.subn(1),a=s.subn(1),u=0;!s.testn(u);u++);for(var c=t.shrn(u),l=s.toRed(r),h=!0;e>0;e--){var f=this._rand(a),d=t.gcd(f);if(0!==d.cmpn(1))return d;var p=f.toRed(r).redPow(c);if(0!==p.cmp(o)&&0!==p.cmp(l)){for(var g=1;g<u;g++){if(p=p.redSqr(),0===p.cmp(o))return p.fromRed().subn(1).gcd(t);if(0===p.cmp(l))break}if(g===u)return p=p.redSqr(),p.fromRed().subn(1).gcd(t)}}return h}},{"bn.js":105,brorand:106}],105:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],106:[function(t,e,n){arguments[4][47][0].apply(n,arguments)},{dup:47}],107:[function(t,e,n){e.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],108:[function(t,e,n){(function(t){e.exports=function(e){function n(t,e,n,i,o,s){if("function"==typeof o&&(s=o,o=void 0),"function"!=typeof s)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var a;try{a=r(t,e,n,i,o)}catch(u){return s(u)}s(void 0,a)})}function r(n,r,i,o,s){if("number"!=typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");s=s||"sha1",t.isBuffer(n)||(n=new t(n)),t.isBuffer(r)||(r=new t(r));var a,u,c,l=1,h=new t(o),f=new t(r.length+4);r.copy(f,0,0,r.length);for(var d=1;d<=l;d++){f.writeUInt32BE(d,r.length);var p=e.createHmac(s,n).update(f).digest();if(!a&&(a=p.length,c=new t(a),l=Math.ceil(o/a),u=o-(l-1)*a,o>(Math.pow(2,32)-1)*a))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,a);for(var g=1;g<i;g++){p=e.createHmac(s,n).update(p).digest();for(var v=0;v<a;v++)c[v]^=p[v]}var m=(d-1)*a,y=d==l?u:a;c.copy(h,m,0,y)}return h}return{pbkdf2:n,pbkdf2Sync:r}}}).call(this,t("buffer").Buffer)},{buffer:3}],109:[function(t,e,n){e.exports=function(e,n){e.publicEncrypt=t("./publicEncrypt")(n),e.privateDecrypt=t("./privateDecrypt")(n)}},{"./privateDecrypt":134,"./publicEncrypt":135}],110:[function(t,e,n){(function(t){function n(e){var n=new t(4);return n.writeUInt32BE(e,0),n}e.exports=function(e,r,i){for(var o,s=new t(""),a=0;s.length<r;)o=n(a++),s=t.concat([s,i.createHash("sha1").update(e).update(o).digest()]);return s.slice(0,r)}}).call(this,t("buffer").Buffer)},{buffer:3}],111:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],112:[function(t,e,n){arguments[4][33][0].apply(n,arguments)},{"bn.js":113,buffer:3,dup:33}],113:[function(t,e,n){arguments[4][32][0].apply(n,arguments)},{dup:32}],114:[function(t,e,n){arguments[4][55][0].apply(n,arguments)},{buffer:3,dup:55}],115:[function(t,e,n){arguments[4][56][0].apply(n,arguments)},{dup:56}],116:[function(t,e,n){arguments[4][57][0].apply(n,arguments)},{"asn1.js":120,"asn1.js-rfc3280":119,dup:57}],117:[function(t,e,n){arguments[4][58][0].apply(n,arguments)},{"./EVP_BytesToKey":114,buffer:3,dup:58}],118:[function(t,e,n){arguments[4][59][0].apply(n,arguments)},{"./aesid.json":115,"./asn1":116,"./fixProc":117,buffer:3,dup:59,pemstrip:133}],119:[function(t,e,n){arguments[4][60][0].apply(n,arguments)},{"asn1.js":120,dup:60}],120:[function(t,e,n){arguments[4][61][0].apply(n,arguments)},{"./asn1/api":121,"./asn1/base":123,"./asn1/constants":127,"./asn1/decoders":129,"./asn1/encoders":131,"bn.js":132,dup:61}],121:[function(t,e,n){arguments[4][62][0].apply(n,arguments)},{"../asn1":120,dup:62,util:166,vm:167}],122:[function(t,e,n){arguments[4][63][0].apply(n,arguments)},{"../base":123,assert:1,buffer:3,dup:63,util:166}],123:[function(t,e,n){arguments[4][64][0].apply(n,arguments)},{"./buffer":122,"./node":124,"./reporter":125,dup:64}],124:[function(t,e,n){arguments[4][65][0].apply(n,arguments)},{"../base":123,assert:1,dup:65}],125:[function(t,e,n){arguments[4][66][0].apply(n,arguments)},{dup:66,util:166}],126:[function(t,e,n){arguments[4][67][0].apply(n,arguments)},{"../constants":127,dup:67}],127:[function(t,e,n){arguments[4][68][0].apply(n,arguments)},{"./der":126,dup:68}],128:[function(t,e,n){arguments[4][69][0].apply(n,arguments)},{"../../asn1":120,dup:69,util:166}],129:[function(t,e,n){arguments[4][70][0].apply(n,arguments)},{"./der":128,dup:70}],130:[function(t,e,n){arguments[4][71][0].apply(n,arguments)},{"../../asn1":120,buffer:3,dup:71,util:166}],131:[function(t,e,n){arguments[4][72][0].apply(n,arguments)},{"./der":130,dup:72}],132:[function(t,e,n){arguments[4][73][0].apply(n,arguments)},{dup:73}],133:[function(t,e,n){arguments[4][74][0].apply(n,arguments)},{dup:74}],134:[function(t,e,n){(function(n){function r(t,e,r){var i=(t.modulus,t.modulus.byteLength()),s=(e.length,r.createHash("sha1").update(new n("")).digest()),c=s.length;if(0!==e[0])throw new Error("decryption error");var l=e.slice(1,c+1),h=e.slice(c+1),f=u(l,a(h,c,r)),d=u(h,a(f,i-c-1,r));if(o(s,d.slice(0,c)))throw new Error("decryption error");for(var p=c;0===d[p];)p++;if(1!==d[p++])throw new Error("decryption error");return d.slice(p)}function i(t,e,n){for(var r=e.slice(0,2),i=2,o=0;0!==e[i++];)if(i>=e.length){o++;break}var s=e.slice(2,i-1);e.slice(i-1,i);return"0002"!==r.toString("hex")&&o++,s.length<8&&o++,e.slice(i)}function o(t,e){var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));for(var i=-1;++i<r;)n+=t[i]^e[i];return n}var s=t("parse-asn1"),a=t("./mgf"),u=t("./xor"),c=t("bn.js"),l=t("browserify-rsa");e.exports=function(t){function e(e,o){var a;a=e.padding?e.padding:4;var u=s(e,t),h=u.modulus.byteLength();if(o.length>h||new c(o).cmp(u.modulus)>=0)throw new Error("decryption error");var f=l(o,u,t),d=new n(h-f.length);if(d.fill(0),f=n.concat([d,f],h),4===a)return r(u,f,t);if(1===a)return i(u,f,t);if(3===a)return f;throw new Error("unknown padding")}return e}}).call(this,t("buffer").Buffer)},{"./mgf":110,"./xor":136,"bn.js":111,"browserify-rsa":112,buffer:3,"parse-asn1":118}],135:[function(t,e,n){(function(n){function r(t,e,r){var i=t.modulus.byteLength(),o=e.length,s=r.createHash("sha1").update(new n("")).digest(),l=s.length,h=2*l;if(o>i-h-2)throw new Error("message too long");var f=new n(i-o-h-2);f.fill(0);var d=i-l-1,p=r.randomBytes(l),g=u(n.concat([s,f,new n([1]),e],d),a(p,d,r)),v=u(p,a(g,l,r));return new c(n.concat([new n([0]),v,g],i))}function i(t,e,r){var i=e.length,s=t.modulus.byteLength();if(i>s-11)throw new Error("message too long");var a=o(s-i-3,r);return new c(n.concat([new n([0,2]),a,new n([0]),e],s))}function o(t,e){for(var r,i=new n(t),o=0,s=e.randomBytes(2*t),a=0;o<t;)a===s.length&&(s=e.randomBytes(2*t),a=0),r=s[a++],r&&(i[o++]=r);return i}var s=t("parse-asn1"),a=t("./mgf"),u=t("./xor"),c=t("bn.js");e.exports=function(t){function e(e,o){var a;a=e.padding?e.padding:4;var u,l=s(e);if(4===a)u=r(l,o,t);else if(1===a)u=i(l,o,t);else{if(3!==a)throw new Error("unknown padding");if(u=new c(o),u.cmp(l.modulus)>=0)throw new Error("data too long for modulus")}var h=u.toRed(c.mont(l.modulus)).redPow(new c(l.publicExponent)).fromRed().toArray();return new n(h)}return e}}).call(this,t("buffer").Buffer)},{"./mgf":110,"./xor":136,"bn.js":111,buffer:3,"parse-asn1":118}],136:[function(t,e,n){e.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},{}],137:[function(t,e,n){(function(t){function n(t,e,n){return t^e^n}function r(t,e,n){return t&e|~t&n}function i(t,e,n){return(t|~e)^n}function o(t,e,n){return t&n|e&~n}function s(t,e,n){return t^(e|~n)}function a(t,e){return t<<e|t>>>32-e}function u(e){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var r=g(e),i=8*e.length,o=8*e.length;r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var s=0;s<r.length;s+=16)m(n,r,s);for(var s=0;s<5;s++){var a=n[s];n[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var u=v(n);return new t(u)}e.exports=u;var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],f=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],g=function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},v=function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},m=function(t,e,u){for(var g=0;g<16;g++){var v=u+g,m=e[v];e[v]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8)}var y,b,_,w,S,x,E,A,C,R;x=y=t[0],E=b=t[1],A=_=t[2],C=w=t[3],R=S=t[4];for(var N,g=0;g<80;g+=1)N=y+e[u+c[g]]|0,N+=g<16?n(b,_,w)+d[0]:g<32?r(b,_,w)+d[1]:g<48?i(b,_,w)+d[2]:g<64?o(b,_,w)+d[3]:s(b,_,w)+d[4],N=0|N,N=a(N,h[g]),N=N+S|0,y=S,S=w,w=a(_,10),_=b,b=N,N=x+e[u+l[g]]|0,N+=g<16?s(E,A,C)+p[0]:g<32?o(E,A,C)+p[1]:g<48?i(E,A,C)+p[2]:g<64?r(E,A,C)+p[3]:n(E,A,C)+p[4],N=0|N,N=a(N,f[g]),N=N+R|0,x=R,R=C,C=a(A,10),A=E,E=N;N=t[1]+_+C|0,t[1]=t[2]+w+R|0,t[2]=t[3]+S+x|0,t[3]=t[4]+y+E|0,t[4]=t[0]+b+A|0,t[0]=N}}).call(this,t("buffer").Buffer)},{buffer:3}],138:[function(t,e,n){(function(t){function n(e,n){this._block=new t(e),this._finalSize=n,this._blockSize=e,this._len=0,this._s=0}n.prototype.init=function(){this._s=0,this._len=0},n.prototype.update=function(e,n){"string"==typeof e&&(n=n||"utf8",e=new t(e,n));for(var r=this._len+=e.length,i=this._s=this._s||0,o=0,s=this._block;i<r;){for(var a=Math.min(e.length,o+this._blockSize-i%this._blockSize),u=a-o,c=0;c<u;c++)s[i%this._blockSize+c]=e[c+o];i+=u,o+=u,i%this._blockSize===0&&this._update(s)}return this._s=i,this},n.prototype.digest=function(t){var e=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),e%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(e,this._blockSize-4);var n=this._update(this._block)||this._hash();return t?n.toString(t):n},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=n}).call(this,t("buffer").Buffer)},{buffer:3}],139:[function(t,e,n){var n=e.exports=function(t){var e=n[t.toLowerCase()];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};n.sha1=t("./sha1"),n.sha224=t("./sha224"),n.sha256=t("./sha256"),n.sha384=t("./sha384"),n.sha512=t("./sha512")},{"./sha1":140,"./sha224":141,"./sha256":142,"./sha384":143,"./sha512":144}],140:[function(t,e,n){(function(n){function r(){return v.length?v.pop().init():this instanceof r?(this._w=g,c.call(this,64,56),this._h=null,void this.init()):new r}function i(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function o(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function s(t,e){return t+e|0}function a(t,e){return t<<e|t>>>32-e}var u=t("util").inherits,c=t("./hash"),l=0,h=4,f=8,d=12,p=16,g=new("undefined"==typeof Int32Array?Array:Int32Array)(80),v=[];u(r,c),r.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,c.prototype.init.call(this),this},r.prototype._POOL=v,r.prototype._update=function(t){var e,n,r,u,c,l,h,f,d,p;e=l=this._a,n=h=this._b,r=f=this._c,u=d=this._d,c=p=this._e;for(var g=this._w,v=0;v<80;v++){var m=g[v]=v<16?t.readInt32BE(4*v):a(g[v-3]^g[v-8]^g[v-14]^g[v-16],1),y=s(s(a(e,5),i(v,n,r,u)),s(s(c,m),o(v)));c=u,u=r,r=a(n,30),n=e,e=y}this._a=s(e,l),this._b=s(n,h),this._c=s(r,f),this._d=s(u,d),this._e=s(c,p)},r.prototype._hash=function(){v.length<100&&v.push(this);var t=new n(20);return t.writeInt32BE(0|this._a,l),t.writeInt32BE(0|this._b,h),t.writeInt32BE(0|this._c,f),t.writeInt32BE(0|this._d,d),t.writeInt32BE(0|this._e,p),t},e.exports=r}).call(this,t("buffer").Buffer)},{"./hash":138,buffer:3,util:166}],141:[function(t,e,n){(function(n){function r(){this.init(),this._w=a,s.call(this,64,56)}var i=t("util").inherits,o=t("./sha256"),s=t("./hash"),a=new Array(64);i(r,o),r.prototype.init=function(){return this._a=-1056596264,this._b=914150663,this._c=812702999,this._d=-150054599,this._e=-4191439,this._f=1750603025,this._g=1694076839,this._h=-1090891868,this._len=this._s=0,this},r.prototype._hash=function(){var t=new n(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},e.exports=r}).call(this,t("buffer").Buffer)},{"./hash":138,"./sha256":142,buffer:3,util:166}],142:[function(t,e,n){(function(n){function r(){this.init(),this._w=g,d.call(this,64,56)}function i(t,e){return t>>>e|t<<32-e}function o(t,e){return t>>>e}function s(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}function u(t){return i(t,2)^i(t,13)^i(t,22)}function c(t){return i(t,6)^i(t,11)^i(t,25)}function l(t){return i(t,7)^i(t,18)^o(t,3)}function h(t){return i(t,17)^i(t,19)^o(t,10)}var f=t("util").inherits,d=t("./hash"),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=new Array(64);f(r,d),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},r.prototype._update=function(t){var e,n,r,i,o,f,d,g,v,m,y=this._w;e=0|this._a,n=0|this._b,r=0|this._c,i=0|this._d,o=0|this._e,f=0|this._f,d=0|this._g,g=0|this._h;for(var b=0;b<64;b++){var _=y[b]=b<16?t.readInt32BE(4*b):h(y[b-2])+y[b-7]+l(y[b-15])+y[b-16];v=g+c(o)+s(o,f,d)+p[b]+_,m=u(e)+a(e,n,r),g=d,d=f,f=o,o=i+v,i=r,r=n,n=e,e=v+m}this._a=e+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=f+this._f|0,this._g=d+this._g|0,this._h=g+this._h|0},r.prototype._hash=function(){var t=new n(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},e.exports=r}).call(this,t("buffer").Buffer)},{"./hash":138,buffer:3,util:166}],143:[function(t,e,n){(function(n){function r(){this.init(),this._w=a,s.call(this,128,112)}var i=t("util").inherits,o=t("./sha512"),s=t("./hash"),a=new Array(160);i(r,o),r.prototype.init=function(){return this._a=-876896931,this._b=1654270250,this._c=-1856437926,this._d=355462360,this._e=1731405415,this._f=-1900787065,this._g=-619958771,this._h=1203062813,this._al=-1056596264,this._bl=914150663,this._cl=812702999,this._dl=-150054599,this._el=-4191439,this._fl=1750603025,this._gl=1694076839,this._hl=-1090891868,this._len=this._s=0,this},r.prototype._hash=function(){function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}var e=new n(48);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),e},e.exports=r}).call(this,t("buffer").Buffer)},{"./hash":138,"./sha512":144,buffer:3,util:166}],144:[function(t,e,n){(function(n){function r(){this.init(),this._w=l,u.call(this,128,112)}function i(t,e,n){return t>>>n|e<<32-n}function o(t,e,n){return t&e^~t&n}function s(t,e,n){return t&e^t&n^e&n}var a=t("util").inherits,u=t("./hash"),c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],l=new Array(160);
a(r,u),r.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},r.prototype._update=function(t){var e,n,r,a,u,l,h,f,d,p,g,v,m,y,b,_,w=this._w;e=0|this._a,n=0|this._b,r=0|this._c,a=0|this._d,u=0|this._e,l=0|this._f,h=0|this._g,f=0|this._h,d=0|this._al,p=0|this._bl,g=0|this._cl,v=0|this._dl,m=0|this._el,y=0|this._fl,b=0|this._gl,_=0|this._hl;for(var S=0;S<80;S++){var x,E,A=2*S;if(S<16)x=w[A]=t.readInt32BE(4*A),E=w[A+1]=t.readInt32BE(4*A+4);else{var C=w[A-30],R=w[A-30+1],N=i(C,R,1)^i(C,R,8)^C>>>7,O=i(R,C,1)^i(R,C,8)^i(R,C,7);C=w[A-4],R=w[A-4+1];var T=i(C,R,19)^i(R,C,29)^C>>>6,k=i(R,C,19)^i(C,R,29)^i(R,C,6),I=w[A-14],P=w[A-14+1],F=w[A-32],D=w[A-32+1];E=O+P,x=N+I+(E>>>0<O>>>0?1:0),E+=k,x=x+T+(E>>>0<k>>>0?1:0),E+=D,x=x+F+(E>>>0<D>>>0?1:0),w[A]=x,w[A+1]=E}var $=s(e,n,r),j=s(d,p,g),L=i(e,d,28)^i(d,e,2)^i(d,e,7),M=i(d,e,28)^i(e,d,2)^i(e,d,7),B=i(u,m,14)^i(u,m,18)^i(m,u,9),H=i(m,u,14)^i(m,u,18)^i(u,m,9),U=c[A],K=c[A+1],q=o(u,l,h),J=o(m,y,b),V=_+H,z=f+B+(V>>>0<_>>>0?1:0);V+=J,z=z+q+(V>>>0<J>>>0?1:0),V+=K,z=z+U+(V>>>0<K>>>0?1:0),V+=E,z=z+x+(V>>>0<E>>>0?1:0);var X=M+j,W=L+$+(X>>>0<M>>>0?1:0);f=h,_=b,h=l,b=y,l=u,y=m,m=v+V|0,u=a+z+(m>>>0<v>>>0?1:0)|0,a=r,v=g,r=n,g=p,n=e,p=d,d=V+X|0,e=z+W+(d>>>0<V>>>0?1:0)|0}this._al=this._al+d|0,this._bl=this._bl+p|0,this._cl=this._cl+g|0,this._dl=this._dl+v|0,this._el=this._el+m|0,this._fl=this._fl+y|0,this._gl=this._gl+b|0,this._hl=this._hl+_|0,this._a=this._a+e+(this._al>>>0<d>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+r+(this._cl>>>0<g>>>0?1:0)|0,this._d=this._d+a+(this._dl>>>0<v>>>0?1:0)|0,this._e=this._e+u+(this._el>>>0<m>>>0?1:0)|0,this._f=this._f+l+(this._fl>>>0<y>>>0?1:0)|0,this._g=this._g+h+(this._gl>>>0<b>>>0?1:0)|0,this._h=this._h+f+(this._hl>>>0<_>>>0?1:0)|0},r.prototype._hash=function(){function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}var e=new n(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),e},e.exports=r}).call(this,t("buffer").Buffer)},{"./hash":138,buffer:3,util:166}],145:[function(t,e,n){var r=t("pbkdf2-compat/pbkdf2");e.exports=function(t,e){e=e||{};var n=r(t);return e.pbkdf2=n.pbkdf2,e.pbkdf2Sync=n.pbkdf2Sync,e}},{"pbkdf2-compat/pbkdf2":108}],146:[function(t,e,n){(function(n,r){!function(){var i=("undefined"==typeof window?n:window)||{},o=i.crypto||i.msCrypto||t("crypto");e.exports=function(t){if(o.getRandomValues){var e=new r(t);return o.getRandomValues(e),e}if(o.pseudoRandomBytes)return o.pseudoRandomBytes(t);throw new Error("pseudo random number generation not yet implemented for this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{buffer:3,crypto:2}],147:[function(t,e,n){(function(n,r){!function(){var i=("undefined"==typeof window?n:window)||{},o=i.crypto||i.msCrypto||t("crypto");e.exports=function(t){if(o.getRandomValues){var e=new r(t);return o.getRandomValues(e),e}if(o.randomBytes)return o.randomBytes(t);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{buffer:3,crypto:2}],148:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),u=1;u<r;u++)o[u-1]=arguments[u];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),u=1;u<r;u++)o[u-1]=arguments[u];for(c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],149:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],150:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],151:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var r=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){r.length||i.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],152:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":153}],153:[function(t,e,n){(function(n){function r(t){return this instanceof r?(u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}e.exports=r;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=t("core-util-is");a.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");a.inherits(r,u),o(s(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":155,"./_stream_writable":157,_process:151,"core-util-is":158,inherits:149}],154:[function(t,e,n){function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":156,"core-util-is":158,inherits:149}],155:[function(t,e,n){(function(n){function r(e,n){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(N||(N=t("string_decoder/").StringDecoder),this.decoder=new N(e.encoding),this.encoding=e.encoding)}function i(t){return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,void C.call(this)):new i(t)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(null===n||void 0===n)e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||r||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&h(t),d(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=O)t=O;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return E.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?h(t):_(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?n.nextTick(function(){f(t)}):f(t))}function f(t){t.emit("readable")}function d(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){p(t,e)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&v(t)}}function v(t){function e(t,e,i){var o=t.write(n);!1===o&&r.awaitDrain++}var n,r=t._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=t.read());)if(1===r.pipesCount?e(r.pipes,0,null):w(r.pipes,e),t.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(A.listenerCount(t,"data")>0&&y(t))):void(r.ranOut=!0)}function m(){this._readableState.ranOut&&(this._readableState.ranOut=!1,v(this))}function y(t,e){var r=t._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,o=!1;t.readable=!0,t.pipe=C.prototype.pipe,t.on=t.addListener=C.prototype.on,t.on("readable",function(){o=!0;for(var e;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,o?n.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):E.concat(r,i),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new E(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var a=r[0],h=Math.min(t-u,a.length);o?n+=a.slice(0,h):a.copy(n,u,0,h),h<a.length?r[0]=a.slice(h):r.shift(),u+=h}}return n}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function S(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=i;var x=t("isarray"),E=t("buffer").Buffer;i.ReadableState=r;var A=t("events").EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var C=t("stream"),R=t("core-util-is");R.inherits=t("inherits");var N;R.inherits(i,C),i.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new E(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){N||(N=t("string_decoder/").StringDecoder),this._readableState.decoder=new N(e),this._readableState.encoding=e};var O=8388608;i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,r=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h(this),null;if(t=u(t,e),0===t&&e.ended)return n=null,e.length>0&&e.decoder&&(n=b(t,e),e.length-=n.length),0===e.length&&_(this),n;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(r,e)),n=t>0?b(t,e):null,null===n&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&_(this),n},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){t===l&&o()}function i(){t.end()}function o(){t.removeListener("close",a),t.removeListener("finish",u),t.removeListener("drain",p),t.removeListener("error",s),t.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),t._writableState&&!t._writableState.needDrain||p()}function s(e){c(),t.removeListener("error",s),0===A.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",u),c()}function u(){t.removeListener("close",a),c()}function c(){l.unpipe(t)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var f=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,d=f?i:o;h.endEmitted?n.nextTick(d):l.once("end",d),t.on("unpipe",r);var p=g(l);return t.on("drain",p),t._events&&t._events.error?x(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",a),t.once("finish",u),t.emit("pipe",l),h.flowing||(this.on("readable",m),h.flowing=!0,n.nextTick(function(){v(l)})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",m),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",m),e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=S(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var n=C.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||y(this),"readable"===t&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&h(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&"undefined"==typeof this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("_process"))},{_process:151,buffer:3,"core-util-is":158,events:148,inherits:149,isarray:150,stream:163,"string_decoder/":164}],156:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":153,"core-util-is":158,inherits:149}],157:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void S.call(this)):new o(e)}function s(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function a(t,e,r,i){var o=!0;if(!_.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new _(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),_.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing?e.buffer.push(new r(n,i,o)):l(t,e,s,n,i,o),a}function l(t,e,n,r,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t._write(r,i,e.onwrite),e.sync=!1}function h(t,e,r,i,o){r?n.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(f(r),e)h(t,r,i,e,o);else{var s=m(t,r);s||r.bufferProcessing||!r.buffer.length||v(t,r),i?n.nextTick(function(){p(t,r,s,o)}):p(t,r,s,o)}}function p(t,e,n,r){n||g(t,e),r(),n&&y(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var r=e.buffer[n],i=r.chunk,o=r.encoding,s=r.callback,a=e.objectMode?1:i.length;if(l(t,e,a,i,o,s),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){var n=m(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function b(t,e,r){e.ending=!0,y(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var _=t("buffer").Buffer;o.WritableState=i;var w=t("core-util-is");w.inherits=t("inherits");var S=t("stream");w.inherits(o,S),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?s(this,r,n):a(this,r,t,n)&&(i=c(this,r,t,e,n)),i},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),r.ending||r.finished||b(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":153,_process:151,buffer:3,"core-util-is":158,inherits:149,stream:163}],158:[function(t,e,n){(function(t){function e(t){return Array.isArray(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return h(t)&&"[object RegExp]"===m(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return h(t)&&"[object Date]"===m(t)}function d(t){return h(t)&&("[object Error]"===m(t)||t instanceof Error)}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(e){return t.isBuffer(e)}function m(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=g,n.isBuffer=v}).call(this,t("buffer").Buffer)},{buffer:3}],159:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":154}],160:[function(t,e,n){var r=t("stream");n=e.exports=t("./lib/_stream_readable.js"),n.Stream=r,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":153,"./lib/_stream_passthrough.js":154,"./lib/_stream_readable.js":155,"./lib/_stream_transform.js":156,"./lib/_stream_writable.js":157,stream:163}],161:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":156}],162:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":157}],163:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),t.on("error",a),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:148,inherits:149,"readable-stream/duplex.js":152,"readable-stream/passthrough.js":159,"readable-stream/readable.js":160,"readable-stream/transform.js":161,"readable-stream/writable.js":162}],164:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:3}],165:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],166:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(e)?r.showHidden=e:e&&n._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&C(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),g=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),A(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(C(e)){var v=e.name?": "+e.name:"";return t.stylize("[Function"+v+"]","special")}if(S(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(A(e))return l(e)}var m="",y=!1,_=["{","}"];if(p(e)&&(y=!0,_=["[","]"]),C(e)){var w=e.name?": "+e.name:"";m=" [Function"+w+"]"}if(S(e)&&(m=" "+RegExp.prototype.toString.call(e)),E(e)&&(m=" "+Date.prototype.toUTCString.call(e)),A(e)&&(m=" "+l(e)),0===s.length&&(!y||0==e.length))return _[0]+m+_[1];if(r<0)return S(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var x;return x=y?h(t,e,r,g,s):s.map(function(n){return f(t,e,r,g,n,y)}),t.seen.pop(),d(x,m,_)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)k(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{
value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),k(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=v(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function _(t){return"symbol"==typeof t}function w(t){return void 0===t}function S(t){return x(t)&&"[object RegExp]"===N(t)}function x(t){return"object"==typeof t&&null!==t}function E(t){return x(t)&&"[object Date]"===N(t)}function A(t){return x(t)&&("[object Error]"===N(t)||t instanceof Error)}function C(t){return"function"==typeof t}function R(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function N(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var I=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(I,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];n<o;a=r[++n])s+=v(a)||!x(a)?" "+a:" "+i(a);return s},n.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var P,F={};n.debuglog=function(t){if(w(P)&&(P=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var r=e.pid;F[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else F[t]=function(){};return F[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=g,n.isNull=v,n.isNullOrUndefined=m,n.isNumber=y,n.isString=b,n.isSymbol=_,n.isUndefined=w,n.isRegExp=S,n.isObject=x,n.isDate=E,n.isError=A,n.isFunction=C,n.isPrimitive=R,n.isBuffer=t("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!x(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":165,_process:151,inherits:149}],167:[function(require,module,exports){function Context(){}var indexOf=require("indexof"),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(t){return this instanceof Script?void(this.code=t):new Script(t)};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var o=Object_keys(n),s=r.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||indexOf(o,e)===-1)&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},{indexof:168}],168:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],169:[function(t,e,n){(function(r){function i(t,e){return new l(function(n,r){u.pbkdf2(t,e,1e3,32,function(e,i){return t=null,e?r(e):void n(i)})})}function o(t,e){function n(t){if(p)return t;var e,n;"_id"in t?(e=t._id,delete t._id):e=d.v4(),"_rev"in t&&(n=t._rev,delete t._rev);var i=u.randomBytes(12),o=JSON.stringify(t),s={_id:e,nonce:i.toString("hex")};n&&(s._rev=n);var l=c.createCipher(a,i);return l.setAAD(new r(e)),s.data=l.update(o).toString("hex"),l["final"](),s.tag=l.getAuthTag().toString("hex"),s}function o(t){if(p||!t.nonce)return t;var e=c.createDecipher(a,new r(t.nonce,"hex"));e.setAAD(new r(t._id)),e.setAuthTag(new r(t.tag,"hex"));var n=e.update(new r(t.data,"hex")).toString();return e["final"](),n=JSON.parse(n),n._id=t._id,n._rev=t._rev,n}var a,l,f=this,p=!1;return f.get(h)["catch"](function(t){if(404===t.status){var e={_id:h,salt:u.randomBytes(16).toString("hex")};return f.put(e).then(function(){return e})}throw t}).then(function(n){var o;return"string"==typeof e?(o=u.getDiffieHellman(e),o.generateKeys(),l=o.getPublicKey(),t=o.computeSecret(t)):r.isBuffer(e)&&(o=u.createDiffieHellman(e),o.generateKeys(),l=o.getPublicKey(),t=o.computeSecret(t)),i(t,new r(n.salt,"hex"))}).then(function(e){if(t=null,a=e,f.filter({incoming:n,outgoing:o}),f.removeCrypto=function(){s(a),p=!0},l)return l})}function s(t){for(var e=t.length,n=u.randomBytes(e),r=-1;++r<e;)t[r]=n[r]}function a(t,e){if(!t||!e.nonce)return e;var n=c.createDecipher(t,new r(e.nonce,"hex"));n.setAAD(new r(e._id)),n.setAuthTag(new r(e.tag,"hex"));var i=n.update(new r(e.data,"hex")).toString();return n["final"](),i=JSON.parse(i),i._id=e._id,i._rev=e._rev,i}var u=t("crypto"),c=t("chacha"),l=t("pouchdb-promise"),h="_local/crypto",f=t("filter-pouch").filter,d=t("node-uuid");n.filter=f,n.crypto=o,n.decrypt=a,"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(e.exports)}).call(this,t("buffer").Buffer)},{buffer:3,chacha:174,crypto:10,"filter-pouch":188,"node-uuid":208,"pouchdb-promise":209}],170:[function(t,e,n){(function(n){function r(t,e,n){return this instanceof r?(a.call(this),this.alen=0,this.clen=0,this.chacha=new u(t,e),this.poly=new c(this.chacha.getBytes(64)),this.tag=null,this._decrypt=n,void(this._hasData=!1)):new r(t,e,n)}function i(t){var e=t%16;return e?16-e:0}function o(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=-1;++i<r;)n+=t[i]^e[i];return n}var s=t("inherits"),a=t("./cipherbase"),u=t("./chacha20"),a=t("./cipherbase"),c=t("./poly1305");s(r,a),e.exports=r,r.prototype.setAAD=function(t){if(this._hasData)throw new Error("Attempting to set AAD in unsupported state");this.alen=t.length,this.poly.update(t);var e=new n(i(this.alen));e.length&&(e.fill(0),this.poly.update(e))},r.prototype._update=function(t){this._hasData||(this._hasData=!0);var e=t.length;if(!e)return next();this.clen+=e;for(var n=this.chacha.getBytes(e),r=-1;++r<e;)n[r]^=t[r];return this._decrypt?this.poly.update(t):this.poly.update(n),n},r.prototype._final=function(){if(this._decrypt&&!this.tag)throw new Error("Unsupported state or unable to authenticate data");var t=new n(i(this.clen));t.length&&(t.fill(0),this.poly.update(t));var e=new n(16);e.fill(0),e.writeUInt32LE(this.alen,0),e.writeUInt32LE(this.clen,8);var r=this.poly.update(e).finish();if(this._decrypt){if(o(r,this.tag))throw new Error("Unsupported state or unable to authenticate data")}else this.tag=r},r.prototype.getAuthTag=function(){if(this._decrypt||null===this.tag)throw new Error("Attempting to get auth tag in unsupported state");return this.tag},r.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this.tag=t}}).call(this,t("buffer").Buffer)},{"./chacha20":171,"./cipherbase":173,"./poly1305":186,buffer:3,inherits:176}],171:[function(t,e,n){(function(t){function n(t,e){return t<<e|t>>>32-e}function r(e,n){this.input=new Uint32Array(16),this.input[0]=i.readUInt32LE(0),this.input[1]=i.readUInt32LE(4),this.input[2]=i.readUInt32LE(8),this.input[3]=i.readUInt32LE(12),this.input[4]=e.readUInt32LE(0),this.input[5]=e.readUInt32LE(4),this.input[6]=e.readUInt32LE(8),this.input[7]=e.readUInt32LE(12),this.input[8]=e.readUInt32LE(16),this.input[9]=e.readUInt32LE(20),this.input[10]=e.readUInt32LE(24),this.input[11]=e.readUInt32LE(28),this.input[12]=0,this.input[13]=n.readUInt32LE(0),this.input[14]=n.readUInt32LE(4),this.input[15]=n.readUInt32LE(8),this.cachePos=64,this.buffer=new Uint32Array(16),this.output=new t(64)}var i=new t("expand 32-byte k");e.exports=r,r.prototype.quarterRound=function(t,e,r,i){var o=this.buffer;o[t]+=o[e],o[i]=n(o[i]^o[t],16),o[r]+=o[i],o[e]=n(o[e]^o[r],12),o[t]+=o[e],o[i]=n(o[i]^o[t],8),o[r]+=o[i],o[e]=n(o[e]^o[r],7)},r.prototype.makeBlock=function(t,e){for(var n=-1;++n<16;)this.buffer[n]=this.input[n];for(n=-1;++n<10;)this.quarterRound(0,4,8,12),this.quarterRound(1,5,9,13),this.quarterRound(2,6,10,14),this.quarterRound(3,7,11,15),this.quarterRound(0,5,10,15),this.quarterRound(1,6,11,12),this.quarterRound(2,7,8,13),this.quarterRound(3,4,9,14);for(n=-1;++n<16;)this.buffer[n]+=this.input[n],t.writeUInt32LE(this.buffer[n],e),e+=4;if(this.input[12]++,!this.input[12])throw new Error("counter is exausted")},r.prototype.getBytes=function(e){var n=0,r=new t(e),i=64-this.cachePos;if(i){if(i>=e)return this.output.copy(r,0,this.cachePos,64),this.cachePos+=e,r;this.output.copy(r,0,this.cachePos,64),e-=i,n+=i,this.cachePos=64}for(;e>0;){if(e<=64)return this.makeBlock(this.output,0),this.output.copy(r,n,0,e),e<64&&(this.cachePos=e),r;this.makeBlock(r,n),e-=64,n+=64}throw new Error("something bad happended")}}).call(this,t("buffer").Buffer)},{buffer:3}],172:[function(t,e,n){function r(t,e){return this instanceof r?(s.call(this),void(this.chacha=new i(t,e))):new r(t,e)}var i=t("./chacha20"),o=t("inherits"),s=t("./cipherbase");o(r,s),e.exports=r,r.prototype._update=function(t){var e=t.length;if(e){for(var n=this.chacha.getBytes(e),r=-1;++r<e;)n[r]^=t[r];return n}}},{"./chacha20":171,"./cipherbase":173,inherits:176}],173:[function(t,e,n){(function(n){function r(t){t?this.digest=i:this["final"]=i}function i(t){var e=this._final()||new n("");return t&&(e=e.toString(t)),e}var o=t("readable-stream").Transform,s=t("inherits");e.exports=r,s(r,o),["_readableState","_writableState","_transformState"].forEach(function(t){Object.defineProperty(r.prototype,t,{get:function(){return o.call(this),this[t]},set:function(e){Object.defineProperty(this,t,{value:e,enumerable:!0,configurable:!0,writable:!0})},configurable:!0,enumerable:!0})}),r.prototype.update=function(t,e,r){"string"==typeof t&&(t=new n(t,e));var i=this._update(t)||new n("");return r&&(i=i.toString(r)),this.digest?this:i},r.prototype._transform=function(t,e,n){this.push(this._update(t)),n()},r.prototype._flush=function(t){try{this.push(this._final())}catch(e){return t(e)}t()},r.prototype._final=function(){}}).call(this,t("buffer").Buffer)},{buffer:3,inherits:176,"readable-stream":185}],174:[function(t,e,n){function r(t,e){return new o(t,e)}function i(t,e){return new o(t,e,(!0))}var o=t("./aead");n.aead=o,n.createCipher=r,n.createDecipher=i,n.createHmac=t("./polystream"),n.chacha20=n.ChaCha20=t("./chachastream"),n.aeadLegacy=n.AeadLegacy=t("./legacy-aead")},{"./aead":170,"./chachastream":172,"./legacy-aead":175,"./polystream":187}],175:[function(t,e,n){(function(n){function r(t,e,i){return this instanceof r?(s.call(this),this.alen=0,this.clen=0,this.chacha=new a(t,n.concat([c,e])),this.poly=new u(this.chacha.getBytes(64)),this.tag=null,this._decrypt=i,void(this._hasData=!1)):new r(t,e,i)}function i(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=-1;++i<r;)n+=t[i]^e[i];return n}var o=t("inherits"),s=t("./cipherbase"),a=t("./chacha20"),u=t("./poly1305");o(r,s),e.exports=r;var c=new n(4);c.fill(0),r.prototype.setAAD=function(t){if(this._hasData)throw new Error("Attempting to set AAD in unsupported state");this.alen+=t.length,this.poly.update(t)},r.prototype._flushlentag=function(){this._hasData=!0;var t=new n(8);t.fill(0),t.writeUInt32LE(this.alen,0),this.poly.update(t)},r.prototype._update=function(t){this._hasData||this._flushlentag();var e=t.length;if(e){this.clen+=e;for(var n=this.chacha.getBytes(e),r=-1;++r<e;)n[r]^=t[r];return this._decrypt?this.poly.update(t):this.poly.update(n),n}},r.prototype._final=function(){if(this._decrypt&&!this.tag)throw new Error("Unsupported state or unable to authenticate data");this._hasData||this._flushlentag();var t=new n(8);t.fill(0),t.writeUInt32LE(this.clen,0);var e=this.poly.update(t).finish();if(this._decrypt){if(i(e,this.tag))throw new Error("Unsupported state or unable to authenticate data")}else this.tag=e},r.prototype.getAuthTag=function(){if(this._decrypt||null===this.tag)throw new Error("Attempting to get auth tag in unsupported state");return this.tag},r.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this.tag=t}}).call(this,t("buffer").Buffer)},{"./chacha20":171,"./cipherbase":173,"./poly1305":186,buffer:3,inherits:176}],176:[function(t,e,n){arguments[4][149][0].apply(n,arguments)},{dup:149}],177:[function(t,e,n){arguments[4][153][0].apply(n,arguments)},{"./_stream_readable":179,"./_stream_writable":181,_process:151,"core-util-is":182,dup:153,inherits:176}],178:[function(t,e,n){arguments[4][154][0].apply(n,arguments)},{"./_stream_transform":180,"core-util-is":182,dup:154,inherits:176}],179:[function(t,e,n){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(N||(N=t("string_decoder/").StringDecoder),this.decoder=new N(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void C.call(this)):new i(e)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(R.isNullOrUndefined(n))e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t)),d(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=T)t=T;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||R.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return R.isBuffer(e)||R.isString(e)||R.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(O("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){f(t)}):f(t))}function f(t){O("emit readable"),t.emit("readable"),y(t)}function d(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){p(t,e)}))}function p(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(O("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;O("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&A.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){m(t,e)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(O("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):E.concat(r,i),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new E(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var a=r[0],h=Math.min(t-u,a.length);o?n+=a.slice(0,h):a.copy(n,u,0,h),h<a.length?r[0]=a.slice(h):r.shift(),u+=h}}return n}function _(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function S(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=i;var x=t("isarray"),E=t("buffer").Buffer;i.ReadableState=r;var A=t("events").EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var C=t("stream"),R=t("core-util-is");R.inherits=t("inherits");var N,O=t("util");O=O&&O.debuglog?O.debuglog("stream"):function(){},R.inherits(i,C),i.prototype.push=function(t,e){var n=this._readableState;return R.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new E(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return N||(N=t("string_decoder/").StringDecoder),this._readableState.decoder=new N(e),this._readableState.encoding=e,this};var T=8388608;i.prototype.read=function(t){O("read",t);var e=this._readableState,n=t;if((!R.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return O("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?_(this):h(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&_(this),null;var r=e.needReadable;O("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,O("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,O("reading or ended",r)),r&&(O("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(n,e));var i;return i=t>0?b(t,e):null,R.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&_(this),R.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){O("onunpipe"),t===h&&o()}function i(){O("onend"),t.end()}function o(){O("cleanup"),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("drain",v),t.removeListener("error",a),t.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",o),h.removeListener("data",s),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){O("ondata");var n=t.write(e);!1===n&&(O("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function a(e){O("onerror",e),l(),t.removeListener("error",a),0===A.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",c),l()}function c(){O("onfinish"),t.removeListener("close",u),l()}function l(){O("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,O("pipe count=%d opts=%j",f.pipesCount,e);var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,p=d?i:o;f.endEmitted?n.nextTick(p):h.once("end",p),t.on("unpipe",r);var v=g(h);return t.on("drain",v),h.on("data",s),t._events&&t._events.error?x(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",c),t.emit("pipe",h),f.flowing||(O("pipe resume"),h.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=S(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=C.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&h(this,i);else{var o=this;n.nextTick(function(){O("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(O("resume"),t.flowing=!0,t.reading||(O("resume read 0"),this.read(0)),v(this,t)),this},i.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(O("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(O("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)R.isFunction(t[i])&&R.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){O("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("_process"))},{"./_stream_duplex":177,_process:151,buffer:3,"core-util-is":182,events:148,inherits:176,isarray:183,stream:163,"string_decoder/":184,util:2}],180:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":177,"core-util-is":182,inherits:176}],181:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void x.call(this)):new o(e)}function s(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function a(t,e,r,i){var o=!0;if(!(S.isBuffer(r)||S.isString(r)||S.isNullOrUndefined(r)||e.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&S.isString(e)&&(e=new w(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),S.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):l(t,e,!1,s,n,i,o),a}function l(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function f(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(f(r),e)h(t,r,i,e,o);else{var s=m(t,r);s||r.corked||r.bufferProcessing||!r.buffer.length||v(t,r),i?n.nextTick(function(){p(t,r,s,o)}):p(t,r,s,o)}}function p(t,e,n,r){n||g(t,e),e.pendingcb--,r(),b(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,l(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,u=e.objectMode?1:o.length;if(l(t,e,!1,u,o,s,a),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function _(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var S=t("core-util-is");S.inherits=t("inherits");var x=t("stream");S.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return S.isFunction(e)&&(n=e,e=null),S.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),S.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;S.isFunction(t)?(n=t,t=null,e=null):S.isFunction(e)&&(n=e,e=null),S.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||_(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":177,_process:151,buffer:3,"core-util-is":182,inherits:176,stream:163}],182:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===v(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===v(t)}function h(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===v(t)}function d(t){return"[object Error]"===v(t)||t instanceof Error}function p(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,
n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=h,n.isDate=f,n.isError=d,n.isFunction=p,n.isPrimitive=g,n.isBuffer=t.isBuffer}).call(this,t("buffer").Buffer)},{buffer:3}],183:[function(t,e,n){arguments[4][150][0].apply(n,arguments)},{dup:150}],184:[function(t,e,n){arguments[4][164][0].apply(n,arguments)},{buffer:3,dup:164}],185:[function(t,e,n){arguments[4][160][0].apply(n,arguments)},{"./lib/_stream_duplex.js":177,"./lib/_stream_passthrough.js":178,"./lib/_stream_readable.js":179,"./lib/_stream_transform.js":180,"./lib/_stream_writable.js":181,dup:160,stream:163}],186:[function(t,e,n){(function(t){function n(e){if(!(this instanceof n))return new n(e);this.buffer=new t(16),this.leftover=0,this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.finished=0;var r,i=new Uint16Array(8);for(r=8;r--;)i[r]=e.readUInt16LE(2*r);for(this.r[0]=8191&i[0],this.r[1]=8191&(i[0]>>>13|i[1]<<3),this.r[2]=7939&(i[1]>>>10|i[2]<<6),this.r[3]=8191&(i[2]>>>7|i[3]<<9),this.r[4]=255&(i[3]>>>4|i[4]<<12),this.r[5]=i[4]>>>1&8190,this.r[6]=8191&(i[4]>>>14|i[5]<<2),this.r[7]=8065&(i[5]>>>11|i[6]<<5),this.r[8]=8191&(i[6]>>>8|i[7]<<8),this.r[9]=i[7]>>>5&127,r=8;r--;)this.h[r]=0,this.pad[r]=e.readUInt16LE(16+2*r);this.h[8]=0,this.h[9]=0,this.leftover=0,this.finished=0}e.exports=n,n.prototype.blocks=function(t,e,n){for(var r=this.finished?0:2048,i=new Uint16Array(8),o=new Uint32Array(10),s=0,a=0,u=0;n>=16;){for(a=8;a--;)i[a]=t.readUInt16LE(2*a+e);for(this.h[0]+=8191&i[0],this.h[1]+=8191&(i[0]>>>13|i[1]<<3),this.h[2]+=8191&(i[1]>>>10|i[2]<<6),this.h[3]+=8191&(i[2]>>>7|i[3]<<9),this.h[4]+=8191&(i[3]>>>4|i[4]<<12),this.h[5]+=i[4]>>>1&8191,this.h[6]+=8191&(i[4]>>>14|i[5]<<2),this.h[7]+=8191&(i[5]>>>11|i[6]<<5),this.h[8]+=8191&(i[6]>>>8|i[7]<<8),this.h[9]+=i[7]>>>5|r,a=0,s=0;a<10;a++){for(o[a]=s,u=0;u<10;u++)o[a]+=(4294967295&this.h[u])*(u<=a?this.r[a-u]:5*this.r[a+10-u]),4===u&&(s=o[a]>>>13,o[a]&=8191);s+=o[a]>>>13,o[a]&=8191}for(s=(s<<2)+s,s+=o[0],o[0]=65535&s&8191,s>>>=13,o[1]+=s,a=10;a--;)this.h[a]=o[a];e+=16,n-=16}},n.prototype.update=function(t){var e=t.length,n=0,r=0,i=0;if(this.leftover){for(n=16-this.leftover,n>e&&(n=e),r=n;r--;)this.buffer[this.leftover+r]=t[r+i];if(e-=n,i+=n,this.leftover+=n,this.leftover<16)return this;this.blocks(this.buffer,0,16),this.leftover=0}if(e>=16&&(n=e&-16,this.blocks(t,i,n),i+=n,e-=n),e){for(r=e;r--;)this.buffer[this.leftover+r]=t[r+i];this.leftover+=e}return this},n.prototype.finish=function(){var e=new t(16),n=new Uint16Array(10),r=0,i=0,o=0,s=0;if(this.leftover){for(s=this.leftover,this.buffer[s++]=1;s<16;s++)this.buffer[s]=0;this.finished=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,s=2;s<10;s++)this.h[s]+=r,r=this.h[s]>>>13,this.h[s]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,n[0]=this.h[0]+5,r=n[0]>>>13,n[0]&=8191,s=1;s<10;s++)n[s]=this.h[s]+r,r=n[s]>>>13,n[s]&=8191;for(n[9]-=8192,i=(n[9]>>>15)-1,s=10;s--;)n[s]&=i;for(i=~i,s=10;s--;)this.h[s]=this.h[s]&i|n[s];for(this.h[0]=this.h[0]|this.h[1]<<13,this.h[1]=this.h[1]>>3|this.h[2]<<10,this.h[2]=this.h[2]>>6|this.h[3]<<7,this.h[3]=this.h[3]>>9|this.h[4]<<4,this.h[4]=this.h[4]>>12|this.h[5]<<1|this.h[6]<<14,this.h[5]=this.h[6]>>2|this.h[7]<<11,this.h[6]=this.h[7]>>5|this.h[8]<<8,this.h[7]=this.h[8]>>8|this.h[9]<<5,o=(4294967295&this.h[0])+this.pad[0],this.h[0]=o,s=1;s<8;s++)o=(4294967295&this.h[s])+this.pad[s]+(o>>>16),this.h[s]=o;for(s=8;s--;)e.writeUInt16LE(this.h[s],2*s),this.pad[s]=0;for(s=10;s--;)this.h[s]=0,this.r[s]=0;return e}}).call(this,t("buffer").Buffer)},{buffer:3}],187:[function(t,e,n){function r(t){return this instanceof r?(o.call(this,!0),void(this.poly=new s(t))):new r(t)}var i=t("inherits"),o=t("./cipherbase"),s=t("./poly1305");e.exports=r,i(r,o),r.prototype._update=function(t){this.poly.update(t)},r.prototype._final=function(){return this.poly.finish()}},{"./cipherbase":173,"./poly1305":186,inherits:176}],188:[function(t,e,n){function r(t){var e="string"==typeof t._id&&i.isLocalId(t._id);return e||t._deleted}var i=t("./pouch-utils"),o=t("pouchdb-wrappers");n.transform=n.filter=function(t){var e=this,n=function(e){return!r(e)&&t.incoming?t.incoming(i.clone(e)):e},s=function(e){return!r(e)&&t.outgoing?t.outgoing(i.clone(e)):e},a={};"http"===e.type()&&(a.put=function(t,e){return e.doc=n(e.doc),t()},a.query=function(t){return t().then(function(t){return t.rows.forEach(function(t){t.doc&&(t.doc=s(t.doc))}),t})}),a.get=function(t){return t().then(function(t){return Array.isArray(t)?t.forEach(function(t){t.ok&&(t.ok=s(t.ok))}):t=s(t),t})},a.bulkDocs=function(t,e){for(var r=0;r<e.docs.length;r++)e.docs[r]=n(e.docs[r]);return t()},a.allDocs=function(t){return t().then(function(t){return t.rows.forEach(function(t){t.doc&&(t.doc=s(t.doc))}),t})},a.changes=function(t,e){function n(t){return t.doc&&(t.doc=s(t.doc)),t}function r(t){return t.results=t.results.map(n),t}if(e.options.complete){var i=e.options.complete;e.options.complete=function(t,e){return t?i(t):void i(null,r(e))}}var o=t(),a=o.on;o.on=function(t,e){return"change"===t?a.apply(o,[t,function(t){e(n(t))}]):"complete"===t?a.apply(o,[t,function(t){e(r(t))}]):a.apply(o,[t,e])};var u=o.then;return o.then=function(t,e){return u.apply(o,[function(e){t(r(e))},e])},o},o.installWrapperMethods(e,a)},"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(n)},{"./pouch-utils":207,"pouchdb-wrappers":205}],189:[function(t,e,n){arguments[4][149][0].apply(n,arguments)},{dup:149}],190:[function(t,e,n){function r(){}e.exports=r},{}],191:[function(t,e,n){function r(t){function e(t,e){function i(t){c[e]=t,++l===n&!r&&(r=!0,u.resolve(f,c))}s(t).then(i,function(t){r||(r=!0,u.reject(f,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return o(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return s([]);for(var c=new Array(n),l=0,h=-1,f=new i(a);++h<n;)e(t[h],h);return f}var i=t("./promise"),o=t("./reject"),s=t("./resolve"),a=t("./INTERNAL"),u=t("./handlers");e.exports=r},{"./INTERNAL":190,"./handlers":192,"./promise":194,"./reject":197,"./resolve":198}],192:[function(t,e,n){function r(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}var i=t("./tryCatch"),o=t("./resolveThenable"),s=t("./states");n.resolve=function(t,e){var a=i(r,e);if("error"===a.status)return n.reject(t,a.value);var u=a.value;if(u)o.safely(t,u);else{t.state=s.FULFILLED,t.outcome=e;for(var c=-1,l=t.queue.length;++c<l;)t.queue[c].callFulfilled(e)}return t},n.reject=function(t,e){t.state=s.REJECTED,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t}},{"./resolveThenable":199,"./states":200,"./tryCatch":201}],193:[function(t,e,n){e.exports=n=t("./promise"),n.resolve=t("./resolve"),n.reject=t("./reject"),n.all=t("./all"),n.race=t("./race")},{"./all":191,"./promise":194,"./race":196,"./reject":197,"./resolve":198}],194:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=a.PENDING,this.queue=[],this.outcome=void 0,t!==o&&s.safely(this,t)}var i=t("./unwrap"),o=t("./INTERNAL"),s=t("./resolveThenable"),a=t("./states"),u=t("./queueItem");e.exports=r,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a.FULFILLED||"function"!=typeof e&&this.state===a.REJECTED)return this;var n=new r(o);if(this.state!==a.PENDING){var s=this.state===a.FULFILLED?t:e;i(n,s,this.outcome)}else this.queue.push(new u(n,t,e));return n}},{"./INTERNAL":190,"./queueItem":195,"./resolveThenable":199,"./states":200,"./unwrap":202}],195:[function(t,e,n){function r(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var i=t("./handlers"),o=t("./unwrap");e.exports=r,r.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},r.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},r.prototype.callRejected=function(t){i.reject(this.promise,t)},r.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)}},{"./handlers":192,"./unwrap":202}],196:[function(t,e,n){function r(t){function e(t){s(t).then(function(t){r||(r=!0,u.resolve(l,t))},function(t){r||(r=!0,u.reject(l,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return o(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return s([]);for(var c=-1,l=new i(a);++c<n;)e(t[c]);return l}var i=t("./promise"),o=t("./reject"),s=t("./resolve"),a=t("./INTERNAL"),u=t("./handlers");e.exports=r},{"./INTERNAL":190,"./handlers":192,"./promise":194,"./reject":197,"./resolve":198}],197:[function(t,e,n){function r(t){var e=new i(o);return s.reject(e,t)}var i=t("./promise"),o=t("./INTERNAL"),s=t("./handlers");e.exports=r},{"./INTERNAL":190,"./handlers":192,"./promise":194}],198:[function(t,e,n){function r(t){if(t)return t instanceof i?t:s.resolve(new i(o),t);var e=typeof t;switch(e){case"boolean":return a;case"undefined":return c;case"object":return u;case"number":return l;case"string":return h}}var i=t("./promise"),o=t("./INTERNAL"),s=t("./handlers");e.exports=r;var a=s.resolve(new i(o),!1),u=s.resolve(new i(o),null),c=s.resolve(new i(o),void 0),l=s.resolve(new i(o),0),h=s.resolve(new i(o),"")},{"./INTERNAL":190,"./handlers":192,"./promise":194}],199:[function(t,e,n){function r(t,e){function n(e){a||(a=!0,i.reject(t,e))}function r(e){a||(a=!0,i.resolve(t,e))}function s(){e(r,n)}var a=!1,u=o(s);"error"===u.status&&n(u.value)}var i=t("./handlers"),o=t("./tryCatch");n.safely=r},{"./handlers":192,"./tryCatch":201}],200:[function(t,e,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],201:[function(t,e,n){function r(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}e.exports=r},{}],202:[function(t,e,n){function r(t,e,n){i(function(){var r;try{r=e(n)}catch(i){return o.reject(t,i)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)})}var i=t("immediate"),o=t("./handlers");e.exports=r},{"./handlers":192,immediate:203}],203:[function(t,e,n){(function(t){function n(){l=!0;for(var t,e,n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}l=!1}function r(t){1!==h.push(t)||l||i()}var i,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var s=0,a=new o(n),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),i=function(){u.data=s=++s%2}}else if(t.setImmediate||"undefined"==typeof t.MessageChannel)i="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){n(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(n,0)};else{var c=new t.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var l,h=[];e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],204:[function(t,e,n){function r(t){return null===t?String(t):"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t}function i(t){return null!==t&&t===t.window}function o(t){if(!t||"object"!==r(t)||t.nodeType||i(t))return!1;try{if(t.constructor&&!p.call(t,"constructor")&&!p.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var n;for(n in t);return void 0===n||p.call(t,n)}function s(t){return"function"===r(t)}function a(){for(var t=[],e=-1,n=arguments.length,r=new Array(n);++e<n;)r[e]=arguments[e];var i={};t.push({args:r,result:{container:i,key:"key"}});for(var o;o=t.pop();)u(t,o.args,o.result);return i.key}function u(t,e,n){var r,i,a,u,c,l,h,f=e[0]||{},d=1,p=e.length,v=!1,m=/\d+/;for("boolean"==typeof f&&(v=f,f=e[1]||{},d=2),"object"==typeof f||s(f)||(f={}),p===d&&(f=this,--d);d<p;d++)if(null!=(r=e[d])){h=g(r);for(i in r)if(!(i in Object.prototype)){if(h&&!m.test(i))continue;if(a=f[i],u=r[i],f===u)continue;v&&u&&(o(u)||(c=g(u)))?(c?(c=!1,l=a&&g(a)?a:[]):l=a&&o(a)?a:{},t.push({args:[v,l,u],result:{container:f,key:i}})):void 0!==u&&(g(r)&&s(u)||(f[i]=u))}}n.container[n.key]=f}for(var c={},l=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],h=0;h<l.length;h++){var f=l[h];c["[object "+f+"]"]=f.toLowerCase()}var d=c.toString,p=c.hasOwnProperty,g=Array.isArray||function(t){return"array"===r(t)};e.exports=a},{}],205:[function(t,e,n){function r(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){var o=i(t,r),s=o.base[o.name];if(s)if(s.hasOwnProperty("_handlers")){if(s._handlers.indexOf(e[r])!==-1)throw new Error("Wrapper method for '"+r+"' already installed: "+e[r]);s._handlers.push(e[r])}else o.base[o.name]=n(r,s,e[r],t)}}function i(t,e){for(e=e.split(".");e.length>1;)t=t[e.shift(0)];return{base:t,name:e[0]}}function o(t,e,n,r,i){var s=r[t];if("undefined"==typeof o)throw new Error("No known wrapper for method name: "+t);var a=[n],u=s(i,e,a);return u._original=e,u._handlers=a,u}function s(t,e,n,r){return"function"==typeof n&&(r=n,n={}),{base:t||e,db:t||e,options:n||{},callback:r}}function a(t,e,n){var r=e.callback;delete e.callback,n=n.bind(e.base);for(var i=t.length-1;i>=0;i-=1)n=t[i].bind(null,n,e);var o=n();return h(o,r),o}function u(t){return function(){return t.call(this)}}function c(t,e){return function(){return t.call(this,e.options)}}function l(t,e){for(var n in e)if(e.hasOwnProperty(n)){var r=i(t,n),o=r.base[r.name];if("undefined"!=typeof o){var s;try{s=o._handlers.indexOf(e[n])}catch(a){s=-1}if(s===-1)throw new Error("Wrapper method for '"+n+"' not installed: "+e[n]);o._handlers.splice(s,1),o._handlers.length||(delete r.base[r.name],r.base[r.name]!==o._original&&(r.base[r.name]=o._original))}}}var h=t("promise-nodify");n.installStaticWrapperMethods=function(t,e){t["new"]=t["new"]||function(e,n,r){return new t(e,n,r)},t.destroy=t.destroy||function(e,n,r){var i=s(t,this,n,r),o=new t(e,i.options),a=o.destroy();return h(a,i.callback),a},r(t,e,n.createStaticWrapperMethod)},n.installWrapperMethods=function(t,e){r(t,e,n.createWrapperMethod)},n.createStaticWrapperMethod=function(t,e,n,r){return o(t,e,n,d,r)},n.createWrapperMethod=function(t,e,n,r){return o(t,e,n,f,r)};var f={};f.destroy=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,u(e))}},f.put=function(t,e,n){return function(r,i,o,s,u){var c={};c.base=t||this,c.db=t||this;var l=Array.prototype.slice.call(arguments);c.doc=l.shift();for(var h=("_id"in c.doc);;){var f=l.shift(),d=typeof f;if("string"!==d||h?"string"!==d||!h||"_rev"in c.doc?"object"===d?c.options=f:"function"===d&&(c.callback=f):c.doc._rev=f:(c.doc._id=f,h=!0),!l.length)break}return c.options=c.options||{},a(n,c,function(){return e.call(this,c.doc,c.options)})}},f.post=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.doc=r,a(n,u,function(){return e.call(this,u.doc,u.options)})}},f.get=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.docId=r,a(n,u,function(){return e.call(this,u.docId,u.options)})}},f.remove=function(t,e,n){return function(r,i,o,u){var c;return"string"==typeof i?(c=s(t,this,o,u),c.doc={_id:r,_rev:i}):(c=s(t,this,i,o),c.doc=r),a(n,c,function(){return e.call(this,c.doc,c.options)})}},f.bulkDocs=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return"new_edits"in r&&(u.options.new_edits=r.new_edits),u.docs=r.docs||r,a(n,u,function(){return e.call(this,u.docs,u.options)})}},f.allDocs=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,c(e,o))}},f.changes=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,c(e,o))}},f.sync=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.url=r,a(n,u,function(){return e.call(this,u.url,u.options)})}},f["replicate.from"]=f.sync,f["replicate.to"]=f.sync,f.putAttachment=function(t,e,n){return function(r,i,o,u,c,l,h){var f;return"string"==typeof c?(f=s(t,this,l,h),f.rev=o,f.doc=u,f.type=c):(f=s(t,this,c,l),f.rev=null,f.doc=o,f.type=u),f.docId=r,f.attachmentId=i,a(n,f,function(){return e.call(this,f.docId,f.attachmentId,f.rev,f.doc,f.type)})}},f.getAttachment=function(t,e,n){return function(r,i,o,u){var c=s(t,this,o,u);return c.docId=r,c.attachmentId=i,a(n,c,function(){return e.call(this,c.docId,c.attachmentId,c.options)})}},f.removeAttachment=function(t,e,n){return function(r,i,o,u,c){var l=s(t,this,u,c);return l.docId=r,l.attachmentId=i,l.rev=o,a(n,l,function(){return e.call(this,l.docId,l.attachmentId,l.rev)})}},f.query=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.fun=r,a(n,u,function(){return e.call(this,u.fun,u.options)})}},f.viewCleanup=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,c(e,o))}},f.info=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,u(e))}},f.compact=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,c(e,o))}},f.revsDiff=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.diff=r,a(n,u,function(){return e.call(this,u.diff)})}},f.list=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.path=r,a(n,u,function(){return e.call(this,u.path,u.options)})}},f.rewriteResultRequestObject=f.list,f.show=f.list,f.update=f.list,f.getSecurity=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,c(e,o))}},f.putSecurity=function(t,e,n){return function(r,i,o){var u=s(t,this,i,o);return u.secObj=r,a(n,u,function(){return e.call(this,u.secObj)})}};var d={};d["new"]=function(t,e,n){return function(r,i,o){var u;return"object"==typeof r?u=s(t,this,r,i):(u=s(t,this,i,o),u.options.name=r),a(n,u,function(){return e.call(this,u.options)})}},d.destroy=function(t,e,n){return function(r,i,o){var u;return"object"==typeof r?u=s(t,this,r,i):(u=s(t,this,i,o),u.options.name=r),u.options.internal?e.apply(t,arguments):a(n,u,function(){var t=u.options.name;return delete u.options.name,e.call(this,t,u.options)})}},d.replicate=function(t,e,n){return function(r,i,o,u){var c=s(t,this,o,u);return c.source=r,c.target=i,a(n,c,function(){return e.call(this,c.source,c.target,c.options)})}},d.allDbs=function(t,e,n){return function(r,i){var o=s(t,this,r,i);return a(n,o,u(e))}},n.uninstallWrapperMethods=function(t,e){l(t,e)},n.uninstallStaticWrapperMethods=function(t,e){l(t,e)}},{"promise-nodify":206}],206:[function(t,e,n){e.exports=function(t,e){"function"==typeof e&&t.then(function(t){e(null,t)},function(t){e(t,null)})}},{}],207:[function(t,e,n){(function(e,r){var i;i="undefined"!=typeof window&&window.PouchDB?window.PouchDB.utils.Promise:"function"==typeof r.Promise?r.Promise:t("lie"),n.once=function(t){var e=!1;return n.getArguments(function(n){if(e)throw console.trace(),new Error("once called  more than once");e=!0,t.apply(this,n)})},n.getArguments=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}},n.toPromise=function(t){return n.getArguments(function(r){var o,s=this,a="function"==typeof r[r.length-1]&&r.pop();a&&(o=function(t,n){e.nextTick(function(){a(t,n)})});var u=new i(function(e,i){try{var o=n.once(function(t,n){t?i(t):e(n)});r.push(o),t.apply(s,r)}catch(a){i(a)}});return o&&u.then(function(t){o(null,t)},o),u.cancel=function(){return this},u})},n.inherits=t("inherits"),n.Promise=i,n.extend=t("pouchdb-extend"),n.clone=function(t){return n.extend(!0,{},t)},n.isLocalId=function(t){return/^_local/.test(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:151,inherits:189,lie:193,"pouchdb-extend":204}],208:[function(t,e,n){(function(n){!function(r){function i(){var t=r.crypto||r.msCrypto;if(!l&&t&&t.getRandomValues)try{var e=new Uint8Array(16);d=l=function(){return t.getRandomValues(e),e},l()}catch(n){}if(!l){var i=new Array(16);h=l=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}}function o(){if("function"==typeof t)try{var e=t("crypto").randomBytes;f=l=e&&function(){return e(16)},l()}catch(n){}}function s(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(e[r+i++]=m[t])});i<16;)e[r+i++]=0;return e}function a(t,e){var n=e||0,r=v;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function u(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var o=null!=t.clockseq?t.clockseq:w,s=null!=t.msecs?t.msecs:(new Date).getTime(),u=null!=t.nsecs?t.nsecs:x+1,c=s-S+(u-x)/1e4;if(c<0&&null==t.clockseq&&(o=o+1&16383),(c<0||s>S)&&null==t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");S=s,x=u,w=o,s+=122192928e5;var l=(1e4*(268435455&s)+u)%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var h=s/4294967296*1e4&268435455;i[r++]=h>>>8&255,i[r++]=255&h,i[r++]=h>>>24&15|16,i[r++]=h>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var f=t.node||_,d=0;d<6;d++)i[r+d]=f[d];return e?e:a(i)}function c(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new g(16):null,t=null),t=t||{};var i=t.random||(t.rng||l)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;o++)e[r+o]=i[o];return e||a(i)}var l,h,f,d,p;r?i():o();for(var g="function"==typeof n?n:Array,v=[],m={},y=0;y<256;y++)v[y]=(y+256).toString(16).substr(1),m[v[y]]=y;var b=l(),_=[1|b[0],b[1],b[2],b[3],b[4],b[5]],w=16383&(b[6]<<8|b[7]),S=0,x=0,E=c;E.v1=u,E.v4=c,E.parse=s,E.unparse=a,E.BufferClass=g,E._rng=l,E._mathRNG=h,E._nodeRNG=f,E._whatwgRNG=d,"undefined"!=typeof e&&e.exports?e.exports=E:"function"==typeof define&&define.amd?define(function(){return E}):(p=r.uuid,E.noConflict=function(){return r.uuid=p,E},r.uuid=E)}("undefined"!=typeof window?window:null)}).call(this,t("buffer").Buffer)},{buffer:3,crypto:10}],209:[function(t,e,n){(function(n){"function"==typeof n.Promise?e.exports=n.Promise:e.exports=t("bluebird")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{bluebird:213}],210:[function(t,e,n){arguments[4][190][0].apply(n,arguments)},{dup:190}],211:[function(t,e,n){var r=t("./promise"),i=t("./reject"),o=t("./resolve"),s=t("./INTERNAL"),a=t("./handlers"),u=i(new TypeError("must be an array"));e.exports=function(t){function e(t,e){function r(t){c[e]=t,++l===n&!i&&(i=!0,a.resolve(f,c))}o(t).then(r,function(t){i||(i=!0,a.reject(f,t))})}if("[object Array]"!==Object.prototype.toString.call(t))return u;var n=t.length,i=!1;if(!n)return o([]);for(var c=new Array(n),l=0,h=-1,f=new r(s);++h<n;)e(t[h],h);return f}},{"./INTERNAL":210,"./handlers":212,"./promise":214,"./reject":216,"./resolve":217}],212:[function(t,e,n){function r(t){var e=t&&t.then;if(t&&"object"==typeof t&&"function"==typeof e)return function(){e.apply(t,arguments)}}var i=t("./tryCatch"),o=t("./resolveThenable"),s=t("./states");n.resolve=function(t,e){var a=i(r,e);if("error"===a.status)return n.reject(t,a.value);var u=a.value;if(u)o.safely(t,u);else{t.state=s.FULFILLED,t.outcome=e;for(var c=-1,l=t.queue.length;++c<l;)t.queue[c].callFulfilled(e)}return t},n.reject=function(t,e){t.state=s.REJECTED,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t}},{"./resolveThenable":218,"./states":219,"./tryCatch":220}],213:[function(t,e,n){e.exports=n=t("./promise"),n.resolve=t("./resolve"),n.reject=t("./reject"),n.all=t("./all")},{"./all":211,"./promise":214,"./reject":216,"./resolve":217}],214:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);if("function"!=typeof t)throw new TypeError("reslover must be a function");this.state=a.PENDING,this.queue=[],this.outcome=void 0,t!==o&&s.safely(this,t)}var i=t("./unwrap"),o=t("./INTERNAL"),s=t("./resolveThenable"),a=t("./states"),u=t("./queueItem");e.exports=r,r.prototype["catch"]=function(t){return this.then(null,t)},r.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a.FULFILLED||"function"!=typeof e&&this.state===a.REJECTED)return this;var n=new r(o);if(this.state!==a.PENDING){var s=this.state===a.FULFILLED?t:e;i(n,s,this.outcome)}else this.queue.push(new u(n,t,e));return n}},{"./INTERNAL":210,"./queueItem":215,"./resolveThenable":218,"./states":219,"./unwrap":221}],215:[function(t,e,n){function r(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}var i=t("./handlers"),o=t("./unwrap");e.exports=r,r.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},r.prototype.otherCallFulfilled=function(t){o(this.promise,this.onFulfilled,t)},r.prototype.callRejected=function(t){i.reject(this.promise,t)},r.prototype.otherCallRejected=function(t){o(this.promise,this.onRejected,t)}},{"./handlers":212,"./unwrap":221}],216:[function(t,e,n){arguments[4][197][0].apply(n,arguments)},{"./INTERNAL":210,"./handlers":212,"./promise":214,dup:197}],217:[function(t,e,n){arguments[4][198][0].apply(n,arguments)},{"./INTERNAL":210,"./handlers":212,"./promise":214,dup:198}],218:[function(t,e,n){arguments[4][199][0].apply(n,arguments)},{"./handlers":212,"./tryCatch":220,dup:199}],219:[function(t,e,n){n.REJECTED=["REJECTED"],n.FULFILLED=["FULFILLED"],n.PENDING=["PENDING"]},{}],220:[function(t,e,n){arguments[4][201][0].apply(n,arguments)},{dup:201}],221:[function(t,e,n){arguments[4][202][0].apply(n,arguments)},{"./handlers":212,dup:202,immediate:222}],222:[function(t,e,n){function r(){a=!1,u&&u.length?f=u.concat(f):h=-1,f.length&&i()}function i(){d=!1,a=!0;for(var t=f.length,e=setTimeout(r);t;){for(u=f,f=[];++h<t;)u[h].run();h=-1,t=f.length}h=-1,a=!1,clearTimeout(e)}function o(t,e){this.fun=t,this.array=e}function s(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new o(t,e)),d||a||(d=!0,c())}for(var a,u,c,l=[t("./nextTick"),t("./mutation.js"),t("./messageChannel"),t("./stateChange"),t("./timeout")],h=-1,f=[],d=!1,p=-1,g=l.length;++p<g;)if(l[p]&&l[p].test&&l[p].test()){c=l[p].install(i);break}o.prototype.run=function(){this.fun.apply(null,this.array)},e.exports=s},{"./messageChannel":223,"./mutation.js":224,"./nextTick":2,"./stateChange":225,"./timeout":226}],223:[function(t,e,n){(function(t){n.test=function(){return!t.setImmediate&&"undefined"!=typeof t.MessageChannel},n.install=function(e){var n=new t.MessageChannel;return n.port1.onmessage=e,function(){n.port2.postMessage(0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],224:[function(t,e,n){(function(t){var e=t.MutationObserver||t.WebKitMutationObserver;n.test=function(){return e},n.install=function(n){var r=0,i=new e(n),o=t.document.createTextNode("");return i.observe(o,{characterData:!0}),function(){o.data=r=++r%2}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],225:[function(t,e,n){(function(t){n.test=function(){return"document"in t&&"onreadystatechange"in t.document.createElement("script")},n.install=function(e){return function(){var n=t.document.createElement("script");return n.onreadystatechange=function(){e(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},t.document.documentElement.appendChild(n),e}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],226:[function(t,e,n){n.test=function(){return!0},n.install=function(t){return function(){setTimeout(t,0)}}},{}]},{},[169])(169)}),function(t){"function"==typeof define&&define.amd?define("picker",["angular"],t):this.Picker=t(angular)}(function(t){function e(t,r,i,s){function a(){return e._.node("div",e._.node("div",e._.node("div",e._.node("div",m.component.nodes(p.open),d.box),d.wrap),d.frame),d.holder)}function u(){g.data(r,m),g.addClass(d.input),g[0].value=g.attr("data-value")?m.get("select",f.format):t.value,angular.element(document.querySelectorAll("#"+p.id)).on("focus",h),angular.element(document.querySelectorAll("#"+p.id)).on("click",h),f.editable||angular.element(document.querySelectorAll("#"+p.id)).on("keydown",function(t){var e=t.keyCode,n=/^(8|46)$/.test(e);return 27==e?(m.close(),!1):void((32==e||n||!p.open&&m.component.key[e])&&(t.preventDefault(),t.stopPropagation(),n?m.clear().close():m.open()))}),n(t,{haspopup:!0,expanded:!1,readonly:!1,owns:t.id+"_root"+(m._hidden?" "+m._hidden.id:"")})}function c(){m.$root.on("focusin",function(t){m.$root.removeClass(d.focused),n(m.$root[0],"selected",!1),t.stopPropagation()}),m.$root.on("mousedown click",function(e){var n=e.target;n!=m.$root.children()[0]?(e.stopPropagation(),"mousedown"==e.type&&"input"!==angular.element(n)[0].tagName&&"SELECT"!=n.nodeName&&"OPTION"!=n.nodeName&&(e.preventDefault(),t.focus())):"click"==e.type&&m.get("open")&&m.close()}),m.attachLiveEvents=function(){angular.element(m.$root[0].querySelectorAll("[data-pick], [data-nav], [data-clear], [data-close]")).off("click").on("click",function(){var n=angular.element(this),r=n.hasClass(d.navDisabled)||n.hasClass(d.disabled),i=document.activeElement;i=i&&(i.type||i.href)&&i,(r||i&&!m.$root[0].contains(i))&&t.focus(),n.attr("data-nav")&&!r?(m.set("highlight",m.component.item.highlight,{nav:parseInt(n.attr("data-nav"))}),m.attachLiveEvents()):e._.isInteger(parseInt(n.attr("data-pick")))&&!r?(m.set("select",parseInt(n.attr("data-pick"))).close(!0),m.attachLiveEvents()):n.attr("data-clear")?(m.clear().close(!0),m.attachLiveEvents()):n.attr("data-close")&&(m.close(!0),m.attachLiveEvents())})},n(m.$root[0],"hidden",!0)}function l(){var e=["string"==typeof f.hiddenPrefix?f.hiddenPrefix:"","string"==typeof f.hiddenSuffix?f.hiddenSuffix:"_submit"];m._hidden=angular.element('<input type=hidden name="'+e[0]+t.name+e[1]+'"id="'+e[0]+t.id+e[1]+'"'+(g.attr("data-value")||t.value?' value="'+m.get("select",f.formatSubmit)+'"':"")+">")[0],g.on("change."+p.id,function(){m._hidden.value=t.value?m.get("select",f.formatSubmit):""}).after(m._hidden)}function h(t){t.stopPropagation(),"focus"==t.type&&(m.$root.addClass(d.focused),n(m.$root[0],"selected",!0)),m.open()}if(!t)return e;var f;i?(f=i.defaults,angular.extend(f,s)):f=s||{};var d=e.klasses();angular.extend(d,f.klass);var p={id:t.id||"P"+Math.abs(~~(Math.random()*new Date))},g=angular.element(t),v=function(){return this.start()},m=v.prototype={constructor:v,$node:g,start:function(){return p&&p.start?m:(p.methods={},p.start=!0,p.open=!1,p.type=t.type,t.autofocus=t==document.activeElement,t.type="text",t.readOnly=!f.editable,t.id=t.id||p.id,m.component=new i(m,f),m.$root=angular.element(e._.node("div",a(),d.picker,'id="'+t.id+'_root"')),c(),f.formatSubmit&&l(),u(),f.container?angular.element(f.container).append(m.$root):g.after(m.$root),m.on({start:m.component.onStart,render:m.component.onRender,stop:m.component.onStop,open:m.component.onOpen,close:m.component.onClose,set:m.component.onSet}).on({start:f.onStart,render:f.onRender,stop:f.onStop,open:f.onOpen,close:f.onClose,set:f.onSet}),t.autofocus&&m.open(),m.attachLiveEvents(),m.trigger("start").trigger("render"))},render:function(t){return t?m.$root.html(a()):angular.element(m.$root[0].querySelectorAll("."+d.box)).html(m.component.nodes(p.open)),m.attachLiveEvents(),m.trigger("render")},stop:function(){return p.start?(m.close(),m._hidden&&m._hidden.parentNode.removeChild(m._hidden),m.$root.remove(),g.removeClass(d.input).removeData(r),setTimeout(function(){g.off("."+p.id)},0),t.type=p.type,t.readOnly=!1,m.trigger("stop"),p.methods={},p.start=!1,m):m},open:function(r){
return p.open?m:(g.addClass(d.active),n(t,"expanded",!0),m.$root.addClass(d.opened),n(m.$root[0],"hidden",!1),r!==!1&&(p.open=!0,g.triggerHandler("focus"),angular.element(document.querySelectorAll("#"+p.id)).off("click focusin").on("click focusin",function(e){var n=e.target;n!=t&&n!=document&&3!=e.which&&m.close(n===m.$root.children()[0])}),angular.element(document.querySelectorAll("#"+p.id)).off("keydown").on("keydown",function(n){var r=n.keyCode,i=m.component.key[r],o=n.target;27==r?m.close(!0):o!=t||!i&&13!=r?m.$root[0].contains(o)&&13==r&&(n.preventDefault(),o.click()):(n.preventDefault(),i?e._.trigger(m.component.key.go,m,[e._.trigger(i)]):angular.element(m.$root[0].querySelectorAll("."+d.highlighted)).hasClass(d.disabled)||m.set("select",m.component.item.highlight).close())})),m.trigger("open"))},close:function(e){return e&&(g.off("focus."+p.id),g.triggerHandler("focus"),setTimeout(function(){angular.element(document.querySelectorAll("#"+p.id)).on("focus",h)},0)),g.removeClass(d.active),n(t,"expanded",!1),m.$root.removeClass(d.opened+" "+d.focused),n(m.$root[0],"hidden",!0),n(m.$root[0],"selected",!1),p.open?(p.open=!1,g[0].blur(),o.off("."+p.id),m.trigger("close")):m},clear:function(){return m.set("clear")},set:function(t,e,n){var r,i,o=angular.isObject(t),s=o?t:{};if(n=o&&angular.isObject(e)?e:n||{},t){o||(s[t]=e);for(r in s)i=s[r],r in m.component.item&&m.component.set(r,i,n),"select"!=r&&"clear"!=r||(g[0].value="clear"==r?"":m.get(r,f.format),g.triggerHandler("change"));m.render()}return n.muted?m:m.trigger("set",s)},get:function(n,r){return n=n||"value",null!=p[n]?p[n]:"value"==n?t.value:n in m.component.item?"string"==typeof r?e._.trigger(m.component.formats.toString,m.component,[r,m.component.get(n)]):m.component.get(n):void 0},on:function(t,e){var n,r,i=angular.isObject(t),o=i?t:{};if(t){i||(o[t]=e);for(n in o)r=o[n],p.methods[n]=p.methods[n]||[],p.methods[n].push(r)}return m},off:function(){var t,e,n=arguments;for(t=0,namesCount=n.length;t<namesCount;t+=1)e=n[t],e in p.methods&&delete p.methods[e];return m},trigger:function(t,n){var r=p.methods[t];return r&&r.map(function(t){e._.trigger(t,m,[n])}),m}};return new v}function n(t,e,n){if(angular.isObject(e))for(var i in e)r(t,i,e[i]);else r(t,e,n)}function r(t,e,n){angular.element(t).attr(("role"==e?"":"aria-")+e,n)}function i(t,e){angular.isObject(t)||(t={attribute:e}),e="";for(var n in t){var r=("role"==n?"":"aria-")+n,i=t[n];e+=null==i?"":r+'="'+t[n]+'"'}return e}var o=angular.element(document);return e.klasses=function(t){return t=t||"picker",{picker:t,opened:t+"--opened",focused:t+"--focused",input:t+"__input",active:t+"__input--active",holder:t+"__holder",frame:t+"__frame",wrap:t+"__wrap",box:t+"__box"}},e._={group:function(t){for(var n,r="",i=e._.trigger(t.min,t);i<=e._.trigger(t.max,t,[i]);i+=t.i)n=e._.trigger(t.item,t,[i]),r+=e._.node(t.node,n[0],n[1],n[2]);return r},node:function(e,n,r,i){return n?(n=t.isArray(n)?n.join(""):n,r=r?' class="'+r+'"':"",i=i?" "+i:"","<"+e+r+i+">"+n+"</"+e+">"):""},lead:function(t){return(t<10?"0":"")+t},trigger:function(t,e,n){return"function"==typeof t?t.apply(e,n||[]):t},digits:function(t){return/\d/.test(t[1])?2:1},isDate:function(t){return{}.toString.call(t).indexOf("Date")>-1&&this.isInteger(t.getDate())},isInteger:function(t){return{}.toString.call(t).indexOf("Number")>-1&&t%1===0},ariaAttr:i},e.extend=function(t,n){angular.element.prototype[t]=function(r,i){var o=this.data(t);if("picker"==r)return o;if(o&&"string"==typeof r)return e._.trigger(o[r],o,[i]),this;for(var s=0;s<this.length;s++){var a=angular.element(this[s]);a.data(t)||new e(a[0],t,n,r)}},angular.element.prototype[t].defaults=n.defaults},e}),function(t){"function"==typeof define&&define.amd?define(["picker","angular"],t):t(Picker,angular)}(function(t,e){function n(t,n){var r=this,i=t.$node[0].value,o=t.$node.attr("data-value"),s=o||i,a=o?n.formatSubmit:n.format,u=function(){return"rtl"===getComputedStyle(t.$root[0]).direction};r.settings=n,r.$node=t.$node,r.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},r.item={},r.item.disable=(n.disable||[]).slice(0),r.item.enable=-function(t){return t[0]===!0?t.shift():-1}(r.item.disable),r.set("min",n.min).set("max",n.max).set("now"),s?r.set("select",s,{format:a,fromValue:!!i}):r.set("select",null).set("highlight",r.item.now),r.key={40:7,38:-7,39:function(){return u()?-1:1},37:function(){return u()?1:-1},go:function(t){var e=r.item.highlight,n=new Date(e.year,e.month,e.date+t),i=r.create([n.getFullYear(),n.getMonth(),n.getDate()]);r.set("select",i).set("highlight",i,{interval:t}),this.render()}},t.on("render",function(){e.element(t.$root[0].querySelectorAll("."+n.klass.selectMonth)).on("change",function(){var r=this.value;r&&(t.set("select",[t.get("view").year,r,t.get("highlight").date]),e.element(t.$root[0].querySelectorAll("."+n.klass.selectMonth)).triggerHandler("focus"))}),e.element(t.$root[0].querySelectorAll("."+n.klass.selectYear)).on("change",function(){var r=this.value;r&&(t.set("select",[r,t.get("view").month,t.get("highlight").date]),e.element(t.$root[0].querySelectorAll("."+n.klass.selectYear)).triggerHandler("focus"))})}).on("open",function(){e.element(t.$root[0].querySelectorAll("button, select")).attr("disabled",!1)}).on("close",function(){t.$node[0].blur(),e.element(t.$root[0].querySelectorAll("button, select")).attr("disabled",!0)})}var r=7,i=6,o=t._;n.prototype.set=function(t,e,n){var r=this,i=r.item;return null===e?(i[t]=e,r):(i["enable"==t?"disable":"flip"==t?"enable":t]=r.queue[t].split(" ").map(function(i){return e=r[i](t,e,n)}).pop(),"select"==t?r.set("highlight",i.select,n):"highlight"==t?r.set("view",i.highlight,n):t.match(/^(flip|min|max|disable|enable)$/)&&(i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},n.prototype.get=function(t){return this.item[t]},n.prototype.create=function(t,n,r){var i,s=this;return n=void 0===n?t:n,n==-(1/0)||n==1/0?i=n:e.isObject(n)&&o.isInteger(n.pick)?n=n.obj:e.isArray(n)?(n=new Date(n[0],n[1],n[2]),n=o.isDate(n)?n:s.create().obj):n=o.isInteger(n)||o.isDate(n)?s.normalize(new Date(n),r):s.now(t,n,r),{year:i||n.getFullYear(),month:i||n.getMonth(),date:i||n.getDate(),day:i||n.getDay(),obj:i||n,pick:i||n.getTime()}},n.prototype.createRange=function(t,n){var r=this,i=function(t){return t===!0||e.isArray(t)||o.isDate(t)?r.create(t):t};return o.isInteger(t)||(t=i(t)),o.isInteger(n)||(n=i(n)),o.isInteger(t)&&e.isObject(n)?t=[n.year,n.month,n.date+t]:o.isInteger(n)&&e.isObject(t)&&(n=[t.year,t.month,t.date+n]),{from:i(t),to:i(n)}},n.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},n.prototype.overlapRanges=function(t,e){var n=this;return t=n.createRange(t.from,t.to),e=n.createRange(e.from,e.to),n.withinRange(t,e.from)||n.withinRange(t,e.to)||n.withinRange(e,t.from)||n.withinRange(e,t.to)},n.prototype.now=function(t,e,n){return e=new Date,n&&n.rel&&e.setDate(e.getDate()+n.rel),this.normalize(e,n)},n.prototype.navigate=function(t,n,r){var i,o,s,a,u=e.isArray(n),c=e.isObject(n),l=this.item.view;if(u||c){for(c?(o=n.year,s=n.month,a=n.date):(o=+n[0],s=+n[1],a=+n[2]),r&&r.nav&&l&&l.month!==s&&(o=l.year,s=l.month),i=new Date(o,s+(r&&r.nav?r.nav:0),1),o=i.getFullYear(),s=i.getMonth();new Date(o,s,a).getMonth()!==s;)a-=1;n=[o,s,a]}return n},n.prototype.normalize=function(t){return t.setHours(0,0,0,0),t},n.prototype.measure=function(t,e){var n=this;return e?o.isInteger(e)&&(e=n.now(t,e,{rel:e})):e="min"==t?-(1/0):1/0,e},n.prototype.viewset=function(t,e){return this.create([e.year,e.month,1])},n.prototype.validate=function(t,n,r){var i,s,a,u,c=this,l=n,h=r&&r.interval?r.interval:1,f=c.item.enable===-1,d=c.item.min,p=c.item.max,g=f&&c.item.disable.filter(function(t){if(e.isArray(t)){var r=c.create(t).pick;r<n.pick?i=!0:r>n.pick&&(s=!0)}return o.isInteger(t)}).length;if((!r||!r.nav)&&(!f&&c.disabled(n)||f&&c.disabled(n)&&(g||i||s)||!f&&(n.pick<=d.pick||n.pick>=p.pick)))for(f&&!g&&(!s&&h>0||!i&&h<0)&&(h*=-1);c.disabled(n)&&(Math.abs(h)>1&&(n.month<l.month||n.month>l.month)&&(n=l,h=h>0?1:-1),n.pick<=d.pick?(a=!0,h=1,n=c.create([d.year,d.month,d.date-1])):n.pick>=p.pick&&(u=!0,h=-1,n=c.create([p.year,p.month,p.date+1])),!a||!u);)n=c.create([n.year,n.month,n.date+h]);return n},n.prototype.disabled=function(t){var n=this,r=n.item.disable.filter(function(r){return o.isInteger(r)?t.day===(n.settings.firstDay?r:r-1)%7:e.isArray(r)||o.isDate(r)?t.pick===n.create(r).pick:e.isObject(r)?n.withinRange(r,t):void 0});return r=r.length&&!r.filter(function(t){return e.isArray(t)&&"inverted"==t[3]||e.isObject(t)&&t.inverted}).length,n.item.enable===-1?!r:r||t.pick<n.item.min.pick||t.pick>n.item.max.pick},n.prototype.parse=function(t,n,r){var i,s=this,a={};return!n||o.isInteger(n)||e.isArray(n)||o.isDate(n)||e.isObject(n)&&o.isInteger(n.pick)?n:(r&&r.format||(r=r||{},r.format=s.settings.format),i="string"!=typeof n||r.fromValue?0:1,s.formats.toArray(r.format).map(function(t){var e=s.formats[t],r=e?o.trigger(e,s,[n,a]):t.replace(/^!/,"").length;e&&(a[t]=n.substr(0,r)),n=n.substr(r)}),[a.yyyy||a.yy,+(a.mm||a.m)-i,a.dd||a.d])},n.prototype.formats=function(){function t(t,e,n){var r=t.match(/\w+/)[0];return n.mm||n.m||(n.m=e.indexOf(r)),r.length}function e(t){return t.match(/\w+/)[0].length}return{d:function(t,e){return t?o.digits(t):e.date},dd:function(t,e){return t?2:o.lead(e.date)},ddd:function(t,n){return t?e(t):this.settings.weekdaysShort[n.day]},dddd:function(t,n){return t?e(t):this.settings.weekdaysFull[n.day]},m:function(t,e){return t?o.digits(t):e.month+1},mm:function(t,e){return t?2:o.lead(e.month+1)},mmm:function(e,n){var r=this.settings.monthsShort;return e?t(e,r,n):r[n.month]},mmmm:function(e,n){var r=this.settings.monthsFull;return e?t(e,r,n):r[n.month]},yy:function(t,e){return t?2:(""+e.year).slice(2)},yyyy:function(t,e){return t?4:e.year},toArray:function(t){return t.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(t,e){var n=this;return null==e?null:n.formats.toArray(t).map(function(t){return o.trigger(n.formats[t],n,[0,e])||t.replace(/^!/,"")}).join("")}}}(),n.prototype.isDateExact=function(t,n){var r=this;return o.isInteger(t)&&o.isInteger(n)||"boolean"==typeof t&&"boolean"==typeof n?t===n:(o.isDate(t)||e.isArray(t))&&(o.isDate(n)||e.isArray(n))?r.create(t).pick===r.create(n).pick:!(!e.isObject(t)||!e.isObject(n))&&(r.isDateExact(t.from,n.from)&&r.isDateExact(t.to,n.to))},n.prototype.isDateOverlap=function(t,n){var r=this;return o.isInteger(t)&&(o.isDate(n)||e.isArray(n))?t===r.create(n).day+1:o.isInteger(n)&&(o.isDate(t)||e.isArray(t))?n===r.create(t).day+1:!(!e.isObject(t)||!e.isObject(n))&&r.overlapRanges(t,n)},n.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(e.enable==-1?1:-1)},n.prototype.deactivate=function(t,n){var r=this,i=r.item.disable.slice(0);return"flip"==n?r.flipEnable():n===!1?(r.flipEnable(1),i=[]):n===!0?(r.flipEnable(-1),i=[]):n.map(function(t){for(var n,s=0;s<i.length;s+=1)if(r.isDateExact(t,i[s])){n=!0;break}n||(o.isInteger(t)||o.isDate(t)||e.isArray(t)||e.isObject(t)&&t.from&&t.to)&&i.push(t)}),i},n.prototype.activate=function(t,n){var r=this,i=r.item.disable,s=i.length;return"flip"==n?r.flipEnable():n===!0?(r.flipEnable(1),i=[]):n===!1?(r.flipEnable(-1),i=[]):n.map(function(t){var n,a,u,c;for(u=0;u<s;u+=1){if(a=i[u],r.isDateExact(a,t)){n=i[u]=null,c=!0;break}if(r.isDateOverlap(a,t)){e.isObject(t)?(t.inverted=!0,n=t):e.isArray(t)?(n=t,n[3]||n.push("inverted")):o.isDate(t)&&(n=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(n)for(u=0;u<s;u+=1)if(r.isDateExact(i[u],t)){i[u]=null;break}if(c)for(u=0;u<s;u+=1)if(r.isDateOverlap(i[u],t)){i[u]=null;break}n&&i.push(n)}),i.filter(function(t){return null!=t})},n.prototype.nodes=function(t){var e=this,n=e.settings,s=e.item,a=s.now,u=s.select,c=s.highlight,l=s.view,h=s.disable,f=s.min,d=s.max,p=function(t){return n.firstDay&&t.push(t.shift()),o.node("thead",o.node("tr",o.group({min:0,max:r-1,i:1,node:"th",item:function(e){return[t[e],n.klass.weekdays]}})))}((n.showWeekdaysFull?n.weekdaysFull:n.weekdaysShort).slice(0)),g=function(t){return o.node("div"," ",n.klass["nav"+(t?"Next":"Prev")]+(t&&l.year>=d.year&&l.month>=d.month||!t&&l.year<=f.year&&l.month<=f.month?" "+n.klass.navDisabled:""),"data-nav="+(t||-1))},v=function(e){return n.selectMonths?o.node("select",o.group({min:0,max:11,i:1,node:"option",item:function(t){return[e[t],0,"value="+t+(l.month==t?" selected":"")+(l.year==f.year&&t<f.month||l.year==d.year&&t>d.month?" disabled":"")]}}),n.klass.selectMonth,t?"":"disabled"):o.node("div",e[l.month],n.klass.month)},m=function(){var e=l.year,r=n.selectYears===!0?5:~~(n.selectYears/2);if(r){var i=f.year,s=d.year,a=e-r,u=e+r;if(i>a&&(u+=i-a,a=i),s<u){var c=a-i,h=u-s;a-=c>h?h:c,u=s}return o.node("select",o.group({min:a,max:u,i:1,node:"option",item:function(t){return[t,0,"value="+t+(e==t?" selected":"")]}}),n.klass.selectYear,t?"":"disabled")}return o.node("div",e,n.klass.year)};return o.node("div",g()+g(1)+v(n.showMonthsShort?n.monthsShort:n.monthsFull)+m(),n.klass.header)+o.node("table",p+o.node("tbody",o.group({min:0,max:i-1,i:1,node:"tr",item:function(t){var i=n.firstDay&&0===e.create([l.year,l.month,1]).day?-7:0;return[o.group({min:r*t-l.day+i+1,max:function(){return this.min+r-1},i:1,node:"td",item:function(t){t=e.create([l.year,l.month,t+(n.firstDay?1:0)]);var r=u&&u.pick==t.pick,i=c&&c.pick==t.pick,s=h&&e.disabled(t)||t.pick<f.pick||t.pick>d.pick;return[o.node("div",t.date,function(e){return e.push(l.month==t.month?n.klass.infocus:n.klass.outfocus),a.pick==t.pick&&e.push(n.klass.now),r&&e.push(n.klass.selected),i&&e.push(n.klass.highlighted),s&&e.push(n.klass.disabled),e.join(" ")}([n.klass.day]),"data-pick="+t.pick+" "+o.ariaAttr({role:"button",controls:e.$node[0].id,checked:!(!r||e.$node[0].value!==o.trigger(e.formats.toString,e,[n.format,t]))||null,activedescendant:!!i||null,disabled:!!s||null}))]}})]}})),n.klass.table)+o.node("div",o.node("button",n.today,n.klass.buttonToday,"type=button data-pick="+a.pick+(t?"":" disabled"))+o.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(t?"":" disabled"))+o.node("button",n.close,n.klass.buttonClose,"type=button data-close=true "+(t?"":" disabled")),n.klass.footer)},n.defaults=function(t){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",format:"d mmmm, yyyy",klass:{table:t+"table",header:t+"header",navPrev:t+"nav--prev",navNext:t+"nav--next",navDisabled:t+"nav--disabled",month:t+"month",year:t+"year",selectMonth:t+"select--month",selectYear:t+"select--year",weekdays:t+"weekday",day:t+"day",disabled:t+"day--disabled",selected:t+"day--selected",highlighted:t+"day--highlighted",now:t+"day--today",infocus:t+"day--infocus",outfocus:t+"day--outfocus",footer:t+"footer",buttonClear:t+"button--clear",buttonClose:t+"button--close",buttonToday:t+"button--today"}}}(t.klasses().picker+"__"),t.extend("pickadate",n)}),function(t){"function"==typeof define&&define.amd?define(["picker","angular"],t):t(Picker,angular)}(function(t,e){function n(t,e){var n=this,r=t.$node[0].value,i=t.$node.data("value"),o=i||r,s=i?e.formatSubmit:e.format;n.settings=e,n.$node=t.$node,n.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},n.item={},n.item.interval=e.interval||30,n.item.disable=(e.disable||[]).slice(0),n.item.enable=-function(t){return t[0]===!0?t.shift():-1}(n.item.disable),n.set("min",e.min).set("max",e.max).set("now"),o?n.set("select",o,{format:s,fromValue:!!r}):n.set("select",null).set("highlight",n.item.now),n.key={40:1,38:-1,39:1,37:-1,go:function(t){n.set("highlight",n.item.highlight.pick+t*n.item.interval,{interval:t*n.item.interval}),this.render()}},t.on("render",function(){var n=t.$root.children(),r=n.find("."+e.klass.viewset);r.length&&(n[0].scrollTop=~~r.position().top-2*r[0].clientHeight)}).on("open",function(){t.$root.find("button").attr("disable",!1)}).on("close",function(){t.$root.find("button").attr("disable",!0)})}var r=24,i=60,o=12,s=r*i,a=t._;n.prototype.set=function(t,e,n){var r=this,i=r.item;return null===e?(i[t]=e,r):(i["enable"==t?"disable":"flip"==t?"enable":t]=r.queue[t].split(" ").map(function(i){return e=r[i](t,e,n)}).pop(),"select"==t?r.set("highlight",i.select,n):"highlight"==t?r.set("view",i.highlight,n):"interval"==t?r.set("min",i.min,n).set("max",i.max,n):t.match(/^(flip|min|max|disable|enable)$/)&&("min"==t&&r.set("max",i.max,n),i.select&&r.disabled(i.select)&&r.set("select",i.select,n),i.highlight&&r.disabled(i.highlight)&&r.set("highlight",i.highlight,n)),r)},n.prototype.get=function(t){return this.item[t]},n.prototype.create=function(t,n,o){var u=this;return n=void 0===n?t:n,a.isDate(n)&&(n=[n.getHours(),n.getMinutes()]),e.isObject(n)&&a.isInteger(n.pick)?n=n.pick:e.isArray(n)?n=+n[0]*i+ +n[1]:a.isInteger(n)||(n=u.now(t,n,o)),"max"==t&&n<u.item.min.pick&&(n+=s),"min"!=t&&"max"!=t&&(n-u.item.min.pick)%u.item.interval!==0&&(n+=u.item.interval),n=u.normalize(t,n,o),{hour:~~(r+n/i)%r,mins:(i+n%i)%i,time:(s+n)%s,pick:n}},n.prototype.createRange=function(t,n){var r=this,i=function(t){return t===!0||e.isArray(t)||a.isDate(t)?r.create(t):t};return a.isInteger(t)||(t=i(t)),a.isInteger(n)||(n=i(n)),a.isInteger(t)&&e.isObject(n)?t=[n.hour,n.mins+t*r.settings.interval]:a.isInteger(n)&&e.isObject(t)&&(n=[t.hour,t.mins+n*r.settings.interval]),{from:i(t),to:i(n)}},n.prototype.withinRange=function(t,e){return t=this.createRange(t.from,t.to),e.pick>=t.from.pick&&e.pick<=t.to.pick},n.prototype.overlapRanges=function(t,e){var n=this;return t=n.createRange(t.from,t.to),e=n.createRange(e.from,e.to),n.withinRange(t,e.from)||n.withinRange(t,e.to)||n.withinRange(e,t.from)||n.withinRange(e,t.to)},n.prototype.now=function(t,e){var n,r=this.item.interval,o=new Date,s=o.getHours()*i+o.getMinutes(),u=a.isInteger(e);return s-=s%r,n=e<0&&r*e+s<=-r,s+="min"==t&&n?0:r,u&&(s+=r*(n&&"max"!=t?e+1:e)),s},n.prototype.normalize=function(t,e){var n=this.item.interval,r=this.item.min&&this.item.min.pick||0;return e-="min"==t?0:(e-r)%n},n.prototype.measure=function(t,n,o){var s=this;return n?n===!0||a.isInteger(n)?n=s.now(t,n,o):e.isObject(n)&&a.isInteger(n.pick)&&(n=s.normalize(t,n.pick,o)):n="min"==t?[0,0]:[r-1,i-1],n},n.prototype.validate=function(t,e,n){var r=this,i=n&&n.interval?n.interval:r.item.interval;return r.disabled(e)&&(e=r.shift(e,i)),e=r.scope(e),r.disabled(e)&&(e=r.shift(e,i*-1)),e},n.prototype.disabled=function(t){var n=this,r=n.item.disable.filter(function(r){return a.isInteger(r)?t.hour==r:e.isArray(r)||a.isDate(r)?t.pick==n.create(r).pick:e.isObject(r)?n.withinRange(r,t):void 0});return r=r.length&&!r.filter(function(t){return e.isArray(t)&&"inverted"==t[2]||e.isObject(t)&&t.inverted}).length,n.item.enable===-1?!r:r||t.pick<n.item.min.pick||t.pick>n.item.max.pick},n.prototype.shift=function(t,e){var n=this,r=n.item.min.pick,i=n.item.max.pick;for(e=e||n.item.interval;n.disabled(t)&&(t=n.create(t.pick+=e),!(t.pick<=r||t.pick>=i)););return t},n.prototype.scope=function(t){var e=this.item.min.pick,n=this.item.max.pick;return this.create(t.pick>n?n:t.pick<e?e:t)},n.prototype.parse=function(t,n,r){var o,s,u,c,l,h=this,f={};if(!n||a.isInteger(n)||e.isArray(n)||a.isDate(n)||e.isObject(n)&&a.isInteger(n.pick))return n;r&&r.format||(r=r||{},r.format=h.settings.format),h.formats.toArray(r.format).map(function(t){var e,r=h.formats[t],i=r?a.trigger(r,h,[n,f]):t.replace(/^!/,"").length;r&&(e=n.substr(0,i),f[t]=e.match(/^\d+$/)?+e:e),n=n.substr(i)});for(c in f)l=f[c],a.isInteger(l)?c.match(/^(h|hh)$/i)?(o=l,"h"!=c&&"hh"!=c||(o%=12)):"i"==c&&(s=l):c.match(/^a$/i)&&l.match(/^p/i)&&("h"in f||"hh"in f)&&(u=!0);return(u?o+12:o)*i+s},n.prototype.formats={h:function(t,e){return t?a.digits(t):e.hour%o||o},hh:function(t,e){return t?2:a.lead(e.hour%o||o)},H:function(t,e){return t?a.digits(t):""+e.hour%24},HH:function(t,e){return t?a.digits(t):a.lead(e.hour%24)},i:function(t,e){return t?2:a.lead(e.mins)},a:function(t,e){return t?4:s/2>e.time%s?this.settings.amSmall:this.settings.pmSmall},A:function(t,e){return t?2:s/2>e.time%s?this.settings.amLarge:this.settings.pmLarge},toArray:function(t){return t.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(t,e){var n=this;return null===e?null:n.formats.toArray(t).map(function(t){return a.trigger(n.formats[t],n,[0,e])||t.replace(/^!/,"")}).join("")}},n.prototype.isTimeExact=function(t,n){var r=this;return a.isInteger(t)&&a.isInteger(n)||"boolean"==typeof t&&"boolean"==typeof n?t===n:(a.isDate(t)||e.isArray(t))&&(a.isDate(n)||e.isArray(n))?r.create(t).pick===r.create(n).pick:!(!e.isObject(t)||!e.isObject(n))&&(r.isTimeExact(t.from,n.from)&&r.isTimeExact(t.to,n.to))},n.prototype.isTimeOverlap=function(t,n){var r=this;return a.isInteger(t)&&(a.isDate(n)||e.isArray(n))?t===r.create(n).hour:a.isInteger(n)&&(a.isDate(t)||e.isArray(t))?n===r.create(t).hour:!(!e.isObject(t)||!e.isObject(n))&&r.overlapRanges(t,n)},n.prototype.flipEnable=function(t){var e=this.item;e.enable=t||(e.enable==-1?1:-1)},n.prototype.deactivate=function(t,n){var r=this,i=r.item.disable.slice(0);return"flip"==n?r.flipEnable():n===!1?(r.flipEnable(1),i=[]):n===!0?(r.flipEnable(-1),i=[]):n.map(function(t){for(var n,o=0;o<i.length;o+=1)if(r.isTimeExact(t,i[o])){n=!0;break}n||(a.isInteger(t)||a.isDate(t)||e.isArray(t)||e.isObject(t)&&t.from&&t.to)&&i.push(t)}),i},n.prototype.activate=function(t,n){var r=this,i=r.item.disable,o=i.length;return"flip"==n?r.flipEnable():n===!0?(r.flipEnable(1),i=[]):n===!1?(r.flipEnable(-1),i=[]):n.map(function(t){var n,s,u,c;for(u=0;u<o;u+=1){if(s=i[u],r.isTimeExact(s,t)){n=i[u]=null,c=!0;break}if(r.isTimeOverlap(s,t)){e.isObject(t)?(t.inverted=!0,n=t):e.isArray(t)?(n=t,n[2]||n.push("inverted")):a.isDate(t)&&(n=[t.getFullYear(),t.getMonth(),t.getDate(),"inverted"]);break}}if(n)for(u=0;u<o;u+=1)if(r.isTimeExact(i[u],t)){i[u]=null;break}if(c)for(u=0;u<o;u+=1)if(r.isTimeOverlap(i[u],t)){i[u]=null;break}n&&i.push(n)}),i.filter(function(t){return null!=t})},n.prototype.i=function(t,e){return a.isInteger(e)&&e>0?e:this.item.interval},n.prototype.nodes=function(t){var e=this,n=e.settings,r=e.item.select,i=e.item.highlight,o=e.item.view,s=e.item.disable;return a.node("ul",a.group({min:e.item.min.pick,max:e.item.max.pick,i:e.item.interval,node:"li",item:function(t){t=e.create(t);var u=t.pick,c=r&&r.pick==u,l=i&&i.pick==u,h=s&&e.disabled(t);return[a.trigger(e.formats.toString,e,[a.trigger(n.formatLabel,e,[t])||n.format,t]),function(t){return c&&t.push(n.klass.selected),l&&t.push(n.klass.highlighted),o&&o.pick==u&&t.push(n.klass.viewset),h&&t.push(n.klass.disabled),t.join(" ")}([n.klass.listItem]),"data-pick="+t.pick+" "+a.ariaAttr({role:"button",controls:e.$node[0].id,checked:!(!c||e.$node.val()!==a.trigger(e.formats.toString,e,[n.format,t]))||null,activedescendant:!!l||null,disabled:!!h||null})]}})+a.node("li",a.node("button",n.clear,n.klass.buttonClear,"type=button data-clear=1"+(t?"":" disable"))),n.klass.list)},n.defaults=function(t){return{amSmall:"a.m.",amLarge:"AM",pmSmall:"p.m.",pmLarge:"PM",clear:"Clear",format:"h:i A",interval:30,klass:{picker:t+" "+t+"--time",holder:t+"__holder",list:t+"__list",listItem:t+"__list-item",disabled:t+"__list-item--disabled",selected:t+"__list-item--selected",highlighted:t+"__list-item--highlighted",viewset:t+"__list-item--viewset",now:t+"__list-item--now",buttonClear:t+"__button--clear"}}}(t.klasses().picker),t.extend("pickatime",n)}),[].map||(Array.prototype.map=function(t,e){for(var n=this,r=n.length,i=new Array(r),o=0;o<r;o++)o in n&&(i[o]=t.call(e,n[o],o,n));return i}),[].filter||(Array.prototype.filter=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=[],i=arguments[1],o=0;o<n;o++)if(o in e){var s=e[o];t.call(i,s,o,e)&&r.push(s)}return r}),[].indexOf||(Array.prototype.indexOf=function(t){if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!=r?r=0:0!==r&&r!=1/0&&r!=-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);i<n;i++)if(i in e&&e[i]===t)return i;return-1});var nativeSplit=String.prototype.split,compliantExecNpcg=void 0===/()??/.exec("")[1];String.prototype.split=function(t,e){var n=this;if("[object RegExp]"!==Object.prototype.toString.call(t))return nativeSplit.call(n,t,e);var r,i,o,s,a=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),c=0;for(t=new RegExp(t.source,u+"g"),n+="",compliantExecNpcg||(r=new RegExp("^"+t.source+"$(?!\\s)",u)),e=void 0===e?-1>>>0:e>>>0;(i=t.exec(n))&&(o=i.index+i[0].length,!(o>c&&(a.push(n.slice(c,i.index)),!compliantExecNpcg&&i.length>1&&i[0].replace(r,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(i[t]=void 0)}),i.length>1&&i.index<n.length&&Array.prototype.push.apply(a,i.slice(1)),s=i[0].length,c=o,a.length>=e)));)t.lastIndex===i.index&&t.lastIndex++;return c===n.length?!s&&t.test("")||a.push(""):a.push(n.slice(c)),a.length>e?a.slice(0,e):a},window.AngularSlider=function(t,e,n){function r(t){d.cssText=t}function i(t,e){return typeof t===e}function o(){c.inputtypes=function(t){for(var r,i,o,s=0,a=t.length;a>s;s++)p.setAttribute("type",i=t[s]),r="text"!==p.type,r&&(p.value=g,p.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&p.style.WebkitAppearance!==n?(l.appendChild(p),o=e.defaultView,r=o.getComputedStyle&&"textfield"!==o.getComputedStyle(p,null).WebkitAppearance&&0!==p.offsetHeight,l.removeChild(p)):/^(search|tel)$/.test(i)||(r=/^(url|email)$/.test(i)?p.checkValidity&&p.checkValidity()===!1:p.value!=g)),m[t[s]]=!!r;return m}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var s,a,u="2.7.1",c={},l=e.documentElement,h="modernizr",f=e.createElement(h),d=f.style,p=e.createElement("input"),g=":)",v=({}.toString,{}),m={},y=[],b=y.slice,_={}.hasOwnProperty;a=i(_,"undefined")||i(_.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return _.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=b.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=e.prototype;var o=new i,s=e.apply(o,n.concat(b.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(b.call(arguments)))};return r});for(var w in v)a(v,w)&&(s=w.toLowerCase(),c[s]=v[w](),y.push((c[s]?"":"no-")+s));return c.input||o(),c.addTest=function(t,e){if("object"==typeof t)for(var r in t)a(t,r)&&c.addTest(r,t[r]);else{if(t=t.toLowerCase(),c[t]!==n)return c;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(l.className+=" "+(e?"":"no-")+t),c[t]=e}return c},r(""),f=p=null,c._version=u,c}(this,this.document),function(t,e,n){function r(t){return"[object Function]"==v.call(t)}function i(t){return"string"==typeof t}function o(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=m.shift();y=1,t?t.t?p(function(){("c"==t.t?f.injectCss:f.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):y=0}function u(t,n,r,i,o,u,c){function l(e){if(!d&&s(h.readyState)&&(b.r=d=1,!y&&a(),h.onload=h.onreadystatechange=null,e)){"img"!=t&&p(function(){w.removeChild(h)},50);for(var r in C[n])C[n].hasOwnProperty(r)&&C[n][r].onload()}}var c=c||f.errorTimeout,h=e.createElement(t),d=0,v=0,b={t:r,s:n,e:o,a:u,x:c};1===C[n]&&(v=1,C[n]=[]),"object"==t?h.data=n:(h.src=n,h.type=t),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){l.call(this,v)},m.splice(i,0,b),"img"!=t&&(v||2===C[n]?(w.insertBefore(h,_?null:g),p(l,c)):C[n].push(h))}function c(t,e,n,r,o){return y=0,e=e||"j",i(t)?u("c"==e?x:S,t,e,this.i++,n,r,o):(m.splice(this.i++,0,t),1==m.length&&a()),this}function l(){var t=f;return t.loader={load:c,i:0},t}var h,f,d=e.documentElement,p=t.setTimeout,g=e.getElementsByTagName("script")[0],v={}.toString,m=[],y=0,b="MozAppearance"in d.style,_=b&&!!e.createRange().compareNode,w=_?d:g.parentNode,d=t.opera&&"[object Opera]"==v.call(t.opera),d=!!e.attachEvent&&!d,S=b?"object":d?"script":"img",x=d?"script":S,E=Array.isArray||function(t){return"[object Array]"==v.call(t)},A=[],C={},R={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};f=function(t){function e(t){var e,n,r,t=t.split("!"),i=A.length,o=t.pop(),s=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;s>n;n++)r=t[n].split("="),(e=R[r.shift()])&&(o=e(o,r));for(n=0;i>n;n++)o=A[n](o);return o}function s(t,i,o,s,a){var u=e(t),c=u.autoCallback;u.url.split(".").pop().split("?").shift(),u.bypass||(i&&(i=r(i)?i:i[t]||i[s]||i[t.split("/").pop().split("?")[0]]),u.instead?u.instead(t,i,o,s,a):(C[u.url]?u.noexec=!0:C[u.url]=1,o.load(u.url,u.forceCSS||!u.forceJS&&"css"==u.url.split(".").pop().split("?").shift()?"c":n,u.noexec,u.attrs,u.timeout),(r(i)||r(c))&&o.load(function(){l(),i&&i(u.origUrl,a,s),c&&c(u.origUrl,a,s),C[u.url]=2})))}function a(t,e){function n(t,n){if(t){if(i(t))n||(h=function(){var t=[].slice.call(arguments);f.apply(this,t),d()}),s(t,h,e,0,c);else if(Object(t)===t)for(u in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(u)&&(!n&&!--a&&(r(h)?h=function(){var t=[].slice.call(arguments);f.apply(this,t),d()}:h[u]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),d()}}(f[u])),s(t[u],h,e,u,c))}else!n&&d()}var a,u,c=!!t.test,l=t.load||t.both,h=t.callback||o,f=h,d=t.complete||o;n(c?t.yep:t.nope,!!l),l&&n(l)}var u,c,h=this.yepnope.loader;if(i(t))s(t,0,h,0);else if(E(t))for(u=0;u<t.length;u++)c=t[u],i(c)?s(c,0,h,0):E(c)?f(c):Object(c)===c&&a(c,h);else Object(t)===t&&a(t,h)},f.addPrefix=function(t,e){R[t]=e},f.addFilter=function(t){A.push(t)},f.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",h=function(){e.removeEventListener("DOMContentLoaded",h,0),e.readyState="complete"},0)),t.yepnope=l(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,r,i,u,c){var l,h,d=e.createElement("script"),i=i||f.errorTimeout;d.src=t;for(h in r)d.setAttribute(h,r[h]);n=c?a:n||o,d.onreadystatechange=d.onload=function(){!l&&s(d.readyState)&&(l=1,n(),d.onload=d.onreadystatechange=null)},p(function(){l||(l=1,n(1))},i),u?d.onload():g.parentNode.insertBefore(d,g)},t.yepnope.injectCss=function(t,n,r,i,s,u){var c,i=e.createElement("link"),n=u?a:n||o;i.href=t,i.rel="stylesheet",i.type="text/css";for(c in r)i.setAttribute(c,r[c]);s||(g.parentNode.insertBefore(i,g),p(n,0))}}(this,document),AngularSlider.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},angular.module("vr.directives.slider",["ngTouch"]).directive("slider",["$timeout","$document","$interpolate","$swipe",function(t,e,n,r){function i(t){return angular.element(t)}function o(t){return""+t+"px"}function s(t,e){return t.css({opacity:e})}function a(t){return s(t,0)}function u(t){return s(t,1)}function c(t,e){return t.css({left:e})}function l(t){var e=parseFloat(t.css("width"));return isNaN(e)?t[0].offsetWidth:e}function h(t){return l(t)/2}function f(t){try{return t.offset().left}catch(e){}return t[0].getBoundingClientRect().left}function d(t,e){return f(t)>f(e)?f(t)-f(e)-l(e):f(e)-f(t)-l(t)}function p(t,e){return t.attr("ng-bind-template",e);
}function g(t,e,n,r,i){(angular.isUndefined(e)||!e)&&(e=0),(angular.isUndefined(n)||!n||0==n)&&(n=1/Math.pow(10,e)),(angular.isUndefined(r)||!r)&&(r=0),(angular.isUndefined(t)||!t)&&(t=0);var o=(t-r)%n,s=o>n/2?t+n-o:t-o;return(angular.isUndefined(i)||!i)&&(i=s),s=Math.min(Math.max(s,r),i),parseFloat(s.toFixed(e))}function v(t,e){return Math.floor(t/e+.5)*e}function m(t,e){return t>0&&!isNaN(e)?Math.ceil(e/t)*t:e}function y(t){return _+" "+t+" "+w}var b=3,_=n.startSymbol(),w=n.endSymbol();return{restrict:"EA",require:"ngModel",scope:{floor:"@",ceiling:"@",step:"@",stepWidth:"@",precision:"@",buffer:"@",stickiness:"@",showSteps:"@",ngModel:"=",ngModelRange:"=",ngDisabled:"=",ngChange:"&",translateFn:"&",translateRangeFn:"&",translateCombinedFn:"&",scaleFn:"&",inverseScaleFn:"&"},template:"<span class='bar full'></span><span class='bar steps'><span class='bubble step' ng-repeat='step in stepBubbles()'></span></span><span class='bar selection'></span><span class='bar unselected low'></span><span class='bar unselected high'></span><span class='pointer low'></span><span class='pointer high'></span><span class='bubble low'></span><span class='bubble high'></span><span class='bubble middle'></span><span class='bubble selection'></span><span class='bubble limit floor'></span><span class='bubble limit ceiling'></span><input type='range' class='input low' /><input type='range' class='input high' /><input type='range' class='input selection' />",compile:function(n,s){function _(t){t||(t=n);var e=[];return angular.forEach(t.children(),function(t){e.push(i(t))}),e}function w(t,e,n){return{fullBar:t[0],stepBubs:t[1],selBar:e?t[2]:null,unSelBarLow:e?t[3]:null,unSelBarHigh:e?t[4]:null,minPtr:e?t[5]:t[2],maxPtr:e?t[6]:null,lowBub:e?t[7]:t[3],highBub:e?t[8]:null,cmbBub:e?t[9]:null,selBub:e?t[10]:null,flrBub:e?t[11]:t[4],ceilBub:e?t[12]:t[5],minInput:n?e?t[13]:t[6]:null,maxInput:n&&e?t[14]:null,selInput:n&&e?t[15]:null}}var S=s.showSteps,x=s.stepWidth?"stepWidth":"step",E=null!=s.ngModelRange,A={},C="ngModel",R="ngModelRange",N="selectBar",O=["floor","ceiling","stickiness",C];if(A=function(){for(var t=_(),e=[],n=0,r=t.length;r>n;n++){var o=t[n];o=i(o),o.css({"white-space":"nowrap",position:"absolute",display:"block","z-index":1}),e.push(o)}return e}(),A=w(A,!0,!0),s.translateFn&&s.$set("translateFn",""+s.translateFn+"(value)"),s.translateRangeFn&&s.$set("translateRangeFnFn",""+s.translateRangeFn+"(low,high)"),s.translateCombinedFn&&s.$set("translateCombinedFnFn",""+s.translateCombinedFn+"(low,high)"),s.scaleFn&&s.$set("scaleFn",""+s.scaleFn+"(value)"),s.inverseScaleFn&&s.$set("inverseScaleFn",""+s.inverseScaleFn+"(value)"),A.fullBar.css({left:0,right:0}),AngularSlider.inputtypes.range){var T={position:"absolute",margin:0,padding:0,opacity:0,height:"100%"};A.minInput.attr("step",y("inputSteps()")),A.minInput.attr("min",y("floor")),A.minInput.css(T),A.minInput.css("left",0),E?(A.minInput.attr("max",y("ngModelRange - (buffer / 2)")),A.maxInput.attr("step",y("inputSteps()")),A.maxInput.attr("min",y("ngModel + (buffer / 2)")),A.maxInput.attr("max",y("ceiling")),A.maxInput.css(T),A.selInput.attr("step",y("inputSteps()")),A.selInput.attr("min",y("ngModel")),A.selInput.attr("max",y("ngModelRange")),A.selInput.css(T)):(A.minInput.attr("max",y("ceiling")),A.minInput.css({width:"100%"}),A.maxInput.remove(),A.selInput.remove())}else A.minInput.remove(),A.maxInput.remove(),A.selInput.remove();if(p(A.stepBubs.children().eq(0),y("translation(step)")),p(A.ceilBub,y("translation(ceiling)")),p(A.flrBub,y("translation(floor)")),p(A.selBub,y("rangeTranslation("+C+","+R+")")),p(A.lowBub,y("translation("+C+")")),p(A.highBub,y("translation("+R+")")),p(A.cmbBub,y("combinedTranslation("+C+","+R+")")),E)O.push(R),O.unshift("buffer");else for(var k=[A.selBar,A.unSelBarLow,A.unSelBarHigh,A.maxPtr,A.selBub,A.highBub,A.cmbBub],I=0,P=k.length;P>I;I++)n=k[I],n.remove();return O.unshift("precision",x),S||A.stepBubs.children().remove(),{post:function(n,s,p,y){function S(){if(angular.forEach(O,function(t){n[t]=parseFloat(n[t]),t==C||t==R?n[t]=g(n[t],n.precision,n[x],n.floor,n.ceiling):"buffer"==t?n.buffer=!n.buffer||isNaN(n.buffer)||n.buffer<0?0:m(n[x],n.buffer):"precision"==t?n.precision=!n.precision||isNaN(n.precision)?0:parseInt(n.precision):t==x?n[x]=!n[x]||isNaN(n[x])?1/Math.pow(10,n.precision):parseFloat(n[x].toFixed(n.precision)):"stickiness"==t&&(isNaN(n.stickiness)?n.stickiness=b:n.stickiness<1&&(n.stickiness=1)),n.decodedValues[t]=n.decodeRef(t)}),E){if(n[R]<n[C]){var t=n[R];n[R]=n[C],n[C]=t}var e=g(n[R]-n[C],n.precision,n[x]);if(n.buffer>0&&e<n.buffer){var r=n.encode((n.decodedValues[C]+n.decodedValues[R])/2);n[C]=g(r-n.buffer/2,n.precision,n[x],n.floor,n.ceiling),n[R]=n[C]+n.buffer,n[R]>n.ceiling&&(n[R]=n.ceiling,n[C]=n.ceiling-n.buffer)}}k=l(T.fullBar),I=h(T.minPtr),P=f(T.fullBar),F=P+k-l(T.minPtr),D=F-P,$=n.floor,j=n.decodedValues.floor,L=n.ceiling,M=n.decodedValues.ceiling,B=L-$,H=M-j,U=v(H,n.decodedValues[x])}function A(){function t(t){return 100*((t-P)/D)}function p(e){return t(e)/100*H+j}function m(t){return n.encode(p(t))}function b(t){var e=t-j;return B==H?e=v(e,n.decodedValues[x])/U:e/=H,100*e}function _(t){return b(n.decode(t))}function w(t){return o(t*D/100)}function A(t){return Math.min(Math.max(t,P),F)}function O(e){return c(e,w(t(A(f(e)))))}function M(t,e,r){var i=t>0?1:-1;return e=e?e:100,r?(Math.sin(Math.min(Math.abs(t/e),1)*Math.PI-Math.PI/2)+1)*i*e/6:i*Math.pow(Math.min(Math.abs(2*(t/e)),1),n.stickiness)*e/2}function V(){var e=b(n.decodedValues[C]),r=_(n[C]+n[x])-e,i=e-_(n[C]-n[x]),o=_(n[C]+n.buffer)-e,s=t(I+P),a=e+M(K,K>0?r:i);if(c(T.minPtr,w(a)),c(T.lowBub,w(t(f(T.minPtr)-h(T.lowBub)+I))),E){var u=b(n.decodedValues[R]),l=_(n[R]+n[x])-u,d=u-_(n[R]-n[x]),p=u-_(n[R]-n.buffer),g=u+M(q,q>0?l:d);if(a>u-p&&(a=e+M(K,o,!0),c(T.minPtr,w(a)),c(T.lowBub,w(t(f(T.minPtr)-h(T.lowBub)+I)))),e+o>g&&(g=u+M(q,p,!0)),c(T.maxPtr,w(g)),c(T.highBub,w(t(f(T.maxPtr)-h(T.highBub)+I))),c(T.selBar,w(a+s)),T.selBar.css({width:w(g-a)}),c(T.selBub,w((a+g)/2-t(h(T.selBub)+P)+s)),c(T.cmbBub,w((a+g)/2-t(h(T.cmbBub)+P)+s)),T.unSelBarLow.css({left:0,width:w(a+s)}),c(T.unSelBarHigh,w(g+s)),T.unSelBarHigh.css({right:0}),AngularSlider.inputtypes.range){var v=2*s,m=a+o/2,y=100-m;m+=v;var S=g-p/2,A=a+v,N=g-a-v;a+v>=g&&(A=a,N=g+v-a),T.minInput.css({width:w(S)}),T.maxInput.css({left:w(m),width:w(y)}),T.selInput.css({left:w(A),width:w(N)})}}}function z(){var t=T.lowBub;O(T.lowBub),E&&(O(T.highBub),O(T.selBub),d(T.lowBub,T.highBub)<10?(a(T.lowBub),a(T.highBub),u(T.cmbBub),O(T.cmbBub),t=T.cmbBub):(u(T.lowBub),u(T.highBub),a(T.cmbBub),t=T.highBub)),d(T.flrBub,T.lowBub)<5?a(T.flrBub):E&&d(T.flrBub,t)<5?a(T.flrBub):u(T.flrBub),d(T.lowBub,T.ceilBub)<5?a(T.ceilBub):E&&d(t,T.ceilBub)<5?a(T.ceilBub):u(T.ceilBub)}function X(){K=0,q=0,et&&(V(),z(),et.removeClass("active")),et=null,nt=null,Q=!1}function W(e){et&&n.$apply(function(){var r=e.clientX||e.x;if(Q){var i=m(r)-Z,o=m(r)+tt;$>i?(o+=$-i,i=$):o>L&&(i-=o-L,o=L);var a=_(i),u=_(o);K=a,q=u,n[C]=i=g(i,n.precision,n[x],n.floor,n.ceiling),n[R]=o=g(o,n.precision,n[x],n.floor,n.ceiling),K-=_(i),q-=_(o)}else{var c=A(r+P-f(s)-h(et)),l=t(c),d=n.encode(j+H*l/100);if(K=l,E)if(n.buffer>0)nt===C?d>n[R]-n.buffer&&(d=n[R]-n.buffer):d<n[C]+n.buffer&&(d=n[C]+n.buffer);else if(nt===C){if(d>n[R]){n[C]=n[R],n.decodedValues[C]=n.decodeRef(C),nt=R;var p=T.minPtr;T.minPtr=T.maxPtr,T.maxPtr=p,T.maxPtr.removeClass("active").removeClass("high").addClass("low"),T.minPtr.addClass("active").removeClass("low").addClass("high")}}else if(d<n[C]){n[R]=n[C],n.decodedValues[R]=n.decodeRef(R),nt=C;var p=T.minPtr;T.minPtr=T.maxPtr,T.maxPtr=p,T.minPtr.removeClass("active").removeClass("low").addClass("high"),T.maxPtr.addClass("active").removeClass("high").addClass("low")}n[nt]=d=g(d,n.precision,n[x],n.floor,n.ceiling),n.decodedValues[nt]=n.decodeRef(nt),nt===C?(K-=_(d),q=0):(q=K-_(d),K=0)}n.ngChange&&n.ngChange(),y.$setViewValue(n[C]),V(),z()})}function Y(t,e,r){if(!n.ngDisabled||1!=n.ngDisabled){var i=t.clientX||t.x;if(et=e,nt=r,et.addClass("active"),nt==N){Q=!0;var o=m(i);Z=o-n[C],tt=n[R]-o}W(t)}}function G(){function t(t,e,n){function o(t){Y(t,e,n)}function s(t){W(t),X()}t=i(t),r.bind(t,{start:o,move:W,end:s,cancel:X})}function n(t,e,n){t=i(t),n=angular.isUndefined(n)?t:i(n),r.bind(t,{start:function(t){Y(t,n,e)}})}function o(t){t=i(t),r.bind(t,{move:W,end:function(t){W(t),X()},cancel:X})}AngularSlider.inputtypes.range?(t(T.minInput,T.minPtr,C),E&&(t(T.maxInput,T.maxPtr,R),t(T.selInput,T.selBar,N))):(o(e),n(T.minPtr,C),n(T.lowBub,C),n(T.flrBub,C,T.minPtr),E?(n(T.maxPtr,R),n(T.highBub,R),n(T.ceilBub,R,T.maxPtr),n(T.selBar,N),n(T.selBub,N,T.selBar),n(T.unSelBarLow,C,T.minPtr),n(T.unSelBarHigh,R,T.maxPtr)):(n(T.ceilBub,C,T.minPtr),n(T.fullBar,C,T.minPtr)))}var Q,Z,tt,et,nt;S(),c(T.flrBub,0),c(T.ceilBub,o(k-l(T.ceilBub))),V(),z(),J||(G(),J=!0)}var T=w(_(s),E,AngularSlider.inputtypes.range);n.decodedValues={floor:0,ceiling:0,step:0,stepWidth:0,precision:0,buffer:0,stickiness:0,ngModel:0,ngModelRange:0},n.translation=function(t){return t=parseFloat(t).toFixed(n.precision),angular.isUndefined(p.translateFn)?""+t:n.translateFn({value:t})},n.rangeTranslation=function(t,e){return angular.isUndefined(p.translateRangeFn)?"Range: "+n.translation((e-t).toFixed(n.precision)):n.translateRangeFn({low:t,high:e})},n.combinedTranslation=function(t,e){return angular.isUndefined(p.translateCombinedFn)?n.translation(t)+" - "+n.translation(e):n.translateCombinedFn({low:t,high:e})},n.encode=function(t){return angular.isUndefined(p.scaleFn)||""==p.scaleFn?t:n.scaleFn({value:t})},n.decode=function(t){return angular.isUndefined(p.inverseScaleFn)||""==p.inverseScaleFn?t:n.inverseScaleFn({value:t})},(1!=Math.round(n.encode(n.decode(1)))||100!=Math.round(n.encode(n.decode(100))))&&console.warn("The scale and inverseScale functions are not perfect inverses: 1 = "+n.encode(n.decode(1))+"  100 = "+n.encode(n.decode(100))),n.decodeRef=function(t){return n.decode(n[t])},n.inputSteps=function(){return Math.pow(10,-1*n.precision)};for(var k=0,I=0,P=0,F=0,D=0,$=0,j=0,L=0,M=0,B=0,H=0,U=1,K=0,q=0,J=!1,V=0;V<O.length;V++)n.$watch(O[V],function(){A()});i(window).bind("resize",function(){A()}),n.$on("refreshSlider",function(){t(function(){A()})}),t(function(){A()})}}}}}]),!function(t,e){"function"==typeof define&&define.amd?define([],function(){return t.SignaturePad=e()}):"object"==typeof exports?module.exports=e():t.SignaturePad=e()}(this,function(){var t=function(t){"use strict";var e=function(t,e){var n=this,r=e||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onEnd=r.onEnd,this.onBegin=r.onBegin,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){var e=t.changedTouches[0];n._strokeBegin(e)},this._handleTouchMove=function(t){t.preventDefault();var e=t.changedTouches[0];n._strokeUpdate(e)},this._handleTouchEnd=function(t){var e=t.target===n._canvas;e&&n._strokeEnd(t)},this._handleMouseEvents(),this._handleTouchEvents()};e.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._reset()},e.prototype.toDataURL=function(){var t=this._canvas;return t.toDataURL.apply(t,arguments)},e.prototype.fromDataURL=function(t){var e=this,n=new Image,r=window.devicePixelRatio||1,i=this._canvas.width/r,o=this._canvas.height/r;this._reset(),n.src=t,n.onload=function(){e._ctx.drawImage(n,0,0,i,o)},this._isEmpty=!1},e.prototype._strokeUpdate=function(t){var e=this._createPoint(t);this._addPoint(e)},e.prototype._strokeBegin=function(t){this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},e.prototype._strokeDraw=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},e.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];!e&&n&&this._strokeDraw(n),"function"==typeof this.onEnd&&this.onEnd(t)},e.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),t.addEventListener("mouseup",this._handleMouseUp)},e.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),t.addEventListener("touchend",this._handleTouchEnd)},e.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},e.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),t.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),t.removeEventListener("touchend",this._handleTouchEnd)},e.prototype.isEmpty=function(){return this._isEmpty},e.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._isEmpty=!0,this._ctx.fillStyle=this.penColor},e.prototype._createPoint=function(t){var e=this._canvas.getBoundingClientRect();return new n(t.clientX-e.left,t.clientY-e.top)},e.prototype._addPoint=function(t){var e,n,i,o,s=this.points;s.push(t),s.length>2&&(3===s.length&&s.unshift(s[0]),o=this._calculateCurveControlPoints(s[0],s[1],s[2]),e=o.c2,o=this._calculateCurveControlPoints(s[1],s[2],s[3]),n=o.c1,i=new r(s[1],e,n,s[2]),this._addCurve(i),s.shift())},e.prototype._calculateCurveControlPoints=function(t,e,r){var i=t.x-e.x,o=t.y-e.y,s=e.x-r.x,a=e.y-r.y,u={x:(t.x+e.x)/2,y:(t.y+e.y)/2},c={x:(e.x+r.x)/2,y:(e.y+r.y)/2},l=Math.sqrt(i*i+o*o),h=Math.sqrt(s*s+a*a),f=u.x-c.x,d=u.y-c.y,p=h/(l+h),g={x:c.x+f*p,y:c.y+d*p},v=e.x-g.x,m=e.y-g.y;return{c1:new n(u.x+v,u.y+m),c2:new n(c.x+v,c.y+m)}},e.prototype._addCurve=function(t){var e,n,r=t.startPoint,i=t.endPoint;e=i.velocityFrom(r),e=this.velocityFilterWeight*e+(1-this.velocityFilterWeight)*this._lastVelocity,n=this._strokeWidth(e),this._drawCurve(t,this._lastWidth,n),this._lastVelocity=e,this._lastWidth=n},e.prototype._drawPoint=function(t,e,n){var r=this._ctx;r.moveTo(t,e),r.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},e.prototype._drawCurve=function(t,e,n){var r,i,o,s,a,u,c,l,h,f,d,p=this._ctx,g=n-e;for(r=Math.floor(t.length()),p.beginPath(),o=0;r>o;o++)s=o/r,a=s*s,u=a*s,c=1-s,l=c*c,h=l*c,f=h*t.startPoint.x,f+=3*l*s*t.control1.x,f+=3*c*a*t.control2.x,f+=u*t.endPoint.x,d=h*t.startPoint.y,d+=3*l*s*t.control1.y,d+=3*c*a*t.control2.y,d+=u*t.endPoint.y,i=e+u*g,this._drawPoint(f,d,i);p.closePath(),p.fill()},e.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};var n=function(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()};n.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},n.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};var r=function(t,e,n,r){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=r};return r.prototype.length=function(){var t,e,n,r,i,o,s,a,u=10,c=0;for(t=0;u>=t;t++)e=t/u,n=this._point(e,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(e,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),t>0&&(s=n-i,a=r-o,c+=Math.sqrt(s*s+a*a)),i=n,o=r;return c},r.prototype._point=function(t,e,n,r,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*r*(1-t)*t*t+i*t*t*t},e}(document);return t}),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof exports?module.exports=e():e()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(t){function e(t){return t.$stateful=!0,t}t.decorator("dateFilter",["$delegate",e]),t.decorator("numberFilter",["$delegate",e]),t.decorator("currencyFilter",["$delegate",e])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(t){function e(t,e,n,r){var o=document.createElement("script"),s=i?i:document.getElementsByTagName("body")[0],a=!1;o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"complete"!==o.readyState&&"loaded"!==o.readyState||(o.onreadystatechange=null,r(function(){a||(a=!0,s.removeChild(o),e())},30,!1))}:(o.onload=function(){a||(a=!0,s.removeChild(o),e())},o.onerror=function(){a||(a=!0,s.removeChild(o),n())}),o.src=t,o.async=!0,s.appendChild(o)}function n(t,n,r,i,a,u,h){function f(t,e){s===r&&(angular.forEach(t,function(n,r){e[r]?angular.isArray(e[r])&&(t[r].length=e[r].length):delete t[r]}),angular.forEach(e,function(n,r){angular.isArray(e[r])||angular.isObject(e[r])?(t[r]||(t[r]=angular.isArray(e[r])?[]:{}),f(t[r],e[r])):t[r]=e[r]}))}if(l[r])return s=r,l[r];var d,p=a.defer();return r===s?p.resolve(n):(d=u.get(r))?(s=r,i.$evalAsync(function(){f(n,d),o.put(c,r),i.$broadcast("$localeChangeSuccess",r,n),p.resolve(n)})):(s=r,l[r]=p.promise,e(t,function(){var t=angular.injector(["ngLocale"]),e=t.get("$locale");f(n,e),u.put(r,e),delete l[r],i.$applyAsync(function(){o.put(c,r),i.$broadcast("$localeChangeSuccess",r,n),p.resolve(n)})},function(){delete l[r],i.$applyAsync(function(){s===r&&(s=n.id),i.$broadcast("$localeChangeError",r),p.reject(r)})},h)),p.promise}var r,i,o,s,a="angular/i18n/angular-locale_{{locale}}.js",u="tmhDynamicLocaleStorageCache",c=t,l={},h={};this.localeLocationPattern=function(t){return t?(a=t,this):a},this.appendScriptTo=function(t){i=t},this.useStorage=function(t){u=t},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(t){r=t},this.storageKey=function(t){return t?(c=t,this):c},this.addLocalePatternValue=function(t,e){h[t]=e},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(t,e,i,l,f,d,p){function g(t){m=i(t)}function v(e){var r={locale:e,angularVersion:angular.version.full};return n(m(angular.extend({},h,r)),l,e,t,f,d,p)}var m=i(a);return o=e.get(u),t.$evalAsync(function(){var t;(t=o.get(c)||r)&&v(t)}),{setLocaleLocationPattern:g,set:v,get:function(){return s}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(t){return t("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(t){return t("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"});var Showdown={extensions:{}},forEach=Showdown.forEach=function(t,e){if("function"==typeof t.forEach)t.forEach(e);else{var n,r=t.length;for(n=0;r>n;n++)e(t[n],n,t)}},stdExtName=function(t){return t.replace(/[_-]||\s/g,"").toLowerCase()};Showdown.converter=function(t){var e,n,r,i=0,o=[],s=[];if("undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"!=typeof require){var a=require("fs");if(a){var u=a.readdirSync((__dirname||".")+"/extensions").filter(function(t){return~t.indexOf(".js")}).map(function(t){return t.replace(/\.js$/,"")});Showdown.forEach(u,function(t){var e=stdExtName(t);Showdown.extensions[e]=require("./extensions/"+t)})}}if(this.makeHtml=function(t){return e={},n={},r=[],t=t.replace(/~/g,"~T"),t=t.replace(/\$/g,"~D"),t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n"),t="\n\n"+t+"\n\n",t=L(t),t=t.replace(/^[ \t]+$/gm,""),Showdown.forEach(o,function(e){t=h(e,t)}),t=A(t),t=d(t),t=f(t),t=g(t),t=$(t),t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~"),Showdown.forEach(s,function(e){t=h(e,t)}),t},t&&t.extensions){var c=this;Showdown.forEach(t.extensions,function(t){if("string"==typeof t&&(t=Showdown.extensions[stdExtName(t)]),"function"!=typeof t)throw"Extension '"+t+"' could not be loaded.  It was either not found or is not a valid extension.";Showdown.forEach(t(c),function(t){t.type?"language"===t.type||"lang"===t.type?o.push(t):("output"===t.type||"html"===t.type)&&s.push(t):s.push(t)})})}var l,h=function(t,e){if(t.regex){var n=new RegExp(t.regex,"g");return e.replace(n,t.replace)}return t.filter?t.filter(e):void 0},f=function(t){return t+="~0",t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(t,r,i,o,s){return r=r.toLowerCase(),e[r]=I(i),o?o+s:(s&&(n[r]=s.replace(/"/g,"&quot;")),"")}),t=t.replace(/~0/,"")},d=function(t){return t=t.replace(/\n/g,"\n\n"),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,p),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,p),t=t.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,p),t=t.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,p),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,p),t=t.replace(/\n\n/g,"\n")},p=function(t,e){var n=e;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.push(n)-1)+"K\n\n"},g=function(t){t=S(t);var e=C("<hr />");return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,e),t=x(t),t=E(t),t=T(t),t=d(t),t=k(t)},v=function(t){return t=R(t),t=m(t),t=P(t),t=_(t),t=y(t),t=F(t),t=I(t),t=O(t),t=t.replace(/  +\n/g," <br />\n")},m=function(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=M(e,"\\`*_")})},y=function(t){return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,b),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,b),t=t.replace(/(\[([^\[\]]+)\])()()()()()/g,b)},b=function(t,r,i,o,s,a,u,c){void 0==c&&(c="");var l=r,h=i,f=o.toLowerCase(),d=s,p=c;if(""==d)if(""==f&&(f=h.toLowerCase().replace(/ ?\n/g," ")),d="#"+f,void 0!=e[f])d=e[f],void 0!=n[f]&&(p=n[f]);else{if(!(l.search(/\(\s*\)$/m)>-1))return l;d=""}d=M(d,"*_");var g='<a href="'+d+'"';return""!=p&&(p=p.replace(/"/g,"&quot;"),p=M(p,"*_"),g+=' title="'+p+'"'),g+=">"+h+"</a>"},_=function(t){return t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),t=t.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w)},w=function(t,r,i,o,s,a,u,c){var l=r,h=i,f=o.toLowerCase(),d=s,p=c;if(p||(p=""),""==d){if(""==f&&(f=h.toLowerCase().replace(/ ?\n/g," ")),d="#"+f,void 0==e[f])return l;d=e[f],void 0!=n[f]&&(p=n[f])}h=h.replace(/"/g,"&quot;"),d=M(d,"*_");var g='<img src="'+d+'" alt="'+h+'"';return p=p.replace(/"/g,"&quot;"),p=M(p,"*_"),g+=' title="'+p+'"',g+=" />"},S=function(t){function e(t){return t.replace(/[^\w]/g,"").toLowerCase()}return t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,n){return C('<h1 id="'+e(n)+'">'+v(n)+"</h1>")}),t=t.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,n){return C('<h2 id="'+e(n)+'">'+v(n)+"</h2>")}),t=t.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,n,r){var i=n.length;return C("<h"+i+' id="'+e(r)+'">'+v(r)+"</h"+i+">")})},x=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return i?t=t.replace(e,function(t,e,n){var r=e,i=n.search(/[*+-]/g)>-1?"ul":"ol";r=r.replace(/\n{2,}/g,"\n\n\n");var o=l(r);return o=o.replace(/\s+$/,""),o="<"+i+">"+o+"</"+i+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,n,r){var i=e,o=n,s=r.search(/[*+-]/g)>-1?"ul":"ol",o=o.replace(/\n{2,}/g,"\n\n\n"),a=l(o);return a=i+"<"+s+">\n"+a+"</"+s+">\n"})),t=t.replace(/~0/,"")};l=function(t){return i++,t=t.replace(/\n{2,}$/,"\n"),t+="~0",t=t.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,e,n,r,i){var o=i,s=e;return s||o.search(/\n{2,}/)>-1?o=g(j(o)):(o=x(j(o)),o=o.replace(/\n$/,""),o=v(o)),"<li>"+o+"</li>\n"}),t=t.replace(/~0/g,""),i--,t};var E=function(t){return t+="~0",t=t.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,n){var r=e,i=n;return r=N(j(r)),r=L(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code>"+r+"\n</code></pre>",C(r)+i}),t=t.replace(/~0/,"")},A=function(t){return t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,e,n){var r=e,i=n;return i=N(i),i=L(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+'"':"")+">"+i+"\n</code></pre>",C(i)}),t=t.replace(/~0/,"")},C=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.push(t)-1)+"K\n\n"},R=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,r){var i=r;return i=i.replace(/^([ \t]*)/g,""),i=i.replace(/[ \t]*$/g,""),i=N(i),e+"<code>"+i+"</code>"})},N=function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=M(t,"*_{}[]\\",!1)},O=function(t){return t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},T=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var n=e;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=g(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),C("<blockquote>\n"+n+"\n</blockquote>")})},k=function(t){t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var e=t.split(/\n{2,}/g),n=[],i=e.length,o=0;i>o;o++){var s=e[o];s.search(/~K(\d+)K/g)>=0?n.push(s):s.search(/\S/)>=0&&(s=v(s),s=s.replace(/^([ \t]*)/g,"<p>"),s+="</p>",n.push(s))}i=n.length;for(var o=0;i>o;o++)for(;n[o].search(/~K(\d+)K/)>=0;){var a=r[RegExp.$1];a=a.replace(/\$/g,"$$$$"),n[o]=n[o].replace(/~K\d+K/,a)}return n.join("\n\n")},I=function(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},P=function(t){return t=t.replace(/\\(\\)/g,B),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,B)},F=function(t){return t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),t=t.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(t,e){return D($(e))})},D=function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,function(t){if("@"==t)t=e[Math.floor(2*Math.random())](t);else if(":"!=t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}),t='<a href="'+t+'">'+t+"</a>",t=t.replace(/">.+:/g,'">')},$=function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})},j=function(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")},L=function(t){return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,function(t,e){for(var n=e,r=4-n.length%4,i=0;r>i;i++)n+=" ";return n}),t=t.replace(/~A/g,"    "),t=t.replace(/~B/g,"")},M=function(t,e,n){var r="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return t=t.replace(i,B)},B=function(t,e){var n=e.charCodeAt(0);return"~E"+n+"E"}},"undefined"!=typeof module&&(module.exports=Showdown),"function"==typeof define&&define.amd&&define("showdown",function(){return Showdown}),"undefined"!=typeof angular&&"undefined"!=typeof Showdown&&!function(t,e){function n(){function t(){var t=new e.converter(n);this.makeHtml=function(e){return t.makeHtml(e)},this.stripHtml=function(t){return String(t).replace(/<[^>]+>/gm,"")}}var n={extensions:[],stripHtml:!0};this.setOption=function(t,e){return n.key=e,this},this.getOption=function(t){return n.hasOwnProperty(t)?n.key:null},this.loadExtension=function(t){return n.extensions.push(t),this},this.$get=function(){return new t}}function r(t){var e=function(e,n){e.$watch("model",function(e){var r;r="string"==typeof e?t.makeHtml(e):typeof e,n.html(r)})};return{restrict:"A",link:e,scope:{model:"=sdModelToHtml"}}}function i(){return function(t){return String(t).replace(/<[^>]+>/gm,"")}}t.provider("$Showdown",n).directive("sdModelToHtml",["$Showdown",r]).filter("sdStripHtml",i)}(angular.module("Showdown",[]),Showdown),function(){"use strict";angular.module("angularLoad",[]).service("angularLoad",["$document","$q","$timeout",function(t,e,n){this.loadScript=function(r){var i=e.defer(),o=t[0].createElement("script");return o.onload=o.onreadystatechange=function(t){n(function(){i.resolve(t)})},o.onerror=function(t){n(function(){i.reject(t)})},o.src=r,t[0].body.appendChild(o),i.promise},this.loadCSS=function(r){var i=e.defer(),o=t[0].createElement("link");return o.rel="stylesheet",o.type="text/css",o.href=r,o.onload=o.onreadystatechange=function(t){n(function(){i.resolve(t)})},o.onerror=function(t){n(function(){i.reject(t)})},t[0].head.appendChild(o),i.promise}}])}(),function(){"use strict";var t=this,e=t.Chart,n=function(t){return this.canvas=t.canvas,this.ctx=t,this.width=t.canvas.width,this.height=t.canvas.height,this.aspectRatio=this.width/this.height,r.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var r=n.helpers={},i=r.each=function(t,e,n){var r=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var i;for(i=0;i<t.length;i++)e.apply(n,[t[i],i].concat(r))}else for(var o in t)e.apply(n,[t[o],o].concat(r))},o=r.clone=function(t){var e={};return i(t,function(n,r){t.hasOwnProperty(r)&&(e[r]=n)}),e},s=r.extend=function(t){return i(Array.prototype.slice.call(arguments,1),function(e){i(e,function(n,r){e.hasOwnProperty(r)&&(t[r]=n)})}),t},a=r.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),s.apply(null,t)},u=r.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},c=r.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=e.prototype,
n.prototype=new r,n.extend=c,t&&s(n.prototype,t),n.__super__=e.prototype,n},l=r.noop=function(){},h=r.uid=function(){var t=0;return function(){return"chart-"+t++}}(),f=r.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},d=r.amd="function"==typeof t.define&&t.define.amd,p=r.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=r.max=function(t){return Math.max.apply(Math,t)},v=r.min=function(t){return Math.min.apply(Math,t)},m=(r.cap=function(t,e,n){if(p(e)){if(t>e)return e}else if(p(n)&&n>t)return n;return t},r.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),y=r.radians=function(t){return t*(Math.PI/180)},b=(r.getAngleFromPoint=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r),o=2*Math.PI+Math.atan2(r,n);return 0>n&&0>r&&(o+=2*Math.PI),{angle:o,distance:i}},r.aliasPixel=function(t){return t%2===0?0:.5}),_=(r.splineCurve=function(t,e,n,r){var i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),s=r*i/(i+o),a=r*o/(i+o);return{inner:{x:e.x-s*(n.x-t.x),y:e.y-s*(n.y-t.y)},outer:{x:e.x+a*(n.x-t.x),y:e.y+a*(n.y-t.y)}}},r.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),w=(r.calculateScaleRange=function(t,e,n,r,i){var o=2,s=Math.floor(e/(1.5*n)),a=o>=s,u=g(t),c=v(t);u===c&&(u+=.5,c>=.5&&!r?c-=.5:u+=.5);for(var l=Math.abs(u-c),h=_(l),f=Math.ceil(u/(1*Math.pow(10,h)))*Math.pow(10,h),d=r?0:Math.floor(c/(1*Math.pow(10,h)))*Math.pow(10,h),p=f-d,m=Math.pow(10,h),y=Math.round(p/m);(y>s||s>2*y)&&!a;)if(y>s)m*=2,y=Math.round(p/m),y%1!==0&&(a=!0);else if(i&&h>=0){if(m/2%1!==0)break;m/=2,y=Math.round(p/m)}else m/=2,y=Math.round(p/m);return a&&(y=o,m=p/y),{steps:y,stepValue:m,min:d,max:d+y*m}},r.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):r[t]=r[t];return e?n(e):n}if(t instanceof Function)return t(e);var r={};return n(t,e)}),S=(r.generateLabels=function(t,e,n,r){var o=new Array(e);return labelTemplateString&&i(o,function(e,i){o[i]=w(t,{value:n+r*(i+1)})}),o},r.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)))},easeOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,r=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),r<Math.abs(1)?(r=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/r),1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):r*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-S.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*S.easeInBounce(2*t):.5*S.easeOutBounce(2*t-1)+.5}}),x=r.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),E=(r.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),r.animationLoop=function(t,e,n,r,i,o){var s=0,a=S[n]||S.linear,u=function(){s++;var n=s/e,c=a(n);t.call(o,c,n,s),r.call(o,c,n),e>s?o.animationFrame=x(u):i.apply(o)};x(u)},r.getRelativePosition=function(t){var e,n,r=t.originalEvent||t,i=t.currentTarget||t.srcElement,o=i.getBoundingClientRect();return r.touches?(e=r.touches[0].clientX-o.left,n=r.touches[0].clientY-o.top):(e=r.clientX-o.left,n=r.clientY-o.top),{x:e,y:n}},r.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),A=r.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=l},C=(r.bindEvents=function(t,e,n){t.events||(t.events={}),i(e,function(e){t.events[e]=function(){n.apply(t,arguments)},E(t.chart.canvas,e,t.events[e])})},r.unbindEvents=function(t,e){i(e,function(e,n){A(t.chart.canvas,n,e)})}),R=r.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},N=r.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},O=(r.getMaximumSize=r.getMaximumWidth,r.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,r=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=r+"px",e.canvas.height=r*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),T=r.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},k=r.fontString=function(t,e,n){return e+" "+t+"px "+n},I=r.longestText=function(t,e,n){t.font=e;var r=0;return i(n,function(e){var n=t.measureText(e).width;r=n>r?n:r}),r},P=r.drawRoundedRectangle=function(t,e,n,r,i,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+r-o,n),t.quadraticCurveTo(e+r,n,e+r,n+o),t.lineTo(e+r,n+i-o),t.quadraticCurveTo(e+r,n+i,e+r-o,n+i),t.lineTo(e+o,n+i),t.quadraticCurveTo(e,n+i,e,n+i-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()};n.instances={},n.Type=function(t,e,r){this.options=e,this.chart=r,this.id=h(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},s(n.Type.prototype,{initialize:function(){return this},clear:function(){return T(this.chart),this},stop:function(){return r.cancelAnimFrame.call(t,this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=R(this.chart.canvas),r=this.options.maintainAspectRatio?n/this.chart.aspectRatio:N(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=r,O(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:l,render:function(t){return t&&this.reflow(),this.options.animation&&!t?r.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),C(this,this.events),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(i(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(o||e){if(this.activeElements=t,this.draw(),t.length>0)if(this.datasets&&this.datasets.length>1){for(var s,a,c=this.datasets.length-1;c>=0&&(s=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,a=u(s,t[0]),-1===a);c--);var l=[],h=[],f=function(){var t,e,n,i,o,s=[],u=[],c=[];return r.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[a]&&s.push(t[a])}),r.each(s,function(t){u.push(t.x),c.push(t.y),l.push(r.template(this.options.multiTooltipTemplate,t)),h.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=v(c),n=g(c),i=v(u),e=g(u),{x:i>this.chart.width/2?i:e,y:(o+n)/2}}.call(this,a);new n.MultiTooltip({x:f.x,y:f.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:l,legendColors:h,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx}).draw()}else i(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,t),chart:this.chart}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,r=function(){return e.apply(this,arguments)};if(r.prototype=o(e.prototype),s(r.prototype,t),r.extend=n.Type.extend,t.name||e.prototype.name){var i=t.name||e.prototype.name,u=n.defaults[e.prototype.name]?o(n.defaults[e.prototype.name]):{};n.defaults[i]=s(u,t.defaults),n.types[i]=r,n.prototype[i]=function(t,e){var o=a(n.defaults.global,n.defaults[i],e||{});return new r(t,o,this)}}else f("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){s(this,t),this.initialize.apply(this,arguments),this.save()},s(n.Element.prototype,{initialize:function(){},restore:function(t){return t?i(t,function(t){this[t]=this._saved[t]},this):s(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return i(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return i(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=r.getAngleFromPoint(this,{x:t,y:e}),i=n.angle>=this.startAngle&&n.angle<=this.endAngle,o=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return i&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,r=this.x+e,i=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(n+=o,r-=o,i+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,i),t.lineTo(r,i),t.lineTo(r,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=2,n=t.measureText(this.text).width+2*this.xPadding,r=this.fontSize+2*this.yPadding,i=r+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-i<0&&(this.yAlign="below");var o=this.x-n/2,s=this.y-i;switch(t.fillStyle=this.fillColor,this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":s=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}P(t,o,s,n,r,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+n/2,s+r/2)}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=k(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=I(this.ctx,this.font,this.labels)+this.fontSize+3,n=g([e,t]);this.width=n+2*this.xPadding;var r=this.height/2;this.y-r<0?this.y=r:this.y+r>this.chart.height&&(this.y=this.chart.height-r),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){P(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,r.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=m(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?I(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,r=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=r/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var i,o=I(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var s=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>s&&0===this.xLabelRotation||this.xLabelWidth>s&&this.xLabelRotation<=90&&this.xLabelRotation>0;)i=Math.cos(y(this.xLabelRotation)),t=i*n,e=i*r,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=i*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:l,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=e/(this.valuesCount-(this.offsetGridLines?0:1)),r=n*t+this.xScalePaddingLeft;return this.offsetGridLines&&(r+=n/2),Math.round(r)},update:function(t){r.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,i(this.yLabels,function(i,o){var s=this.endPoint-e*o,a=Math.round(s);t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(i,n-10,s),t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a+=r.aliasPixel(t.lineWidth),t.moveTo(n,a),t.lineTo(this.width,a),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,a),t.lineTo(n,a),t.stroke(),t.closePath()},this),i(this.xLabels,function(e,n){var r=this.calculateX(n)+b(this.lineWidth),i=this.calculateX(n-(this.offsetGridLines?.5:0))+b(this.lineWidth),o=this.xLabelRotation>0;t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),t.moveTo(i,this.endPoint),t.lineTo(i,this.startPoint-3),t.stroke(),t.closePath(),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(i,this.endPoint),t.lineTo(i,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(r,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*y(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=v([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=m(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(w(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,r,i,o,s,a,u,c,l,h,f=v([this.height/2-this.pointLabelFontSize-5,this.width/2]),d=this.width,g=0;for(this.ctx.font=k(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,f),n=this.ctx.measureText(w(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(r=n/2,t.x+r>d&&(d=t.x+r,i=e),t.x-r<g&&(g=t.x-r,s=e)):e<this.valuesCount/2?t.x+n>d&&(d=t.x+n,i=e):e>this.valuesCount/2&&t.x-n<g&&(g=t.x-n,s=e);u=g,c=Math.ceil(d-this.width),o=this.getIndexAngle(i),a=this.getIndexAngle(s),l=c/Math.sin(o+Math.PI/2),h=u/Math.sin(a+Math.PI/2),l=p(l)?l:0,h=p(h)?h:0,this.drawingArea=f-(h+l)/2,this.setCenterPoint(h,l)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,r=t+this.drawingArea;this.xCenter=(r+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(i(this.yLabels,function(e,n){if(n>0){var r,i=n*(this.drawingArea/this.steps),o=this.yCenter-i;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,i,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var s=0;s<this.valuesCount;s++)r=this.getPointPosition(s,this.calculateCenterOffset(this.min+n*this.stepValue)),0===s?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=k(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var a=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-a/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,a+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var r=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=k(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,s=this.labels.length/2,a=s/2,u=a>e||e>o-a,c=e===a||e===o-a;t.textAlign=0===e?"center":e===s?"center":s>e?"left":"right",t.textBaseline=c?"middle":u?"bottom":"top",t.fillText(this.labels[e],r.x,r.y)}}}}}),r.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){i(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),d?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,r={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:r,initialize:function(t){var r=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var i=this.calculateBaseWidth(),o=this.calculateX(n)-i/2,s=this.calculateBarWidth(t);return o+s*e+e*r.barDatasetSpacing+s/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*r.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*r.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e){var r={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(r),n.each(e.data,function(i,o){n.isNumber(i)&&r.bars.push(new this.BarClass({value:i,label:t.labels[o],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,r){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,r,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,r){n.each(e.bars,t,this,r)},this)},getBarsAtEvent:function(t){for(var e,r=[],i=n.getRelativePosition(t),o=function(t){r.push(t.bars[e])},s=0;s<this.datasets.length;s++)for(e=0;e<this.datasets[s].bars.length;e++)if(this.datasets[s].bars[e].inRange(i.x,i.y))return n.each(this.datasets,o),r;return r},buildScale:function(t){var e=this,r=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},i={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(i,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(i)},addData:function(t,e){n.each(t,function(t,r){n.isNumber(t)&&this.datasets[r].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,r,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[r].strokeColor,fillColor:this.datasets[r].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),n.each(this.datasets,function(t,r){n.each(t.bars,function(t,n){t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,r,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw()},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,r={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:r,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],r=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(r.x,r.y)&&e.push(t)},this),e},addData:function(t,e,n){var r=e||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(t/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout
},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(r,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,r={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:r,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var r={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(r),n.each(e.data,function(i,o){n.isNumber(i)&&r.points.push(new this.PointClass({value:i,label:t.labels[o],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],r=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(r.x,r.y)&&e.push(t)})},this),e},buildScale:function(t){var r=this,i=function(){var t=[];return r.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(o)},addData:function(t,e){n.each(t,function(t,r){n.isNumber(t)&&this.datasets[r].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[r].pointStrokeColor,fillColor:this.datasets[r].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var r=this.chart.ctx;this.scale.draw(e),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(t.points,function(e,r){e.controlPoints=0===r?n.splineCurve(e,e,t.points[r+1],0):r>=t.points.length-1?n.splineCurve(t.points[r-1],e,e,0):n.splineCurve(t.points[r-1],e,t.points[r+1],this.options.bezierCurveTension)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=t.strokeColor,r.beginPath(),n.each(t.points,function(e,n){n>0?this.options.bezierCurve?r.bezierCurveTo(t.points[n-1].controlPoints.outer.x,t.points[n-1].controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y):r.lineTo(e.x,e.y):r.moveTo(e.x,e.y)},this),r.stroke(),this.options.datasetFill&&(r.lineTo(t.points[t.points.length-1].x,this.scale.endPoint),r.lineTo(this.scale.calculateX(0),this.scale.endPoint),r.fillStyle=t.fillColor,r.closePath(),r.fill()),n.each(t.points,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,r={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:r,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],r=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(r.x,r.y)&&e.push(t)},this),e},addData:function(t,e,n){var r=e||this.segments.length;this.segments.splice(r,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var r={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(r),n.each(e.data,function(i,o){if(n.isNumber(i)){var s;this.scale.animation||(s=this.scale.getPointPosition(o,this.scale.calculateCenterOffset(i))),r.points.push(new this.PointClass({value:i,label:t.labels[o],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:s.x,y:this.options.animation?this.scale.yCenter:s.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))}},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),r=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),i=2*Math.PI/this.scale.valuesCount,o=Math.round((r.angle-1.5*Math.PI)/i),s=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),r.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){s.push(t.points[o])}),s},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),r=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,r)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,r){if(n.isNumber(t)){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[r].points.push(new this.PointClass({value:t,label:e,x:i.x,y:i.y,strokeColor:this.datasets[r].pointStrokeColor,fillColor:this.datasets[r].pointColor}))}},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,r=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),r.lineWidth=this.options.datasetStrokeWidth,r.strokeStyle=t.strokeColor,r.beginPath(),n.each(t.points,function(t,e){0===e?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y)},this),r.closePath(),r.stroke(),r.fillStyle=t.fillColor,r.fill(),n.each(t.points,function(t){t.draw()})},this)}})}.call(this);var angles=angular.module("angles",[]);angles.chart=function(t){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function(e,n){var r=n[0].getContext("2d"),i=!1;e.size=function(){e.width<=0?(n.width(n.parent().width()),r.canvas.width=n.width()):(r.canvas.width=e.width||r.canvas.width,i=!0),e.height<=0?(n.height(n.parent().height()),r.canvas.height=r.canvas.width/2):(r.canvas.height=e.height||r.canvas.height,i=!0)},e.$watch("data",function(a,u){o&&o.destroy(),e.options=e.options||{},a&&(e.chart&&(t=e.chart),i&&(e.size(),s=new Chart(r)),(e.responsive||e.resize)&&(e.options.responsive=!0),void 0!==e.responsive&&(e.options.responsive=e.responsive),o=s[t](e.data,e.options),o.update(),e.legend&&angular.element(n[0]).parent().after(o.generateLegend()))},!0),e.$watch("tooltip",function(t,e){if(o&&o.draw(),void 0!==t&&o.segments&&!(!isFinite(t)||t>=o.segments.length||t<0)){var n=o.segments[t];n.save(),n.fillColor=n.highlightColor,o.showTooltip([n]),n.restore()}},!0),e.size();var o,s=new Chart(r)}}},angles.directive("chart",function(){return angles.chart()}),angles.directive("linechart",function(){return angles.chart("Line")}),angles.directive("barchart",function(){return angles.chart("Bar")}),angles.directive("radarchart",function(){return angles.chart("Radar")}),angles.directive("polarchart",function(){return angles.chart("PolarArea")}),angles.directive("piechart",function(){return angles.chart("Pie")}),angles.directive("doughnutchart",function(){return angles.chart("Doughnut")}),angles.directive("donutchart",function(){return angles.chart("Doughnut")}),function(n){function require(e){var n,r;if(e&&e.length>2&&"."==e[0]&&"/"==e[1]&&(e=e.slice(2)),n=t[e],"function"==typeof n)return r={},t[e]=r,n(r),r;if("object"==typeof n)return n;throw"Unknown module "+e}var t={},i="1.2.21003.0";t.Resources={},t.Resources["en-US"]={Validate_NotNullError:"{0} cannot be null.",Validate_NotNullOrEmptyError:"{0} cannot be null or empty.",Validate_InvalidId:"{0} is not valid.",Validate_TypeCheckError:"{0} is expected to be a value of type {1}, not {2}.",Validate_LengthUnexpected:"{0} is expected to have length {1}, not {2}.",Validate_InvalidUserParameter:"{0} contains an invalid user-defined query string parameter: {1}. User-defined query string parameters must not begin with a '$'.",Extensions_DefaultErrorMessage:"Unexpected failure.",Extensions_ConnectionFailureMessage:"Unexpected connection failure.",MobileServiceTable_ReadMismatchedQueryTables:"Cannot get the results of a query for table '{1}' via table '{0}'.",MobileServiceTable_InsertIdAlreadySet:"Cannot insert if the {0} member is already set.",MobileServiceLogin_AuthenticationProviderNotSupported:"Unsupported authentication provider name. Please specify one of {0}.",MobileServiceLogin_LoginErrorResponse:"Cannot start a login operation because login is already in progress.",MobileServiceLogin_InvalidResponseFormat:"Invalid format of the authentication response.",MobileServiceLogin_InvalidProvider:"The first parameter must be the name of the autentication provider or a Microsoft Account authentication token.",MobileServiceTable_NotSingleObject:"Could not get object from response {0}.",Push_ConflictWithReservedName:"Template name conflicts with reserved name '{0}'.",Push_InvalidTemplateName:"Template name can't contain ';' or ':'.",Push_NotSupportedXMLFormatAsBodyTemplateWin8:"The bodyTemplate is not in accepted XML format. The first node of the bodyTemplate should be Badge/Tile/Toast, except for the wns/raw template, which need to be a valid XML.",Push_BodyTemplateMustBeXml:"Valid XML is required for any template without a raw header.",Push_TagNoCommas:"Tags must not contain ','."},t.MobileServiceClient=function(t){function e(t,e){a.isString(t,"applicationUrl"),a.notNullOrEmpty(t,"applicationUrl"),a.isString(e,"applicationKey"),this.applicationUrl=t,this.applicationKey=e||null;var n=u.getSdkInfo(),i=u.getOperatingSystemInfo(),o=n.fileVersion.split(".").slice(0,2).join(".");this.version="ZUMO/"+o+" (lang="+n.language+"; os="+i.name+"; os_version="+i.version+"; arch="+i.architecture+"; version="+n.fileVersion+")",this.currentUser=null,this._serviceFilter=null,this._login=new l(this),this.getTable=function(t){return a.isString(t,"tableName"),a.notNullOrEmpty(t,"tableName"),new c(t,this)},r&&(this.push=new r(this))}function n(){var t,e,n=null,r="MobileServices.Installation.config",i=u.readSetting(r);if(!s.isNull(i))try{t=s.fromJson(i),n=t.applicationInstallationId}catch(o){}return s.isNullOrEmpty(n)&&(n=s.createUniqueInstallationId(),e=s.toJson({applicationInstallationId:n}),u.writeSetting(r,e)),n}var r,i,o,s=require("Extensions"),a=require("Validate"),u=require("Platform"),c=require("MobileServiceTable").MobileServiceTable,l=require("MobileServiceLogin").MobileServiceLogin;try{r=require("Push").Push}catch(h){}i={JsonApiCall:"AJ",GenericApiCall:"AG",AdditionalQueryParameters:"QS",OptimisticConcurrency:"OC",TableRefreshCall:"RF",TableReadRaw:"TR",TableReadQuery:"TQ"},o="X-ZUMO-FEATURES",t.MobileServiceClient=e,u.addToMobileServicesClientNamespace({MobileServiceClient:e}),e.prototype.withFilter=function(t){var n,r;return a.notNull(t,"serviceFilter"),n=new e(this.applicationUrl,this.applicationKey),n.currentUser=this.currentUser,r=this._serviceFilter,n._serviceFilter=s.isNull(r)?t:function(e,n,i){var o=function(t,e){r(t,n,e)};t(e,o,i)},n},e.prototype._request=function(t,n,r,i,c,l,h){var f,d;s.isNull(h)&&"function"==typeof l&&(h=l,l=null),s.isNull(h)&&"function"==typeof c&&(h=c,c=null),s.isNull(h)&&"function"==typeof i&&(h=i,i=!1),s.isNull(h)&&"function"==typeof r&&(h=r,r=null),a.isString(t,"method"),a.notNullOrEmpty(t,"method"),a.isString(n,"uriFragment"),a.notNull(n,"uriFragment"),a.notNull(h,"callback"),f={type:t.toUpperCase()},f.url=s.url.isAbsoluteUrl(n)?n:s.url.combinePathSegments(this.applicationUrl,n),f.headers={},s.isNull(c)||s.extend(f.headers,c),f.headers["X-ZUMO-INSTALLATION-ID"]=e._applicationInstallationId,s.isNullOrEmpty(this.applicationKey)||(f.headers["X-ZUMO-APPLICATION"]=this.applicationKey),this.currentUser&&!s.isNullOrEmpty(this.currentUser.mobileServiceAuthenticationToken)&&(f.headers["X-ZUMO-AUTH"]=this.currentUser.mobileServiceAuthenticationToken),s.isNull(e._userAgent)||(f.headers["User-Agent"]=e._userAgent),s.isNullOrEmpty["X-ZUMO-VERSION"]||(f.headers["X-ZUMO-VERSION"]=this.version),s.isNull(f.headers[o])&&l&&l.length&&(f.headers[o]=l.join(",")),s.isNull(r)?f.data=null:(f.data=s.isString(r)?r:s.toJson(r),s.hasProperty(f.headers,["Content-Type","content-type","CONTENT-TYPE","Content-type"])||(f.headers["Content-Type"]="application/json")),d=function(t,e){s.isNull(t)?!s.isNull(e)&&(e.status>=400||0===e.status)&&(t=s.createError(null,e),e=null):t=s.createError(t),h(t,e)},s.isNull(this._serviceFilter)||i?u.webRequest(f,d):this._serviceFilter(f,u.webRequest,d)},e.prototype.loginWithOptions=u.async(function(t,e,n){this._login.loginWithOptions(t,e,n)}),e.prototype.login=u.async(function(t,e,n,r){this._login.login(t,e,n,r)}),e.prototype.logout=function(){this.currentUser=null},e.prototype.invokeApi=u.async(function(t,e,n){var r,o,u,c,l,h,f;a.isString(t,"apiName"),s.isNull(n)&&"function"==typeof e&&(n=e,e=null),a.notNull(n,"callback"),s.isNull(e)||(r=e.parameters,s.isNull(r)||a.isValidParametersObject(e.parameters),o=e.method,u=e.body,c=e.headers),s.isNull(o)&&(o="POST"),l=s.url.combinePathSegments("api",t),s.isNull(r)||(h=s.url.getQueryString(r),l=s.url.combinePathAndQuery(l,h)),f=[],s.isNullOrEmpty(u)||f.push(s.isString(u)?i.GenericApiCall:i.JsonApiCall),s.isNull(r)||f.push(i.AdditionalQueryParameters),this._request(o,l,u,null,c,f,function(t,e){if(s.isNull(t)){var r;if("undefined"!=typeof e.getResponseHeader&&(r=e.getResponseHeader("Content-Type")),r)r.toLowerCase().indexOf("json")!==-1&&(e.result=s.fromJson(e.responseText));else try{e.result=s.fromJson(e.responseText)}catch(i){}n(null,e)}else n(t,null)})}),e._applicationInstallationId=n(),e._userAgent=u.getUserAgent(),e._zumoFeatures=i},t.MobileServiceTable=function(t){function e(t,e){this.getTableName=function(){return t},this.getMobileServiceClient=function(){return e},this.systemProperties=0}function n(t){var e,n={};for(e in t)"__"!==e.substr(0,2)&&(n[e]=t[e]);return n}function r(t,e,n){if(e===m.None||"string"==typeof n&&n.toLowerCase().indexOf("__systemproperties")>=0||(t=t||{},!c.isNull(t.__systemProperties)))return t;if(e===m.All)t.__systemProperties="*";else{var r=[];m.CreatedAt&e&&r.push(y.CreatedAt),m.UpdatedAt&e&&r.push(y.UpdatedAt),m.Version&e&&r.push(y.Version),t.__systemProperties=r.join(",")}return t}function i(t){var e,n=c.fromJson(t.responseText);return t.getResponseHeader&&(e=t.getResponseHeader("ETag"),c.isNullOrEmpty(e)||(n.__version=a(e))),n}function o(t){t.request&&412===t.request.status&&(t.serverInstance=c.fromJson(t.request.responseText))}function s(t){var e=t.replace(/\"/g,'\\"');return'"'+e+'"'}function a(t){var e=t.length,n=t;return e>1&&'"'===t[0]&&'"'===t[e-1]&&(n=t.substr(1,e-2)),n.replace(/\\\"/g,'"')}function u(t,e){var n,r=!1;if(e)if(Array.isArray(e))r=e.length>0;else if(c.isObject(e))for(n in e){r=!0;break}return r&&t.push(WindowsAzure.MobileServiceClient._zumoFeatures.AdditionalQueryParameters),t}var c=require("Extensions"),l=require("Validate"),h=require("Platform"),f=require("Query").Query,d="id",p="tables",g=["ID","Id","id","iD"],v=/^(.*?);\s*rel\s*=\s*(\w+)\s*$/,m={None:0,CreatedAt:1,UpdatedAt:2,Version:4,All:65535},y={CreatedAt:"__createdAt",UpdatedAt:"__updatedAt",Version:"__version"};h.addToMobileServicesClientNamespace({MobileServiceTable:{SystemProperties:m}}),t.MobileServiceTable=e,e.prototype._read=function(t,e,n){var i,o,s,a,f;c.isNull(n)&&(c.isNull(e)&&"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null,!c.isNull(t)&&c.isObject(t)&&!c.isString(t)&&c.isNull(t.toOData)&&(e=t,t=null))),t&&c.isString(t)&&l.notNullOrEmpty(t,"query"),c.isNull(e)||l.isValidParametersObject(e,"parameters"),l.notNull(n,"callback");var d=this.getTableName(),g=null,m=null,y=[];if(c.isString(t))g=t,c.isNullOrEmpty(t)||y.push(WindowsAzure.MobileServiceClient._zumoFeatures.TableReadRaw);else if(c.isObject(t)&&!c.isNull(t.toOData)&&t.getComponents&&(y.push(WindowsAzure.MobileServiceClient._zumoFeatures.TableReadQuery),i=t.getComponents(),m=i.projection,i.table)){if(d!==i.table)return o=c.format(h.getResourceString("MobileServiceTable_ReadMismatchedQueryTables"),d,i.table),void n(c.createError(o),null);s=t.toOData(),g=s.replace(new RegExp("^/"+i.table),"")}u(y,e),e=r(e,this.systemProperties,g),c.isNull(e)||(a=c.url.getQueryString(e),c.isNullOrEmpty(g)?g=a:g+="&"+a),f=g,c.url.isAbsoluteUrl(f)||(f=c.url.combinePathSegments(p,d),c.isNull(g)||(f=c.url.combinePathAndQuery(f,g))),this.getMobileServiceClient()._request("GET",f,null,!1,null,y,function(t,e){var r,i,o,s=null;if(c.isNull(t)){if(s=c.fromJson(e.responseText),s&&!Array.isArray(s)&&"undefined"!=typeof s.count&&"undefined"!=typeof s.results&&(s.results.totalCount=s.count,s=s.results),null!==m)for(r=0,r=0;r<s.length;r++)s[r]=m.call(s[r]);Array.isArray(s)&&e.getResponseHeader&&c.isNull(s.nextLink)&&(i=e.getResponseHeader("Link"),c.isNullOrEmpty(i)||(o=v.exec(i),o&&3===o.length&&"next"==o[2]&&(s.nextLink=o[1])))}n(t,s)})},e.prototype.read=h.async(e.prototype._read),e.prototype.insert=h.async(function(t,e,n){var o,s,a,f,v;c.isNull(n)&&"function"==typeof e&&(n=e,e=null),l.notNull(t,"instance"),c.isNull(e)||l.isValidParametersObject(e),l.notNull(n,"callback");for(o in g)if(s=t[g[o]],!c.isNullOrZero(s)){if(!c.isString(s))throw c.format(h.getResourceString("MobileServiceTable_InsertIdAlreadySet"),d);if(g[o]!==d)throw c.format(h.getResourceString("MobileServiceTable_InsertIdAlreadySet"),d);l.isValidId(s,d)}a=u([],e),f=c.url.combinePathSegments(p,this.getTableName()),e=r(e,this.systemProperties),c.isNull(e)||(v=c.url.getQueryString(e),f=c.url.combinePathAndQuery(f,v)),this.getMobileServiceClient()._request("POST",f,t,!1,null,a,function(e,r){if(c.isNull(e)){var o=i(r);o=h.allowPlatformToMutateOriginal(t,o),n(null,o)}else n(e,null)})}),e.prototype.update=h.async(function(t,e,a){var f,g,v,m,y={},b=[];c.isNull(a)&&"function"==typeof e&&(a=e,e=null),l.notNull(t,"instance"),l.isValidId(t[d],"instance."+d),c.isNull(e)||l.isValidParametersObject(e,"parameters"),l.notNull(a,"callback"),c.isString(t[d])?(f=t.__version,g=n(t)):g=t,c.isNullOrEmpty(f)||(y["If-Match"]=s(f),b.push(WindowsAzure.MobileServiceClient._zumoFeatures.OptimisticConcurrency)),b=u(b,e),e=r(e,this.systemProperties),v=c.url.combinePathSegments(p,this.getTableName(),encodeURIComponent(t[d].toString())),c.isNull(e)||(m=c.url.getQueryString(e),v=c.url.combinePathAndQuery(v,m)),this.getMobileServiceClient()._request("PATCH",v,g,!1,y,b,function(e,n){if(c.isNull(e)){var r=i(n);r=h.allowPlatformToMutateOriginal(t,r),a(null,r)}else o(e),a(e)})}),e.prototype.refresh=h.async(function(t,e,n){var r,i,o,s;if(c.isNull(n)&&"function"==typeof e&&(n=e,e=null),l.notNull(t,"instance"),!c.isValidId(t[d],d)){if("string"==typeof t[d]&&""!==t[d])throw c.format(h.getResourceString("Validate_InvalidId"),d);return void n(null,t)}c.isNull(e)||l.isValidParametersObject(e,"parameters"),l.notNull(n,"callback"),r=c.url.combinePathSegments(p,this.getTableName()),"string"==typeof t[d]?(i=encodeURIComponent(t[d]).replace(/\'/g,"%27%27"),r=c.url.combinePathAndQuery(r,"?$filter=id eq '"+i+"'")):r=c.url.combinePathAndQuery(r,"?$filter=id eq "+encodeURIComponent(t[d].toString())),c.isNull(e)||(o=c.url.getQueryString(e),r=c.url.combinePathAndQuery(r,o)),s=[WindowsAzure.MobileServiceClient._zumoFeatures.TableRefreshCall],s=u(s,e),this.getMobileServiceClient()._request("GET",r,t,!1,null,s,function(e,r){var i,o;c.isNull(e)?(i=c.fromJson(r.responseText),Array.isArray(i)&&(i=i[0]),i||(o=c.format(h.getResourceString("MobileServiceTable_NotSingleObject"),d),n(c.createError(o),null)),i=h.allowPlatformToMutateOriginal(t,i),n(null,i)):n(e,null)})}),e.prototype.lookup=h.async(function(t,e,n){var o,s,a;c.isNull(n)&&"function"==typeof e&&(n=e,e=null),l.isValidId(t,d),c.isNull(e)||l.isValidParametersObject(e),l.notNull(n,"callback"),o=c.url.combinePathSegments(p,this.getTableName(),encodeURIComponent(t.toString())),s=u([],e),e=r(e,this.systemProperties),c.isNull(e)||(a=c.url.getQueryString(e),o=c.url.combinePathAndQuery(o,a)),this.getMobileServiceClient()._request("GET",o,null,!1,null,s,function(t,e){if(c.isNull(t)){var r=i(e);n(null,r)}else n(t,null)})}),e.prototype.del=h.async(function(t,e,n){var i,a,h,f;c.isNull(n)&&"function"==typeof e&&(n=e,e=null),l.notNull(t,"instance"),l.isValidId(t[d],"instance."+d),l.notNull(n,"callback"),i={},a=[],c.isString(t[d])&&(c.isNullOrEmpty(t.__version)||(i["If-Match"]=s(t.__version),a.push(WindowsAzure.MobileServiceClient._zumoFeatures.OptimisticConcurrency))),a=u(a,e),e=r(e,this.systemProperties),c.isNull(e)||l.isValidParametersObject(e),h=c.url.combinePathSegments(p,this.getTableName(),encodeURIComponent(t[d].toString())),c.isNull(e)||(f=c.url.getQueryString(e),h=c.url.combinePathAndQuery(h,f)),this.getMobileServiceClient()._request("DELETE",h,null,!1,i,a,function(t){c.isNull(t)||o(t),n(t)})});for(var b=["where","select","orderBy","orderByDescending","skip","take","includeTotalCount"],_=function(t){e.prototype[t]=function(){var e=this,n=new f(e.getTableName());return n.read=h.async(function(t,r){e._read(n,t,r)}),n[t].apply(n,arguments)}},w=0;w<b.length;w++)_(b[w])},t.MobileServiceLogin=function(t){function e(t,e){s.isNull(e)&&(e=!0),a.notNull(t),a.isObject(t,"client"),this._loginState={inProcess:!1,cancelCallback:null},this.ignoreFilters=e,this.getMobileServiceClient=function(){return t},this.getLoginInProcess=function(){return this._loginState.inProcess}}function n(t,e,n,r){var i=null;s.isNull(t)&&(!s.isNull(e)&&s.isObject(e)&&s.isObject(e.user)&&s.isString(e.authenticationToken)?(n.currentUser=e.user,n.currentUser.mobileServiceAuthenticationToken=e.authenticationToken,i=n.currentUser):t=u.getResourceString("MobileServiceLogin_InvalidResponseFormat")),s.isNull(r)||r(t,i)}function r(t,e,r,i){var o=null;if(s.isNull(t))try{o=s.fromJson(e.responseText)}catch(a){t=a}n(t,o,r,i)}function i(t,e,n,i,o){var a,u,l=t.getMobileServiceClient();t._loginState={inProcess:!0,cancelCallback:null},a=c+"/"+e,s.isNull(i)||(u=s.url.getQueryString(i),a=s.url.combinePathAndQuery(a,u)),
l._request("POST",a,n,t.ignoreFilters,function(e,n){t._loginState={inProcess:!1,cancelCallback:null},r(e,n,l,o)})}function o(t,e,r,i,o){var a,h,f=t.getMobileServiceClient(),d=s.url.combinePathSegments(f.applicationUrl,c,e),p=null;s.isNull(i)||(a=s.url.getQueryString(i),d=s.url.combinePathAndQuery(d,a)),r||(p=s.url.combinePathSegments(f.applicationUrl,c,l)),t._loginState={inProcess:!0,cancelCallback:null},h=u.login(d,p,function(e,r){t._loginState={inProcess:!1,cancelCallback:null},n(e,r,f,o)}),t._loginState.inProcess&&h&&h.cancelCallback&&(t._loginState.cancelCallback=h.cancelCallback)}var s=require("Extensions"),a=require("Validate"),u=require("Platform"),c="login",l="done";t.MobileServiceLogin=e,u.addToMobileServicesClientNamespace({MobileServiceLogin:e}),e.prototype.loginWithOptions=function(t,e,n){a.isString(t,"provider"),a.notNull(t,"provider"),s.isNull(n)&&(s.isNull(e)||"function"!=typeof e?a.notNull(null,"callback"):(n=e,e=null)),!e&&this._isAuthToken(t)?this.loginWithMobileServiceToken(t,n):(e=e||{},this.loginWithProvider(t,e.token,e.useSingleSignOn,e.parameters,n))},e.prototype.login=function(t,e,n,r){s.isNull(r)&&(s.isNull(n)||"function"!=typeof n?s.isNull(e)||"function"!=typeof e||(r=e,n=null,e=null):(r=n,n=null)),s.isNull(n)&&(s.isBool(e)?(n=e,e=null):n=!1),s.isNull(e)&&this._isAuthToken(t)&&(e=t,t=null),s.isNull(t)&&(a.notNull(e),a.isString(e)),s.isNull(e)&&(a.notNull(t),a.isString(t),t=t.toLowerCase()),s.isNull(t)?this.loginWithMobileServiceToken(e,r):("windowsazureactivedirectory"===t.toLowerCase()&&(t="aad"),this.loginWithProvider(t,e,n,{},r))},e.prototype._isAuthToken=function(t){return t&&s.isString(t)&&3===t.split(".").length},e.prototype.loginWithMobileServiceToken=function(t,e){var n=this,i=n.getMobileServiceClient();a.isString(t,"authenticationToken"),a.notNullOrEmpty(t,"authenticationToken"),i._request("POST",c,{authenticationToken:t},n.ignoreFilters,function(t,n){r(t,n,i,e)})},e.prototype.loginWithProvider=function(t,e,n,r,c){if(a.isString(t,"provider"),s.isNull(e)||a.isObject(e,"token"),this._loginState.inProcess){var l=this._loginState.cancelCallback&&this._loginState.cancelCallback();if(!l)throw u.getResourceString("MobileServiceLogin_LoginErrorResponse")}t=t.toLowerCase(),s.isNull(e)?o(this,t,n,r,c):i(this,t,e,r,c)}},t.Push=function(t){function e(t){this._apns=null,this._gcm=null,this._registrationManager=null,Object.defineProperties(this,{apns:{get:function(){if(!this._apns){var e=r.format("MS-PushContainer-apns-{0}",t.applicationUrl);this._registrationManager=new o(t,"apns",e),this._apns=new s(this)}return this._apns}},gcm:{get:function(){if(!this._gcm){var e=r.format("MS-PushContainer-gcm-{0}",t.applicationUrl);this._registrationManager=new o(t,"apns",e),this._gcm=new a(this)}return this._gcm}}})}function n(t,e,n){i.notNullOrEmpty(t,"pushHandle"),i.isString(t,"pushHandle"),"apns"==e&&(t=t.toUpperCase());var r={platform:e,deviceId:t};return n&&(i.isArray(n,"tags"),r.tags=n),r}var r=require("Extensions"),i=require("Validate"),o=(require("Platform"),require("RegistrationManager").RegistrationManager),s=function(t){this._push=t},a=function(t){this._push=t};t.Push=e,e.prototype._register=function(t,e,r){var i=n(e,t,r);return this._registrationManager.upsertRegistration(i)},e.prototype._registerTemplate=function(t,e,o,s,a,u){i.notNullOrEmpty(o,"name"),i.notNullOrEmpty(s,"bodyTemplate");var c=s,l=n(e,t,u);return r.isString(c)||(c=JSON.stringify(c)),l.templateName=o,l.templateBody=c,a&&(l.expiry=a),this._registrationManager.upsertRegistration(l)},e.prototype._unregister=function(t){return i.notNullOrEmpty(t,"templateName"),this._registrationManager.deleteRegistrationWithName(t)},e.prototype._unregisterAll=function(t){return i.notNullOrEmpty(t,"pushHandle"),this._registrationManager.deleteAllRegistrations(t)},s.prototype.registerNative=function(t,e){return this._push._register("apns",t,e)},s.prototype.registerTemplate=function(t,e,n,i,o){return r.isNull(o)&&!r.isNull(i)&&Array.isArray(i)&&(o=i,i=null),this._push._registerTemplate("apns",t,e,n,i,o)},s.prototype.unregisterNative=function(){return this._push._unregister(o.NativeRegistrationName)},s.prototype.unregisterTemplate=function(t){return this._push._unregister(t)},s.prototype.unregisterAll=function(t){return this._push._unregisterAll(t)},a.prototype.registerNative=function(t,e){return this._push._register("gcm",t,e)},a.prototype.registerTemplate=function(t,e,n,r){return this._push._registerTemplate("gcm",t,e,n,null,r)},a.prototype.unregisterNative=function(){return this._push._unregister(o.NativeRegistrationName)},a.prototype.unregisterTemplate=function(t){return this._push._unregister(t)},a.prototype.unregisterAll=function(t){return this._push._unregisterAll(t)}},t.RegistrationManager=function(t){function e(t,e,n){r.notNull(t,"mobileServicesClient"),this._platform=e||"wns",this._pushHttpClient=new s(t),this._storageManager=new o(n||t.applicationUrl)}var n=require("Extensions"),r=require("Validate"),i=require("Platform"),o=require("LocalStorageManager").LocalStorageManager,s=require("PushHttpClient").PushHttpClient;t.RegistrationManager=e,e.NativeRegistrationName=o.NativeRegistrationName,e.prototype.upsertRegistration=i.async(function(t,e){r.notNull(t,"registration"),r.notNull(e,"callback");var i=this,s=function(t){u(function(e){return e?void t(e):void a(!1,t)})},a=function(e,n){i._pushHttpClient.upsertRegistration(t,function(r){return e&&r&&r.request&&410===r.request.status?void s(n):(r||(i._storageManager.pushHandle=t.deviceId),void n(r))})},u=function(e){i._pushHttpClient.createRegistrationId(function(n,r){return n?void e(n):(t.registrationId=r,i._storageManager.updateRegistrationWithName(t.templateName||o.NativeRegistrationName,t.registrationId,t.deviceId),e(),void 0)})},c=function(e){var r=t.templateName||o.NativeRegistrationName,s=i._storageManager.getRegistrationIdWithName(r);n.isNullOrEmpty(s)?u(function(t){return t?void e(t):void a(!0,e)}):(t.registrationId=s,a(!0,e))};this._storageManager.isRefreshNeeded?this._refreshRegistrations(this._storageManager.pushHandle||t.deviceId,function(t){return t?void e(t):void c(e)}):c(e)}),e.prototype.deleteRegistrationWithName=i.async(function(t,e){var r=this._storageManager.getRegistrationIdWithName(t),i=this;return n.isNullOrEmpty(r)?void e():void this._pushHttpClient.unregister(r,function(n){n||i._storageManager.deleteRegistrationWithName(t),e(n)})}),e.prototype.deleteAllRegistrations=i.async(function(t,e){var i=this,o=this._storageManager.pushHandle,s=function(e,r){if(e)return void r(e);var o=i._storageManager.getRegistrationIds(),s=o.length,a=[];return 0===s?(i._storageManager.deleteAllRegistrations(),void r()):void o.map(function(e){i._pushHttpClient.unregister(e,function(e){s--,e&&a.push(e),s<=0&&(0===a.length?(i._storageManager.deleteAllRegistrations(),r()):r(n.createError("Failed to delete registrations for "+t)))})})};r.notNull(t,"pushHandle"),this._refreshRegistrations(o||t,function(r){n.isNullOrEmpty(o)||t===o?s(r,e):s(r,function(){i._refreshRegistrations(t,function(t){s(t,e)})})})}),e.prototype.listRegistrations=i.async(function(t,e){r.notNullOrEmpty(t),this._pushHttpClient.listRegistrations(t,this._platform,e)}),e.prototype._refreshRegistrations=function(t,e){var n=this;r.notNull(t,"pushHandle"),r.notNull(e,"callback"),this._pushHttpClient.listRegistrations(t,this._platform,function(r,i){r||n._storageManager.updateAllRegistrations(i,t),e(r)})}},t.LocalStorageManager=function(t){function e(t){this._registrations={},this._storageKey="MobileServices.Push."+t,this._isRefreshNeeded=!1,Object.defineProperty(this,"isRefreshNeeded",{get:function(){return this._isRefreshNeeded}}),this._pushHandle=null,Object.defineProperty(this,"pushHandle",{get:function(){return n.isNull(this._pushHandle)?"":this._pushHandle},set:function(t){r.notNullOrEmpty(t,"pushHandle"),this._pushHandle!==t&&(this._pushHandle=t,this._flushToSettings())}}),this._initializeRegistrationInfoFromStorage()}var n=require("Extensions"),r=require("Validate"),i=require("Platform"),o={Version:"v1.1.0",Keys:{Version:"Version",PushHandle:"ChannelUri",Registrations:"Registrations",NativeRegistration:"$Default"}};t.LocalStorageManager=e,e.NativeRegistrationName=o.Keys.NativeRegistration,e.prototype.getRegistrationIds=function(){var t,e=[];for(t in this._registrations)this._registrations.hasOwnProperty(t)&&e.push(this._registrations[t]);return e},e.prototype.getRegistrationIdWithName=function(t){return r.notNullOrEmpty(t,"registrationName"),this._registrations[t]},e.prototype.updateAllRegistrations=function(t,e){var i,s;for(r.notNull(e,"pushHandle"),t||(t=[]),this._registrations={},i=0;i<t.length;i++)s=t[i].templateName,n.isNullOrEmpty(s)&&(s=o.Keys.NativeRegistration),this._registrations[s]=t[i].registrationId;this._pushHandle=e,this._flushToSettings(),this._isRefreshNeeded=!1},e.prototype.updateRegistrationWithName=function(t,e,n){r.notNullOrEmpty(t,"registrationName"),r.notNullOrEmpty(e,"registrationId"),r.notNullOrEmpty(n,"pushHandle"),this._registrations[t]=e,this._pushHandle=n,this._flushToSettings()},e.prototype.deleteRegistrationWithName=function(t){r.notNullOrEmpty(t,"registrationName"),this._registrations.hasOwnProperty(t)&&(delete this._registrations[t],this._flushToSettings())},e.prototype.deleteAllRegistrations=function(){this._registrations={},this._flushToSettings()},e.prototype._flushToSettings=function(){var t={};t[o.Keys.Version]=o.Version,t[o.Keys.PushHandle]=this._pushHandle,t[o.Keys.Registrations]=this._registrations,i.writeSetting(this._storageKey,JSON.stringify(t))},e.prototype._initializeRegistrationInfoFromStorage=function(){var t,e;this._registrations={};try{if(t=JSON.parse(i.readSetting(this._storageKey)),this._pushHandle=t[o.Keys.PushHandle],!this._pushHandle)return void(this._isRefreshNeeded=!0);if(e=t[o.Keys.Version]||"",this._isRefreshNeeded=o.Version!==e.toLowerCase(),this._isRefreshNeeded)return;this._registrations=t[o.Keys.Registrations]}catch(n){this._isRefreshNeeded=!0}}},t.PushHttpClient=function(t){function e(t){this.mobileServicesClient=t}var n=(require("Platform"),{"If-Modified-Since":"Mon, 27 Mar 1972 00:00:00 GMT"});t.PushHttpClient=e,e.prototype.listRegistrations=function(t,e,r){this.mobileServicesClient._request("GET","/push/registrations?platform="+encodeURIComponent(e)+"&deviceId="+encodeURIComponent(t),null,null,n,function(t,e){t?r(t):r(null,JSON.parse(e.responseText))})},e.prototype.unregister=function(t,e){this.mobileServicesClient._request("DELETE","/push/registrations/"+encodeURIComponent(t),null,null,n,function(t){return t&&t.request&&404===t.request.status?void e():void e(t)})},e.prototype.createRegistrationId=function(t){this.mobileServicesClient._request("POST","/push/registrationIds",null,null,n,function(e,n){if(e)return void t(e);var r=n.getResponseHeader("Location");t(null,r.slice(r.lastIndexOf("/")+1))})},e.prototype.upsertRegistration=function(t,e){this.mobileServicesClient._request("PUT","/push/registrations/"+encodeURIComponent(t.registrationId),t,null,n,e)}},t.Platform=function(t){function e(){return f||(f=r(d)),f}function r(t){for(var e=0;e<t.length;e++)if(t[e].supportsCurrentRuntime())return t[e];throw new Error("Unsupported browser - no suitable providers are available.")}var o,s=require("Extensions"),a=require("Validate"),u=require("Promises"),c=require("Resources"),l={};try{o="___z",localStorage.setItem(o,o),localStorage.removeItem(o),l=localStorage}catch(h){}var f=null,d=[require("DirectAjaxTransport"),require("IframeTransport")],p=[require("CordovaPopup"),require("BrowserPopup")],g=/^(\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2})(?:\.(\d*))?Z$/,v=!JSON.stringify(new Date(100)).match(/\.100Z"$/);t.async=function(t){return function(){var e=this,n=arguments;return new u.Promise(function(r,i){var o=function(t){s.isNull(t)?r.apply(null,Array.prototype.slice.call(arguments,1)):i(t)};Array.prototype.push.call(n,o);try{t.apply(e,n)}catch(a){o(s.createError(a))}})}},t.addToMobileServicesClientNamespace=function(t){var e,r=n.WindowsAzure=n.WindowsAzure||{};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},t.readSetting=function(t){return l[t]},t.writeSetting=function(t,e){l[t]=e},t.webRequest=function(t,n){return e().performRequest(t,n)},t.getUserAgent=function(){return null},t.getOperatingSystemInfo=function(){return{name:"--",version:"--",architecture:"--"}},t.getSdkInfo=function(){return{language:"Web",fileVersion:i}},t.login=function(t,e,n){var i=/^[a-z]+:/,o="https:";return t=t.replace(i,o),e=e.replace(i,o),r(p).login(t,e,n)},t.toJson=function(t){return JSON.stringify(t,function(t,e){if(v&&this&&s.isDate(this[t])){var n=this[t].getMilliseconds(),r=String(n+1e3).substring(1);return e.replace(g,function(t,e){return e+"."+r+"Z"})}return e})},t.tryParseIsoDateString=function(t){var e,n;if(a.isString(t),e=g.exec(t)){var r=e[1],i=e[2]||"0",o=Math.round(1e3*Number("0."+i));if(r=r.replace(/\-/g,"/").replace("T"," "),n=Date.parse(r+" UTC"),!isNaN(n))return new Date(n+o)}return null},t.getResourceString=function(t){return c["en-US"][t]},t.allowPlatformToMutateOriginal=function(t,e){return e}},t.DirectAjaxTransport=function(t){t.name="DirectAjaxTransport",t.supportsCurrentRuntime=function(){return"undefined"!=typeof n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest},t.performRequest=function(t,e){var r,i=t.headers||{},o=t.url.replace(/#.*$/,""),s=t.type?t.type.toUpperCase():"GET",a=new n.XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&e(null,a)},a.open(s,o);for(r in i)t.headers.hasOwnProperty(r)&&a.setRequestHeader(r,t.headers[r]);a.send(t.data)}},t.IframeTransport=function(t){function e(t){t&&1223===t.status&&(t.status=204)}function r(t,e){var r=s[t];r||(r=s[t]=new i.Promise(function(e){var r=document.createElement("iframe"),i=o.getOriginRoot(window.location.href),s=function(){e(r)};r.addEventListener?r.addEventListener("load",s,!1):r.attachEvent("onload",s),r.src=t+"/crossdomain/bridge?origin="+encodeURIComponent(i),r.setAttribute("width",0),r.setAttribute("height",0),r.style.display="none",n.document.body.appendChild(r)})),r.then(e)}var i=require("Promises"),o=require("PostMessageExchange"),s=[],a=o.instance;t.name="IframeTransport",t.supportsCurrentRuntime=function(){return"undefined"!=typeof n.postMessage},t.performRequest=function(t,n){var i=o.getOriginRoot(t.url);r(i,function(r){var o={type:t.type,url:t.url,headers:t.headers,data:t.data};a.request(r.contentWindow,o,i).then(function(t){e(t),n(null,t)},function(t){n(t,null)})})}},t.BrowserPopup=function(t){function e(t,e){var n=document.createElement("iframe");return n.name="zumo-login-receiver",n.src=t+"/crossdomain/loginreceiver?completion_origin="+encodeURIComponent(e),n.setAttribute("width",0),n.setAttribute("height",0),n.style.display="none",document.body.appendChild(n),n}var n=require("PostMessageExchange");t.supportsCurrentRuntime=function(){return!0},t.login=function(t,r,i){var o,s=n.getOriginRoot(window.location.href),a=n.getOriginRoot(t),u=window.navigator.userAgent.indexOf("MSIE")>=0||window.navigator.userAgent.indexOf("Trident")>=0,c=u&&e(a,s),l=u?"iframe":"postMessage";if(t+="?completion_type="+l+"&completion_origin="+encodeURIComponent(s),!(s&&(0===s.indexOf("http:")||0===s.indexOf("https:"))))return o="Login is only supported from http:// or https:// URLs. Please host your page in a web server.",void i(o,null);var h=window.open(t,"_blank","location=no"),f=function(t,e){window.clearInterval(p),h.close(),window.removeEventListener?window.removeEventListener("message",d):window.detachEvent("onmessage",d),c&&c.parentNode.removeChild(c),i(t,e)},d=function(t){var e,n=u?c.contentWindow:h;if(t.source===n){try{e=JSON.parse(t.data)}catch(r){return}e&&"LoginCompleted"===e.type&&(e.oauth||e.error)&&f(e.error,e.oauth)}},p=window.setInterval(function(){h&&h.closed===!0&&f("canceled",null)},250);return window.addEventListener?window.addEventListener("message",d,!1):window.attachEvent("onmessage",d),{cancelCallback:function(){return f("canceled",null),!0}}}},t.CordovaPopup=function(t){function e(){return window.cordova&&window.cordova.version}function n(){var t=e().match(/^(\d+).(\d+)./);if(t){var n=Number(t[1]),r=Number(t[2]),i=a;return n>i.major||n===i.major&&r>=i.minor}return!1}function r(){return!window.open}function i(t){var e=o(t,"#token="),n=o(t,"#error=");return{oAuthToken:e?JSON.parse(e):null,error:n}}function o(t,e){var n=t.indexOf(e);return n<0?null:decodeURIComponent(t.substring(n+e.length))}function s(){for(var t=("webkitTransform"in document.documentElement.style?"-webkit-":""),e=12,n="",r=0;r<e;r++)n+="<div style='-prefix-transform: rotateZ("+(180+360*r/e)+"deg);-prefix-animation-delay: "+.75*r/e+"s;'></div>";return["<!DOCTYPE html><html>","<head><meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'></head>","<body><div id='spinner'>"+n+"</div>","<style type='text/css'>","    #spinner { position: absolute; top: 50%; left: 50%; -prefix-animation: spinner 10s linear infinite; }","    #spinner > div {","        background: #333; opacity: 0; position: absolute; top: 11px; left: -2px; width: 4px; height: 21px; border-radius: 2px;","        -prefix-transform-origin: 50% -11px; -prefix-animation: spinner-spoke 0.75s linear infinite;","    }","    @-prefix-keyframes spinner { 0% { -prefix-transform: rotateZ(0deg); } 100% { -prefix-transform: rotateZ(-360deg); } }","    @-prefix-keyframes spinner-spoke { 0% { opacity: 0; } 5% { opacity: 1; } 70% { opacity: 0; } 100% { opacity: 0; } }","</style>","</body></html>"].join("").replace(/-prefix-/g,t)}var a={major:3,minor:0};t.supportsCurrentRuntime=function(){return!!e()},t.login=function(t,o,u){var c,l,h,f=e();if(!n(f))throw c="Not a supported version of Cordova. Detected: "+f+". Required: "+a.major+"."+a.minor,new Error(c);if(!r)throw c='A required plugin: "org.apache.cordova.inappbrowser" was not detected.',new Error(c);l="<script>location.href = unescape('"+window.escape(t)+"')</script>",h="data:text/html,"+encodeURIComponent(s()+l),setTimeout(function(){var t=window.open(h,"_blank","location=no"),e=!1,n=function(n){if(!e&&0===n.url.indexOf(o)){e=!0,setTimeout(function(){t.close()},500);var r=i(n.url);u(r.error,r.oAuthToken)}};t.addEventListener("loadstart",n),t.addEventListener("loadstop",n),t.addEventListener("exit",function(){e||(e=!0,u("UserCancelled",null))})},500)}},t.Extensions=function(t){function e(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var n=require("Validate"),r=require("Platform"),i=t;t.isNull=function(t){return null===t||void 0===t},t.isNullOrZero=function(t){return null===t||void 0===t||0===t||""===t},t.isNullOrEmpty=function(t){return i.isNull(t)||0===t.length},t.format=function(t){var e,r;if(n.isString(t,"message"),!i.isNullOrEmpty(t)&&arguments.length>1)for(e=1;e<arguments.length;e++)for(r="{"+(e-1)+"}";t.indexOf(r)!==-1;)t=t.replace(r,arguments[e]);return t},t.has=function(t,e){return n.notNull(e,"key"),n.isString(e,"key"),!i.isNull(t)&&t.hasOwnProperty(e)},t.hasProperty=function(t,e){for(var n=0;n<e.length;n++)if(i.has(t,e[n]))return!0;return!1},t.extend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t.isObject=function(t){return i.isNull(t)||"object"==typeof t&&!i.isDate(t)},t.isValidId=function(t){return!i.isNullOrZero(t)&&(i.isString(t)?!(0===t.length||t.length>255||0===t.trim().length)&&null===t.match(/[+"\/?`\\]|[\u0000-\u001F]|[\u007F-\u009F]|^\.{1,2}$/):!!i.isNumber(t)&&t>0)},t.isString=function(t){return i.isNull(t)||"string"==typeof t},t.isNumber=function(t){return!i.isNull(t)&&"number"==typeof t},t.isBool=function(t){return!i.isNull(t)&&"boolean"==typeof t},t.isDate=function(t){return!i.isNull(t)&&"date"==e(t)},t.toJson=function(t){return r.toJson(t)},t.fromJson=function(e){var n=null;return i.isNullOrEmpty(e)||(n=JSON.parse(e,function(e,n){if(i.isString(n)&&!i.isNullOrEmpty(n)){var r=t.tryParseIsoDateString(n);if(!i.isNull(r))return r}return n})),n},t.createUniqueInstallationId=function(){var t=function(t){return"0000".substring(t.length)+t},e=function(){return t(Math.floor(65536*Math.random()).toString(16))};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.mapProperties=function(t,e){var n,r=[];if(!i.isNull(t)){n=null;for(n in t)r.push(e(n,t[n]))}return r},t.pad=function(t,e,r){n.notNull(t,"value"),n.isInteger(e,"length"),n.isString(r,"ch"),n.notNullOrEmpty(r,"ch"),n.length(r,1,"ch");for(var i=t.toString();i.length<e;)i=r+i;return i},t.trimEnd=function(t,e){n.isString(t,"text"),n.notNull(t,"text"),n.isString(e,"ch"),n.notNullOrEmpty("ch","ch"),n.length(e,1,"ch");for(var r=t.length-1;r>=0&&t[r]===e;)r--;return r>=0?t.substr(0,r+1):""},t.trimStart=function(t,e){n.isString(t,"text"),n.notNull(t,"text"),n.isString(e,"ch"),n.notNullOrEmpty(e,"ch"),n.length(e,1,"ch");for(var r=0;r<t.length&&t[r]===e;)r++;return r<t.length?t.substr(r,t.length-r):""},t.compareCaseInsensitive=function(t,e){return i.isString(t)&&!i.isNullOrEmpty(t)&&(t=t.toUpperCase()),i.isString(t)&&!i.isNullOrEmpty(e)&&(e=e.toUpperCase()),t===e},t.url={separator:"/",combinePathSegments:function(){var t,e=[],r=0;for(n.notNullOrEmpty(arguments,"arguments"),r=0;r<arguments.length;r++)t=arguments[r],n.isString(t,i.format("argument[{0}]",r)),0!==r&&(t=i.trimStart(t||"",i.url.separator)),r<arguments.length-1&&(t=i.trimEnd(t||"",i.url.separator)),e.push(t);return e.reduce(function(t,e){return t+i.url.separator+e})},getQueryString:function(e){var r,i,o;n.notNull(e,"parameters"),n.isObject(e,"parameters"),r=[];for(i in e)o=e[i],t.isObject(o)&&(o=t.toJson(o)),r.push(encodeURIComponent(i)+"="+encodeURIComponent(o));return r.join("&")},combinePathAndQuery:function(e,r){return n.notNullOrEmpty(e,"path"),n.isString(e,"path"),i.isNullOrEmpty(r)?e:(n.isString(r,"queryString"),e.indexOf("?")>=0?e+"&"+t.trimStart(r,"?"):e+"?"+t.trimStart(r,"?"))},isAbsoluteUrl:function(t){if(i.isNullOrEmpty(t))return!1;var e=t.substring(0,7).toLowerCase();return"http://"==e||"https:/"==e}},t.tryParseIsoDateString=function(t){return r.tryParseIsoDateString(t)},t.createError=function(t,e){var n,o,s,a={message:r.getResourceString("Extensions_DefaultErrorMessage")};if(a.toString=function(){return a.message},e)if(a.request=e,0===e.status)a.message=r.getResourceString("Extensions_ConnectionFailureMessage");else{n=!1,e.getResponseHeader&&(o=e.getResponseHeader("Content-Type"),o&&(n=o.toLowerCase().indexOf("text")>=0));try{s=JSON.parse(e.responseText),a.message="string"==typeof s?s:s.error||s.description||e.statusText||r.getResourceString("Extensions_DefaultErrorMessage")}catch(u){a.message=n?e.responseText:e.statusText||r.getResourceString("Extensions_DefaultErrorMessage")}}else i.isString(t)&&!i.isNullOrEmpty(t)?a.message=t:i.isNull(t)||(a.exception=t);return a}},t.PostMessageExchange=function(t){function e(){var t=this;t._lastMessageId=0,t._hasListener=!1,t._pendingMessages={}}function r(t){var e=i(t),n=e.port?e.port.toString():null,r="http:"===e.protocol&&"80"===n||"https:"===e.protocol&&"443"===n,o=n&&!r?":"+n:"";return e.protocol+"//"+e.hostname+o}function i(t){var e=n.document.createElement("a");return e.href=t,e}var o=require("Promises"),s=3e5;e.prototype.request=function(t,e,r){var i=this,a=++i._lastMessageId,u={messageId:a,contents:e};return i._ensureHasListener(),new o.Promise(function(e,o){i._pendingMessages[a]={messageId:a,complete:e,error:o,targetWindow:t,origin:r},i._pendingMessages[a].timeoutId=n.setTimeout(function(){var t=i._pendingMessages[a];t&&(delete i._pendingMessages[a],t.error({status:0,statusText:"Timeout",responseText:null}))},s),t.postMessage(JSON.stringify(u),r)})},e.prototype._ensureHasListener=function(){if(!this._hasListener){this._hasListener=!0;var t=this,e=function(){t._handleMessage.apply(t,arguments)};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent("onmessage",e)}},e.prototype._handleMessage=function(t){var e=this._tryDeserializeMessage(t.data),i=e&&e.messageId,o=i&&this._pendingMessages[i],s=o&&o.targetWindow===t.source&&o.origin===r(t.origin);s&&(n.clearTimeout(o.timeoutId),delete this._pendingMessages[i],o.complete(e.contents))},e.prototype._tryDeserializeMessage=function(t){if(!t||"string"!=typeof t)return null;try{return JSON.parse(t)}catch(e){return null}},t.instance=new e,t.getOriginRoot=r},t.Promises=function(t){!function(t){"use strict";function e(t){this._callbackFrames=[],this._resolutionState=null,this._resolutionValueOrError=null,this._resolveSuccess=r(this._resolveSuccess,this),this._resolveError=r(this._resolveError,this),t&&t(this._resolveSuccess,this._resolveError)}var n={success:{},error:{}},r=function(t,e){return function(){t.apply(e,arguments)}},i=function(t){return t&&"function"==typeof t.then};e.prototype.then=function(t,n){var r={success:t,error:n,chainedPromise:new e};return this._resolutionState?this._invokeCallback(r):this._callbackFrames.push(r),r.chainedPromise},e.prototype._resolveSuccess=function(t){this._resolve(n.success,t)},e.prototype._resolveError=function(t){this._resolve(n.error,t)},e.prototype._resolve=function(t,e){if(!this._resolutionState){this._resolutionState=t,this._resolutionValueOrError=e;for(var n=0,r=this._callbackFrames.length;n<r;n++)this._invokeCallback(this._callbackFrames[n])}},e.prototype._invokeCallback=function(t){var e=this._resolutionState===n.success?t.success:t.error;"function"==typeof e?setTimeout(r(function(){var r,o,s=!0;try{r=e(this._resolutionValueOrError),o=n.success}catch(a){s=!1,r=a,o=n.error}s&&i(r)?r.then(t.chainedPromise._resolveSuccess,t.chainedPromise._resolveError):t.chainedPromise._resolve(o,r)},this),1):t.chainedPromise._resolve(this._resolutionState,this._resolutionValueOrError)},e.prototype.done=function(t,e){return void this.then(t,e).then(null,function(t){setTimeout(function(){throw new Error(t)},1)})},t.Promise=e}(t)},t.Validate=function(t){var e=require("Extensions"),n=require("Platform");t.notNull=function(t,r){if(e.isNull(t))throw e.format(n.getResourceString("Validate_NotNullError"),r||"Value")},t.notNullOrEmpty=function(t,r){if(e.isNullOrEmpty(t))throw e.format(n.getResourceString("Validate_NotNullOrEmptyError"),r||"Value")},t.notNullOrZero=function(t,r){if(e.isNullOrZero(t))throw e.format(n.getResourceString("Validate_NotNullOrEmptyError"),r||"Value")},t.isValidId=function(t,r){if(!e.isValidId(t))throw e.format(n.getResourceString("Validate_InvalidId"),r||"id")},t.isDate=function(r,i){if(t.notNull(r,i),!e.isDate(r))throw e.format(n.getResourceString("Validate_TypeCheckError"),i||"Value","Date",typeof r)},t.isNumber=function(r,i){if(t.notNull(r,i),!e.isNumber(r))throw e.format(n.getResourceString("Validate_TypeCheckError"),i||"Value","Number",typeof r)},t.isValidParametersObject=function(r,i){t.notNull(r,i),t.isObject(r,i);for(var o in r)if(0===o.indexOf("$"))throw e.format(n.getResourceString("Validate_InvalidUserParameter"),i,o)},t.isInteger=function(r,i){if(t.notNull(r,i),t.isNumber(r,i),parseInt(r,10)!==parseFloat(r))throw e.format(n.getResourceString("Validate_TypeCheckError"),i||"Value","number",typeof r)},t.isString=function(t,r){if(!e.isString(t))throw e.format(n.getResourceString("Validate_TypeCheckError"),r||"Value","string",typeof t)},t.isObject=function(t,r){if(!e.isObject(t))throw e.format(n.getResourceString("Validate_TypeCheckError"),r||"Value","object",typeof t)},t.isArray=function(t,r){if(!Array.isArray(t))throw e.format(n.getResourceString("Validate_TypeCheckError"),r||"Value","array",typeof t)},t.length=function(r,i,o){if(t.notNull(r,o),t.isInteger(i,"length"),r.length!==i)throw e.format(n.getResourceString("Validate_LengthUnexpected"),o||"Value",i,r.length)}},t.JavaScript=function(t){(function(){var e,n,r,i,o;o=require("esprima"),e=require("./JavaScriptNodes"),i=require("./PartialEvaluator").PartialEvaluator,r=require("./JavaScriptToQueryVisitor").JavaScriptToQueryVisitor,t.JavaScript=n=function(){function t(){}return t.transformConstraint=function(e,n){var o,s;return o=t.getExpression(e,n),o.expression=i.evaluate(o),s=new r(o),s.visit(o.expression)},t.getProjectedFields=function(){return[]},t.getExpression=function(t,e){var n,r,i,s,a,u,c,l,h,f,d,p,g,v,m,y,b,_,w,S,x,E,A;if(c="var _$$_stmt_$$_ = "+t+";",u=o.parse(c,{range:!0}),r="Program"===(null!=u?u.type:void 0)&&1===(null!=u&&null!=(f=u.body)?f.length:void 0)&&"VariableDeclaration"===(null!=(d=u.body[0])?d.type:void 0)&&1===(null!=(y=u.body[0])&&null!=(b=y.declarations)?b.length:void 0)&&"VariableDeclarator"===(null!=(_=u.body[0].declarations[0])?_.type:void 0)&&"FunctionExpression"===(null!=(w=u.body[0].declarations[0])&&null!=(S=w.init)?S.type:void 0)&&"BlockStatement"===(null!=(x=u.body[0].declarations[0].init)&&null!=(E=x.body)?E.type:void 0)&&1===(null!=(A=u.body[0].declarations[0].init.body)&&null!=(p=A.body)?p.length:void 0)&&"ReturnStatement"===(null!=(g=u.body[0].declarations[0].init.body.body[0])?g.type:void 0)&&(null!=(v=u.body[0].declarations[0].init.body.body[0])?v.argument:void 0),!r)throw"Expected a predicate with a single return statement, not "+t;if(a=null!=(m=u.body[0].declarations[0].init.params)?m.map(function(t){return t.name}):void 0,a.length>e.length)throw"Expected value(s) for parameter(s) "+a.slice(e.length);if(e.length>a.length)throw"Expected parameter(s) for value(s) "+e.slice(a.length);for(n={},i=l=0,h=a.length;l<h;i=++l)s=a[i],n[s]=e[i];return{source:c,expression:r,environment:n}},t}()}).call(this)},t.JavaScriptNodes=function(t){(function(){var e,n,r,i,o,s,a,u,c,l,h,f,d,p,g,v,m,y,b,_,w,S,x,E,A,C,R,N,O,T,k,I,P,F,D,$,j,L,M,B,H,U,K,q,J,V,z,X,W,Y,G,Q={}.hasOwnProperty,Z=function(t,e){function n(){this.constructor=t}for(var r in e)Q.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};G=require("./Node"),k=G.Node,X=G.Visitor,t.JavaScriptNode=E=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(k),t.JavaScriptVisitor=A=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e.prototype.JavaScriptNode=function(t){return t},e}(X),t.Program=D=function(t){function e(t){this.elements=t,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.Program=function(t){return t=this.JavaScriptNode(t),t.elements=this.visit(t.elements),t},t.Function=b=function(t){function e(t,n,r){this.id=t,this.params=n,this.body=r,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.Function=function(t){return t=this.JavaScriptNode(t),t.id=this.visit(t.id),t.params=this.visit(t.params),t.body=this.visit(t.body),t},t.Statement=L=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.Statement=function(t){return this.JavaScriptNode(t)},t.EmptyStatement=p=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.EmptyStatement=function(t){return this.JavaScriptNode(t)},t.BlockStatement=o=function(t){function e(t){this.body=t,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.BlockStatement=function(t){return t=this.Statement(t),t.body=this.visit(t.body),t},t.ExpressionStatement=v=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.ExpressionStatement=function(t){return this.Statement(t)},t.IfStatement=x=function(t){function e(t,n,r){this.test=t,this.consequent=n,this.alternate=r,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.IfStatement=function(t){return t=this.Statement(t),t.test=this.visit(t.test),t.consequent=this.visit(t.consequent),t.alternate=this.visit(t.alternate),t},t.LabeledStatement=C=function(t){function e(t,n){this.label=t,this.body=n,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.LabeledStatement=function(t){return t=this.Statement(t),t.label=this.visit(t.label),t.body=this.visit(t.body),t},t.BreakStatement=s=function(t){function e(t){this.label=t,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.BreakStatement=function(t){return t=this.Statement(t),t.label=this.visit(t.label),t},t.ContinueStatement=l=function(t){function e(t){this.label=t,e.__super__.constructor.call(this);
}return Z(e,t),e}(L),A.prototype.ContinueStatement=function(t){return t=this.Statement(t),t.label=this.visit(t.label),t},t.WithStatement=Y=function(t){function e(t,n){this.object=t,this.body=n,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.WithStatement=function(t){return t=this.Statement(t),t.object=this.visit(t.object),t.body=this.visit(t.body),t},t.SwitchStatement=B=function(t){function e(t,n){this.discriminant=t,this.cases=n,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.SwitchStatement=function(t){return t=this.Statement(t),t.discriminant=this.visit(t.discriminant),t.cases=this.visit(t.cases),t},t.ReturnStatement=$=function(t){function e(t){this.argument=t,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.ReturnStatement=function(t){return t=this.Statement(t),t.argument=this.visit(t.argument),t},t.ThrowStatement=U=function(t){function e(t){this.argument=t,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.ThrowStatement=function(t){return t=this.Statement(t),t.argument=this.visit(t.argument),t},t.TryStatement=K=function(t){function e(t,n,r){this.block=t,this.handlers=n,this.finalizer=r,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.TryStatement=function(t){return t=this.Statement(t),t.block=this.visit(t.block),t.handlers=this.visit(t.handlers),t.finalizer=this.visit(t.finalizer),t},t.WhileStatement=W=function(t){function e(t,n){this.test=t,this.body=n,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.WhileStatement=function(t){return t=this.Statement(t),t.test=this.visit(t.test),t.body=this.visit(t.body),t},t.DoWhileStatement=d=function(t){function e(t,n){this.body=t,this.test=n,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.DoWhileStatement=function(t){return t=this.Statement(t),t.body=this.visit(t.body),t.test=this.visit(t.test),t},t.ForStatement=y=function(t){function e(t,n,r,i){this.init=t,this.test=n,this.update=r,this.body=i,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.ForStatement=function(t){return t=this.Statement(t),t.init=this.visit(t.init),t.test=this.visit(t.test),t.update=this.visit(t.update),t.body=this.visit(t.body),t},t.ForInStatement=m=function(t){function e(t,n,r){this.left=t,this.right=n,this.body=r,e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.ForInStatement=function(t){return t=this.Statement(t),t.left=this.visit(t.left),t.right=this.visit(t.right),t.body=this.visit(t.body),t},t.DebuggerStatement=h=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.DebuggerStatement=function(t){return this.Statement(t)},t.Declaration=f=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(L),A.prototype.Declaration=function(t){return this.Statement(t)},t.FunctionDeclaration=_=function(t){function e(t,n,r){this.id=t,this.params=n,this.body=r,e.__super__.constructor.call(this)}return Z(e,t),e}(f),A.prototype.FunctionDeclaration=function(t){return t=this.Declaration(t),t.id=this.visit(t.id),t.params=this.visit(t.params),t.body=this.visit(t.body),t},t.VariableDeclaration=V=function(t){function e(t,n){this.declarations=t,this.kind=n,e.__super__.constructor.call(this)}return Z(e,t),e}(f),A.prototype.VariableDeclaration=function(t){return t=this.Declaration(t),t.declarations=this.visit(t.declarations),t},t.VariableDeclarator=z=function(t){function e(t,n){this.id=t,this.init=n,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.VariableDeclarator=function(t){return t=this.JavaScriptNode(t),t.id=this.visit(t.id),t.init=this.visit(t.init),t},t.Expression=g=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Z(e,t),e.prototype.constuctor=function(){return e.__super__.constuctor.call(this)},e}(E),A.prototype.Expression=function(t){return this.JavaScriptNode(t)},t.ThisExpression=H=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.ThisExpression=function(t){return this.Expression(t)},t.ArrayExpression=e=function(t){function e(t){this.elements=t,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.ArrayExpression=function(t){return t=this.Expression(t),t.elements=this.visit(t.elements),t},t.ObjectExpression=I=function(t){function e(t){this.properties=t,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.ObjectExpression=function(t){var e,n,r,i;for(t=this.Expression(t),i=t.properties,n=0,r=i.length;n<r;n++)e=i[n],e.key=this.visit(e.key),e.value=this.visit(e.value);return t},t.FunctionExpression=w=function(t){function e(t,n,r){this.id=t,this.params=n,this.body=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.FunctionExpression=function(t){return t=this.Expression(t),t.id=this.visit(t.id),t.params=this.visit(t.params),t.body=this.visit(t.body),t},t.SequenceExpression=j=function(t){function e(t){this.expressions=t,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.SequenceExpression=function(t){return t=this.Expression(t),t.expressions=this.visit(t.expressions),t},t.UnaryExpression=q=function(t){function e(t,n,r){this.operator=t,this.prefix=n,this.argument=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.UnaryExpression=function(t){return t=this.Expression(t),t.argument=this.visit(t.argument),t},t.BinaryExpression=i=function(t){function e(t,n,r){this.operator=t,this.left=n,this.right=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.BinaryExpression=function(t){return t=this.Expression(t),t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.AssignmentExpression=r=function(t){function e(t,n,r){this.operator=t,this.left=n,this.right=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.AssignmentExpression=function(t){return t=this.Expression(t),t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.UpdateExpression=J=function(t){function e(t,n,r){this.operator=t,this.argument=n,this.prefix=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.UpdateExpression=function(t){return t=this.Expression(t),t.argument=this.visit(t.argument),t},t.LogicalExpression=N=function(t){function e(t,n,r){this.operator=t,this.left=n,this.right=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.LogicalExpression=function(t){return t=this.Expression(t),t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.ConditionalExpression=c=function(t){function e(t,n,r){this.test=t,this.alternate=n,this.consequent=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.ConditionalExpression=function(t){return t=this.Expression(t),t.test=this.visit(t.test),t.alternate=this.visit(t.alternate),t.consequent=this.visit(t.consequent),t},t.NewExpression=T=function(t){function e(t,n){this.callee=t,this.arguments=n,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.NewExpression=function(t){return t=this.Expression(t),t.callee=this.visit(t.callee),t.arguments=this.visit(t.arguments),t},t.CallExpression=a=function(t){function e(t,n){this.callee=t,this.arguments=n,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.CallExpression=function(t){return t=this.Expression(t),t.callee=this.visit(t.callee),t.arguments=this.visit(t.arguments),t},t.MemberExpression=O=function(t){function e(t,n,r){this.object=t,this.property=n,this.computed=r,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.MemberExpression=function(t){return t=this.Expression(t),t.object=this.visit(t.object),t.property=this.visit(t.property),t},t.Pattern=F=function(t){function e(){e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.Pattern=function(t){return this.JavaScriptNode(t)},t.ObjectPattern=P=function(t){function e(t){this.properties=t,e.__super__.constructor.call(this)}return Z(e,t),e}(F),A.prototype.ObjectPattern=function(t){var e,n,r,i;for(t=this.Pattern(t),i=t.properties,n=0,r=i.length;n<r;n++)e=i[n],e.key=this.visit(e.key),e.value=this.visit(e.value);return t},t.ArrayPattern=n=function(t){function e(t){this.elements=t,e.__super__.constructor.call(this)}return Z(e,t),e}(F),A.prototype.ArrayPattern=function(t){return t=this.Pattern(t),t.elements=this.visit(t.elements),t},t.SwitchCase=M=function(t){function e(t,n){this.test=t,this.consequent=n,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.SwitchCase=function(t){return t=this.JavaScriptNode(t),t.test=this.visit(t.test),t.consequent=this.visit(t.consequent),t},t.CatchClause=u=function(t){function e(t,n){this.param=t,this.body=n,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.CatchClause=function(t){return t=this.JavaScriptNode(t),t.param=this.visit(t.param),t.body=this.visit(t.body),t},t.Identifier=S=function(t){function e(t){this.name=t,e.__super__.constructor.call(this)}return Z(e,t),e}(E),A.prototype.Identifier=function(t){return this.JavaScriptNode(t)},t.Literal=R=function(t){function e(t){this.value=t,e.__super__.constructor.call(this)}return Z(e,t),e}(g),A.prototype.Literal=function(t){return this.Expression(t)}}).call(this)},t.JavaScriptToQueryVisitor=function(t){(function(){var e,n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=require("./Utilities"),e=require("./JavaScriptNodes"),r=require("./QueryNodes"),t.JavaScriptToQueryVisitor=n=function(t){function e(t){this.context=t}return s(e,t),e.prototype.getSource=function(t){var e,n;return this.context.source.slice(null!=t&&null!=(e=t.range)?e[0]:void 0,+((null!=t&&null!=(n=t.range)?n[1]:void 0)-1)+1||9e9)},e.prototype.invalid=function(t){throw"The expression '"+this.getSource(t)+"'' is not supported."},e.prototype.translateUnary=function(t,e){var n,i;return n=e[t.operator],n?(i=this.visit(t.argument),new r.UnaryExpression(n,i)):null},e.prototype.translateBinary=function(t,e){var n,i,o;return i=e[t.operator],i?(n=this.visit(t.left),o=this.visit(t.right),new r.BinaryExpression(i,n,o)):null},e.prototype.visit=function(t){var n;return n=e.__super__.visit.call(this,t),t===n&&this.invalid(t),n},e.prototype.MemberExpression=function(t){var n;return n=function(){var e,n,i,o;return"ThisExpression"===(null!=t&&null!=(e=t.object)?e.type:void 0)&&"Identifier"===(null!=t&&null!=(n=t.property)?n.type:void 0)?new r.MemberExpression(t.property.name):"MemberExpression"===(null!=t&&null!=(i=t.object)?i.type:void 0)&&"ThisExpression"===(null!=(o=t.object.object)?o.type:void 0)&&"Identifier"===t.property.type&&"length"===t.property.name?new r.InvocationExpression(r.Methods.Length,new r.MemberExpression(t.object.property.name)):void 0}(),null!=n?n:e.__super__.MemberExpression.call(this,t)},e.prototype.Literal=function(t){return new r.ConstantExpression(t.value)},e.prototype.UnaryExpression=function(t){var n,i;return"+"===t.operator?this.visit(t.argument):(n={"!":r.UnaryOperators.Not,"-":r.UnaryOperators.Negate},null!=(i=this.translateUnary(t,n))?i:e.__super__.UnaryExpression.call(this,t))},e.prototype.UpdateExpression=function(t){var n,i;return n={"++":r.UnaryOperators.Increment,"--":r.UnaryOperators.Decrement},null!=(i=this.translateUnary(t,n))?i:e.__super__.UpdateExpression.call(this,t)},e.prototype.LogicalExpression=function(t){var n,i;return n={"&&":r.BinaryOperators.And,"||":r.BinaryOperators.Or},null!=(i=this.translateBinary(t,n))?i:e.__super__.LogicalExpression.call(this,t)},e.prototype.BinaryExpression=function(t){var n,o,s,a,u,c,l;return s={"+":r.BinaryOperators.Add,"-":r.BinaryOperators.Subtract,"*":r.BinaryOperators.Multiply,"/":r.BinaryOperators.Divide,"%":r.BinaryOperators.Modulo,">":r.BinaryOperators.GreaterThan,">=":r.BinaryOperators.GreaterThanOrEqual,"<":r.BinaryOperators.LessThan,"<=":r.BinaryOperators.LessThanOrEqual,"!=":r.BinaryOperators.NotEqual,"!==":r.BinaryOperators.NotEqual,"==":r.BinaryOperators.Equal,"===":r.BinaryOperators.Equal},function(){var h,f;return null!=(l=this.translateBinary(t,s))?l:"in"===t.operator&&"Literal"===(null!=(h=t.right)?h.type:void 0)&&i.isArray(null!=(f=t.right)?f.value:void 0)?t.right.value.length>0?(o=this.visit(t.left),r.QueryExpression.groupClauses(r.BinaryOperators.Or,function(){var e,s,l,h;for(l=t.right.value,h=[],e=0,s=l.length;e<s;e++){if(c=l[e],i.isObject(c)){if(a=function(){var t=[];for(n in c)u=c[n],t.push(u);return t}(),1!==(null!=a?a.length:void 0))throw"in operator requires comparison objects with a single field, not "+c+" ("+JSON.stringify(c)+"), for expression '"+this.getSource(t)+"'";c=a[0]}h.push(new r.BinaryExpression(r.BinaryOperators.Equal,o,new r.ConstantExpression(c)))}return h}.call(this))):new r.BinaryExpression(r.BinaryOperators.Equal,new r.ConstantExpression((!0)),new r.ConstantExpression((!1))):e.__super__.BinaryExpression.call(this,t)}.call(this)},e.prototype.CallExpression=function(t){var n,i,o,s,a,u,c;return o=function(e){return function(n){var r;if(1!==(null!=(r=t.arguments)?r.length:void 0))throw"Function "+n+" expects one argument in expression '"+e.getSource(t)+"'";return e.visit(t.arguments[0])}}(this),s=function(e){return function(n,r){var i;if(2!==(null!=(i=t.arguments)?i.length:void 0))throw"Function "+r+" expects two arguments in expression '"+e.getSource(t)+"'";return[n,e.visit(t.arguments[0]),e.visit(t.arguments[1])]}}(this),i=null!=t&&null!=(c=t.callee)?c.value:void 0,n=function(){var e,n,c,l,h,f,d;if(i===Math.floor)return new r.InvocationExpression(r.Methods.Floor,[o("floor")]);if(i===Math.ceil)return new r.InvocationExpression(r.Methods.Ceiling,[o("ceil")]);if(i===Math.round)return new r.InvocationExpression(r.Methods.Round,[o("round")]);if("MemberExpression"===t.callee.type&&(null!=(e=t.callee.object)?e.__hasThisExp:void 0)===!0){if(a="CallExpression"===(null!=t&&null!=(n=t.callee)&&null!=(c=n.object)?c.type:void 0)?this.visit(t.callee.object):new r.MemberExpression(null!=(l=t.callee.object)&&null!=(h=l.property)?h.name:void 0),u=null!=(f=t.callee)&&null!=(d=f.property)?d.name:void 0,"toUpperCase"===u)return new r.InvocationExpression(r.Methods.ToUpperCase,[a]);if("toLowerCase"===u)return new r.InvocationExpression(r.Methods.ToLowerCase,[a]);if("trim"===u)return new r.InvocationExpression(r.Methods.Trim,[a]);if("indexOf"===u)return new r.InvocationExpression(r.Methods.IndexOf,[a,o("indexOf")]);if("concat"===u)return new r.InvocationExpression(r.Methods.Concat,[a,o("concat")]);if("substring"===u||"substr"===u)return new r.InvocationExpression(r.Methods.Substring,s(a,"substring"));if("replace"===u)return new r.InvocationExpression(r.Methods.Replace,s(a,"replace"));if("getFullYear"===u||"getUTCFullYear"===u)return new r.InvocationExpression(r.Methods.Year,[a]);if("getYear"===u)return new r.BinaryExpression(r.BinaryOperators.Subtract,new r.InvocationExpression(r.Methods.Year,[a]),new r.ConstantExpression(1900));if("getMonth"===u||"getUTCMonth"===u)return new r.BinaryExpression(r.BinaryOperators.Subtract,new r.InvocationExpression(r.Methods.Month,[a]),new r.ConstantExpression(1));if("getDate"===u||"getUTCDate"===u)return new r.InvocationExpression(r.Methods.Day,[a])}}.call(this),null!=n?n:e.__super__.CallExpression.call(this,t)},e}(e.JavaScriptVisitor)}).call(this)},t.Node=function(t){(function(){var e,n,r;r=require("./Utilities"),t.Node=e=function(){function t(){this.type=r.functionName(this.constructor)}return t.prototype.type="Node",t}(),t.Visitor=n=function(){function t(){}return t.prototype.visit=function(t){var e,n,i,o;if(r.isArray(t)){for(o=[],n=0,i=t.length;n<i;n++)e=t[n],o.push(this.visit(e));return o}if(null!=t?t.type:void 0){if(r.isFunction(this[t.type]))return this[t.type](t);throw"Unsupported expression "+this.getSource(t)}return t},t.prototype.getSource=function(){return null},t}()}).call(this)},t.ODataProvider=function(t){(function(){var e,n,r,i,o,s={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};o=require("./Utilities"),r=require("./QueryNodes"),i=require("./Query").Query,t.ODataProvider=n=function(){function t(){}return t.prototype.toQuery=function(t){var e,n,r;return e=this.toOData(t,!0),r="/"+e.table,n="?",e.filters&&(r+=""+n+"$filter="+e.filters,n="&"),e.ordering&&(r+=""+n+"$orderby="+e.ordering,n="&"),e.skip&&(r+=""+n+"$skip="+e.skip,n="&"),(e.take||0===e.take)&&(r+=""+n+"$top="+e.take,n="&"),e.selections&&(r+=""+n+"$select="+e.selections,n="&"),e.includeTotalCount&&(r+=""+n+"$inlinecount=allpages"),r},t.prototype.toOData=function(t,n){var r,i,o,s,a,u;return null==n&&(n=!1),i=null!=(a=null!=t?t.getComponents():void 0)?a:{},s=function(){var t,e;t=null!=i?i.ordering:void 0,e=[];for(o in t)r=t[o],e.push(r?o:""+o+" desc");return e}(),{table:null!=i?i.table:void 0,filters:e.convert(i.filters,n),ordering:null!=s?s.toString():void 0,skip:null!=i?i.skip:void 0,take:null!=i?i.take:void 0,selections:null!=i&&null!=(u=i.selections)?u.toString():void 0,includeTotalCount:null!=i?i.includeTotalCount:void 0}},t.prototype.fromOData=function(t,e,n,r,o,s,a){var u,c,l,h,f,d,p,g,v,m,y,b;for(h=new i(t),e&&h.where(e),(r||0===r)&&h.skip(r),(o||0===o)&&h.take(o),a&&h.includeTotalCount(),m=null!=(v=null!=s?s.split(","):void 0)?v:[],f=0,p=m.length;f<p;f++)c=m[f],h.select(c.trim());for(y=function(){var t,e,r,i,o;for(i=null!=(r=null!=n?n.split(","):void 0)?r:[],o=[],t=0,e=i.length;t<e;t++)l=i[t],o.push(l.trim().split(" "));return o}(),d=0,g=y.length;d<g;d++)b=y[d],c=b[0],u=b[1],"DESC"!==(null!=u?u.toUpperCase():void 0)?h.orderBy(c):h.orderByDescending(c);return h},t}(),e=function(t){function e(t){this.encodeForUri=t}return a(e,t),e.convert=function(t,n){var r,i;return r=new e(n),null!=(i=t?r.visit(t):void 0)?i:null},e.prototype.toOData=function(t){var e;if(o.isNumber(t)||o.isBoolean(t))return t.toString();if(o.isString(t))return t=t.replace(/'/g,"''"),null!=this.encodeForUri&&this.encodeForUri===!0&&(t=encodeURIComponent(t)),"'"+t+"'";if(o.isDate(t))return e=JSON.stringify(t),e.length>2&&(e=e.slice(1,+(e.length-2)+1||9e9)),e=e.replace(/(T\d{2}:\d{2}:\d{2})Z$/,function(e,n){var r;return r=String(t.getMilliseconds()+1e3).substring(1),""+n+"."+r+"Z"}),"datetime'"+e+"'";if(t)throw"Unsupported literal value "+t;return"null"},e.prototype.ConstantExpression=function(t){return this.toOData(t.value)},e.prototype.MemberExpression=function(t){return t.member},e.prototype.UnaryExpression=function(t){if(t.operator===r.UnaryOperators.Not)return"not "+this.visit(t.operand);if(t.operator===r.UnaryOperators.Negate)return"(0 sub "+this.visit(t.operand)+")";throw"Unsupported operator "+t.operator},e.prototype.BinaryExpression=function(t){var e,n;if(e={And:"and",Or:"or",Add:"add",Subtract:"sub",Multiply:"mul",Divide:"div",Modulo:"mod",GreaterThan:"gt",GreaterThanOrEqual:"ge",LessThan:"lt",LessThanOrEqual:"le",NotEqual:"ne",Equal:"eq"},n=e[t.operator])return"("+this.visit(t.left)+" "+n+" "+this.visit(t.right)+")";throw"Unsupported operator "+t.operator},e.prototype.InvocationExpression=function(t){var e,n;if(e={Length:"length",ToUpperCase:"toupper",ToLowerCase:"tolower",Trim:"trim",IndexOf:"indexof",Replace:"replace",Substring:"substring",Concat:"concat",Day:"day",Month:"month",Year:"year",Floor:"floor",Ceiling:"ceiling",Round:"round"},n=e[t.method])return""+n+"("+this.visit(t.args)+")";throw"Invocation of unsupported method "+t.method},e.prototype.LiteralExpression=function(t){var e,n,r,i,o,s;for(r="",n=!1,s=t.queryString,i=0,o=s.length;i<o;i++)if(e=s[i],n)r+=e,n="'"!==e;else if("?"===e){if(!t.args||t.args.length<=0)throw"Too few arguments for "+t.queryString+".";r+=this.toOData(t.args.shift())}else"'"===e?(r+=e,n=!0):r+=e;if(t.args&&t.args.length>0)throw"Too many arguments for "+t.queryString;return r},e}(r.QueryExpressionVisitor)}).call(this)},t.PartialEvaluator=function(n){(function(){var r,t,f,i,e={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};i=require("./Utilities"),t=require("./JavaScriptNodes"),n.PartialEvaluator=f=function(n){function PartialEvaluator(t){this.context=t}return u(PartialEvaluator,n),PartialEvaluator.prototype.visit=function(n){var i,u,f,e,r,o,s,h,c,l;return n.__independent&&"Literal"!==n.type&&n.type?"Identifier"===n.type&&this.context.environment[n.name]?new t.Literal(this.context.environment[n.name]):(f=this.context.source.slice(null!=n&&null!=(s=n.range)?s[0]:void 0,+((null!=n&&null!=(h=n.range)?h[1]:void 0)-1)+1||9e9),u=null!=(c=function(){var t,e;t=this.context.environment,e=[];for(i in t)r=t[i],e.push(i);return e}.call(this))?c:[],o=null!=(l=function(){var t,e;t=this.context.environment,e=[];for(i in t)r=t[i],e.push(JSON.stringify(r));return e}.call(this))?l:[],e="(function("+u+") { return "+f+"; })("+o+")",r=eval(e),new t.Literal(r)):PartialEvaluator.__super__.visit.call(this,n)},PartialEvaluator.evaluate=function(t){var e,n;return n=new r(t),n.visit(t.expression),e=new PartialEvaluator(t),e.visit(t.expression)},PartialEvaluator}(t.JavaScriptVisitor),n.IndependenceNominator=r=function(t){function e(t){this.context=t}return u(e,t),e.prototype.Literal=function(t){return e.__super__.Literal.call(this,t),t.__independent=!0,t.__hasThisExp=!1,t},e.prototype.ThisExpression=function(t){return e.__super__.ThisExpression.call(this,t),t.__independent=!1,t.__hasThisExp=!0,t},e.prototype.Identifier=function(t){return e.__super__.Identifier.call(this,t),t.__independent=!0,t.__hasThisExp=!1,t},e.prototype.MemberExpression=function(t){var n;return e.__super__.MemberExpression.call(this,t),t.__hasThisExp=null!=(n=t.object)?n.__hasThisExp:void 0,t.__hasThisExp&&(t.__independent=!1,null!=t&&(t.property.__independent=!1)),t},e.prototype.CallExpression=function(t){return e.__super__.CallExpression.call(this,t),t.__hasThisExp=t.callee.__hasThisExp,t},e.prototype.ObjectExpression=function(t){var n,r,i,o,s,a,u,c;for(e.__super__.ObjectExpression.call(this,t),u=t.properties,i=0,s=u.length;i<s;i++)r=u[i],r.key.__independent=!1;for(n=!0,c=t.properties,o=0,a=c.length;o<a;o++)r=c[o],n&=r.value.__independent;return t.__independent=!!n,t},e.prototype.visit=function(t){var n,r,o,s,a,u,c;if(e.__super__.visit.call(this,t),!Object.prototype.hasOwnProperty.call(t,"__independent")){n=!0,r=function(t){var e;return!i.isObject(t)||null!=(e=a.__independent)&&e};for(o in t)if(a=t[o],i.isArray(a))for(u=0,c=a.length;u<c;u++)s=a[u],n&=r(s);else i.isObject(a)&&(n&=r(a));t.__independent=!!n}return t},e}(t.JavaScriptVisitor)}).call(this)},t.Query=function(t){(function(){var e,n,r,i,o,s=[].slice;o=require("./Utilities"),r=require("./QueryNodes"),e=require("./JavaScript").JavaScript,t.Query=i=function(){function t(t,n){var i,a,u,c,l,h,f,d,p,g;if(!t||!o.isString(t))throw"Expected the name of a table!";d=t,i=n,a=null,l=null,h=[],c={},f=null,p=null,u=!1,g=0,this.getComponents=function(){return{filters:a,selections:h,projection:l,ordering:c,skip:f,take:p,table:d,context:i,includeTotalCount:u,version:g}},this.setComponents=function(t){var e,n,r,o,s,v,m,y,b;return g++,a=null!=(e=null!=t?t.filters:void 0)?e:null,h=null!=(n=null!=t?t.selections:void 0)?n:[],l=null!=(r=null!=t?t.projection:void 0)?r:null,c=null!=(o=null!=t?t.ordering:void 0)?o:{},f=null!=(s=null!=t?t.skip:void 0)?s:null,p=null!=(v=null!=t?t.take:void 0)?v:null,u=null!=(m=null!=t?t.includeTotalCount:void 0)&&m,d=null!=(y=null!=t?t.table:void 0)?y:null,i=null!=(b=null!=t?t.context:void 0)?b:null,this},this.where=function(){var t,n,i,u,c;return n=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],g++,i=function(){if(o.isFunction(n))return e.transformConstraint(n,t);if(o.isObject(n))return r.QueryExpression.groupClauses(r.BinaryOperators.And,function(){var t=[];for(u in n)c=n[u],t.push(i=new r.BinaryExpression(r.BinaryOperators.Equal,new r.MemberExpression(u),new r.ConstantExpression(c)));return t}());if(o.isString(n))return new r.LiteralExpression(n,t);throw"Expected a function, object, or string, not "+n}(),a=r.QueryExpression.groupClauses(r.BinaryOperators.And,[a,i]),this},this.select=function(){var t,n,r,i,a;if(r=arguments[0],n=2<=arguments.length?s.call(arguments,1):[],g++,o.isString(r))for(h.push(r),i=0,a=n.length;i<a;i++){if(t=n[i],!o.isString(t))throw"Expected string parameters, not "+t;h.push(t)}else{if(!o.isFunction(r))throw"Expected a string or a function, not "+r;l=r,h=e.getProjectedFields(l)}return this},this.orderBy=function(){var t,e,n,r;for(e=1<=arguments.length?s.call(arguments,0):[],g++,n=0,r=e.length;n<r;n++){if(t=e[n],!o.isString(t))throw"Expected string parameters, not "+t;c[t]=!0}return this},this.orderByDescending=function(){var t,e,n,r;for(e=1<=arguments.length?s.call(arguments,0):[],g++,n=0,r=e.length;n<r;n++){if(t=e[n],!o.isString(t))throw"Expected string parameters, not "+t;c[t]=!1}return this},this.skip=function(t){if(g++,!o.isNumber(t))throw"Expected a number, not "+t;return f=t,this},this.take=function(t){if(g++,!o.isNumber(t))throw"Expected a number, not "+t;return p=t,this},this.includeTotalCount=function(){return g++,u=!0,this}}return t.registerProvider=function(e,n){return t.Providers[e]=n,t.prototype["to"+e]=function(){if(null!=n)return"function"==typeof n.toQuery?n.toQuery(this):void 0}},t.Providers={},t.Expressions=r,t}(),n=require("./ODataProvider").ODataProvider,i.registerProvider("OData",new n)}).call(this)},t.QueryNodes=function(t){(function(){var e,n,r,i,o,s,a,u,c,l,h,f={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var r in e)f.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};h=require("./Node"),s=h.Node,l=h.Visitor,t.QueryExpression=a=function(t){function n(){n.__super__.constructor.call(this)}return d(n,t),n.groupClauses=function(t,n){var r;return r=function(n,r){return n?r?new e(t,n,r):n:r},n.reduce(r,null)},n}(s),t.QueryExpressionVisitor=u=function(t){function e(){e.__super__.constructor.call(this)}return d(e,t),e.prototype.QueryExpression=function(t){return t},e}(l),t.ConstantExpression=n=function(t){function e(t){this.value=t,e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.ConstantExpression=function(t){return this.QueryExpression(t)},t.MemberExpression=o=function(t){function e(t){this.member=t,e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.MemberExpression=function(t){return this.QueryExpression(t)},t.BinaryExpression=e=function(t){function e(t,n,r){this.operator=t,this.left=n,this.right=r,e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.BinaryExpression=function(t){return t=this.QueryExpression(t),t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.BinaryOperators={And:"And",Or:"Or",Add:"Add",Subtract:"Subtract",Multiply:"Multiply",Divide:"Divide",Modulo:"Modulo",GreaterThan:"GreaterThan",GreaterThanOrEqual:"GreaterThanOrEqual",LessThan:"LessThan",LessThanOrEqual:"LessThanOrEqual",NotEqual:"NotEqual",Equal:"Equal"},t.UnaryExpression=c=function(t){function e(t,n){this.operator=t,this.operand=n,e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.UnaryExpression=function(t){return t=this.QueryExpression(t),t.operand=this.visit(t.operand),t},t.UnaryOperators={Not:"Not",Negate:"Negate",Increment:"Increment",Decrement:"Decrement"},t.InvocationExpression=r=function(t){function e(t,n){this.method=t,this.args=n,e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.InvocationExpression=function(t){return t=this.QueryExpression(t),t.args=this.visit(t.args),t},t.Methods={Length:"Length",ToUpperCase:"ToUpperCase",ToLowerCase:"ToLowerCase",Trim:"Trim",IndexOf:"IndexOf",Replace:"Replace",Substring:"Substring",Concat:"Concat",Day:"Day",Month:"Month",Year:"Year",Floor:"Floor",Ceiling:"Ceiling",Round:"Round"},t.LiteralExpression=i=function(t){function e(t,n){this.queryString=t,this.args=null!=n?n:[],e.__super__.constructor.call(this)}return d(e,t),e}(a),u.prototype.LiteralExpression=function(t){return this.QueryExpression(t)}}).call(this)},t.Utilities=function(t){(function(){var e,n=[].slice;e=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},null==Array.prototype.reduce&&(Array.prototype.reduce=function(){var t,e,r,i,o,s;if(t=arguments[0],s=2<=arguments.length?n.call(arguments,1):[],e=this,r=e.length,i=0,o=void 0,null==e)throw new TypeError("Object is null or undefined");if("function"!=typeof t)throw new TypeError("First argument is not callable");if(0===s.length){if(0===r)throw new TypeError("Array length is 0 and no second argument");o=e[0],i=1}else o=s[0];for(;i<r;)i in e&&(o=t.call(void 0,o,e[i],e)),++i;return o}),null==Array.prototype.map&&(Array.prototype.map=function(t,e){var n,r,i,o,s,a,u;if("undefined"==typeof this||null===this)throw new TypeError("this is null or not defined");if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e=e?e:void 0,i=Object(this),o=i.length>>>0,s=new Array(o),r=a=0,u=i.length;a<u;r=++a)n=i[r],r in i&&(s[r]=t.call(e,n,r,i));return s}),null==Array.isArray&&(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),t.isObject=function(t){return"object"===Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},t.isString=function(t){return"string"==typeof t},t.isFunction=function(t){return"function"==typeof t},t.isArray=Array.isArray,t.isNumber=function(t){return"number"==typeof t},t.isBoolean=function(t){return"boolean"==typeof t},t.isDate=function(t){return"date"===e(t)},t.functionName=function(t){var e,n,r;return"function"==typeof Function.prototype.name?Function.prototype.name.call(t):(r=t.toString(),n="function ",r.slice(0,+(n.length-1)+1||9e9)===n&&(e=r.indexOf("(",n.length),e>n.length)?r.slice(n.length,+(e-1)+1||9e9):null)}}).call(this)},t.esprima=function(t){!function(e,n){"use strict";"function"==typeof define&&define.amd?define(["exports"],n):n("undefined"!=typeof t?t:e.esprima={})}(this,function(t){"use strict";function e(t,e){if(!t)throw new Error("ASSERT: "+e)}function n(t){return t>=48&&t<=57}function r(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function i(t){return"01234567".indexOf(t)>=0}function o(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function s(t){return 10===t||13===t||8232===t||8233===t}function a(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&ge.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function u(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&ge.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function c(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function l(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function h(t){return"eval"===t||"arguments"===t}function f(t){if(me&&l(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}function d(t,n,r,i,o){var s;e("number"==typeof r,"Comment must have valid position"),xe.lastCommentStart>=r||(xe.lastCommentStart=r,s={type:t,value:n},Ee.range&&(s.range=[r,i]),Ee.loc&&(s.loc=o),Ee.comments.push(s),Ee.attachComment&&(Ee.leadingComments.push(s),Ee.trailingComments.push(s)))}function p(t){
for(var e,n,r=ye-t,i={start:{line:be,column:ye-_e-t}};ye<we;)if(e=ve.charCodeAt(ye),++ye,s(e))return Ee.comments&&(n=ve.slice(r+t,ye-1),i.end={line:be,column:ye-_e-1},d("Line",n,r,ye-1,i)),13===e&&10===ve.charCodeAt(ye)&&++ye,++be,_e=ye,void 0;Ee.comments&&(n=ve.slice(r+t,ye),i.end={line:be,column:ye-_e},d("Line",n,r,ye,i))}function g(){var t,e,n,r;for(Ee.comments&&(t=ye-2,e={start:{line:be,column:ye-_e-2}});ye<we;)if(n=ve.charCodeAt(ye),s(n))13===n&&10===ve.charCodeAt(ye+1)&&++ye,++be,++ye,_e=ye,ye>=we&&q({},pe.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===ve.charCodeAt(ye+1))return++ye,++ye,Ee.comments&&(r=ve.slice(t+2,ye-2),e.end={line:be,column:ye-_e},d("Block",r,t,ye,e)),void 0;++ye}else++ye;q({},pe.UnexpectedToken,"ILLEGAL")}function v(){for(var t,e=0===ye;ye<we;)if(t=ve.charCodeAt(ye),o(t))++ye;else if(s(t))++ye,13===t&&10===ve.charCodeAt(ye)&&++ye,++be,_e=ye,e=!0;else if(47===t)if(t=ve.charCodeAt(ye+1),47===t)++ye,++ye,p(2),e=!0;else{if(42!==t)break;++ye,++ye,g()}else if(e&&45===t){if(45!==ve.charCodeAt(ye+1)||62!==ve.charCodeAt(ye+2))break;ye+=3,p(3)}else{if(60!==t)break;if("!--"!==ve.slice(ye+1,ye+4))break;++ye,++ye,++ye,++ye,p(4)}}function m(t){for(var e,n=0,i="u"===t?4:2,o=0;o<i;++o){if(!(ye<we&&r(ve[ye])))return"";e=ve[ye++],n=16*n+"0123456789abcdef".indexOf(e.toLowerCase())}return String.fromCharCode(n)}function y(){var t,e,n,i;for(t=ve[ye],e=0,"}"===t&&q({},pe.UnexpectedToken,"ILLEGAL");ye<we&&(t=ve[ye++],r(t));)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&q({},pe.UnexpectedToken,"ILLEGAL"),e<=65535?String.fromCharCode(e):(n=(e-65536>>10)+55296,i=(e-65536&1023)+56320,String.fromCharCode(n,i))}function b(){var t,e;for(t=ve.charCodeAt(ye++),e=String.fromCharCode(t),92===t&&(117!==ve.charCodeAt(ye)&&q({},pe.UnexpectedToken,"ILLEGAL"),++ye,t=m("u"),t&&"\\"!==t&&a(t.charCodeAt(0))||q({},pe.UnexpectedToken,"ILLEGAL"),e=t);ye<we&&(t=ve.charCodeAt(ye),u(t));)++ye,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==ve.charCodeAt(ye)&&q({},pe.UnexpectedToken,"ILLEGAL"),++ye,t=m("u"),t&&"\\"!==t&&u(t.charCodeAt(0))||q({},pe.UnexpectedToken,"ILLEGAL"),e+=t);return e}function _(){for(var t,e=ye++;ye<we;){if(t=ve.charCodeAt(ye),92===t)return ye=e,b();if(!u(t))break;++ye}return ve.slice(e,ye)}function w(){var t,e,n;return t=ye,e=92===ve.charCodeAt(ye)?b():_(),n=1===e.length?ue.Identifier:f(e)?ue.Keyword:"null"===e?ue.NullLiteral:"true"===e||"false"===e?ue.BooleanLiteral:ue.Identifier,{type:n,value:e,lineNumber:be,lineStart:_e,start:t,end:ye}}function S(){var t,e,n,r,i=ye,o=ve.charCodeAt(ye),s=ve[ye];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ye,Ee.tokenize&&(40===o?Ee.openParenToken=Ee.tokens.length:123===o&&(Ee.openCurlyToken=Ee.tokens.length)),{type:ue.Punctuator,value:String.fromCharCode(o),lineNumber:be,lineStart:_e,start:i,end:ye};default:if(t=ve.charCodeAt(ye+1),61===t)switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ye+=2,{type:ue.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(t),lineNumber:be,lineStart:_e,start:i,end:ye};case 33:case 61:return ye+=2,61===ve.charCodeAt(ye)&&++ye,{type:ue.Punctuator,value:ve.slice(i,ye),lineNumber:be,lineStart:_e,start:i,end:ye}}}return r=ve.substr(ye,4),">>>="===r?(ye+=4,{type:ue.Punctuator,value:r,lineNumber:be,lineStart:_e,start:i,end:ye}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(ye+=3,{type:ue.Punctuator,value:n,lineNumber:be,lineStart:_e,start:i,end:ye}):(e=n.substr(0,2),s===e[1]&&"+-<>&|".indexOf(s)>=0||"=>"===e?(ye+=2,{type:ue.Punctuator,value:e,lineNumber:be,lineStart:_e,start:i,end:ye}):"<>=!+-*%&|^/".indexOf(s)>=0?(++ye,{type:ue.Punctuator,value:s,lineNumber:be,lineStart:_e,start:i,end:ye}):void q({},pe.UnexpectedToken,"ILLEGAL")))}function x(t){for(var e="";ye<we&&r(ve[ye]);)e+=ve[ye++];return 0===e.length&&q({},pe.UnexpectedToken,"ILLEGAL"),a(ve.charCodeAt(ye))&&q({},pe.UnexpectedToken,"ILLEGAL"),{type:ue.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:be,lineStart:_e,start:t,end:ye}}function E(t){for(var e="0"+ve[ye++];ye<we&&i(ve[ye]);)e+=ve[ye++];return(a(ve.charCodeAt(ye))||n(ve.charCodeAt(ye)))&&q({},pe.UnexpectedToken,"ILLEGAL"),{type:ue.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:be,lineStart:_e,start:t,end:ye}}function A(){var t,r,o;if(o=ve[ye],e(n(o.charCodeAt(0))||"."===o,"Numeric literal must start with a decimal digit or a decimal point"),r=ye,t="","."!==o){if(t=ve[ye++],o=ve[ye],"0"===t){if("x"===o||"X"===o)return++ye,x(r);if(i(o))return E(r);o&&n(o.charCodeAt(0))&&q({},pe.UnexpectedToken,"ILLEGAL")}for(;n(ve.charCodeAt(ye));)t+=ve[ye++];o=ve[ye]}if("."===o){for(t+=ve[ye++];n(ve.charCodeAt(ye));)t+=ve[ye++];o=ve[ye]}if("e"===o||"E"===o)if(t+=ve[ye++],o=ve[ye],("+"===o||"-"===o)&&(t+=ve[ye++]),n(ve.charCodeAt(ye)))for(;n(ve.charCodeAt(ye));)t+=ve[ye++];else q({},pe.UnexpectedToken,"ILLEGAL");return a(ve.charCodeAt(ye))&&q({},pe.UnexpectedToken,"ILLEGAL"),{type:ue.NumericLiteral,value:parseFloat(t),lineNumber:be,lineStart:_e,start:r,end:ye}}function C(){var t,n,r,o,a,u,c,l,h="",f=!1;for(c=be,l=_e,t=ve[ye],e("'"===t||'"'===t,"String literal must starts with a quote"),n=ye,++ye;ye<we;){if(r=ve[ye++],r===t){t="";break}if("\\"===r)if(r=ve[ye++],r&&s(r.charCodeAt(0)))++be,"\r"===r&&"\n"===ve[ye]&&++ye,_e=ye;else switch(r){case"u":case"x":"{"===ve[ye]?(++ye,h+=y()):(u=ye,a=m(r),a?h+=a:(ye=u,h+=r));break;case"n":h+="\n";break;case"r":h+="\r";break;case"t":h+="\t";break;case"b":h+="\b";break;case"f":h+="\f";break;case"v":h+="\x0B";break;default:i(r)?(o="01234567".indexOf(r),0!==o&&(f=!0),ye<we&&i(ve[ye])&&(f=!0,o=8*o+"01234567".indexOf(ve[ye++]),"0123".indexOf(r)>=0&&ye<we&&i(ve[ye])&&(o=8*o+"01234567".indexOf(ve[ye++]))),h+=String.fromCharCode(o)):h+=r}else{if(s(r.charCodeAt(0)))break;h+=r}}return""!==t&&q({},pe.UnexpectedToken,"ILLEGAL"),{type:ue.StringLiteral,value:h,octal:f,startLineNumber:c,startLineStart:l,lineNumber:be,lineStart:_e,start:n,end:ye}}function R(t,e){var n;try{n=new RegExp(t,e)}catch(r){q({},pe.InvalidRegExp)}return n}function N(){var t,n,r,i,o;for(t=ve[ye],e("/"===t,"Regular expression literal must start with a slash"),n=ve[ye++],r=!1,i=!1;ye<we;)if(t=ve[ye++],n+=t,"\\"===t)t=ve[ye++],s(t.charCodeAt(0))&&q({},pe.UnterminatedRegExp),n+=t;else if(s(t.charCodeAt(0)))q({},pe.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||q({},pe.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function O(){for(var t,e,n="",r="";ye<we&&(t=ve[ye],u(t.charCodeAt(0)));)if(++ye,"\\"===t&&ye<we)if(t=ve[ye],"u"===t){if(++ye,e=ye,t=m("u"))for(r+=t,n+="\\u";e<ye;++e)n+=ve[e];else ye=e,r+="u",n+="\\u";J({},pe.UnexpectedToken,"ILLEGAL")}else n+="\\",J({},pe.UnexpectedToken,"ILLEGAL");else r+=t,n+=t;return{value:r,literal:n}}function T(){var t,e,n,r;return Se=null,v(),t=ye,e=N(),n=O(),r=R(e.value,n.value),Ee.tokenize?{type:ue.RegularExpression,value:r,lineNumber:be,lineStart:_e,start:t,end:ye}:{literal:e.literal+n.literal,value:r,start:t,end:ye}}function k(){var t,e,n,r;return v(),t=ye,e={start:{line:be,column:ye-_e}},n=T(),e.end={line:be,column:ye-_e},Ee.tokenize||(Ee.tokens.length>0&&(r=Ee.tokens[Ee.tokens.length-1],r.range[0]===t&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&Ee.tokens.pop()),Ee.tokens.push({type:"RegularExpression",value:n.literal,range:[t,ye],loc:e})),n}function I(t){return t.type===ue.Identifier||t.type===ue.Keyword||t.type===ue.BooleanLiteral||t.type===ue.NullLiteral}function P(){var t,e;if(t=Ee.tokens[Ee.tokens.length-1],!t)return k();if("Punctuator"===t.type){if("]"===t.value)return S();if(")"===t.value)return e=Ee.tokens[Ee.openParenToken-1],!e||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?S():k();if("}"===t.value){if(Ee.tokens[Ee.openCurlyToken-3]&&"Keyword"===Ee.tokens[Ee.openCurlyToken-3].type){if(e=Ee.tokens[Ee.openCurlyToken-4],!e)return S()}else{if(!Ee.tokens[Ee.openCurlyToken-4]||"Keyword"!==Ee.tokens[Ee.openCurlyToken-4].type)return S();if(e=Ee.tokens[Ee.openCurlyToken-5],!e)return k()}return le.indexOf(e.value)>=0?S():k()}return k()}return"Keyword"===t.type?k():S()}function F(){var t;return v(),ye>=we?{type:ue.EOF,lineNumber:be,lineStart:_e,start:ye,end:ye}:(t=ve.charCodeAt(ye),a(t)?w():40===t||41===t||59===t?S():39===t||34===t?C():46===t?n(ve.charCodeAt(ye+1))?A():S():n(t)?A():Ee.tokenize&&47===t?P():S())}function D(){var t,e,n;return v(),t={start:{line:be,column:ye-_e}},e=F(),t.end={line:be,column:ye-_e},e.type!==ue.EOF&&(n=ve.slice(e.start,e.end),Ee.tokens.push({type:ce[e.type],value:n,range:[e.start,e.end],loc:t})),e}function $(){var t;return t=Se,ye=t.end,be=t.lineNumber,_e=t.lineStart,Se="undefined"!=typeof Ee.tokens?D():F(),ye=t.end,be=t.lineNumber,_e=t.lineStart,t}function j(){var t,e,n;t=ye,e=be,n=_e,Se="undefined"!=typeof Ee.tokens?D():F(),ye=t,be=e,_e=n}function L(){this.line=be,this.column=ye-_e}function M(){this.start=new L,this.end=null}function B(t){this.start=t.type===ue.StringLiteral?{line:t.startLineNumber,column:t.start-t.startLineStart}:{line:t.lineNumber,column:t.start-t.lineStart},this.end=null}function H(){ye=Se.start,Se.type===ue.StringLiteral?(be=Se.startLineNumber,_e=Se.startLineStart):(be=Se.lineNumber,_e=Se.lineStart),Ee.range&&(this.range=[ye,0]),Ee.loc&&(this.loc=new M)}function U(t){Ee.range&&(this.range=[t.start,0]),Ee.loc&&(this.loc=new B(t))}function K(){var t,e,n,r;return t=ye,e=be,n=_e,v(),r=be!==e,ye=t,be=e,_e=n,r}function q(t,n){var r,i=Array.prototype.slice.call(arguments,2),o=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+o),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-_e+1):(r=new Error("Line "+be+": "+o),r.index=ye,r.lineNumber=be,r.column=ye-_e+1),r.description=o,r}function J(){try{q.apply(null,arguments)}catch(t){if(!Ee.errors)throw t;Ee.errors.push(t)}}function V(t){if(t.type===ue.EOF&&q(t,pe.UnexpectedEOS),t.type===ue.NumericLiteral&&q(t,pe.UnexpectedNumber),t.type===ue.StringLiteral&&q(t,pe.UnexpectedString),t.type===ue.Identifier&&q(t,pe.UnexpectedIdentifier),t.type===ue.Keyword){if(c(t.value))q(t,pe.UnexpectedReserved);else if(me&&l(t.value))return void J(t,pe.StrictReservedWord);q(t,pe.UnexpectedToken,t.value)}q(t,pe.UnexpectedToken,t.value)}function z(t){var e=$();(e.type!==ue.Punctuator||e.value!==t)&&V(e)}function X(t){if(Ee.errors){var e=Se;e.type!==ue.Punctuator&&e.value!==t?J(e,pe.UnexpectedToken,e.value):$()}else z(t)}function W(t){var e=$();(e.type!==ue.Keyword||e.value!==t)&&V(e)}function Y(t){return Se.type===ue.Punctuator&&Se.value===t}function G(t){return Se.type===ue.Keyword&&Se.value===t}function Q(){var t;return Se.type===ue.Punctuator&&(t=Se.value,"="===t||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t)}function Z(){var t;return 59===ve.charCodeAt(ye)||Y(";")?void $():(t=be,v(),be===t&&(Se.type===ue.EOF||Y("}")||V(Se)),void 0)}function tt(t){return t.type===he.Identifier||t.type===he.MemberExpression}function et(){var t=[],e=new H;for(z("[");!Y("]");)Y(",")?($(),t.push(null)):(t.push(xt()),Y("]")||z(","));return $(),e.finishArrayExpression(t)}function nt(t,e){var n,r,i=new H;return n=me,r=Yt(),e&&me&&h(t[0].name)&&J(e,pe.StrictParamName),me=n,i.finishFunctionExpression(null,t,[],r)}function rt(){var t,e=new H;return t=$(),t.type===ue.StringLiteral||t.type===ue.NumericLiteral?(me&&t.octal&&J(t,pe.StrictOctalLiteral),e.finishLiteral(t)):e.finishIdentifier(t.value)}function it(){var t,e,n,r,i,o=new H;return t=Se,t.type===ue.Identifier?(n=rt(),"get"!==t.value||Y(":")?"set"!==t.value||Y(":")?(z(":"),r=xt(),o.finishProperty("init",n,r)):(e=rt(),z("("),t=Se,t.type!==ue.Identifier?(z(")"),J(t,pe.UnexpectedToken,t.value),r=nt([])):(i=[Rt()],z(")"),r=nt(i,t)),o.finishProperty("set",e,r)):(e=rt(),z("("),z(")"),r=nt([]),o.finishProperty("get",e,r))):t.type!==ue.EOF&&t.type!==ue.Punctuator?(e=rt(),z(":"),r=xt(),o.finishProperty("init",e,r)):void V(t)}function ot(){var t,e,n,r,i=[],o={},s=String,a=new H;for(z("{");!Y("}");)t=it(),e=t.key.type===he.Identifier?t.key.name:s(t.key.value),r="init"===t.kind?de.Data:"get"===t.kind?de.Get:de.Set,n="$"+e,Object.prototype.hasOwnProperty.call(o,n)?(o[n]===de.Data?me&&r===de.Data?J({},pe.StrictDuplicateProperty):r!==de.Data&&J({},pe.AccessorDataProperty):r===de.Data?J({},pe.AccessorDataProperty):o[n]&r&&J({},pe.AccessorGetSet),o[n]|=r):o[n]=r,i.push(t),Y("}")||X(",");return z("}"),a.finishObjectExpression(i)}function st(){var t;return z("("),Y(")")?($(),fe.ArrowParameterPlaceHolder):(++xe.parenthesisCount,t=Et(),z(")"),t)}function at(){var t,e,n,r;if(Y("("))return st();if(Y("["))return et();if(Y("{"))return ot();if(t=Se.type,r=new H,t===ue.Identifier)n=r.finishIdentifier($().value);else if(t===ue.StringLiteral||t===ue.NumericLiteral)me&&Se.octal&&J(Se,pe.StrictOctalLiteral),n=r.finishLiteral($());else if(t===ue.Keyword){if(G("function"))return ee();G("this")?($(),n=r.finishThisExpression()):V($())}else t===ue.BooleanLiteral?(e=$(),e.value="true"===e.value,n=r.finishLiteral(e)):t===ue.NullLiteral?(e=$(),e.value=null,n=r.finishLiteral(e)):Y("/")||Y("/=")?(n="undefined"!=typeof Ee.tokens?r.finishLiteral(k()):r.finishLiteral(T()),j()):V($());return n}function ut(){var t=[];if(z("("),!Y(")"))for(;ye<we&&(t.push(xt()),!Y(")"));)X(",");return z(")"),t}function ct(){var t,e=new H;return t=$(),I(t)||V(t),e.finishIdentifier(t.value)}function lt(){return z("."),ct()}function ht(){var t;return z("["),t=Et(),z("]"),t}function ft(){var t,e,n=new H;return W("new"),t=pt(),e=Y("(")?ut():[],n.finishNewExpression(t,e)}function dt(){var t,e,n,r,i=xe.allowIn;for(r=Se,xe.allowIn=!0,t=G("new")?ft():at();;)if(Y("."))n=lt(),t=new U(r).finishMemberExpression(".",t,n);else if(Y("("))e=ut(),t=new U(r).finishCallExpression(t,e);else{if(!Y("["))break;n=ht(),t=new U(r).finishMemberExpression("[",t,n)}return xe.allowIn=i,t}function pt(){var t,n,r;for(e(xe.allowIn,"callee of new expression always allow in keyword."),r=Se,t=G("new")?ft():at();;)if(Y("["))n=ht(),t=new U(r).finishMemberExpression("[",t,n);else{if(!Y("."))break;n=lt(),t=new U(r).finishMemberExpression(".",t,n)}return t}function gt(){var t,e,n=Se;return t=dt(),Se.type===ue.Punctuator&&(Y("++")||Y("--"))&&!K()&&(me&&t.type===he.Identifier&&h(t.name)&&J({},pe.StrictLHSPostfix),tt(t)||J({},pe.InvalidLHSInAssignment),e=$(),t=new U(n).finishPostfixExpression(e.value,t)),t}function vt(){var t,e,n;return Se.type!==ue.Punctuator&&Se.type!==ue.Keyword?e=gt():Y("++")||Y("--")?(n=Se,t=$(),e=vt(),me&&e.type===he.Identifier&&h(e.name)&&J({},pe.StrictLHSPrefix),tt(e)||J({},pe.InvalidLHSInAssignment),e=new U(n).finishUnaryExpression(t.value,e)):Y("+")||Y("-")||Y("~")||Y("!")?(n=Se,t=$(),e=vt(),e=new U(n).finishUnaryExpression(t.value,e)):G("delete")||G("void")||G("typeof")?(n=Se,t=$(),e=vt(),e=new U(n).finishUnaryExpression(t.value,e),me&&"delete"===e.operator&&e.argument.type===he.Identifier&&J({},pe.StrictDelete)):e=gt(),e}function mt(t,e){var n=0;if(t.type!==ue.Punctuator&&t.type!==ue.Keyword)return 0;switch(t.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=e?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function yt(){var t,e,n,r,i,o,s,a,u,c;if(t=Se,u=vt(),u===fe.ArrowParameterPlaceHolder||(r=Se,i=mt(r,xe.allowIn),0===i))return u;for(r.prec=i,$(),e=[t,Se],s=vt(),o=[u,r,s];(i=mt(Se,xe.allowIn))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,u=o.pop(),e.pop(),n=new U(e[e.length-1]).finishBinaryExpression(a,u,s),o.push(n);r=$(),r.prec=i,o.push(r),e.push(Se),n=vt(),o.push(n)}for(c=o.length-1,n=o[c],e.pop();c>1;)n=new U(e.pop()).finishBinaryExpression(o[c-1].value,o[c-2],n),c-=2;return n}function bt(){var t,e,n,r,i;return i=Se,t=yt(),t===fe.ArrowParameterPlaceHolder?t:(Y("?")&&($(),e=xe.allowIn,xe.allowIn=!0,n=xt(),xe.allowIn=e,z(":"),r=xt(),t=new U(i).finishConditionalExpression(t,n,r)),t)}function _t(){return Y("{")?Yt():xt()}function wt(t){var e,n,r,i,o,s,a,u;for(i=[],o=[],s=0,u=null,a={paramSet:{}},e=0,n=t.length;e<n;e+=1)if(r=t[e],r.type===he.Identifier)i.push(r),o.push(null),Gt(a,r,r.name);else{if(r.type!==he.AssignmentExpression)return null;i.push(r.left),o.push(r.right),++s,Gt(a,r.left,r.left.name)}return a.message===pe.StrictParamDupe&&q(me?a.stricted:a.firstRestricted,a.message),0===s&&(o=[]),{params:i,defaults:o,rest:u,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function St(t,e){var n,r;return z("=>"),n=me,r=_t(),me&&t.firstRestricted&&q(t.firstRestricted,t.message),me&&t.stricted&&J(t.stricted,t.message),me=n,e.finishArrowFunctionExpression(t.params,t.defaults,r,r.type!==he.BlockStatement)}function xt(){var t,e,n,r,i,o;return t=xe.parenthesisCount,o=Se,e=Se,n=bt(),n!==fe.ArrowParameterPlaceHolder&&!Y("=>")||xe.parenthesisCount!==t&&xe.parenthesisCount!==t+1||(n.type===he.Identifier?i=wt([n]):n.type===he.AssignmentExpression?i=wt([n]):n.type===he.SequenceExpression?i=wt(n.expressions):n===fe.ArrowParameterPlaceHolder&&(i=wt([])),!i)?(Q()&&(tt(n)||J({},pe.InvalidLHSInAssignment),me&&n.type===he.Identifier&&h(n.name)&&J(e,pe.StrictLHSAssignment),e=$(),r=xt(),n=new U(o).finishAssignmentExpression(e.value,n,r)),n):St(i,new U(o))}function Et(){var t,e,n=Se;if(t=xt(),Y(",")){for(e=[t];ye<we&&Y(",");)$(),e.push(xt());t=new U(n).finishSequenceExpression(e)}return t}function At(){for(var t,e=[];ye<we&&!Y("}")&&(t=ne(),"undefined"!=typeof t);)e.push(t);return e}function Ct(){var t,e=new H;return z("{"),t=At(),z("}"),e.finishBlockStatement(t)}function Rt(){var t,e=new H;return t=$(),t.type!==ue.Identifier&&V(t),e.finishIdentifier(t.value)}function Nt(t){var e,n=null,r=new H;return e=Rt(),me&&h(e.name)&&J({},pe.StrictVarName),"const"===t?(z("="),n=xt()):Y("=")&&($(),n=xt()),r.finishVariableDeclarator(e,n)}function Ot(t){var e=[];do{if(e.push(Nt(t)),!Y(","))break;$()}while(ye<we);return e}function Tt(t){var e;return W("var"),e=Ot(),Z(),t.finishVariableDeclaration(e,"var")}function kt(t){var e,n=new H;return W(t),e=Ot(t),Z(),n.finishVariableDeclaration(e,t)}function It(){var t=new H;return z(";"),t.finishEmptyStatement()}function Pt(t){var e=Et();return Z(),t.finishExpressionStatement(e)}function Ft(t){var e,n,r;return W("if"),z("("),e=Et(),z(")"),n=Wt(),G("else")?($(),r=Wt()):r=null,t.finishIfStatement(e,n,r)}function Dt(t){var e,n,r;return W("do"),r=xe.inIteration,xe.inIteration=!0,e=Wt(),xe.inIteration=r,W("while"),z("("),n=Et(),z(")"),Y(";")&&$(),t.finishDoWhileStatement(e,n)}function $t(t){var e,n,r;return W("while"),z("("),e=Et(),z(")"),r=xe.inIteration,xe.inIteration=!0,n=Wt(),xe.inIteration=r,t.finishWhileStatement(e,n)}function jt(){var t,e,n=new H;return t=$(),e=Ot(),n.finishVariableDeclaration(e,t.value)}function Lt(t){var e,n,r,i,o,s,a,u=xe.allowIn;return e=n=r=null,W("for"),z("("),Y(";")?$():(G("var")||G("let")?(xe.allowIn=!1,e=jt(),xe.allowIn=u,1===e.declarations.length&&G("in")&&($(),i=e,o=Et(),e=null)):(xe.allowIn=!1,e=Et(),xe.allowIn=u,G("in")&&(tt(e)||J({},pe.InvalidLHSInForIn),$(),i=e,o=Et(),e=null)),"undefined"==typeof i&&z(";")),"undefined"==typeof i&&(Y(";")||(n=Et()),z(";"),Y(")")||(r=Et())),z(")"),a=xe.inIteration,xe.inIteration=!0,s=Wt(),xe.inIteration=a,"undefined"==typeof i?t.finishForStatement(e,n,r,s):t.finishForInStatement(i,o,s)}function Mt(t){var e,n=null;return W("continue"),59===ve.charCodeAt(ye)?($(),xe.inIteration||q({},pe.IllegalContinue),t.finishContinueStatement(null)):K()?(xe.inIteration||q({},pe.IllegalContinue),t.finishContinueStatement(null)):(Se.type===ue.Identifier&&(n=Rt(),e="$"+n.name,Object.prototype.hasOwnProperty.call(xe.labelSet,e)||q({},pe.UnknownLabel,n.name)),Z(),null!==n||xe.inIteration||q({},pe.IllegalContinue),t.finishContinueStatement(n))}function Bt(t){var e,n=null;return W("break"),59===ve.charCodeAt(ye)?($(),xe.inIteration||xe.inSwitch||q({},pe.IllegalBreak),t.finishBreakStatement(null)):K()?(xe.inIteration||xe.inSwitch||q({},pe.IllegalBreak),t.finishBreakStatement(null)):(Se.type===ue.Identifier&&(n=Rt(),e="$"+n.name,Object.prototype.hasOwnProperty.call(xe.labelSet,e)||q({},pe.UnknownLabel,n.name)),Z(),null!==n||xe.inIteration||xe.inSwitch||q({},pe.IllegalBreak),t.finishBreakStatement(n))}function Ht(t){var e=null;return W("return"),xe.inFunctionBody||J({},pe.IllegalReturn),32===ve.charCodeAt(ye)&&a(ve.charCodeAt(ye+1))?(e=Et(),Z(),t.finishReturnStatement(e)):K()?t.finishReturnStatement(null):(Y(";")||Y("}")||Se.type===ue.EOF||(e=Et()),Z(),t.finishReturnStatement(e))}function Ut(t){var e,n;return me&&(v(),J({},pe.StrictModeWith)),W("with"),z("("),e=Et(),z(")"),n=Wt(),t.finishWithStatement(e,n)}function Kt(){var t,e,n=[],r=new H;for(G("default")?($(),t=null):(W("case"),t=Et()),z(":");ye<we&&!(Y("}")||G("default")||G("case"));)e=Wt(),n.push(e);return r.finishSwitchCase(t,n)}function qt(t){var e,n,r,i,o;if(W("switch"),z("("),e=Et(),z(")"),z("{"),n=[],Y("}"))return $(),t.finishSwitchStatement(e,n);for(i=xe.inSwitch,xe.inSwitch=!0,o=!1;ye<we&&!Y("}");)r=Kt(),null===r.test&&(o&&q({},pe.MultipleDefaultsInSwitch),o=!0),n.push(r);return xe.inSwitch=i,z("}"),t.finishSwitchStatement(e,n)}function Jt(t){var e;return W("throw"),K()&&q({},pe.NewlineAfterThrow),e=Et(),Z(),t.finishThrowStatement(e)}function Vt(){var t,e,n=new H;return W("catch"),z("("),Y(")")&&V(Se),t=Rt(),me&&h(t.name)&&J({},pe.StrictCatchVariable),z(")"),e=Ct(),n.finishCatchClause(t,e)}function zt(t){var e,n=[],r=null;return W("try"),e=Ct(),G("catch")&&n.push(Vt()),G("finally")&&($(),r=Ct()),0!==n.length||r||q({},pe.NoCatchOrFinally),t.finishTryStatement(e,[],n,r)}function Xt(t){return W("debugger"),Z(),t.finishDebuggerStatement()}function Wt(){var t,e,n,r,i=Se.type;if(i===ue.EOF&&V(Se),i===ue.Punctuator&&"{"===Se.value)return Ct();if(r=new H,i===ue.Punctuator)switch(Se.value){case";":return It(r);case"(":return Pt(r)}else if(i===ue.Keyword)switch(Se.value){case"break":return Bt(r);case"continue":return Mt(r);case"debugger":return Xt(r);case"do":return Dt(r);case"for":return Lt(r);case"function":return te(r);case"if":return Ft(r);case"return":return Ht(r);case"switch":return qt(r);case"throw":return Jt(r);case"try":return zt(r);case"var":return Tt(r);case"while":return $t(r);case"with":return Ut(r)}return t=Et(),t.type===he.Identifier&&Y(":")?($(),n="$"+t.name,Object.prototype.hasOwnProperty.call(xe.labelSet,n)&&q({},pe.Redeclaration,"Label",t.name),xe.labelSet[n]=!0,e=Wt(),delete xe.labelSet[n],r.finishLabeledStatement(t,e)):(Z(),r.finishExpressionStatement(t))}function Yt(){var t,e,n,r,i,o,s,a,u,c=[],l=new H;for(z("{");ye<we&&Se.type===ue.StringLiteral&&(e=Se,t=ne(),c.push(t),t.expression.type===he.Literal);)n=ve.slice(e.start+1,e.end-1),"use strict"===n?(me=!0,r&&J(r,pe.StrictOctalLiteral)):!r&&e.octal&&(r=e);for(i=xe.labelSet,o=xe.inIteration,s=xe.inSwitch,a=xe.inFunctionBody,u=xe.parenthesizedCount,xe.labelSet={},xe.inIteration=!1,xe.inSwitch=!1,xe.inFunctionBody=!0,xe.parenthesizedCount=0;ye<we&&!Y("}")&&(t=ne(),"undefined"!=typeof t);)c.push(t);return z("}"),xe.labelSet=i,xe.inIteration=o,xe.inSwitch=s,xe.inFunctionBody=a,xe.parenthesizedCount=u,l.finishBlockStatement(c)}function Gt(t,e,n){var r="$"+n;me?(h(n)&&(t.stricted=e,t.message=pe.StrictParamName),Object.prototype.hasOwnProperty.call(t.paramSet,r)&&(t.stricted=e,t.message=pe.StrictParamDupe)):t.firstRestricted||(h(n)?(t.firstRestricted=e,t.message=pe.StrictParamName):l(n)?(t.firstRestricted=e,t.message=pe.StrictReservedWord):Object.prototype.hasOwnProperty.call(t.paramSet,r)&&(t.firstRestricted=e,t.message=pe.StrictParamDupe)),t.paramSet[r]=!0}function Qt(t){var e,n,r;return e=Se,n=Rt(),Gt(t,e,e.value),Y("=")&&($(),r=xt(),++t.defaultCount),t.params.push(n),t.defaults.push(r),!Y(")")}function Zt(t){var e;if(e={params:[],defaultCount:0,defaults:[],firstRestricted:t},z("("),!Y(")"))for(e.paramSet={};ye<we&&Qt(e);)z(",");return z(")"),0===e.defaultCount&&(e.defaults=[]),{params:e.params,defaults:e.defaults,stricted:e.stricted,firstRestricted:e.firstRestricted,message:e.message}}function te(){var t,e,n,r,i,o,s,a,u=[],c=[],f=new H;return W("function"),n=Se,t=Rt(),me?h(n.value)&&J(n,pe.StrictFunctionName):h(n.value)?(o=n,s=pe.StrictFunctionName):l(n.value)&&(o=n,s=pe.StrictReservedWord),i=Zt(o),u=i.params,c=i.defaults,r=i.stricted,o=i.firstRestricted,i.message&&(s=i.message),a=me,e=Yt(),me&&o&&q(o,s),me&&r&&J(r,s),me=a,f.finishFunctionDeclaration(t,u,c,e)}function ee(){var t,e,n,r,i,o,s,a=null,u=[],c=[],f=new H;return W("function"),Y("(")||(t=Se,a=Rt(),me?h(t.value)&&J(t,pe.StrictFunctionName):h(t.value)?(n=t,r=pe.StrictFunctionName):l(t.value)&&(n=t,r=pe.StrictReservedWord)),i=Zt(n),u=i.params,c=i.defaults,e=i.stricted,n=i.firstRestricted,i.message&&(r=i.message),s=me,o=Yt(),me&&n&&q(n,r),me&&e&&J(e,r),me=s,f.finishFunctionExpression(a,u,c,o)}function ne(){if(Se.type===ue.Keyword)switch(Se.value){case"const":case"let":return kt(Se.value);case"function":return te();default:return Wt()}if(Se.type!==ue.EOF)return Wt()}function re(){for(var t,e,n,r,i=[];ye<we&&(e=Se,e.type===ue.StringLiteral)&&(t=ne(),i.push(t),t.expression.type===he.Literal);)n=ve.slice(e.start+1,e.end-1),"use strict"===n?(me=!0,r&&J(r,pe.StrictOctalLiteral)):!r&&e.octal&&(r=e);for(;ye<we&&(t=ne(),"undefined"!=typeof t);)i.push(t);return i}function ie(){var t,e;return v(),j(),e=new H,me=!1,t=re(),e.finishProgram(t)}function oe(){for(var t,e,n=[],r=0;r<Ee.tokens.length;++r)t=Ee.tokens[r],e={type:t.type,value:t.value},Ee.range&&(e.range=t.range),Ee.loc&&(e.loc=t.loc),n.push(e);Ee.tokens=n}function se(t,e){var n,r;n=String,"string"==typeof t||t instanceof String||(t=n(t)),ve=t,ye=0,be=ve.length>0?1:0,_e=0,we=ve.length,Se=null,xe={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ee={},e=e||{},e.tokens=!0,Ee.tokens=[],Ee.tokenize=!0,Ee.openParenToken=-1,Ee.openCurlyToken=-1,Ee.range="boolean"==typeof e.range&&e.range,Ee.loc="boolean"==typeof e.loc&&e.loc,"boolean"==typeof e.comment&&e.comment&&(Ee.comments=[]),"boolean"==typeof e.tolerant&&e.tolerant&&(Ee.errors=[]);try{if(j(),Se.type===ue.EOF)return Ee.tokens;for($();Se.type!==ue.EOF;)try{$()}catch(i){if(Ee.errors){Ee.errors.push(i);break}throw i}oe(),r=Ee.tokens,"undefined"!=typeof Ee.comments&&(r.comments=Ee.comments),"undefined"!=typeof Ee.errors&&(r.errors=Ee.errors)}catch(o){throw o}finally{Ee={}}return r}function ae(t,e){var n,r;r=String,"string"==typeof t||t instanceof String||(t=r(t)),ve=t,ye=0,be=ve.length>0?1:0,_e=0,we=ve.length,Se=null,xe={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Ee={},"undefined"!=typeof e&&(Ee.range="boolean"==typeof e.range&&e.range,Ee.loc="boolean"==typeof e.loc&&e.loc,Ee.attachComment="boolean"==typeof e.attachComment&&e.attachComment,Ee.loc&&null!==e.source&&void 0!==e.source&&(Ee.source=r(e.source)),"boolean"==typeof e.tokens&&e.tokens&&(Ee.tokens=[]),"boolean"==typeof e.comment&&e.comment&&(Ee.comments=[]),"boolean"==typeof e.tolerant&&e.tolerant&&(Ee.errors=[]),Ee.attachComment&&(Ee.range=!0,Ee.comments=[],Ee.bottomRightStack=[],Ee.trailingComments=[],Ee.leadingComments=[]));try{n=ie(),"undefined"!=typeof Ee.comments&&(n.comments=Ee.comments),"undefined"!=typeof Ee.tokens&&(oe(),n.tokens=Ee.tokens),"undefined"!=typeof Ee.errors&&(n.errors=Ee.errors)}catch(i){throw i}finally{Ee={}}return n}var ue,ce,le,he,fe,de,pe,ge,ve,me,ye,be,_e,we,Se,xe,Ee;ue={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},ce={},ce[ue.BooleanLiteral]="Boolean",ce[ue.EOF]="<end>",ce[ue.Identifier]="Identifier",ce[ue.Keyword]="Keyword",ce[ue.NullLiteral]="Null",ce[ue.NumericLiteral]="Numeric",ce[ue.Punctuator]="Punctuator",ce[ue.StringLiteral]="String",ce[ue.RegularExpression]="RegularExpression",le=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],he={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},fe={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}},de={Data:1,Get:2,Set:4},pe={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ge={NonAsciiIdentifierStart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),
NonAsciiIdentifierPart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},U.prototype=H.prototype={processComment:function(){var t,e,n=Ee.bottomRightStack,r=n[n.length-1];if(this.type!==he.Program||!(this.body.length>0)){if(Ee.trailingComments.length>0?Ee.trailingComments[0].range[0]>=this.range[1]?(e=Ee.trailingComments,Ee.trailingComments=[]):Ee.trailingComments.length=0:r&&r.trailingComments&&r.trailingComments[0].range[0]>=this.range[1]&&(e=r.trailingComments,delete r.trailingComments),r)for(;r&&r.range[0]>=this.range[0];)t=r,r=n.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=t.leadingComments,t.leadingComments=void 0):Ee.leadingComments.length>0&&Ee.leadingComments[Ee.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=Ee.leadingComments,Ee.leadingComments=[]),e&&(this.trailingComments=e),n.push(this)}},finish:function(){Ee.range&&(this.range[1]=ye),Ee.loc&&(this.loc.end=new L,Ee.source&&(this.loc.source=Ee.source)),Ee.attachComment&&this.processComment()},finishArrayExpression:function(t){return this.type=he.ArrayExpression,this.elements=t,this.finish(),this},finishArrowFunctionExpression:function(t,e,n,r){return this.type=he.ArrowFunctionExpression,this.id=null,this.params=t,this.defaults=e,this.body=n,this.rest=null,this.generator=!1,this.expression=r,this.finish(),this},finishAssignmentExpression:function(t,e,n){return this.type=he.AssignmentExpression,this.operator=t,this.left=e,this.right=n,this.finish(),this},finishBinaryExpression:function(t,e,n){return this.type="||"===t||"&&"===t?he.LogicalExpression:he.BinaryExpression,this.operator=t,this.left=e,this.right=n,this.finish(),this},finishBlockStatement:function(t){return this.type=he.BlockStatement,this.body=t,this.finish(),this},finishBreakStatement:function(t){return this.type=he.BreakStatement,this.label=t,this.finish(),this},finishCallExpression:function(t,e){return this.type=he.CallExpression,this.callee=t,this.arguments=e,this.finish(),this},finishCatchClause:function(t,e){return this.type=he.CatchClause,this.param=t,this.body=e,this.finish(),this},finishConditionalExpression:function(t,e,n){return this.type=he.ConditionalExpression,this.test=t,this.consequent=e,this.alternate=n,this.finish(),this},finishContinueStatement:function(t){return this.type=he.ContinueStatement,this.label=t,this.finish(),this},finishDebuggerStatement:function(){return this.type=he.DebuggerStatement,this.finish(),this},finishDoWhileStatement:function(t,e){return this.type=he.DoWhileStatement,this.body=t,this.test=e,this.finish(),this},finishEmptyStatement:function(){return this.type=he.EmptyStatement,this.finish(),this},finishExpressionStatement:function(t){return this.type=he.ExpressionStatement,this.expression=t,this.finish(),this},finishForStatement:function(t,e,n,r){return this.type=he.ForStatement,this.init=t,this.test=e,this.update=n,this.body=r,this.finish(),this},finishForInStatement:function(t,e,n){return this.type=he.ForInStatement,this.left=t,this.right=e,this.body=n,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(t,e,n,r){return this.type=he.FunctionDeclaration,this.id=t,this.params=e,this.defaults=n,this.body=r,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(t,e,n,r){return this.type=he.FunctionExpression,this.id=t,this.params=e,this.defaults=n,this.body=r,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(t){return this.type=he.Identifier,this.name=t,this.finish(),this},finishIfStatement:function(t,e,n){return this.type=he.IfStatement,this.test=t,this.consequent=e,this.alternate=n,this.finish(),this},finishLabeledStatement:function(t,e){return this.type=he.LabeledStatement,this.label=t,this.body=e,this.finish(),this},finishLiteral:function(t){return this.type=he.Literal,this.value=t.value,this.raw=ve.slice(t.start,t.end),this.finish(),this},finishMemberExpression:function(t,e,n){return this.type=he.MemberExpression,this.computed="["===t,this.object=e,this.property=n,this.finish(),this},finishNewExpression:function(t,e){return this.type=he.NewExpression,this.callee=t,this.arguments=e,this.finish(),this},finishObjectExpression:function(t){return this.type=he.ObjectExpression,this.properties=t,this.finish(),this},finishPostfixExpression:function(t,e){return this.type=he.UpdateExpression,this.operator=t,this.argument=e,this.prefix=!1,this.finish(),this},finishProgram:function(t){return this.type=he.Program,this.body=t,this.finish(),this},finishProperty:function(t,e,n){return this.type=he.Property,this.key=e,this.value=n,this.kind=t,this.finish(),this},finishReturnStatement:function(t){return this.type=he.ReturnStatement,this.argument=t,this.finish(),this},finishSequenceExpression:function(t){return this.type=he.SequenceExpression,this.expressions=t,this.finish(),this},finishSwitchCase:function(t,e){return this.type=he.SwitchCase,this.test=t,this.consequent=e,this.finish(),this},finishSwitchStatement:function(t,e){return this.type=he.SwitchStatement,this.discriminant=t,this.cases=e,this.finish(),this},finishThisExpression:function(){return this.type=he.ThisExpression,this.finish(),this},finishThrowStatement:function(t){return this.type=he.ThrowStatement,this.argument=t,this.finish(),this},finishTryStatement:function(t,e,n,r){return this.type=he.TryStatement,this.block=t,this.guardedHandlers=e,this.handlers=n,this.finalizer=r,this.finish(),this},finishUnaryExpression:function(t,e){return this.type="++"===t||"--"===t?he.UpdateExpression:he.UnaryExpression,this.operator=t,this.argument=e,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(t,e){return this.type=he.VariableDeclaration,this.declarations=t,this.kind=e,this.finish(),this},finishVariableDeclarator:function(t,e){return this.type=he.VariableDeclarator,this.id=t,this.init=e,this.finish(),this},finishWhileStatement:function(t,e){return this.type=he.WhileStatement,this.test=t,this.body=e,this.finish(),this},finishWithStatement:function(t,e){return this.type=he.WithStatement,this.object=t,this.body=e,this.finish(),this}},t.version="2.0.0-dev",t.tokenize=se,t.parse=ae,t.Syntax=function(){var t,e={};"function"==typeof Object.create&&(e=Object.create(null));for(t in he)he.hasOwnProperty(t)&&(e[t]=he[t]);return"function"==typeof Object.freeze&&Object.freeze(e),e}()})},require("MobileServiceClient")}(this||exports),!function(){"use strict";function t(t,e,n,r,i,o,s){function a(t){if(t)f(t.toastId);else for(var e=0;e<b.length;e++)f(b[e].toastId)}function u(t,e,n){var r=p().iconClasses.error;return d(r,t,e,n)}function c(t,e,n){var r=p().iconClasses.info;return d(r,t,e,n)}function l(t,e,n){var r=p().iconClasses.success;return d(r,t,e,n)}function h(t,e,n){var r=p().iconClasses.warning;return d(r,t,e,n)}function f(e,n){function r(t){for(var e=0;e<b.length;e++)if(b[e].toastId===t)return b[e]}function i(){return!b.length}var a=r(e);a&&!a.deleting&&(a.deleting=!0,a.isOpened=!1,t.leave(a.el).then(function(){a.scope.options.onHidden&&a.scope.options.onHidden(n),a.scope.$destroy();var t=b.indexOf(a);delete w[a.scope.message],b.splice(t,1);var e=o.maxOpened;e&&b.length>=e&&b[e-1].open.resolve(),i()&&(m.remove(),m=null,S=s.defer())}))}function d(t,e,n,r){return angular.isObject(n)&&(r=n,n=null),v({iconClass:t,message:e,optionsOverride:r,title:n})}function p(){return angular.extend({},o)}function g(e){if(m)return S.promise;m=angular.element("<div></div>"),m.attr("id",e.containerId),m.addClass(e.positionClass),m.css({"pointer-events":"auto"});var n=angular.element(document.querySelector(e.target));if(!n||!n.length)throw"Target for toasts doesn't exist";return t.enter(m,n).then(function(){S.resolve()}),S.promise}function v(n){function o(t,e,n){n.allowHtml?(t.scope.allowHtml=!0,t.scope.title=i.trustAsHtml(e.title),t.scope.message=i.trustAsHtml(e.message)):(t.scope.title=e.title,t.scope.message=e.message),t.scope.toastType=t.iconClass,t.scope.toastId=t.toastId,t.scope.options={extendedTimeOut:n.extendedTimeOut,messageClass:n.messageClass,onHidden:n.onHidden,onShown:n.onShown,progressBar:n.progressBar,tapToDismiss:n.tapToDismiss,timeOut:n.timeOut,titleClass:n.titleClass,toastClass:n.toastClass},n.closeButton&&(t.scope.options.closeHtml=n.closeHtml)}function a(){function t(t){for(var e=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],n=0,r=e.length;r>n;n++)delete t[e[n]];return t}var e={toastId:y++,isOpened:!1,scope:r.$new(),open:s.defer()};return e.iconClass=n.iconClass,n.optionsOverride&&(h=angular.extend(h,t(n.optionsOverride)),e.iconClass=n.optionsOverride.iconClass||e.iconClass),o(e,n,h),e.el=u(e.scope),e}function u(t){var n=angular.element("<div toast></div>"),r=e.get("$compile");return r(n)(t)}function c(){return h.maxOpened&&b.length<=h.maxOpened||!h.maxOpened}function l(){var t=h.preventDuplicates&&n.message===_,e=h.preventOpenDuplicates&&w[n.message];return!(!t&&!e)||(_=n.message,w[n.message]=!0,!1)}var h=p();if(!l()){var d=a();if(b.push(d),h.autoDismiss&&h.maxOpened>0)for(var v=b.slice(0,b.length-h.maxOpened),S=0,x=v.length;x>S;S++)f(v[S].toastId);return c()&&d.open.resolve(),d.open.promise.then(function(){g(h).then(function(){if(d.isOpened=!0,h.newestOnTop)t.enter(d.el,m).then(function(){d.scope.init()});else{var e=m[0].lastChild?angular.element(m[0].lastChild):null;t.enter(d.el,m,e).then(function(){d.scope.init()})}})}),d}}var m,y=0,b=[],_="",w={},S=s.defer(),x={clear:a,error:u,info:c,remove:f,success:l,warning:h};return x}angular.module("toastr",[]).factory("toastr",t),t.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function t(t){function e(t,e,n,r){function i(){var t=(a-(new Date).getTime())/s*100;e.css("width",t+"%")}var o,s,a;r.progressBar=t,t.start=function(t){o&&clearInterval(o),s=parseFloat(t),a=(new Date).getTime()+s,o=setInterval(i,10)},t.stop=function(){o&&clearInterval(o)},t.$on("$destroy",function(){clearInterval(o)})}return{replace:!0,require:"^toast",templateUrl:function(){return t.templates.progressbar},link:e}}angular.module("toastr").directive("progressBar",t),t.$inject=["toastrConfig"]}(),function(){"use strict";function t(){this.progressBar=null,this.startProgressBar=function(t){this.progressBar&&this.progressBar.start(t)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",t)}(),function(){"use strict";function t(t,e,n,r){function i(n,i,o,s){function a(t){return s.startProgressBar(t),e(function(){s.stopProgressBar(),r.remove(n.toastId)},t,1)}function u(){n.progressBar=!1,s.stopProgressBar()}function c(){return n.options.closeHtml}var l;if(n.toastClass=n.options.toastClass,n.titleClass=n.options.titleClass,n.messageClass=n.options.messageClass,n.progressBar=n.options.progressBar,c()){var h=angular.element(n.options.closeHtml),f=t.get("$compile");h.addClass("toast-close-button"),h.attr("ng-click","close()"),f(h)(n),i.prepend(h)}n.init=function(){n.options.timeOut&&(l=a(n.options.timeOut)),n.options.onShown&&n.options.onShown()},i.on("mouseenter",function(){u(),l&&e.cancel(l)}),n.tapToast=function(){n.options.tapToDismiss&&n.close(!0)},n.close=function(t){r.remove(n.toastId,t)},i.on("mouseleave",function(){(0!==n.options.timeOut||0!==n.options.extendedTimeOut)&&(n.$apply(function(){n.progressBar=n.options.progressBar}),l=a(n.options.extendedTimeOut))})}return{replace:!0,templateUrl:function(){return n.templates.toast},controller:"ToastController",link:i}}angular.module("toastr").directive("toast",t),t.$inject=["$injector","$interval","toastrConfig","toastr"]}(),!function(){"use strict";function t(t,e,n,r,i,o,s){function a(t){if(t)f(t.toastId);else for(var e=0;e<b.length;e++)f(b[e].toastId)}function u(t,e,n){var r=p().iconClasses.error;return d(r,t,e,n)}function c(t,e,n){var r=p().iconClasses.info;return d(r,t,e,n)}function l(t,e,n){var r=p().iconClasses.success;return d(r,t,e,n)}function h(t,e,n){var r=p().iconClasses.warning;return d(r,t,e,n)}function f(e,n){function r(t){for(var e=0;e<b.length;e++)if(b[e].toastId===t)return b[e]}function i(){return!b.length}var a=r(e);a&&!a.deleting&&(a.deleting=!0,a.isOpened=!1,t.leave(a.el).then(function(){a.scope.options.onHidden&&a.scope.options.onHidden(n),a.scope.$destroy();var t=b.indexOf(a);delete w[a.scope.message],b.splice(t,1);var e=o.maxOpened;e&&b.length>=e&&b[e-1].open.resolve(),i()&&(m.remove(),m=null,S=s.defer())}))}function d(t,e,n,r){return angular.isObject(n)&&(r=n,n=null),v({iconClass:t,message:e,optionsOverride:r,title:n})}function p(){return angular.extend({},o)}function g(e){if(m)return S.promise;m=angular.element("<div></div>"),m.attr("id",e.containerId),m.addClass(e.positionClass),m.css({"pointer-events":"auto"});var n=angular.element(document.querySelector(e.target));if(!n||!n.length)throw"Target for toasts doesn't exist";return t.enter(m,n).then(function(){S.resolve()}),S.promise}function v(n){function o(t,e,n){n.allowHtml?(t.scope.allowHtml=!0,t.scope.title=i.trustAsHtml(e.title),t.scope.message=i.trustAsHtml(e.message)):(t.scope.title=e.title,t.scope.message=e.message),t.scope.toastType=t.iconClass,t.scope.toastId=t.toastId,t.scope.options={extendedTimeOut:n.extendedTimeOut,messageClass:n.messageClass,onHidden:n.onHidden,onShown:n.onShown,progressBar:n.progressBar,tapToDismiss:n.tapToDismiss,timeOut:n.timeOut,titleClass:n.titleClass,toastClass:n.toastClass},n.closeButton&&(t.scope.options.closeHtml=n.closeHtml)}function a(){function t(t){for(var e=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],n=0,r=e.length;r>n;n++)delete t[e[n]];return t}var e={toastId:y++,isOpened:!1,scope:r.$new(),open:s.defer()};return e.iconClass=n.iconClass,n.optionsOverride&&(h=angular.extend(h,t(n.optionsOverride)),e.iconClass=n.optionsOverride.iconClass||e.iconClass),o(e,n,h),e.el=u(e.scope),e}function u(t){var n=angular.element("<div toast></div>"),r=e.get("$compile");return r(n)(t)}function c(){return h.maxOpened&&b.length<=h.maxOpened||!h.maxOpened}function l(){var t=h.preventDuplicates&&n.message===_,e=h.preventOpenDuplicates&&w[n.message];return!(!t&&!e)||(_=n.message,w[n.message]=!0,!1)}var h=p();if(!l()){var d=a();if(b.push(d),h.autoDismiss&&h.maxOpened>0)for(var v=b.slice(0,b.length-h.maxOpened),S=0,x=v.length;x>S;S++)f(v[S].toastId);return c()&&d.open.resolve(),d.open.promise.then(function(){g(h).then(function(){if(d.isOpened=!0,h.newestOnTop)t.enter(d.el,m).then(function(){d.scope.init()});else{var e=m[0].lastChild?angular.element(m[0].lastChild):null;t.enter(d.el,m,e).then(function(){d.scope.init()})}})}),d}}var m,y=0,b=[],_="",w={},S=s.defer(),x={clear:a,error:u,info:c,remove:f,success:l,warning:h};return x}angular.module("toastr",[]).factory("toastr",t),t.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){"use strict";angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){"use strict";function t(t){function e(t,e,n,r){function i(){var t=(a-(new Date).getTime())/s*100;e.css("width",t+"%")}var o,s,a;r.progressBar=t,t.start=function(t){o&&clearInterval(o),s=parseFloat(t),a=(new Date).getTime()+s,o=setInterval(i,10)},t.stop=function(){o&&clearInterval(o)},t.$on("$destroy",function(){clearInterval(o)})}return{replace:!0,require:"^toast",templateUrl:function(){return t.templates.progressbar},link:e}}angular.module("toastr").directive("progressBar",t),t.$inject=["toastrConfig"]}(),function(){"use strict";function t(){this.progressBar=null,this.startProgressBar=function(t){this.progressBar&&this.progressBar.start(t)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",t)}(),function(){"use strict";function t(t,e,n,r){function i(n,i,o,s){function a(t){return s.startProgressBar(t),e(function(){s.stopProgressBar(),r.remove(n.toastId)},t,1)}function u(){n.progressBar=!1,s.stopProgressBar()}function c(){return n.options.closeHtml}var l;if(n.toastClass=n.options.toastClass,n.titleClass=n.options.titleClass,n.messageClass=n.options.messageClass,n.progressBar=n.options.progressBar,c()){var h=angular.element(n.options.closeHtml),f=t.get("$compile");h.addClass("toast-close-button"),h.attr("ng-click","close()"),f(h)(n),i.prepend(h)}n.init=function(){n.options.timeOut&&(l=a(n.options.timeOut)),n.options.onShown&&n.options.onShown()},i.on("mouseenter",function(){u(),l&&e.cancel(l)}),n.tapToast=function(){n.options.tapToDismiss&&n.close(!0)},n.close=function(t){r.remove(n.toastId,t)},i.on("mouseleave",function(){(0!==n.options.timeOut||0!==n.options.extendedTimeOut)&&(n.$apply(function(){n.progressBar=n.options.progressBar}),l=a(n.options.extendedTimeOut))})}return{replace:!0,templateUrl:function(){return n.templates.toast},controller:"ToastController",link:i}}angular.module("toastr").directive("toast",t),t.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(t){t.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),t.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]),!function(){"use strict";angular.module("base64",[]).constant("$base64",function(){function t(t,e){var n=o.indexOf(t.charAt(e));if(-1==n)throw"Cannot decode base64";return n}function e(e){e=""+e;var n,r,o,s=e.length;if(0==s)return e;if(0!=s%4)throw"Cannot decode base64";n=0,e.charAt(s-1)==i&&(n=1,e.charAt(s-2)==i&&(n=2),s-=4);var a=[];for(r=0;s>r;r+=4)o=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6|t(e,r+3),a.push(String.fromCharCode(o>>16,255&o>>8,255&o));switch(n){case 1:o=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6,a.push(String.fromCharCode(o>>16,255&o>>8));break;case 2:o=t(e,r)<<18|t(e,r+1)<<12,a.push(String.fromCharCode(o>>16))}return a.join("")}function n(t,e){var n=t.charCodeAt(e);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function r(t){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var e,r,s=[];t=""+t;var a=t.length-t.length%3;if(0==t.length)return t;for(e=0;a>e;e+=3)r=n(t,e)<<16|n(t,e+1)<<8|n(t,e+2),s.push(o.charAt(r>>18)),s.push(o.charAt(63&r>>12)),s.push(o.charAt(63&r>>6)),s.push(o.charAt(63&r));switch(t.length-a){case 1:r=n(t,e)<<16,s.push(o.charAt(r>>18)+o.charAt(63&r>>12)+i+i);break;case 2:r=n(t,e)<<16|n(t,e+1)<<8,s.push(o.charAt(r>>18)+o.charAt(63&r>>12)+o.charAt(63&r>>6)+i)}return s.join("")}var i="=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{encode:r,decode:e}}())}(),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e="length"in t&&t.length,n=Z.type(t);return"function"!==n&&!Z.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t))}function r(t,e,n){if(Z.isFunction(e))return Z.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return Z.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(at.test(e))return Z.filter(e,t,n);e=Z.filter(e,t)}return Z.grep(t,function(t){return V.call(e,t)>=0!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=pt[t]={};return Z.each(t.match(dt)||[],function(t,n){e[n]=!0}),e}function s(){G.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function u(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(_t,"-$1").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:bt.test(n)?Z.parseJSON(n):n)}catch(i){}yt.set(t,e,n)}else n=void 0;return n}function c(){return!0}function l(){return!1}function h(){try{return G.activeElement}catch(t){}}function f(t,e){return Z.nodeName(t,"table")&&Z.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=$t.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function g(t,e){for(var n=0,r=t.length;r>n;n++)mt.set(t[n],"globalEval",!e||mt.get(e[n],"globalEval"))}function v(t,e){var n,r,i,o,s,a,u,c;if(1===e.nodeType){if(mt.hasData(t)&&(o=mt.access(t),s=mt.set(e,o),c=o.events)){delete s.handle,s.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)Z.event.add(e,i,c[i][n])}yt.hasData(t)&&(a=yt.access(t),u=Z.extend({},a),yt.set(e,u))}}function m(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Z.nodeName(t,e)?Z.merge([t],n):n}function y(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function b(e,n){var r,i=Z(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(r=t.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function _(t){var e=G,n=Bt[t];return n||(n=b(t,e),"none"!==n&&n||(Mt=(Mt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Mt[0].contentDocument,e.write(),e.close(),n=b(t,e),Mt.detach()),Bt[t]=n),n}function w(t,e,n){var r,i,o,s,a=t.style;return n=n||Kt(t),n&&(s=n.getPropertyValue(e)||n[e]),n&&(""!==s||Z.contains(t.ownerDocument,t)||(s=Z.style(t,e)),Ut.test(s)&&Ht.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function S(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function x(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),r=e,i=Wt.length;i--;)if(e=Wt[i]+n,e in t)return e;return r}function E(t,e,n){var r=Jt.exec(e);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):e}function A(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(t,n+St[o],!0,i)),r?("content"===n&&(s-=Z.css(t,"padding"+St[o],!0,i)),"margin"!==n&&(s-=Z.css(t,"border"+St[o]+"Width",!0,i))):(s+=Z.css(t,"padding"+St[o],!0,i),"padding"!==n&&(s+=Z.css(t,"border"+St[o]+"Width",!0,i)));return s}function C(t,e,n){var r=!0,i="width"===e?t.offsetWidth:t.offsetHeight,o=Kt(t),s="border-box"===Z.css(t,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(t,e,o),(0>i||null==i)&&(i=t.style[e]),Ut.test(i))return i;r=s&&(Y.boxSizingReliable()||i===t.style[e]),i=parseFloat(i)||0}return i+A(t,e,n||(s?"border":"content"),r,o)+"px"}function R(t,e){for(var n,r,i,o=[],s=0,a=t.length;a>s;s++)r=t[s],r.style&&(o[s]=mt.get(r,"olddisplay"),n=r.style.display,e?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&xt(r)&&(o[s]=mt.access(r,"olddisplay",_(r.nodeName)))):(i=xt(r),"none"===n&&i||mt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=t[s],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[s]||"":"none"));return t}function N(t,e,n,r,i){return new N.prototype.init(t,e,n,r,i)}function O(){return setTimeout(function(){Yt=void 0}),Yt=Z.now()}function T(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=St[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function k(t,e,n){for(var r,i=(ne[e]||[]).concat(ne["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,e,t))return r}function I(t,e,n){var r,i,o,s,a,u,c,l,h=this,f={},d=t.style,p=t.nodeType&&xt(t),g=mt.get(t,"fxshow");n.queue||(a=Z._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=Z.css(t,"display"),l="none"===c?mt.get(t,"olddisplay")||_(t.nodeName):c,"inline"===l&&"none"===Z.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],Qt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}f[r]=g&&g[r]||Z.style(t,r)}else c=void 0;if(Z.isEmptyObject(f))"inline"===("none"===c?_(t.nodeName):c)&&(d.display=c);else{g?"hidden"in g&&(p=g.hidden):g=mt.access(t,"fxshow",{}),o&&(g.hidden=!p),p?Z(t).show():h.done(function(){Z(t).hide()}),h.done(function(){var e;mt.remove(t,"fxshow");for(e in f)Z.style(t,e,f[e])});for(r in f)s=k(p?g[r]:0,r,h),r in g||(g[r]=s.start,p&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function P(t,e){var n,r,i,o,s;for(n in t)if(r=Z.camelCase(n),i=e[r],o=t[n],Z.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function F(t,e,n){var r,i,o=0,s=ee.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var e=Yt||O(),n=Math.max(0,c.startTime+c.duration-e),r=n/c.duration||0,o=1-r,s=0,u=c.tweens.length;u>s;s++)c.tweens[s].run(o);return a.notifyWith(t,[c,o,n]),1>o&&u?n:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:Z.extend({},e),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Yt||O(),duration:n.duration,tweens:[],createTween:function(e,n){var r=Z.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){var n=0,r=e?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),l=c.props;for(P(l,c.opts.specialEasing);s>o;o++)if(r=ee[o].call(c,t,l,c.opts))return r;return Z.map(l,k,c),Z.isFunction(c.opts.start)&&c.opts.start.call(t,c),Z.fx.timer(Z.extend(u,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function D(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(dt)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function $(t,e,n,r){function i(a){var u;return o[a]=!0,Z.each(t[a]||[],function(t,a){var c=a(e,n,r);return"string"!=typeof c||s||o[c]?s?!(u=c):void 0:(e.dataTypes.unshift(c),i(c),!1)}),u}var o={},s=t===be;return i(e.dataTypes[0])||!o["*"]&&i("*")}function j(t,e){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&Z.extend(!0,t,r),t}function L(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function M(t,e,n,r){var i,o,s,a,u,c={},l=t.dataTypes.slice();if(l[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=l.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=c[u+" "+o]||c["* "+o],!s)for(i in c)if(a=i.split(" "),a[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){s===!0?s=c[i]:c[i]!==!0&&(o=a[0],l.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}function B(t,e,n,r){var i;if(Z.isArray(e))Z.each(e,function(e,i){n||Ee.test(t)?r(t,i):B(t+"["+("object"==typeof i?e:"")+"]",i,n,r)});else if(n||"object"!==Z.type(e))r(t,e);else for(i in e)B(t+"["+i+"]",e[i],n,r)}function H(t){return Z.isWindow(t)?t:9===t.nodeType&&t.defaultView}var U=[],K=U.slice,q=U.concat,J=U.push,V=U.indexOf,z={},X=z.toString,W=z.hasOwnProperty,Y={},G=t.document,Q="2.1.4",Z=function(t,e){return new Z.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,rt=function(t,e){return e.toUpperCase()};Z.fn=Z.prototype={jquery:Q,constructor:Z,selector:"",length:0,toArray:function(){return K.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:K.call(this)},pushStack:function(t){var e=Z.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Z.each(this,t,e)},map:function(t){return this.pushStack(Z.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(K.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:U.sort,
splice:U.splice},Z.extend=Z.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(t=arguments[a]))for(e in t)n=s[e],r=t[e],s!==r&&(c&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[e]=Z.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},Z.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Z.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Z.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"===Z.type(t)&&!t.nodeType&&!Z.isWindow(t)&&!(t.constructor&&!W.call(t.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?z[X.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Z.trim(t),t&&(1===t.indexOf("use strict")?(e=G.createElement("script"),e.text=t,G.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,rt)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,r){var i,o=0,s=t.length,a=n(t);if(r){if(a)for(;s>o&&(i=e.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=e.apply(t[o],r),i===!1)break}else if(a)for(;s>o&&(i=e.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=e.call(t[o],o,t[o]),i===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?Z.merge(r,"string"==typeof t?[t]:t):J.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:V.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,s=t.length,a=!n;s>o;o++)r=!e(t[o],o),r!==a&&i.push(t[o]);return i},map:function(t,e,r){var i,o=0,s=t.length,a=n(t),u=[];if(a)for(;s>o;o++)i=e(t[o],o,r),null!=i&&u.push(i);else for(o in t)i=e(t[o],o,r),null!=i&&u.push(i);return q.apply([],u)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),Z.isFunction(t)?(r=K.call(arguments,2),i=function(){return t.apply(e||this,r.concat(K.call(arguments)))},i.guid=t.guid=t.guid||Z.guid++,i):void 0},now:Date.now,support:Y}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){z["[object "+e+"]"]=e.toLowerCase()});var it=function(t){function e(t,e,n,r){var i,o,s,a,u,c,h,d,p,g;if((e?e.ownerDocument||e:B)!==I&&k(e),e=e||I,n=n||[],a=e.nodeType,"string"!=typeof t||!t||1!==a&&9!==a&&11!==a)return n;if(!r&&F){if(11!==a&&(i=yt.exec(t)))if(s=i[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&L(e,o)&&o.id===s)return n.push(o),n}else{if(i[2])return Q.apply(n,e.getElementsByTagName(t)),n;if((s=i[3])&&w.getElementsByClassName)return Q.apply(n,e.getElementsByClassName(s)),n}if(w.qsa&&(!D||!D.test(t))){if(d=h=M,p=e,g=1!==a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=A(t),(h=e.getAttribute("id"))?d=h.replace(_t,"\\$&"):e.setAttribute("id",d),d="[id='"+d+"'] ",u=c.length;u--;)c[u]=d+f(c[u]);p=bt.test(t)&&l(e.parentNode)||e,g=c.join(",")}if(g)try{return Q.apply(n,p.querySelectorAll(g)),n}catch(v){}finally{h||e.removeAttribute("id")}}}return R(t.replace(ut,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>S.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[M]=!0,t}function i(t){var e=I.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=t.length;r--;)S.attrHandle[n[r]]=e}function s(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||z)-(~t.sourceIndex||z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function l(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function f(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function d(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=U++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,s){var a,u,c=[H,o];if(s){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,s))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[M]||(e[M]={}),(a=u[r])&&a[0]===H&&a[1]===o)return c[2]=a[2];if(u[r]=c,c[2]=t(e,n,s))return!0}}}function p(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function v(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;u>a;a++)(o=t[a])&&(!n||n(o,r,i))&&(s.push(o),c&&e.push(a));return s}function m(t,e,n,i,o,s){return i&&!i[M]&&(i=m(i)),o&&!o[M]&&(o=m(o,s)),r(function(r,s,a,u){var c,l,h,f=[],d=[],p=s.length,m=r||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!r&&e?m:v(m,f,t,a,u),b=n?o||(r?t:p||i)?[]:s:y;if(n&&n(y,b,a,u),i)for(c=v(b,d),i(c,[],a,u),l=c.length;l--;)(h=c[l])&&(b[d[l]]=!(y[d[l]]=h));if(r){if(o||t){if(o){for(c=[],l=b.length;l--;)(h=b[l])&&c.push(y[l]=h);o(null,b=[],c,u)}for(l=b.length;l--;)(h=b[l])&&(c=o?tt(r,h):f[l])>-1&&(r[c]=!(s[c]=h))}}else b=v(b===s?b.splice(p,b.length):b),o?o(null,s,b,u):Q.apply(s,b)})}function y(t){for(var e,n,r,i=t.length,o=S.relative[t[0].type],s=o||S.relative[" "],a=o?1:0,u=d(function(t){return t===e},s,!0),c=d(function(t){return tt(e,t)>-1},s,!0),l=[function(t,n,r){var i=!o&&(r||n!==N)||((e=n).nodeType?u(t,n,r):c(t,n,r));return e=null,i}];i>a;a++)if(n=S.relative[t[a].type])l=[d(p(l),n)];else{if(n=S.filter[t[a].type].apply(null,t[a].matches),n[M]){for(r=++a;i>r&&!S.relative[t[r].type];r++);return m(a>1&&p(l),a>1&&f(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ut,"$1"),n,r>a&&y(t.slice(a,r)),i>r&&y(t=t.slice(r)),i>r&&f(t))}l.push(n)}return p(l)}function b(t,n){var i=n.length>0,o=t.length>0,s=function(r,s,a,u,c){var l,h,f,d=0,p="0",g=r&&[],m=[],y=N,b=r||o&&S.find.TAG("*",c),_=H+=null==y?1:Math.random()||.1,w=b.length;for(c&&(N=s!==I&&s);p!==w&&null!=(l=b[p]);p++){if(o&&l){for(h=0;f=t[h++];)if(f(l,s,a)){u.push(l);break}c&&(H=_)}i&&((l=!f&&l)&&d--,r&&g.push(l))}if(d+=p,i&&p!==d){for(h=0;f=n[h++];)f(g,m,s,a);if(r){if(d>0)for(;p--;)g[p]||m[p]||(m[p]=Y.call(u));m=v(m)}Q.apply(u,m),c&&!r&&m.length>0&&d+n.length>1&&e.uniqueSort(u)}return c&&(H=_,N=y),g};return i?r(s):s}var _,w,S,x,E,A,C,R,N,O,T,k,I,P,F,D,$,j,L,M="sizzle"+1*new Date,B=t.document,H=0,U=0,K=n(),q=n(),J=n(),V=function(t,e){return t===e&&(T=!0),0},z=1<<31,X={}.hasOwnProperty,W=[],Y=W.pop,G=W.push,Q=W.push,Z=W.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",st=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),lt=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(st),dt=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,vt=/^h\d$/i,mt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,_t=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),St=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xt=function(){k()};try{Q.apply(W=Z.call(B.childNodes),B.childNodes),W[B.childNodes.length].nodeType}catch(Et){Q={apply:W.length?function(t,e){G.apply(t,Z.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}w=e.support={},E=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},k=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:B;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,P=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",xt,!1):n.attachEvent&&n.attachEvent("onunload",xt)),F=!E(r),w.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=i(function(t){return t.appendChild(r.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=mt.test(r.getElementsByClassName),w.getById=i(function(t){return P.appendChild(t).id=M,!r.getElementsByName||!r.getElementsByName(M).length}),w.getById?(S.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&F){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},S.filter.ID=function(t){var e=t.replace(wt,St);return function(t){return t.getAttribute("id")===e}}):(delete S.find.ID,S.filter.ID=function(t){var e=t.replace(wt,St);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),S.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},S.find.CLASS=w.getElementsByClassName&&function(t,e){return F?e.getElementsByClassName(t):void 0},$=[],D=[],(w.qsa=mt.test(r.querySelectorAll))&&(i(function(t){P.appendChild(t).innerHTML="<a id='"+M+"'></a><select id='"+M+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||D.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+M+"-]").length||D.push("~="),t.querySelectorAll(":checked").length||D.push(":checked"),t.querySelectorAll("a#"+M+"+*").length||D.push(".#.+[+~]")}),i(function(t){var e=r.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&D.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),D.push(",.*:")})),(w.matchesSelector=mt.test(j=P.matches||P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&i(function(t){w.disconnectedMatch=j.call(t,"div"),j.call(t,"[s!='']:x"),$.push("!=",st)}),D=D.length&&new RegExp(D.join("|")),$=$.length&&new RegExp($.join("|")),e=mt.test(P.compareDocumentPosition),L=e||mt.test(P.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return T=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===r||t.ownerDocument===B&&L(B,t)?-1:e===r||e.ownerDocument===B&&L(B,e)?1:O?tt(O,t)-tt(O,e):0:4&n?-1:1)}:function(t,e){if(t===e)return T=!0,0;var n,i=0,o=t.parentNode,a=e.parentNode,u=[t],c=[e];if(!o||!a)return t===r?-1:e===r?1:o?-1:a?1:O?tt(O,t)-tt(O,e):0;if(o===a)return s(t,e);for(n=t;n=n.parentNode;)u.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;u[i]===c[i];)i++;return i?s(u[i],c[i]):u[i]===B?-1:c[i]===B?1:0},r):I},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==I&&k(t),n=n.replace(ht,"='$1']"),!(!w.matchesSelector||!F||$&&$.test(n)||D&&D.test(n)))try{var r=j.call(t,n);if(r||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,I,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==I&&k(t),L(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==I&&k(t);var n=S.attrHandle[e.toLowerCase()],r=n&&X.call(S.attrHandle,e.toLowerCase())?n(t,e,!F):void 0;return void 0!==r?r:w.attributes||!F?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(T=!w.detectDuplicates,O=!w.sortStable&&t.slice(0),t.sort(V),T){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return O=null,t},x=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=x(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=x(e);return n},S=e.selectors={cacheLength:50,createPseudo:r,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(wt,St),t[3]=(t[3]||t[4]||t[5]||"").replace(wt,St),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ft.test(n)&&(e=A(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(wt,St).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=K[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&K(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(at," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var c,l,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",v=e.parentNode,m=a&&e.nodeName.toLowerCase(),y=!u&&!a;if(v){if(o){for(;g;){for(h=e;h=h[g];)if(a?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[s?v.firstChild:v.lastChild],s&&y){for(l=v[M]||(v[M]={}),c=l[t]||[],d=c[0]===H&&c[1],f=c[0]===H&&c[2],h=d&&v.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===e){l[t]=[H,d,f];break}}else if(y&&(c=(e[M]||(e[M]={}))[t])&&c[0]===H)f=c[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++f||(y&&((h[M]||(h[M]={}))[t]=[H,f]),h!==e)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(t,n){var i,o=S.pseudos[t]||S.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[M]?o(n):o.length>1?(i=[t,t,"",n],S.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),s=i.length;s--;)r=tt(t,i[s]),t[r]=!(e[r]=i[s])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=C(t.replace(ut,"$1"));return i[M]?r(function(t,e,n,r){for(var o,s=i(t,null,r,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(wt,St),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:r(function(t){return dt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(wt,St).toLowerCase(),function(e){var n;do if(n=F?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===P},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!S.pseudos.empty(t)},header:function(t){return vt.test(t.nodeName)},input:function(t){return gt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:c(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},S.pseudos.nth=S.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})S.pseudos[_]=u(_);return h.prototype=S.filters=S.pseudos,S.setFilters=new h,A=e.tokenize=function(t,n){var r,i,o,s,a,u,c,l=q[t+" "];if(l)return n?0:l.slice(0);for(a=t,u=[],c=S.preFilter;a;){(!r||(i=ct.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=lt.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),a=a.slice(r.length));for(s in S.filter)!(i=pt[s].exec(a))||c[s]&&!(i=c[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?e.error(t):q(t,u).slice(0)},C=e.compile=function(t,e){var n,r=[],i=[],o=J[t+" "];if(!o){for(e||(e=A(t)),n=e.length;n--;)o=y(e[n]),o[M]?r.push(o):i.push(o);o=J(t,b(i,r)),o.selector=t}return o},R=e.select=function(t,e,n,r){var i,o,s,a,u,c="function"==typeof t&&t,h=!r&&A(t=c.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===e.nodeType&&F&&S.relative[o[1].type]){if(e=(S.find.ID(s.matches[0].replace(wt,St),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=pt.needsContext.test(t)?0:o.length;i--&&(s=o[i],!S.relative[a=s.type]);)if((u=S.find[a])&&(r=u(s.matches[0].replace(wt,St),bt.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&f(o),!t)return Q.apply(n,r),n;break}}return(c||C(t,h))(r,e,!F,n,bt.test(t)&&l(e.parentNode)||e),n},w.sortStable=M.split("").sort(V).join("")===M,w.detectDuplicates=!!T,k(),w.sortDetached=i(function(t){return 1&t.compareDocumentPosition(I.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?Z.find.matchesSelector(r,t)?[r]:[]:Z.find.matches(t,Z.grep(e,function(t){return 1===t.nodeType}))},Z.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(Z(t).filter(function(){for(e=0;n>e;e++)if(Z.contains(i[e],this))return!0}));for(e=0;n>e;e++)Z.find(t,i[e],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&ot.test(t)?Z(t):t||[],!1).length}});var ut,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,lt=Z.fn.init=function(t,e){var n,r;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||ut).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Z?e[0]:e,Z.merge(this,Z.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:G,!0)),st.test(n[1])&&Z.isPlainObject(e))for(n in e)Z.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return r=G.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=G,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Z.isFunction(t)?"undefined"!=typeof ut.ready?ut.ready(t):t(Z):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Z.makeArray(t,this))};lt.prototype=Z.fn,ut=Z(G);var ht=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&Z(t).is(n))break;r.push(t)}return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Z.fn.extend({has:function(t){var e=Z(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Z.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],s=ot.test(t)||"string"!=typeof t?Z(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(t){return t?"string"==typeof t?V.call(Z(t),this[0]):V.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Z.unique(Z.merge(this.get(),Z(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Z.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Z.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Z.dir(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return Z.dir(t,"nextSibling")},prevAll:function(t){return Z.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Z.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Z.dir(t,"previousSibling",n)},siblings:function(t){return Z.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Z.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Z.merge([],t.childNodes)}},function(t,e){Z.fn[t]=function(n,r){var i=Z.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(ft[t]||Z.unique(i),ht.test(t)&&i.reverse()),this.pushStack(i)}});var dt=/\S+/g,pt={};Z.Callbacks=function(t){t="string"==typeof t?pt[t]||o(t):Z.extend({},t);var e,n,r,i,s,a,u=[],c=!t.once&&[],l=function(o){for(e=t.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}r=!1,u&&(c?c.length&&l(c.shift()):e?u=[]:h.disable())},h={add:function(){if(u){var n=u.length;!function o(e){Z.each(e,function(e,n){var r=Z.type(n);"function"===r?t.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:e&&(i=n,l(e))}return this},remove:function(){return u&&Z.each(arguments,function(t,e){for(var n;(n=Z.inArray(e,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(t){return t?Z.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=c=e=void 0,this},disabled:function(){return!u},lock:function(){return c=void 0,e||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!u||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],r?c.push(e):l(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(t){var e=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Z.Deferred(function(n){Z.each(e,function(e,o){var s=Z.isFunction(t[e])&&t[e];i[o[1]](function(){var t=s&&s.apply(this,arguments);t&&Z.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Z.extend(t,r):r}},i={};return r.pipe=r.then,Z.each(e,function(t,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=K.call(arguments),s=o.length,a=1!==s||t&&Z.isFunction(t.promise)?s:0,u=1===a?t:Z.Deferred(),c=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?K.call(arguments):i,r===e?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(c(i,r,o)).fail(u.reject).progress(c(i,n,e)):--a;return a||u.resolveWith(r,o),u.promise()}});var gt;Z.fn.ready=function(t){return Z.ready.promise().done(t),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Z.readyWait++:Z.ready(!0)},ready:function(t){(t===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,t!==!0&&--Z.readyWait>0||(gt.resolveWith(G,[Z]),Z.fn.triggerHandler&&(Z(G).triggerHandler("ready"),Z(G).off("ready"))))}}),Z.ready.promise=function(e){return gt||(gt=Z.Deferred(),"complete"===G.readyState?setTimeout(Z.ready):(G.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1))),gt.promise(e)},Z.ready.promise();var vt=Z.access=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(t,e,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),c&&(s?(e.call(t,r),e=null):(c=e,e=function(t,e,n){return c.call(Z(t),n)})),e))for(;u>a;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o};Z.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=a.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(r){e[this.expando]=n,Z.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var r,i=this.key(t),o=this.cache[i];if("string"==typeof e)o[e]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],e);else for(r in e)o[r]=e[r];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,Z.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=this.key(t),s=this.cache[o];if(void 0===e)this.cache[o]={};else{Z.isArray(e)?r=e.concat(e.map(Z.camelCase)):(i=Z.camelCase(e),e in s?r=[e,i]:(r=i,r=r in s?[r]:r.match(dt)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(t){return!Z.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var mt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;Z.extend({hasData:function(t){return yt.hasData(t)||mt.hasData(t)},data:function(t,e,n){return yt.access(t,e,n)},removeData:function(t,e){yt.remove(t,e)},_data:function(t,e,n){return mt.access(t,e,n)},_removeData:function(t,e){mt.remove(t,e)}}),Z.fn.extend({data:function(t,e){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(i=yt.get(o),1===o.nodeType&&!mt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));mt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){yt.set(this,t)}):vt(this,function(e){var n,r=Z.camelCase(t);if(o&&void 0===e){if(n=yt.get(o,t),void 0!==n)return n;if(n=yt.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,r);yt.set(this,r,e),-1!==t.indexOf("-")&&void 0!==n&&yt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){yt.remove(this,t)})}}),Z.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=mt.get(t,e),n&&(!r||Z.isArray(n)?r=mt.access(t,e,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Z.queue(t,e),r=n.length,i=n.shift(),o=Z._queueHooks(t,e),s=function(){Z.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return mt.get(t,n)||mt.access(t,n,{empty:Z.Callbacks("once memory").add(function(){mt.remove(t,[e+"queue",n])})})}}),Z.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Z.queue(this[0],t):void 0===e?this:this.each(function(){var n=Z.queue(this,t,e);Z._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Z.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Z.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)n=mt.get(o[s],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(e)}});var wt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,St=["Top","Right","Bottom","Left"],xt=function(t,e){return t=e||t,"none"===Z.css(t,"display")||!Z.contains(t.ownerDocument,t)},Et=/^(?:checkbox|radio)$/i;!function(){var t=G.createDocumentFragment(),e=t.appendChild(G.createElement("div")),n=G.createElement("input");
n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),Y.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var At="undefined";Y.focusinBubbles="onfocusin"in t;var Ct=/^key/,Rt=/^(?:mouse|pointer|contextmenu)|click/,Nt=/^(?:focusinfocus|focusoutblur)$/,Ot=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=mt.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(e){return typeof Z!==At&&Z.event.triggered!==e.type?Z.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(dt)||[""],c=e.length;c--;)a=Ot.exec(e[c])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(h=Z.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=Z.event.special[d]||{},l=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||(f=u[d]=[],f.delegateCount=0,h.setup&&h.setup.call(t,r,p,s)!==!1||t.addEventListener&&t.addEventListener(d,s,!1)),h.add&&(h.add.call(t,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),Z.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,l,h,f,d,p,g,v=mt.hasData(t)&&mt.get(t);if(v&&(u=v.events)){for(e=(e||"").match(dt)||[""],c=e.length;c--;)if(a=Ot.exec(e[c])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(h=Z.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,f=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)l=f[o],!i&&g!==l.origType||n&&n.guid!==l.guid||a&&!a.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(t,l));s&&!f.length&&(h.teardown&&h.teardown.call(t,p,v.handle)!==!1||Z.removeEvent(t,d,v.handle),delete u[d])}else for(d in u)Z.event.remove(t,d+e[c],n,r,!0);Z.isEmptyObject(u)&&(delete v.handle,mt.remove(t,"events"))}},trigger:function(e,n,r,i){var o,s,a,u,c,l,h,f=[r||G],d=W.call(e,"type")?e.type:e,p=W.call(e,"namespace")?e.namespace.split("."):[];if(s=a=r=r||G,3!==r.nodeType&&8!==r.nodeType&&!Nt.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),c=d.indexOf(":")<0&&"on"+d,e=e[Z.expando]?e:new Z.Event(d,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:Z.makeArray(n,[e]),h=Z.event.special[d]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!Z.isWindow(r)){for(u=h.delegateType||d,Nt.test(u+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(r.ownerDocument||G)&&f.push(a.defaultView||a.parentWindow||t)}for(o=0;(s=f[o++])&&!e.isPropagationStopped();)e.type=o>1?u:h.bindType||d,l=(mt.get(s,"events")||{})[e.type]&&mt.get(s,"handle"),l&&l.apply(s,n),l=c&&s[c],l&&l.apply&&Z.acceptData(s)&&(e.result=l.apply(s,n),e.result===!1&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!Z.acceptData(r)||c&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[c],a&&(r[c]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[c]=a)),e.result}},dispatch:function(t){t=Z.event.fix(t);var e,n,r,i,o,s=[],a=K.call(arguments),u=(mt.get(this,"events")||{})[t.type]||[],c=Z.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=Z.event.handlers.call(this,t,u),e=0;(i=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,s=[],a=e.delegateCount,u=t.target;if(a&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==t.type){for(r=[],n=0;a>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||G,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Z.expando])return t;var e,n,r,i=t.type,o=t,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Rt.test(i)?this.mouseHooks:Ct.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,t=new Z.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=G),3===t.target.nodeType&&(t.target=t.target.parentNode),s.filter?s.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Z.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,r){var i=Z.extend(new Z.Event,n,{type:t,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,e):Z.event.dispatch.call(e,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Z.Event=function(t,e){return this instanceof Z.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:l):this.type=t,e&&Z.extend(this,e),this.timeStamp=t&&t.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(t,e)},Z.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Z.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),Y.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Z.event.simulate(e,t.target,Z.event.fix(t),!0)};Z.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=mt.access(r,e);i||r.addEventListener(t,n,!0),mt.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=mt.access(r,e)-1;i?mt.access(r,e,i):(r.removeEventListener(t,n,!0),mt.remove(r,e))}}}),Z.fn.extend({on:function(t,e,n,r,i){var o,s;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(s in t)this.on(s,e,n,t[s],i);return this}if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),r===!1)r=l;else if(!r)return this;return 1===i&&(o=r,r=function(t){return Z().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,t,r,n,e)})},one:function(t,e,n,r){return this.on(t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,Z(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=l),this.each(function(){Z.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Z.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Z.event.trigger(t,e,n,!0):void 0}});var Tt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kt=/<([\w:]+)/,It=/<|&#?\w+;/,Pt=/<(?:script|style|link)/i,Ft=/checked\s*(?:[^=]|=\s*.checked.)/i,Dt=/^$|\/(?:java|ecma)script/i,$t=/^true\/(.*)/,jt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,Z.extend({clone:function(t,e,n){var r,i,o,s,a=t.cloneNode(!0),u=Z.contains(t.ownerDocument,t);if(!(Y.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Z.isXMLDoc(t)))for(s=m(a),o=m(t),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(e)if(n)for(o=o||m(t),s=s||m(a),r=0,i=o.length;i>r;r++)v(o[r],s[r]);else v(t,a);return s=m(a,"script"),s.length>0&&g(s,!u&&m(t,"script")),a},buildFragment:function(t,e,n,r){for(var i,o,s,a,u,c,l=e.createDocumentFragment(),h=[],f=0,d=t.length;d>f;f++)if(i=t[f],i||0===i)if("object"===Z.type(i))Z.merge(h,i.nodeType?[i]:i);else if(It.test(i)){for(o=o||l.appendChild(e.createElement("div")),s=(kt.exec(i)||["",""])[1].toLowerCase(),a=Lt[s]||Lt._default,o.innerHTML=a[1]+i.replace(Tt,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;Z.merge(h,o.childNodes),o=l.firstChild,o.textContent=""}else h.push(e.createTextNode(i));for(l.textContent="",f=0;i=h[f++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=m(l.appendChild(i),"script"),u&&g(o),n))for(c=0;i=o[c++];)Dt.test(i.type||"")&&n.push(i);return l},cleanData:function(t){for(var e,n,r,i,o=Z.event.special,s=0;void 0!==(n=t[s]);s++){if(Z.acceptData(n)&&(i=n[mt.expando],i&&(e=mt.cache[i]))){if(e.events)for(r in e.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,e.handle);mt.cache[i]&&delete mt.cache[i]}delete yt.cache[n[yt.expando]]}}}),Z.fn.extend({text:function(t){return vt(this,function(t){return void 0===t?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=f(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,r=t?Z.filter(t,this):this,i=0;null!=(n=r[i]);i++)e||1!==n.nodeType||Z.cleanData(m(n)),n.parentNode&&(e&&Z.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Z.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return Z.clone(this,t,e)})},html:function(t){return vt(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Pt.test(t)&&!Lt[(kt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Tt,"<$1></$2>");try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(Z.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Z.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=q.apply([],t);var n,r,i,o,s,a,u=0,c=this.length,l=this,h=c-1,f=t[0],g=Z.isFunction(f);if(g||c>1&&"string"==typeof f&&!Y.checkClone&&Ft.test(f))return this.each(function(n){var r=l.eq(n);g&&(t[0]=f.call(this,n,r.html())),r.domManip(t,e)});if(c&&(n=Z.buildFragment(t,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(m(n,"script"),d),o=i.length;c>u;u++)s=n,u!==h&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,m(s,"script"))),e.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,p),u=0;o>u;u++)s=i[u],Dt.test(s.type||"")&&!mt.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(jt,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Z.fn[t]=function(t){for(var n,r=[],i=Z(t),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[e](n),J.apply(r,n.get());return this.pushStack(r)}});var Mt,Bt={},Ht=/^margin/,Ut=new RegExp("^("+wt+")(?!px)[a-z%]+$","i"),Kt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var e=t.getComputedStyle(s,null);n="1%"!==e.top,r="4px"===e.width,i.removeChild(o)}var n,r,i=G.documentElement,o=G.createElement("div"),s=G.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),t.getComputedStyle&&Z.extend(Y,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},reliableMarginRight:function(){var e,n=s.appendChild(G.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),e}}))}(),Z.swap=function(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=s[o];return i};var qt=/^(none|table(?!-c[ea]).+)/,Jt=new RegExp("^("+wt+")(.*)$","i"),Vt=new RegExp("^([+-])=("+wt+")","i"),zt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Wt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=w(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=Z.camelCase(e),u=t.style;return e=Z.cssProps[a]||(Z.cssProps[a]=x(u,a)),s=Z.cssHooks[e]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:u[e]:(o=typeof n,"string"===o&&(i=Vt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(t,e)),o="number"),void(null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Y.clearCloneStyle||""!==n||0!==e.indexOf("background")||(u[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u[e]=n))))}},css:function(t,e,n,r){var i,o,s,a=Z.camelCase(e);return e=Z.cssProps[a]||(Z.cssProps[a]=x(t.style,a)),s=Z.cssHooks[e]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=w(t,e,r)),"normal"===i&&e in Xt&&(i=Xt[e]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(t,e){Z.cssHooks[e]={get:function(t,n,r){return n?qt.test(Z.css(t,"display"))&&0===t.offsetWidth?Z.swap(t,zt,function(){return C(t,e,r)}):C(t,e,r):void 0},set:function(t,n,r){var i=r&&Kt(t);return E(t,n,r?A(t,e,r,"border-box"===Z.css(t,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=S(Y.reliableMarginRight,function(t,e){return e?Z.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(t,e){Z.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+St[r]+e]=o[r]||o[r-2]||o[0];return i}},Ht.test(t)||(Z.cssHooks[t+e].set=E)}),Z.fn.extend({css:function(t,e){return vt(this,function(t,e,n){var r,i,o={},s=0;if(Z.isArray(e)){for(r=Kt(t),i=e.length;i>s;s++)o[e[s]]=Z.css(t,e[s],!1,r);return o}return void 0!==n?Z.style(t,e,n):Z.css(t,e)},t,e,arguments.length>1)},show:function(){return R(this,!0)},hide:function(){return R(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){xt(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=N,N.prototype={constructor:N,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||"swing",this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var t=N.propHooks[this.prop];return t&&t.get?t.get(this):N.propHooks._default.get(this)},run:function(t){var e,n=N.propHooks[this.prop];return this.options.duration?this.pos=e=Z.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Z.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Z.fx.step[t.prop]?Z.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Z.cssProps[t.prop]]||Z.cssHooks[t.prop])?Z.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Z.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Z.fx=N.prototype.init,Z.fx.step={};var Yt,Gt,Qt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+wt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[I],ne={"*":[function(t,e){var n=this.createTween(t,e),r=n.cur(),i=Zt.exec(e),o=i&&i[3]||(Z.cssNumber[t]?"":"px"),s=(Z.cssNumber[t]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,t)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,t,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(F,{tweener:function(t,e){Z.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Z.speed=function(t,e,n){var r=t&&"object"==typeof t?Z.extend({},t):{complete:n||!n&&e||Z.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Z.isFunction(e)&&e};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(t,e,n,r){return this.filter(xt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=Z.isEmptyObject(t),o=Z.speed(e,n,r),s=function(){var e=F(this,Z.extend({},t),o);(i||mt.get(this,"finish"))&&e.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=Z.timers,s=mt.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&te.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));(e||!n)&&Z.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=mt.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(t,e){var n=Z.fn[e];Z.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(T(e,!0),t,r,i)}}),Z.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Z.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),Z.timers=[],Z.fx.tick=function(){var t,e=0,n=Z.timers;for(Yt=Z.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Z.fx.stop(),Yt=void 0},Z.fx.timer=function(t){Z.timers.push(t),t()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Gt||(Gt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Gt),Gt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(t,e){return t=Z.fx?Z.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var t=G.createElement("input"),e=G.createElement("select"),n=e.appendChild(G.createElement("option"));t.type="checkbox",Y.checkOn=""!==t.value,Y.optSelected=n.selected,e.disabled=!0,Y.optDisabled=!n.disabled,t=G.createElement("input"),t.value="t",t.type="radio",Y.radioValue="t"===t.value}();var re,ie,oe=Z.expr.attrHandle;Z.fn.extend({attr:function(t,e){return vt(this,Z.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Z.removeAttr(this,t)})}}),Z.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===At?Z.prop(t,e,n):(1===o&&Z.isXMLDoc(t)||(e=e.toLowerCase(),r=Z.attrHooks[e]||(Z.expr.match.bool.test(e)?ie:re)),void 0===n?r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=Z.find.attr(t,e),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):void Z.removeAttr(t,e))},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(dt);if(o&&1===t.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!Y.radioValue&&"radio"===e&&Z.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),ie={set:function(t,e,n){return e===!1?Z.removeAttr(t,n):t.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||Z.find.attr;oe[e]=function(t,e,r){var i,o;return r||(o=oe[e],oe[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,oe[e]=o),i}});var se=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(t,e){return vt(this,Z.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Z.propFix[t]||t]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var r,i,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(t),o&&(e=Z.propFix[e]||e,i=Z.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||se.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),Y.optSelected||(Z.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var ae=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(t){var e,n,r,i,o,s,a="string"==typeof t&&t,u=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(dt)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ae," "):" ")){for(o=0;i=e[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(t){var e,n,r,i,o,s,a=0===arguments.length||"string"==typeof t&&t,u=0,c=this.length;if(Z.isFunction(t))return this.each(function(e){Z(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(dt)||[];c>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ae," "):"")){for(o=0;i=e[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=t?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Z.isFunction(t)?function(n){Z(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,r=0,i=Z(this),o=t.match(dt)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else(n===At||"boolean"===n)&&(this.className&&mt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":mt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ae," ").indexOf(e)>=0)return!0;return!1}});var ue=/\r/g;Z.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=Z.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,Z(this).val()):t,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(t){return null==t?"":t+""})),e=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ue,""):null==n?"":n)):void 0}}),Z.extend({valHooks:{option:{get:function(t){var e=Z.find.attr(t,"value");return null!=e?e:Z.trim(Z.text(t))}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Y.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(e=Z(n).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=Z.makeArray(e),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(t,e){return Z.isArray(e)?t.checked=Z.inArray(Z(t).val(),e)>=0:void 0}},Y.checkOn||(Z.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Z.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Z.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ce=Z.now(),le=/\?/;Z.parseJSON=function(t){return JSON.parse(t+"")},Z.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(r){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+t),e};var he=/#.*$/,fe=/([?&])_=[^&]*/,de=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ge=/^(?:GET|HEAD)$/,ve=/^\/\//,me=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ye={},be={},_e="*/".concat("*"),we=t.location.href,Se=me.exec(we.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:we,type:"GET",isLocal:pe.test(Se[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_e,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?j(j(t,Z.ajaxSettings),e):j(Z.ajaxSettings,t)},ajaxPrefilter:D(ye),ajaxTransport:D(be),ajax:function(t,e){function n(t,e,n,s){var u,l,m,y,_,S=e;2!==b&&(b=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=t>0?4:0,u=t>=200&&300>t||304===t,n&&(y=L(h,w,n)),y=M(h,y,w,u),u?(h.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(Z.lastModified[i]=_),_=w.getResponseHeader("etag"),_&&(Z.etag[i]=_)),204===t||"HEAD"===h.type?S="nocontent":304===t?S="notmodified":(S=y.state,l=y.data,m=y.error,u=!m)):(m=S,(t||!S)&&(S="error",0>t&&(t=0))),w.status=t,w.statusText=(e||S)+"",u?p.resolveWith(f,[l,S,w]):p.rejectWith(f,[w,S,m]),w.statusCode(v),v=void 0,c&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,h,u?l:m]),g.fireWith(f,[w,S]),c&&(d.trigger("ajaxComplete",[w,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,i,o,s,a,u,c,l,h=Z.ajaxSetup({},e),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?Z(f):Z.event,p=Z.Deferred(),g=Z.Callbacks("once memory"),v=h.statusCode||{},m={},y={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!s)for(s={};e=de.exec(o);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return b||(t=y[n]=y[n]||t,m[t]=e),this},overrideMimeType:function(t){return b||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)v[e]=[v[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||_;return r&&r.abort(e),n(0,e),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,h.url=((t||h.url||we)+"").replace(he,"").replace(ve,Se[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(dt)||[""],null==h.crossDomain&&(u=me.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===Se[1]&&u[2]===Se[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Se[3]||("http:"===Se[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),$(ye,h,e,w),
2===b)return w;c=Z.event&&h.global,c&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!ge.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(le.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=fe.test(i)?i.replace(fe,"$1_="+ce++):i+(le.test(i)?"&":"?")+"_="+ce++)),h.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+_e+"; q=0.01":""):h.accepts["*"]);for(l in h.headers)w.setRequestHeader(l,h.headers[l]);if(h.beforeSend&&(h.beforeSend.call(f,w,h)===!1||2===b))return w.abort();_="abort";for(l in{success:1,error:1,complete:1})w[l](h[l]);if(r=$(be,h,e,w)){w.readyState=1,c&&d.trigger("ajaxSend",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},h.timeout));try{b=1,r.send(m,n)}catch(S){if(!(2>b))throw S;n(-1,S)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return Z.get(t,e,n,"json")},getScript:function(t,e){return Z.get(t,void 0,e,"script")}}),Z.each(["get","post"],function(t,e){Z[e]=function(t,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:t,type:e,dataType:i,data:n,success:r})}}),Z._evalUrl=function(t){return Z.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(t){var e;return Z.isFunction(t)?this.each(function(e){Z(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Z(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Z.isFunction(t)?function(e){Z(this).wrapInner(t.call(this,e))}:function(){var e=Z(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Z.isFunction(t);return this.each(function(n){Z(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Z.expr.filters.visible=function(t){return!Z.expr.filters.hidden(t)};var xe=/%20/g,Ee=/\[\]$/,Ae=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Re=/^(?:input|select|textarea|keygen)/i;Z.param=function(t,e){var n,r=[],i=function(t,e){e=Z.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(t)||t.jquery&&!Z.isPlainObject(t))Z.each(t,function(){i(this.name,this.value)});else for(n in t)B(n,t[n],e,i);return r.join("&").replace(xe,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Z.prop(this,"elements");return t?Z.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Z(this).is(":disabled")&&Re.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!Et.test(t))}).map(function(t,e){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(t){return{name:e.name,value:t.replace(Ae,"\r\n")}}):{name:e.name,value:n.replace(Ae,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ne=0,Oe={},Te={0:200,1223:204},ke=Z.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Oe)Oe[t]()}),Y.cors=!!ke&&"withCredentials"in ke,Y.ajax=ke=!!ke,Z.ajaxTransport(function(t){var e;return Y.cors||ke&&!t.crossDomain?{send:function(n,r){var i,o=t.xhr(),s=++Ne;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)o[i]=t.xhrFields[i];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);e=function(t){return function(){e&&(delete Oe[s],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?r(o.status,o.statusText):r(Te[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Oe[s]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Z.globalEval(t),t}}}),Z.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Z.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=Z("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),G.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ie=[],Pe=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ie.pop()||Z.expando+"_"+ce++;return this[t]=!0,t}}),Z.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,s,a=e.jsonp!==!1&&(Pe.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pe.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=Z.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Pe,"$1"+i):e.jsonp!==!1&&(e.url+=(le.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){s=arguments},r.always(function(){t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Ie.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||G;var r=st.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=Z.buildFragment([t],e,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Fe=Z.fn.load;Z.fn.load=function(t,e,n){if("string"!=typeof t&&Fe)return Fe.apply(this,arguments);var r,i,o,s=this,a=t.indexOf(" ");return a>=0&&(r=Z.trim(t.slice(a)),t=t.slice(0,a)),Z.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),s.length>0&&Z.ajax({url:t,type:i,dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(t)).find(r):t)}).complete(n&&function(t,e){s.each(n,o||[t.responseText,e,t])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Z.fn[e]=function(t){return this.on(e,t)}}),Z.expr.filters.animated=function(t){return Z.grep(Z.timers,function(e){return t===e.elem}).length};var De=t.document.documentElement;Z.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c,l=Z.css(t,"position"),h=Z(t),f={};"static"===l&&(t.style.position="relative"),a=h.offset(),o=Z.css(t,"top"),u=Z.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=h.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(e)&&(e=e.call(t,n,a)),null!=e.top&&(f.top=e.top-a.top+s),null!=e.left&&(f.left=e.left-a.left+i),"using"in e?e.using.call(t,f):h.css(f)}},Z.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Z.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,Z.contains(e,r)?(typeof r.getBoundingClientRect!==At&&(i=r.getBoundingClientRect()),n=H(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Z.nodeName(t[0],"html")||(r=t.offset()),r.top+=Z.css(t[0],"borderTopWidth",!0),r.left+=Z.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-Z.css(n,"marginTop",!0),left:e.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||De;t&&!Z.nodeName(t,"html")&&"static"===Z.css(t,"position");)t=t.offsetParent;return t||De})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r="pageYOffset"===n;Z.fn[e]=function(i){return vt(this,function(e,i,o){var s=H(e);return void 0===o?s?s[n]:e[i]:void(s?s.scrollTo(r?t.pageXOffset:o,r?o:t.pageYOffset):e[i]=o)},e,i,arguments.length,null)}}),Z.each(["top","left"],function(t,e){Z.cssHooks[e]=S(Y.pixelPosition,function(t,n){return n?(n=w(t,e),Ut.test(n)?Z(t).position()[e]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(t,e){Z.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return vt(this,function(e,n,r){var i;return Z.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?Z.css(e,n,s):Z.style(e,n,r,s)},e,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var $e=t.jQuery,je=t.$;return Z.noConflict=function(e){return t.$===Z&&(t.$=je),e&&t.jQuery===Z&&(t.jQuery=$e),Z},typeof e===At&&(t.jQuery=t.$=Z),Z});try{if(module&&module.paths&&0===location.search.indexOf("?npmpath=")){var npmPath=/\?npmpath=(.*?)$/.exec(location.search)[1];npmPath&&module.paths.push(decodeURIComponent(npmPath))}var electron_client="ELECTRON_CTI_CLIENT",db_silo="client/data",ipc=require("electron").ipcRenderer;angular.module("ngElectron",[]).factory("electron",function(){var t={};t.send=function(t){ipc.send(electron_client,t)};var e=require("diskdb");return t.db=function(t){if(e){var n=[];return"object"==typeof t?n=t:"string"==typeof t&&n.push(t),e.connect(db_silo,n)}return"diskdb is not installed and/or configured."},t.require=require("remote").require,t.app=t.require("app"),t.fsplus=t.require("fs-plus"),t.path=t.require("path"),t.shell=t.require("shell"),t.dialog=t.require("dialog"),t}).run(["$rootScope","electron",function(t,e){ipc.on(electron_client,function(t,e){switch(e.action||""){case"pong":console.info("[electron] Connected to electron shell (client)");break;case"console-log":console.info("[electron]",e.data)}}),e.send({action:"ping"}),t.$electron=e}])}catch(e){angular.module("ngElectron",[]).factory("electron",function(){return{}})}!function(t){if(function(t,e){"function"==typeof define&&define.amd?define("strophe-base64",function(){return e()}):t.Base64=e()}(this,function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e={encode:function(e){var n,r,i,o,s,a,u,c="",l=0;do n=e.charCodeAt(l++),r=e.charCodeAt(l++),i=e.charCodeAt(l++),o=n>>2,s=(3&n)<<4|r>>4,a=(15&r)<<2|i>>6,u=63&i,isNaN(r)?(s=(3&n)<<4,a=u=64):isNaN(i)&&(u=64),c=c+t.charAt(o)+t.charAt(s)+t.charAt(a)+t.charAt(u);while(l<e.length);return c},decode:function(e){var n,r,i,o,s,a,u,c="",l=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do o=t.indexOf(e.charAt(l++)),s=t.indexOf(e.charAt(l++)),a=t.indexOf(e.charAt(l++)),u=t.indexOf(e.charAt(l++)),n=o<<2|s>>4,r=(15&s)<<4|a>>2,i=(3&a)<<6|u,c+=String.fromCharCode(n),64!=a&&(c+=String.fromCharCode(r)),64!=u&&(c+=String.fromCharCode(i));while(l<e.length);return c}};return e}),function(t,e){"function"==typeof define&&define.amd?define("strophe-sha1",function(){return e()}):t.SHA1=e()}(this,function(){function t(t,r){t[r>>5]|=128<<24-r%32,t[(r+64>>9<<4)+15]=r;var s,a,u,c,l,h,f,d,p=new Array(80),g=1732584193,v=-271733879,m=-1732584194,y=271733878,b=-1009589776;for(s=0;s<t.length;s+=16){for(c=g,l=v,h=m,f=y,d=b,a=0;a<80;a++)a<16?p[a]=t[s+a]:p[a]=o(p[a-3]^p[a-8]^p[a-14]^p[a-16],1),u=i(i(o(g,5),e(a,v,m,y)),i(i(b,p[a]),n(a))),b=y,y=m,m=o(v,30),v=g,g=u;g=i(g,c),v=i(v,l),m=i(m,h),y=i(y,f),b=i(b,d)}return[g,v,m,y,b]}function e(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function n(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function r(e,n){var r=s(e);r.length>16&&(r=t(r,8*e.length));for(var i=new Array(16),o=new Array(16),a=0;a<16;a++)i[a]=909522486^r[a],o[a]=1549556828^r[a];var u=t(i.concat(s(n)),512+8*n.length);return t(o.concat(u),672)}function i(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n}function o(t,e){return t<<e|t>>>32-e}function s(t){for(var e=[],n=255,r=0;r<8*t.length;r+=8)e[r>>5]|=(t.charCodeAt(r/8)&n)<<24-r%32;return e}function a(t){for(var e="",n=255,r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>24-r%32&n);return e}function u(t){for(var e,n,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",o=0;o<4*t.length;o+=3)for(e=(t[o>>2]>>8*(3-o%4)&255)<<16|(t[o+1>>2]>>8*(3-(o+1)%4)&255)<<8|t[o+2>>2]>>8*(3-(o+2)%4)&255,n=0;n<4;n++)i+=8*o+6*n>32*t.length?"=":r.charAt(e>>6*(3-n)&63);return i}return{b64_hmac_sha1:function(t,e){return u(r(t,e))},b64_sha1:function(e){return u(t(s(e),8*e.length))},binb2str:a,core_hmac_sha1:r,str_hmac_sha1:function(t,e){return a(r(t,e))},str_sha1:function(e){return a(t(s(e),8*e.length))}}}),function(t,e){"function"==typeof define&&define.amd?define("strophe-md5",function(){return e()}):t.MD5=e()}(this,function(t){var e=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n},n=function(t,e){return t<<e|t>>>32-e},r=function(t){for(var e=[],n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},i=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},o=function(t){for(var e="0123456789abcdef",n="",r=0;r<4*t.length;r++)n+=e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15);return n},s=function(t,r,i,o,s,a){return e(n(e(e(r,t),e(o,a)),s),i)},a=function(t,e,n,r,i,o,a){return s(e&n|~e&r,t,e,i,o,a)},u=function(t,e,n,r,i,o,a){return s(e&r|n&~r,t,e,i,o,a)},c=function(t,e,n,r,i,o,a){return s(e^n^r,t,e,i,o,a)},l=function(t,e,n,r,i,o,a){return s(n^(e|~r),t,e,i,o,a)},h=function(t,n){t[n>>5]|=128<<n%32,t[(n+64>>>9<<4)+14]=n;for(var r,i,o,s,h=1732584193,f=-271733879,d=-1732584194,p=271733878,g=0;g<t.length;g+=16)r=h,i=f,o=d,s=p,h=a(h,f,d,p,t[g+0],7,-680876936),p=a(p,h,f,d,t[g+1],12,-389564586),d=a(d,p,h,f,t[g+2],17,606105819),f=a(f,d,p,h,t[g+3],22,-1044525330),h=a(h,f,d,p,t[g+4],7,-176418897),p=a(p,h,f,d,t[g+5],12,1200080426),d=a(d,p,h,f,t[g+6],17,-1473231341),f=a(f,d,p,h,t[g+7],22,-45705983),h=a(h,f,d,p,t[g+8],7,1770035416),p=a(p,h,f,d,t[g+9],12,-1958414417),d=a(d,p,h,f,t[g+10],17,-42063),f=a(f,d,p,h,t[g+11],22,-1990404162),h=a(h,f,d,p,t[g+12],7,1804603682),p=a(p,h,f,d,t[g+13],12,-40341101),d=a(d,p,h,f,t[g+14],17,-1502002290),f=a(f,d,p,h,t[g+15],22,1236535329),h=u(h,f,d,p,t[g+1],5,-165796510),p=u(p,h,f,d,t[g+6],9,-1069501632),d=u(d,p,h,f,t[g+11],14,643717713),f=u(f,d,p,h,t[g+0],20,-373897302),h=u(h,f,d,p,t[g+5],5,-701558691),p=u(p,h,f,d,t[g+10],9,38016083),d=u(d,p,h,f,t[g+15],14,-660478335),f=u(f,d,p,h,t[g+4],20,-405537848),h=u(h,f,d,p,t[g+9],5,568446438),p=u(p,h,f,d,t[g+14],9,-1019803690),d=u(d,p,h,f,t[g+3],14,-187363961),f=u(f,d,p,h,t[g+8],20,1163531501),h=u(h,f,d,p,t[g+13],5,-1444681467),p=u(p,h,f,d,t[g+2],9,-51403784),d=u(d,p,h,f,t[g+7],14,1735328473),f=u(f,d,p,h,t[g+12],20,-1926607734),h=c(h,f,d,p,t[g+5],4,-378558),p=c(p,h,f,d,t[g+8],11,-2022574463),d=c(d,p,h,f,t[g+11],16,1839030562),f=c(f,d,p,h,t[g+14],23,-35309556),h=c(h,f,d,p,t[g+1],4,-1530992060),p=c(p,h,f,d,t[g+4],11,1272893353),d=c(d,p,h,f,t[g+7],16,-155497632),f=c(f,d,p,h,t[g+10],23,-1094730640),h=c(h,f,d,p,t[g+13],4,681279174),p=c(p,h,f,d,t[g+0],11,-358537222),d=c(d,p,h,f,t[g+3],16,-722521979),f=c(f,d,p,h,t[g+6],23,76029189),h=c(h,f,d,p,t[g+9],4,-640364487),p=c(p,h,f,d,t[g+12],11,-421815835),d=c(d,p,h,f,t[g+15],16,530742520),f=c(f,d,p,h,t[g+2],23,-995338651),h=l(h,f,d,p,t[g+0],6,-198630844),p=l(p,h,f,d,t[g+7],10,1126891415),d=l(d,p,h,f,t[g+14],15,-1416354905),f=l(f,d,p,h,t[g+5],21,-57434055),h=l(h,f,d,p,t[g+12],6,1700485571),p=l(p,h,f,d,t[g+3],10,-1894986606),d=l(d,p,h,f,t[g+10],15,-1051523),f=l(f,d,p,h,t[g+1],21,-2054922799),h=l(h,f,d,p,t[g+8],6,1873313359),p=l(p,h,f,d,t[g+15],10,-30611744),d=l(d,p,h,f,t[g+6],15,-1560198380),f=l(f,d,p,h,t[g+13],21,1309151649),h=l(h,f,d,p,t[g+4],6,-145523070),p=l(p,h,f,d,t[g+11],10,-1120210379),d=l(d,p,h,f,t[g+2],15,718787259),f=l(f,d,p,h,t[g+9],21,-343485551),h=e(h,r),f=e(f,i),d=e(d,o),p=e(p,s);return[h,f,d,p]},f={hexdigest:function(t){return o(h(r(t),8*t.length))},hash:function(t){return i(h(r(t),8*t.length))}};return f}),function(t,e){"function"==typeof define&&define.amd?define("strophe-utils",function(){return e()}):t.stropheUtils=e()}(this,function(){var t={utf16to8:function(t){var e,n,r="",i=t.length;for(e=0;e<i;e++)n=t.charCodeAt(e),n>=0&&n<=127?r+=t.charAt(e):n>2047?(r+=String.fromCharCode(224|n>>12&15),r+=String.fromCharCode(128|n>>6&63),r+=String.fromCharCode(128|n>>0&63)):(r+=String.fromCharCode(192|n>>6&31),r+=String.fromCharCode(128|n>>0&63));return r}};return t}),function(t,e){return"function"==typeof define&&define.amd?void define("strophe-polyfill",[],function(){return e()}):e()}(this,function(){Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice,r=Array.prototype.concat,i=n.call(arguments,1);return function(){return e.apply(t?t:this,r.call(i,n.call(arguments,0)))}}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=e);n<e;n++)if(n in this&&this[n]===t)return n;return-1})}),function(t,e){if("function"==typeof define&&define.amd)define("strophe-core",["strophe-sha1","strophe-base64","strophe-md5","strophe-utils","strophe-polyfill"],function(){return e.apply(this,arguments)});else{var n=e(t.SHA1,t.Base64,t.MD5,t.stropheUtils);window.Strophe=n.Strophe,window.$build=n.$build,window.$iq=n.$iq,window.$msg=n.$msg,window.$pres=n.$pres,window.SHA1=n.SHA1,window.Base64=n.Base64,window.MD5=n.MD5,window.b64_hmac_sha1=n.SHA1.b64_hmac_sha1,window.b64_sha1=n.SHA1.b64_sha1,window.str_hmac_sha1=n.SHA1.str_hmac_sha1,window.str_sha1=n.SHA1.str_sha1}}(this,function(t,e,n,r){function i(t,e){return new u.Builder(t,e)}function o(t){return new u.Builder("message",t)}function s(t){return new u.Builder("iq",t)}function a(t){return new u.Builder("presence",t)}var u;return u={VERSION:"1.2.4",NS:{HTTPBIND:"http://jabber.org/protocol/httpbind",BOSH:"urn:xmpp:xbosh",CLIENT:"jabber:client",AUTH:"jabber:iq:auth",ROSTER:"jabber:iq:roster",PROFILE:"jabber:iq:profile",DISCO_INFO:"http://jabber.org/protocol/disco#info",DISCO_ITEMS:"http://jabber.org/protocol/disco#items",MUC:"http://jabber.org/protocol/muc",SASL:"urn:ietf:params:xml:ns:xmpp-sasl",STREAM:"http://etherx.jabber.org/streams",FRAMING:"urn:ietf:params:xml:ns:xmpp-framing",BIND:"urn:ietf:params:xml:ns:xmpp-bind",SESSION:"urn:ietf:params:xml:ns:xmpp-session",VERSION:"jabber:iq:version",STANZAS:"urn:ietf:params:xml:ns:xmpp-stanzas",XHTML_IM:"http://jabber.org/protocol/xhtml-im",XHTML:"http://www.w3.org/1999/xhtml"},XHTML:{tags:["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul","body"],attributes:{a:["href"],blockquote:["style"],br:[],cite:["style"],em:[],img:["src","alt","style","height","width"],li:["style"],ol:["style"],p:["style"],span:["style"],strong:[],ul:["style"],body:[]},css:["background-color","color","font-family","font-size","font-style","font-weight","margin-left","margin-right","text-align","text-decoration"],validTag:function(t){for(var e=0;e<u.XHTML.tags.length;e++)if(t==u.XHTML.tags[e])return!0;return!1},validAttribute:function(t,e){if("undefined"!=typeof u.XHTML.attributes[t]&&u.XHTML.attributes[t].length>0)for(var n=0;n<u.XHTML.attributes[t].length;n++)if(e==u.XHTML.attributes[t][n])return!0;return!1},validCSS:function(t){for(var e=0;e<u.XHTML.css.length;e++)if(t==u.XHTML.css[e])return!0;return!1}},Status:{ERROR:0,CONNECTING:1,CONNFAIL:2,AUTHENTICATING:3,AUTHFAIL:4,CONNECTED:5,DISCONNECTED:6,DISCONNECTING:7,ATTACHED:8,REDIRECT:9},LogLevel:{DEBUG:0,INFO:1,WARN:2,ERROR:3,FATAL:4},ElementType:{NORMAL:1,TEXT:3,CDATA:4,FRAGMENT:11},TIMEOUT:1.1,SECONDARY_TIMEOUT:.1,addNamespace:function(t,e){u.NS[t]=e},forEachChild:function(t,e,n){var r,i;for(r=0;r<t.childNodes.length;r++)i=t.childNodes[r],i.nodeType!=u.ElementType.NORMAL||e&&!this.isTagEqual(i,e)||n(i)},isTagEqual:function(t,e){return t.tagName==e},_xmlGenerator:null,_makeGenerator:function(){var t;return void 0===document.implementation.createDocument||document.implementation.createDocument&&document.documentMode&&document.documentMode<10?(t=this._getIEXmlDom(),t.appendChild(t.createElement("strophe"))):t=document.implementation.createDocument("jabber:client","strophe",null),t},xmlGenerator:function(){return u._xmlGenerator||(u._xmlGenerator=u._makeGenerator()),u._xmlGenerator},_getIEXmlDom:function(){for(var t=null,e=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"],n=0;n<e.length&&null===t;n++)try{t=new ActiveXObject(e[n])}catch(r){t=null}return t},xmlElement:function(t){if(!t)return null;var e,n,r,i=u.xmlGenerator().createElement(t);for(e=1;e<arguments.length;e++){var o=arguments[e];if(o)if("string"==typeof o||"number"==typeof o)i.appendChild(u.xmlTextNode(o));else if("object"==typeof o&&"function"==typeof o.sort)for(n=0;n<o.length;n++){var s=o[n];"object"==typeof s&&"function"==typeof s.sort&&void 0!==s[1]&&null!==s[1]&&i.setAttribute(s[0],s[1])}else if("object"==typeof o)for(r in o)o.hasOwnProperty(r)&&void 0!==o[r]&&null!==o[r]&&i.setAttribute(r,o[r])}return i},xmlescape:function(t){return t=t.replace(/\&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/"/g,"&quot;")},xmlunescape:function(t){return t=t.replace(/\&amp;/g,"&"),t=t.replace(/&lt;/g,"<"),t=t.replace(/&gt;/g,">"),t=t.replace(/&apos;/g,"'"),t=t.replace(/&quot;/g,'"')},xmlTextNode:function(t){return u.xmlGenerator().createTextNode(t)},xmlHtmlNode:function(t){var e;if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t);return e},getText:function(t){if(!t)return null;var e="";0===t.childNodes.length&&t.nodeType==u.ElementType.TEXT&&(e+=t.nodeValue);for(var n=0;n<t.childNodes.length;n++)t.childNodes[n].nodeType==u.ElementType.TEXT&&(e+=t.childNodes[n].nodeValue);return u.xmlescape(e)},copyElement:function(t){var e,n;if(t.nodeType==u.ElementType.NORMAL){for(n=u.xmlElement(t.tagName),e=0;e<t.attributes.length;e++)n.setAttribute(t.attributes[e].nodeName,t.attributes[e].value);for(e=0;e<t.childNodes.length;e++)n.appendChild(u.copyElement(t.childNodes[e]))}else t.nodeType==u.ElementType.TEXT&&(n=u.xmlGenerator().createTextNode(t.nodeValue));return n},createHtml:function(t){var e,n,r,i,o,s,a,c,l,h,f;if(t.nodeType==u.ElementType.NORMAL)if(i=t.nodeName.toLowerCase(),u.XHTML.validTag(i))try{for(n=u.xmlElement(i),e=0;e<u.XHTML.attributes[i].length;e++)if(o=u.XHTML.attributes[i][e],s=t.getAttribute(o),"undefined"!=typeof s&&null!==s&&""!==s&&s!==!1&&0!==s)if("style"==o&&"object"==typeof s&&"undefined"!=typeof s.cssText&&(s=s.cssText),"style"==o){for(a=[],c=s.split(";"),r=0;r<c.length;r++)l=c[r].split(":"),h=l[0].replace(/^\s*/,"").replace(/\s*$/,"").toLowerCase(),u.XHTML.validCSS(h)&&(f=l[1].replace(/^\s*/,"").replace(/\s*$/,""),a.push(h+": "+f));a.length>0&&(s=a.join("; "),n.setAttribute(o,s))}else n.setAttribute(o,s);for(e=0;e<t.childNodes.length;e++)n.appendChild(u.createHtml(t.childNodes[e]))}catch(d){n=u.xmlTextNode("")}else for(n=u.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)n.appendChild(u.createHtml(t.childNodes[e]));else if(t.nodeType==u.ElementType.FRAGMENT)for(n=u.xmlGenerator().createDocumentFragment(),e=0;e<t.childNodes.length;e++)n.appendChild(u.createHtml(t.childNodes[e]));else t.nodeType==u.ElementType.TEXT&&(n=u.xmlTextNode(t.nodeValue));return n},escapeNode:function(t){return"string"!=typeof t?t:t.replace(/^\s+|\s+$/g,"").replace(/\\/g,"\\5c").replace(/ /g,"\\20").replace(/\"/g,"\\22").replace(/\&/g,"\\26").replace(/\'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")},unescapeNode:function(t){return"string"!=typeof t?t:t.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")},getNodeFromJid:function(t){return t.indexOf("@")<0?null:t.split("@")[0]},getDomainFromJid:function(t){var e=u.getBareJidFromJid(t);if(e.indexOf("@")<0)return e;var n=e.split("@");return n.splice(0,1),n.join("@")},getResourceFromJid:function(t){var e=t.split("/");return e.length<2?null:(e.splice(0,1),e.join("/"))},getBareJidFromJid:function(t){return t?t.split("/")[0]:null},log:function(t,e){},debug:function(t){this.log(this.LogLevel.DEBUG,t)},info:function(t){this.log(this.LogLevel.INFO,t)},warn:function(t){this.log(this.LogLevel.WARN,t)},error:function(t){this.log(this.LogLevel.ERROR,t)},fatal:function(t){this.log(this.LogLevel.FATAL,t)},serialize:function(t){var e;if(!t)return null;"function"==typeof t.tree&&(t=t.tree());var n,r,i=t.nodeName;for(t.getAttribute("_realname")&&(i=t.getAttribute("_realname")),e="<"+i,n=0;n<t.attributes.length;n++)"_realname"!=t.attributes[n].nodeName&&(e+=" "+t.attributes[n].nodeName+"='"+t.attributes[n].value.replace(/&/g,"&amp;").replace(/\'/g,"&apos;").replace(/>/g,"&gt;").replace(/</g,"&lt;")+"'");if(t.childNodes.length>0){for(e+=">",n=0;n<t.childNodes.length;n++)switch(r=t.childNodes[n],r.nodeType){case u.ElementType.NORMAL:e+=u.serialize(r);break;case u.ElementType.TEXT:e+=u.xmlescape(r.nodeValue);break;case u.ElementType.CDATA:e+="<![CDATA["+r.nodeValue+"]]>"}e+="</"+i+">"}else e+="/>";return e},_requestId:0,_connectionPlugins:{},addConnectionPlugin:function(t,e){u._connectionPlugins[t]=e}},u.Builder=function(t,e){"presence"!=t&&"message"!=t&&"iq"!=t||(e&&!e.xmlns?e.xmlns=u.NS.CLIENT:e||(e={xmlns:u.NS.CLIENT})),this.nodeTree=u.xmlElement(t,e),this.node=this.nodeTree},u.Builder.prototype={tree:function(){return this.nodeTree},toString:function(){return u.serialize(this.nodeTree)},up:function(){return this.node=this.node.parentNode,this},attrs:function(t){for(var e in t)t.hasOwnProperty(e)&&(void 0===t[e]?this.node.removeAttribute(e):this.node.setAttribute(e,t[e]));return this},c:function(t,e,n){var r=u.xmlElement(t,e,n);return this.node.appendChild(r),"string"!=typeof n&&(this.node=r),this},cnode:function(t){var e,n=u.xmlGenerator();try{e=void 0!==n.importNode}catch(r){e=!1}var i=e?n.importNode(t,!0):u.copyElement(t);return this.node.appendChild(i),this.node=i,this},t:function(t){var e=u.xmlTextNode(t);return this.node.appendChild(e),this},h:function(t){var e=document.createElement("body");e.innerHTML=t;for(var n=u.createHtml(e);n.childNodes.length>0;)this.node.appendChild(n.childNodes[0]);return this}},u.Handler=function(t,e,n,r,i,o,s){this.handler=t,this.ns=e,this.name=n,this.type=r,this.id=i,this.options=s||{matchBare:!1},this.options.matchBare||(this.options.matchBare=!1),this.options.matchBare?this.from=o?u.getBareJidFromJid(o):null:this.from=o,this.user=!0},u.Handler.prototype={isMatch:function(t){var e,n=null;if(n=this.options.matchBare?u.getBareJidFromJid(t.getAttribute("from")):t.getAttribute("from"),e=!1,this.ns){var r=this;u.forEachChild(t,null,function(t){t.getAttribute("xmlns")==r.ns&&(e=!0)}),e=e||t.getAttribute("xmlns")==this.ns}else e=!0;var i=t.getAttribute("type");return!(!e||this.name&&!u.isTagEqual(t,this.name)||this.type&&(Array.isArray(this.type)?this.type.indexOf(i)==-1:i!=this.type)||this.id&&t.getAttribute("id")!=this.id||this.from&&n!=this.from)},run:function(t){var e=null;try{e=this.handler(t)}catch(n){throw n.sourceURL?u.fatal("error: "+this.handler+" "+n.sourceURL+":"+n.line+" - "+n.name+": "+n.message):n.fileName?("undefined"!=typeof console&&(console.trace(),console.error(this.handler," - error - ",n,n.message)),u.fatal("error: "+this.handler+" "+n.fileName+":"+n.lineNumber+" - "+n.name+": "+n.message)):u.fatal("error: "+n.message+"\n"+n.stack),n}return e},toString:function(){return"{Handler: "+this.handler+"("+this.name+","+this.id+","+this.ns+")}"}},u.TimedHandler=function(t,e){this.period=t,this.handler=e,this.lastCalled=(new Date).getTime(),this.user=!0},u.TimedHandler.prototype={run:function(){return this.lastCalled=(new Date).getTime(),this.handler()},reset:function(){this.lastCalled=(new Date).getTime()},toString:function(){return"{TimedHandler: "+this.handler+"("+this.period+")}"}},u.Connection=function(t,e){this.service=t,this.options=e||{};var n=this.options.protocol||"";0===t.indexOf("ws:")||0===t.indexOf("wss:")||0===n.indexOf("ws")?this._proto=new u.Websocket(this):this._proto=new u.Bosh(this),this.jid="",this.domain=null,this.features=null,this._sasl_data={},this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this._idleTimeout=null,this._disconnectTimeout=null,this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.do_authentication=!0,this.paused=!1,this.restored=!1,this._data=[],this._uniqueId=0,this._sasl_success_handler=null,this._sasl_failure_handler=null,this._sasl_challenge_handler=null,this.maxRetries=5,this._idleTimeout=setTimeout(this._onIdle.bind(this),100);for(var r in u._connectionPlugins)if(u._connectionPlugins.hasOwnProperty(r)){var i=u._connectionPlugins[r],o=function(){};o.prototype=i,this[r]=new o,this[r].init(this)}},u.Connection.prototype={reset:function(){this._proto._reset(),this.do_session=!1,this.do_bind=!1,this.timedHandlers=[],this.handlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._authentication={},this.authenticated=!1,this.connected=!1,this.disconnecting=!1,this.restored=!1,this._data=[],this._requests=[],this._uniqueId=0},pause:function(){this.paused=!0},resume:function(){this.paused=!1},getUniqueId:function(t){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)});return"string"==typeof t||"number"==typeof t?e+":"+t:e+""},connect:function(t,e,n,r,i,o,s){this.jid=t,this.authzid=u.getBareJidFromJid(this.jid),this.authcid=s||u.getNodeFromJid(this.jid),this.pass=e,this.servtype="xmpp",this.connect_callback=n,this.disconnecting=!1,this.connected=!1,this.authenticated=!1,this.restored=!1,this.domain=u.getDomainFromJid(this.jid),this._changeConnectStatus(u.Status.CONNECTING,null),this._proto._connect(r,i,o)},attach:function(t,e,n,r,i,o,s){if(!(this._proto instanceof u.Bosh))throw{name:"StropheSessionError",message:'The "attach" method can only be used with a BOSH connection.'};this._proto._attach(t,e,n,r,i,o,s)},restore:function(t,e,n,r,i){if(!this._sessionCachingSupported())throw{name:"StropheSessionError",message:'The "restore" method can only be used with a BOSH connection.'};this._proto._restore(t,e,n,r,i)},_sessionCachingSupported:function(){if(this._proto instanceof u.Bosh){if(!JSON)return!1;try{window.sessionStorage.setItem("_strophe_","_strophe_"),window.sessionStorage.removeItem("_strophe_")}catch(t){return!1}return!0}return!1},xmlInput:function(t){},xmlOutput:function(t){},rawInput:function(t){},rawOutput:function(t){},nextValidRid:function(t){},send:function(t){if(null!==t){if("function"==typeof t.sort)for(var e=0;e<t.length;e++)this._queueData(t[e]);else"function"==typeof t.tree?this._queueData(t.tree()):this._queueData(t);
this._proto._send()}},flush:function(){clearTimeout(this._idleTimeout),this._onIdle()},sendIQ:function(t,e,n,r){var i=null,o=this;"function"==typeof t.tree&&(t=t.tree());var s=t.getAttribute("id");s||(s=this.getUniqueId("sendIQ"),t.setAttribute("id",s));var a=t.getAttribute("to"),c=this.jid,l=this.addHandler(function(t){i&&o.deleteTimedHandler(i);var r=!1,s=t.getAttribute("from");if(s!==a&&(a||s!==u.getBareJidFromJid(c)&&s!==u.getDomainFromJid(c)&&s!==c)||(r=!0),!r)throw{name:"StropheError",message:"Got answer to IQ from wrong jid:"+s+"\nExpected jid: "+a};var l=t.getAttribute("type");if("result"==l)e&&e(t);else{if("error"!=l)throw{name:"StropheError",message:"Got bad IQ type of "+l};n&&n(t)}},null,"iq",["error","result"],s);return r&&(i=this.addTimedHandler(r,function(){return o.deleteHandler(l),n&&n(null),!1})),this.send(t),s},_queueData:function(t){if(null===t||!t.tagName||!t.childNodes)throw{name:"StropheError",message:"Cannot queue non-DOMElement."};this._data.push(t)},_sendRestart:function(){this._data.push("restart"),this._proto._sendRestart(),this._idleTimeout=setTimeout(this._onIdle.bind(this),100)},addTimedHandler:function(t,e){var n=new u.TimedHandler(t,e);return this.addTimeds.push(n),n},deleteTimedHandler:function(t){this.removeTimeds.push(t)},addHandler:function(t,e,n,r,i,o,s){var a=new u.Handler(t,e,n,r,i,o,s);return this.addHandlers.push(a),a},deleteHandler:function(t){this.removeHandlers.push(t);var e=this.addHandlers.indexOf(t);e>=0&&this.addHandlers.splice(e,1)},disconnect:function(t){if(this._changeConnectStatus(u.Status.DISCONNECTING,t),u.info("Disconnect was called because: "+t),this.connected){var e=!1;this.disconnecting=!0,this.authenticated&&(e=a({xmlns:u.NS.CLIENT,type:"unavailable"})),this._disconnectTimeout=this._addSysTimedHandler(3e3,this._onDisconnectTimeout.bind(this)),this._proto._disconnect(e)}else u.info("Disconnect was called before Strophe connected to the server"),this._proto._abortAllRequests()},_changeConnectStatus:function(t,e){for(var n in u._connectionPlugins)if(u._connectionPlugins.hasOwnProperty(n)){var r=this[n];if(r.statusChanged)try{r.statusChanged(t,e)}catch(i){u.error(""+n+" plugin caused an exception changing status: "+i)}}if(this.connect_callback)try{this.connect_callback(t,e)}catch(o){u.error("User connection callback caused an exception: "+o)}},_doDisconnect:function(t){"number"==typeof this._idleTimeout&&clearTimeout(this._idleTimeout),null!==this._disconnectTimeout&&(this.deleteTimedHandler(this._disconnectTimeout),this._disconnectTimeout=null),u.info("_doDisconnect was called"),this._proto._doDisconnect(),this.authenticated=!1,this.disconnecting=!1,this.restored=!1,this.handlers=[],this.timedHandlers=[],this.removeTimeds=[],this.removeHandlers=[],this.addTimeds=[],this.addHandlers=[],this._changeConnectStatus(u.Status.DISCONNECTED,t),this.connected=!1},_dataRecv:function(t,e){u.info("_dataRecv called");var n=this._proto._reqToData(t);if(null!==n){this.xmlInput!==u.Connection.prototype.xmlInput&&(n.nodeName===this._proto.strip&&n.childNodes.length?this.xmlInput(n.childNodes[0]):this.xmlInput(n)),this.rawInput!==u.Connection.prototype.rawInput&&(e?this.rawInput(e):this.rawInput(u.serialize(n)));for(var r,i;this.removeHandlers.length>0;)i=this.removeHandlers.pop(),r=this.handlers.indexOf(i),r>=0&&this.handlers.splice(r,1);for(;this.addHandlers.length>0;)this.handlers.push(this.addHandlers.pop());if(this.disconnecting&&this._proto._emptyQueue())return void this._doDisconnect();var o,s,a=n.getAttribute("type");if(null!==a&&"terminate"==a){if(this.disconnecting)return;return o=n.getAttribute("condition"),s=n.getElementsByTagName("conflict"),null!==o?("remote-stream-error"==o&&s.length>0&&(o="conflict"),this._changeConnectStatus(u.Status.CONNFAIL,o)):this._changeConnectStatus(u.Status.CONNFAIL,"unknown"),void this._doDisconnect(o)}var c=this;u.forEachChild(n,null,function(t){var e,n;for(n=c.handlers,c.handlers=[],e=0;e<n.length;e++){var r=n[e];try{!r.isMatch(t)||!c.authenticated&&r.user?c.handlers.push(r):r.run(t)&&c.handlers.push(r)}catch(i){u.warn("Removing Strophe handlers due to uncaught exception: "+i.message)}}})}},mechanisms:{},_connect_cb:function(t,e,n){u.info("_connect_cb was called"),this.connected=!0;var r;try{r=this._proto._reqToData(t)}catch(i){if("badformat"!=i)throw i;this._changeConnectStatus(u.Status.CONNFAIL,"bad-format"),this._doDisconnect("bad-format")}if(r){this.xmlInput!==u.Connection.prototype.xmlInput&&(r.nodeName===this._proto.strip&&r.childNodes.length?this.xmlInput(r.childNodes[0]):this.xmlInput(r)),this.rawInput!==u.Connection.prototype.rawInput&&(n?this.rawInput(n):this.rawInput(u.serialize(r)));var o=this._proto._connect_cb(r);if(o!==u.Status.CONNFAIL){this._authentication.sasl_scram_sha1=!1,this._authentication.sasl_plain=!1,this._authentication.sasl_digest_md5=!1,this._authentication.sasl_anonymous=!1,this._authentication.legacy_auth=!1;var s;s=r.getElementsByTagNameNS?r.getElementsByTagNameNS(u.NS.STREAM,"features").length>0:r.getElementsByTagName("stream:features").length>0||r.getElementsByTagName("features").length>0;var a,c,l=r.getElementsByTagName("mechanism"),h=[],f=!1;if(!s)return void this._proto._no_auth_received(e);if(l.length>0)for(a=0;a<l.length;a++)c=u.getText(l[a]),this.mechanisms[c]&&h.push(this.mechanisms[c]);return this._authentication.legacy_auth=r.getElementsByTagName("auth").length>0,(f=this._authentication.legacy_auth||h.length>0)?void(this.do_authentication!==!1&&this.authenticate(h)):void this._proto._no_auth_received(e)}}},authenticate:function(t){var n;for(n=0;n<t.length-1;++n){for(var r=n,o=n+1;o<t.length;++o)t[o].prototype.priority>t[r].prototype.priority&&(r=o);if(r!=n){var a=t[n];t[n]=t[r],t[r]=a}}var c=!1;for(n=0;n<t.length;++n)if(t[n].test(this)){this._sasl_success_handler=this._addSysHandler(this._sasl_success_cb.bind(this),null,"success",null,null),this._sasl_failure_handler=this._addSysHandler(this._sasl_failure_cb.bind(this),null,"failure",null,null),this._sasl_challenge_handler=this._addSysHandler(this._sasl_challenge_cb.bind(this),null,"challenge",null,null),this._sasl_mechanism=new t[n],this._sasl_mechanism.onStart(this);var l=i("auth",{xmlns:u.NS.SASL,mechanism:this._sasl_mechanism.name});if(this._sasl_mechanism.isClientFirst){var h=this._sasl_mechanism.onChallenge(this,null);l.t(e.encode(h))}this.send(l.tree()),c=!0;break}c||(null===u.getNodeFromJid(this.jid)?(this._changeConnectStatus(u.Status.CONNFAIL,"x-strophe-bad-non-anon-jid"),this.disconnect("x-strophe-bad-non-anon-jid")):(this._changeConnectStatus(u.Status.AUTHENTICATING,null),this._addSysHandler(this._auth1_cb.bind(this),null,null,null,"_auth_1"),this.send(s({type:"get",to:this.domain,id:"_auth_1"}).c("query",{xmlns:u.NS.AUTH}).c("username",{}).t(u.getNodeFromJid(this.jid)).tree())))},_sasl_challenge_cb:function(t){var n=e.decode(u.getText(t)),r=this._sasl_mechanism.onChallenge(this,n),o=i("response",{xmlns:u.NS.SASL});return""!==r&&o.t(e.encode(r)),this.send(o.tree()),!0},_auth1_cb:function(t){var e=s({type:"set",id:"_auth_2"}).c("query",{xmlns:u.NS.AUTH}).c("username",{}).t(u.getNodeFromJid(this.jid)).up().c("password").t(this.pass);return u.getResourceFromJid(this.jid)||(this.jid=u.getBareJidFromJid(this.jid)+"/strophe"),e.up().c("resource",{}).t(u.getResourceFromJid(this.jid)),this._addSysHandler(this._auth2_cb.bind(this),null,null,null,"_auth_2"),this.send(e.tree()),!1},_sasl_success_cb:function(t){if(this._sasl_data["server-signature"]){var n,r=e.decode(u.getText(t)),i=/([a-z]+)=([^,]+)(,|$)/,o=r.match(i);if("v"==o[1]&&(n=o[2]),n!=this._sasl_data["server-signature"])return this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_data={},this._sasl_failure_cb(null)}u.info("SASL authentication succeeded."),this._sasl_mechanism&&this._sasl_mechanism.onSuccess(),this.deleteHandler(this._sasl_failure_handler),this._sasl_failure_handler=null,this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null);var s=[],a=function(t,e){for(;t.length;)this.deleteHandler(t.pop());return this._sasl_auth1_cb.bind(this)(e),!1};return s.push(this._addSysHandler(function(t){a.bind(this)(s,t)}.bind(this),null,"stream:features",null,null)),s.push(this._addSysHandler(function(t){a.bind(this)(s,t)}.bind(this),u.NS.STREAM,"features",null,null)),this._sendRestart(),!1},_sasl_auth1_cb:function(t){this.features=t;var e,n;for(e=0;e<t.childNodes.length;e++)n=t.childNodes[e],"bind"==n.nodeName&&(this.do_bind=!0),"session"==n.nodeName&&(this.do_session=!0);if(!this.do_bind)return this._changeConnectStatus(u.Status.AUTHFAIL,null),!1;this._addSysHandler(this._sasl_bind_cb.bind(this),null,null,null,"_bind_auth_2");var r=u.getResourceFromJid(this.jid);return r?this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:u.NS.BIND}).c("resource",{}).t(r).tree()):this.send(s({type:"set",id:"_bind_auth_2"}).c("bind",{xmlns:u.NS.BIND}).tree()),!1},_sasl_bind_cb:function(t){if("error"==t.getAttribute("type")){u.info("SASL binding failed.");var e,n=t.getElementsByTagName("conflict");return n.length>0&&(e="conflict"),this._changeConnectStatus(u.Status.AUTHFAIL,e),!1}var r,i=t.getElementsByTagName("bind");return i.length>0?(r=i[0].getElementsByTagName("jid"),void(r.length>0&&(this.jid=u.getText(r[0]),this.do_session?(this._addSysHandler(this._sasl_session_cb.bind(this),null,null,null,"_session_auth_2"),this.send(s({type:"set",id:"_session_auth_2"}).c("session",{xmlns:u.NS.SESSION}).tree())):(this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null))))):(u.info("SASL binding failed."),this._changeConnectStatus(u.Status.AUTHFAIL,null),!1)},_sasl_session_cb:function(t){if("result"==t.getAttribute("type"))this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null);else if("error"==t.getAttribute("type"))return u.info("Session creation failed."),this._changeConnectStatus(u.Status.AUTHFAIL,null),!1;return!1},_sasl_failure_cb:function(t){return this._sasl_success_handler&&(this.deleteHandler(this._sasl_success_handler),this._sasl_success_handler=null),this._sasl_challenge_handler&&(this.deleteHandler(this._sasl_challenge_handler),this._sasl_challenge_handler=null),this._sasl_mechanism&&this._sasl_mechanism.onFailure(),this._changeConnectStatus(u.Status.AUTHFAIL,null),!1},_auth2_cb:function(t){return"result"==t.getAttribute("type")?(this.authenticated=!0,this._changeConnectStatus(u.Status.CONNECTED,null)):"error"==t.getAttribute("type")&&(this._changeConnectStatus(u.Status.AUTHFAIL,null),this.disconnect("authentication failed")),!1},_addSysTimedHandler:function(t,e){var n=new u.TimedHandler(t,e);return n.user=!1,this.addTimeds.push(n),n},_addSysHandler:function(t,e,n,r,i){var o=new u.Handler(t,e,n,r,i);return o.user=!1,this.addHandlers.push(o),o},_onDisconnectTimeout:function(){return u.info("_onDisconnectTimeout was called"),this._proto._onDisconnectTimeout(),this._doDisconnect(),!1},_onIdle:function(){for(var t,e,n,r;this.addTimeds.length>0;)this.timedHandlers.push(this.addTimeds.pop());for(;this.removeTimeds.length>0;)e=this.removeTimeds.pop(),t=this.timedHandlers.indexOf(e),t>=0&&this.timedHandlers.splice(t,1);var i=(new Date).getTime();for(r=[],t=0;t<this.timedHandlers.length;t++)e=this.timedHandlers[t],!this.authenticated&&e.user||(n=e.lastCalled+e.period,n-i<=0?e.run()&&r.push(e):r.push(e));this.timedHandlers=r,clearTimeout(this._idleTimeout),this._proto._onIdle(),this.connected&&(this._idleTimeout=setTimeout(this._onIdle.bind(this),100))}},u.SASLMechanism=function(t,e,n){this.name=t,this.isClientFirst=e,this.priority=n},u.SASLMechanism.prototype={test:function(t){return!0},onStart:function(t){this._connection=t},onChallenge:function(t,e){throw new Error("You should implement challenge handling!")},onFailure:function(){this._connection=null},onSuccess:function(){this._connection=null}},u.SASLAnonymous=function(){},u.SASLAnonymous.prototype=new u.SASLMechanism("ANONYMOUS",(!1),10),u.SASLAnonymous.test=function(t){return null===t.authcid},u.Connection.prototype.mechanisms[u.SASLAnonymous.prototype.name]=u.SASLAnonymous,u.SASLPlain=function(){},u.SASLPlain.prototype=new u.SASLMechanism("PLAIN",(!0),20),u.SASLPlain.test=function(t){return null!==t.authcid},u.SASLPlain.prototype.onChallenge=function(t){var e=t.authzid;return e+="\0",e+=t.authcid,e+="\0",e+=t.pass,r.utf16to8(e)},u.Connection.prototype.mechanisms[u.SASLPlain.prototype.name]=u.SASLPlain,u.SASLSHA1=function(){},u.SASLSHA1.prototype=new u.SASLMechanism("SCRAM-SHA-1",(!0),40),u.SASLSHA1.test=function(t){return null!==t.authcid},u.SASLSHA1.prototype.onChallenge=function(i,o,s){var a=s||n.hexdigest(1234567890*Math.random()),u="n="+r.utf16to8(i.authcid);return u+=",r=",u+=a,i._sasl_data.cnonce=a,i._sasl_data["client-first-message-bare"]=u,u="n,,"+u,this.onChallenge=function(n,i){for(var o,s,a,u,c,l,h,f,d,p,g,v,m="c=biws,",y=n._sasl_data["client-first-message-bare"]+","+i+",",b=n._sasl_data.cnonce,_=/([a-z]+)=([^,]+)(,|$)/;i.match(_);){var w=i.match(_);switch(i=i.replace(w[0],""),w[1]){case"r":o=w[2];break;case"s":s=w[2];break;case"i":a=w[2]}}if(o.substr(0,b.length)!==b)return n._sasl_data={},n._sasl_failure_cb();for(m+="r="+o,y+=m,s=e.decode(s),s+="\0\0\0",d=r.utf16to8(n.pass),u=l=t.core_hmac_sha1(d,s),h=1;h<a;h++){for(c=t.core_hmac_sha1(d,t.binb2str(l)),f=0;f<5;f++)u[f]^=c[f];l=c}for(u=t.binb2str(u),p=t.core_hmac_sha1(u,"Client Key"),g=t.str_hmac_sha1(u,"Server Key"),v=t.core_hmac_sha1(t.str_sha1(t.binb2str(p)),y),n._sasl_data["server-signature"]=t.b64_hmac_sha1(g,y),f=0;f<5;f++)p[f]^=v[f];return m+=",p="+e.encode(t.binb2str(p))}.bind(this),u},u.Connection.prototype.mechanisms[u.SASLSHA1.prototype.name]=u.SASLSHA1,u.SASLMD5=function(){},u.SASLMD5.prototype=new u.SASLMechanism("DIGEST-MD5",(!1),30),u.SASLMD5.test=function(t){return null!==t.authcid},u.SASLMD5.prototype._quote=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},u.SASLMD5.prototype.onChallenge=function(t,e,i){for(var o,s=/([a-z]+)=("[^"]+"|[^,"]+)(?:,|$)/,a=i||n.hexdigest(""+1234567890*Math.random()),u="",c=null,l="",h="";e.match(s);)switch(o=e.match(s),e=e.replace(o[0],""),o[2]=o[2].replace(/^"(.+)"$/,"$1"),o[1]){case"realm":u=o[2];break;case"nonce":l=o[2];break;case"qop":h=o[2];break;case"host":c=o[2]}var f=t.servtype+"/"+t.domain;null!==c&&(f=f+"/"+c);var d=r.utf16to8(t.authcid+":"+u+":"+this._connection.pass),p=n.hash(d)+":"+l+":"+a,g="AUTHENTICATE:"+f,v="";return v+="charset=utf-8,",v+="username="+this._quote(r.utf16to8(t.authcid))+",",v+="realm="+this._quote(u)+",",v+="nonce="+this._quote(l)+",",v+="nc=00000001,",v+="cnonce="+this._quote(a)+",",v+="digest-uri="+this._quote(f)+",",v+="response="+n.hexdigest(n.hexdigest(p)+":"+l+":00000001:"+a+":auth:"+n.hexdigest(g))+",",v+="qop=auth",this.onChallenge=function(){return""}.bind(this),v},u.Connection.prototype.mechanisms[u.SASLMD5.prototype.name]=u.SASLMD5,{Strophe:u,$build:i,$msg:o,$iq:s,$pres:a,SHA1:t,Base64:e,MD5:n}}),function(t,e){return"function"==typeof define&&define.amd?void define("strophe-bosh",["strophe-core"],function(t){return e(t.Strophe,t.$build)}):e(Strophe,$build)}(this,function(t,e){return t.Request=function(e,n,r,i){this.id=++t._requestId,this.xmlData=e,this.data=t.serialize(e),this.origFunc=n,this.func=n,this.rid=r,this.date=NaN,this.sends=i||0,this.abort=!1,this.dead=null,this.age=function(){if(!this.date)return 0;var t=new Date;return(t-this.date)/1e3},this.timeDead=function(){if(!this.dead)return 0;var t=new Date;return(t-this.dead)/1e3},this.xhr=this._newXHR()},t.Request.prototype={getResponse:function(){var e=null;if(this.xhr.responseXML&&this.xhr.responseXML.documentElement){if(e=this.xhr.responseXML.documentElement,"parsererror"==e.tagName)throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),t.error("responseXML: "+t.serialize(this.xhr.responseXML)),"parsererror"}else if(this.xhr.responseText)throw t.error("invalid response received"),t.error("responseText: "+this.xhr.responseText),"badformat";return e},_newXHR:function(){var t=null;return window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml; charset=utf-8")):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLHTTP")),t.onreadystatechange=this.func.bind(null,this),t}},t.Bosh=function(t){this._conn=t,this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.hold=1,this.wait=60,this.window=5,this.errors=0,this._requests=[]},t.Bosh.prototype={strip:null,_buildBody:function(){var n=e("body",{rid:this.rid++,xmlns:t.NS.HTTPBIND});return null!==this.sid&&n.attrs({sid:this.sid}),this._conn.options.keepalive&&this._cacheSession(),n},_reset:function(){this.rid=Math.floor(4294967295*Math.random()),this.sid=null,this.errors=0,window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_connect:function(e,n,r){this.wait=e||this.wait,this.hold=n||this.hold,this.errors=0;var i=this._buildBody().attrs({to:this._conn.domain,"xml:lang":"en",wait:this.wait,hold:this.hold,content:"text/xml; charset=utf-8",ver:"1.6","xmpp:version":"1.0","xmlns:xmpp":t.NS.BOSH});r&&i.attrs({route:r});var o=this._conn._connect_cb;this._requests.push(new t.Request(i.tree(),this._onRequestStateChange.bind(this,o.bind(this._conn)),i.tree().getAttribute("rid"))),this._throttledRequestHandler()},_attach:function(e,n,r,i,o,s,a){this._conn.jid=e,this.sid=n,this.rid=r,this._conn.connect_callback=i,this._conn.domain=t.getDomainFromJid(this._conn.jid),this._conn.authenticated=!0,this._conn.connected=!0,this.wait=o||this.wait,this.hold=s||this.hold,this.window=a||this.window,this._conn._changeConnectStatus(t.Status.ATTACHED,null)},_restore:function(e,n,r,i,o){var s=JSON.parse(window.sessionStorage.getItem("strophe-bosh-session"));if(!("undefined"!=typeof s&&null!==s&&s.rid&&s.sid&&s.jid)||"undefined"!=typeof e&&"null"!==e&&t.getBareJidFromJid(s.jid)!=t.getBareJidFromJid(e))throw{name:"StropheSessionError",message:"_restore: no restoreable session."};this._conn.restored=!0,this._attach(s.jid,s.sid,s.rid,n,r,i,o)},_cacheSession:function(){this._conn.authenticated?this._conn.jid&&this.rid&&this.sid&&window.sessionStorage.setItem("strophe-bosh-session",JSON.stringify({jid:this._conn.jid,rid:this.rid,sid:this.sid})):window.sessionStorage.removeItem("strophe-bosh-session")},_connect_cb:function(e){var n,r,i=e.getAttribute("type");if(null!==i&&"terminate"==i)return n=e.getAttribute("condition"),t.error("BOSH-Connection failed: "+n),r=e.getElementsByTagName("conflict"),null!==n?("remote-stream-error"==n&&r.length>0&&(n="conflict"),this._conn._changeConnectStatus(t.Status.CONNFAIL,n)):this._conn._changeConnectStatus(t.Status.CONNFAIL,"unknown"),this._conn._doDisconnect(n),t.Status.CONNFAIL;this.sid||(this.sid=e.getAttribute("sid"));var o=e.getAttribute("requests");o&&(this.window=parseInt(o,10));var s=e.getAttribute("hold");s&&(this.hold=parseInt(s,10));var a=e.getAttribute("wait");a&&(this.wait=parseInt(a,10))},_disconnect:function(t){this._sendTerminate(t)},_doDisconnect:function(){this.sid=null,this.rid=Math.floor(4294967295*Math.random()),window.sessionStorage.removeItem("strophe-bosh-session"),this._conn.nextValidRid(this.rid)},_emptyQueue:function(){return 0===this._requests.length},_hitError:function(e){this.errors++,t.warn("request errored, status: "+e+", number of errors: "+this.errors),this.errors>4&&this._conn._onDisconnectTimeout()},_no_auth_received:function(e){e=e?e.bind(this._conn):this._conn._connect_cb.bind(this._conn);var n=this._buildBody();this._requests.push(new t.Request(n.tree(),this._onRequestStateChange.bind(this,e.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()},_onDisconnectTimeout:function(){this._abortAllRequests()},_abortAllRequests:function(){for(var t;this._requests.length>0;)t=this._requests.pop(),t.abort=!0,t.xhr.abort(),t.xhr.onreadystatechange=function(){}},_onIdle:function(){var e=this._conn._data;if(this._conn.authenticated&&0===this._requests.length&&0===e.length&&!this._conn.disconnecting&&(t.info("no requests during idle cycle, sending blank request"),e.push(null)),!this._conn.paused){if(this._requests.length<2&&e.length>0){for(var n=this._buildBody(),r=0;r<e.length;r++)null!==e[r]&&("restart"===e[r]?n.attrs({to:this._conn.domain,"xml:lang":"en","xmpp:restart":"true","xmlns:xmpp":t.NS.BOSH}):n.cnode(e[r]).up());delete this._conn._data,this._conn._data=[],this._requests.push(new t.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"))),this._throttledRequestHandler()}if(this._requests.length>0){var i=this._requests[0].age();null!==this._requests[0].dead&&this._requests[0].timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait)&&this._throttledRequestHandler(),i>Math.floor(t.TIMEOUT*this.wait)&&(t.warn("Request "+this._requests[0].id+" timed out, over "+Math.floor(t.TIMEOUT*this.wait)+" seconds since last activity"),this._throttledRequestHandler())}}},_onRequestStateChange:function(e,n){if(t.debug("request id "+n.id+"."+n.sends+" state changed to "+n.xhr.readyState),n.abort)return void(n.abort=!1);var r;if(4==n.xhr.readyState){r=0;try{r=n.xhr.status}catch(i){}if("undefined"==typeof r&&(r=0),this.disconnecting&&r>=400)return void this._hitError(r);var o=this._requests[0]==n,s=this._requests[1]==n;(r>0&&r<500||n.sends>5)&&(this._removeRequest(n),t.debug("request id "+n.id+" should now be removed")),200==r?((s||o&&this._requests.length>0&&this._requests[0].age()>Math.floor(t.SECONDARY_TIMEOUT*this.wait))&&this._restartRequest(0),this._conn.nextValidRid(Number(n.rid)+1),t.debug("request id "+n.id+"."+n.sends+" got 200"),e(n),this.errors=0):(t.error("request id "+n.id+"."+n.sends+" error "+r+" happened"),(0===r||r>=400&&r<600||r>=12e3)&&(this._hitError(r),r>=400&&r<500&&(this._conn._changeConnectStatus(t.Status.DISCONNECTING,null),this._conn._doDisconnect()))),r>0&&r<500||n.sends>5||this._throttledRequestHandler()}},_processRequest:function(e){var n=this,r=this._requests[e],i=-1;try{4==r.xhr.readyState&&(i=r.xhr.status)}catch(o){t.error("caught an error in _requests["+e+"], reqStatus: "+i)}if("undefined"==typeof i&&(i=-1),r.sends>this._conn.maxRetries)return void this._conn._onDisconnectTimeout();var s=r.age(),a=!isNaN(s)&&s>Math.floor(t.TIMEOUT*this.wait),u=null!==r.dead&&r.timeDead()>Math.floor(t.SECONDARY_TIMEOUT*this.wait),c=4==r.xhr.readyState&&(i<1||i>=500);if((a||u||c)&&(u&&t.error("Request "+this._requests[e].id+" timed out (secondary), restarting"),r.abort=!0,r.xhr.abort(),r.xhr.onreadystatechange=function(){},this._requests[e]=new t.Request(r.xmlData,r.origFunc,r.rid,r.sends),r=this._requests[e]),0===r.xhr.readyState){t.debug("request id "+r.id+"."+r.sends+" posting");try{r.xhr.open("POST",this._conn.service,!this._conn.options.sync),r.xhr.setRequestHeader("Content-Type","text/xml; charset=utf-8")}catch(l){return t.error("XHR open failed."),this._conn.connected||this._conn._changeConnectStatus(t.Status.CONNFAIL,"bad-service"),void this._conn.disconnect()}var h=function(){if(r.date=new Date,n._conn.options.customHeaders){var t=n._conn.options.customHeaders;for(var e in t)t.hasOwnProperty(e)&&r.xhr.setRequestHeader(e,t[e])}r.xhr.send(r.data)};if(r.sends>1){var f=1e3*Math.min(Math.floor(t.TIMEOUT*this.wait),Math.pow(r.sends,3));setTimeout(h,f)}else h();r.sends++,this._conn.xmlOutput!==t.Connection.prototype.xmlOutput&&(r.xmlData.nodeName===this.strip&&r.xmlData.childNodes.length?this._conn.xmlOutput(r.xmlData.childNodes[0]):this._conn.xmlOutput(r.xmlData)),this._conn.rawOutput!==t.Connection.prototype.rawOutput&&this._conn.rawOutput(r.data)}else t.debug("_processRequest: "+(0===e?"first":"second")+" request has readyState of "+r.xhr.readyState)},_removeRequest:function(e){t.debug("removing request");var n;for(n=this._requests.length-1;n>=0;n--)e==this._requests[n]&&this._requests.splice(n,1);e.xhr.onreadystatechange=function(){},this._throttledRequestHandler()},_restartRequest:function(t){var e=this._requests[t];null===e.dead&&(e.dead=new Date),this._processRequest(t)},_reqToData:function(t){try{return t.getResponse()}catch(e){if("parsererror"!=e)throw e;this._conn.disconnect("strophe-parsererror")}},_sendTerminate:function(e){t.info("_sendTerminate was called");var n=this._buildBody().attrs({type:"terminate"});e&&n.cnode(e.tree());var r=new t.Request(n.tree(),this._onRequestStateChange.bind(this,this._conn._dataRecv.bind(this._conn)),n.tree().getAttribute("rid"));this._requests.push(r),this._throttledRequestHandler()},_send:function(){clearTimeout(this._conn._idleTimeout),this._throttledRequestHandler(),this._conn._idleTimeout=setTimeout(this._conn._onIdle.bind(this._conn),100)},_sendRestart:function(){this._throttledRequestHandler(),clearTimeout(this._conn._idleTimeout)},_throttledRequestHandler:function(){this._requests?t.debug("_throttledRequestHandler called with "+this._requests.length+" requests"):t.debug("_throttledRequestHandler called with undefined requests"),this._requests&&0!==this._requests.length&&(this._requests.length>0&&this._processRequest(0),this._requests.length>1&&Math.abs(this._requests[0].rid-this._requests[1].rid)<this.window&&this._processRequest(1))}},t}),function(t,e){return"function"==typeof define&&define.amd?void define("strophe-websocket",["strophe-core"],function(t){return e(t.Strophe,t.$build)}):e(Strophe,$build)}(this,function(t,e){return t.Websocket=function(t){this._conn=t,this.strip="wrapper";var e=t.service;if(0!==e.indexOf("ws:")&&0!==e.indexOf("wss:")){var n="";n+="ws"===t.options.protocol&&"https:"!==window.location.protocol?"ws":"wss",n+="://"+window.location.host,n+=0!==e.indexOf("/")?window.location.pathname+e:e,t.service=n}},t.Websocket.prototype={_buildStream:function(){return e("open",{xmlns:t.NS.FRAMING,to:this._conn.domain,version:"1.0"})},_check_streamerror:function(e,n){var r;if(r=e.getElementsByTagNameNS?e.getElementsByTagNameNS(t.NS.STREAM,"error"):e.getElementsByTagName("stream:error"),0===r.length)return!1;for(var i=r[0],o="",s="",a="urn:ietf:params:xml:ns:xmpp-streams",u=0;u<i.childNodes.length;u++){var c=i.childNodes[u];if(c.getAttribute("xmlns")!==a)break;"text"===c.nodeName?s=c.textContent:o=c.nodeName}var l="WebSocket stream error: ";return l+=o?o:"unknown",s&&(l+=" - "+o),t.error(l),this._conn._changeConnectStatus(n,o),this._conn._doDisconnect(),!0},_reset:function(){if(this.socket){var t=function(){};this.socket.onopen=t,this.socket.onerror=t,this.socket.onclose=t,this.socket.onmessage=t}},_connect:function(){this._closeSocket(),this.socket=new WebSocket(this._conn.service,"xmpp"),this.socket.onopen=this._onOpen.bind(this),this.socket.onerror=this._onError.bind(this),this.socket.onclose=this._onClose.bind(this),this.socket.onmessage=this._connect_cb_wrapper.bind(this)},_connect_cb:function(e){var n=this._check_streamerror(e,t.Status.CONNFAIL);if(n)return t.Status.CONNFAIL},_handleStreamStart:function(e){var n=!1,r=e.getAttribute("xmlns");"string"!=typeof r?n="Missing xmlns in <open />":r!==t.NS.FRAMING&&(n="Wrong xmlns in <open />: "+r);var i=e.getAttribute("version");return"string"!=typeof i?n="Missing version in <open />":"1.0"!==i&&(n="Wrong version in <open />: "+i),!n||(this._conn._changeConnectStatus(t.Status.CONNFAIL,n),this._conn._doDisconnect(),!1)},_connect_cb_wrapper:function(e){if(0===e.data.indexOf("<open ")||0===e.data.indexOf("<?xml")){var n=e.data.replace(/^(<\?.*?\?>\s*)*/,"");if(""===n)return;var r=(new DOMParser).parseFromString(n,"text/xml").documentElement;this._conn.xmlInput(r),this._conn.rawInput(e.data),this._handleStreamStart(r)&&this._connect_cb(r)}else if(0===e.data.indexOf("<close ")){this._conn.rawInput(e.data),this._conn.xmlInput(e);var i=e.getAttribute("see-other-uri");i?(this._conn._changeConnectStatus(t.Status.REDIRECT,"Received see-other-uri, resetting connection"),this._conn.reset(),this._conn.service=i,this._connect()):(this._conn._changeConnectStatus(t.Status.CONNFAIL,"Received closing stream"),this._conn._doDisconnect())}else{var o=this._streamWrap(e.data),s=(new DOMParser).parseFromString(o,"text/xml").documentElement;this.socket.onmessage=this._onMessage.bind(this),this._conn._connect_cb(s,null,e.data)}},_disconnect:function(n){if(this.socket&&this.socket.readyState!==WebSocket.CLOSED){n&&this._conn.send(n);var r=e("close",{xmlns:t.NS.FRAMING});this._conn.xmlOutput(r);var i=t.serialize(r);this._conn.rawOutput(i);try{this.socket.send(i)}catch(o){t.info("Couldn't send <close /> tag.")}}this._conn._doDisconnect()},_doDisconnect:function(){t.info("WebSockets _doDisconnect was called"),this._closeSocket()},_streamWrap:function(t){return"<wrapper>"+t+"</wrapper>"},_closeSocket:function(){if(this.socket)try{this.socket.close()}catch(t){}this.socket=null},_emptyQueue:function(){return!0},_onClose:function(){this._conn.connected&&!this._conn.disconnecting?(t.error("Websocket closed unexcectedly"),this._conn._doDisconnect()):t.info("Websocket closed")},_no_auth_received:function(e){t.error("Server did not send any auth methods"),this._conn._changeConnectStatus(t.Status.CONNFAIL,"Server did not send any auth methods"),e&&(e=e.bind(this._conn))(),this._conn._doDisconnect()},_onDisconnectTimeout:function(){},_abortAllRequests:function(){},_onError:function(e){t.error("Websocket error "+e),this._conn._changeConnectStatus(t.Status.CONNFAIL,"The WebSocket connection could not be established was disconnected.")},_onIdle:function(){var e=this._conn._data;if(e.length>0&&!this._conn.paused){for(var n=0;n<e.length;n++)if(null!==e[n]){var r,i;r="restart"===e[n]?this._buildStream().tree():e[n],i=t.serialize(r),this._conn.xmlOutput(r),this._conn.rawOutput(i),this.socket.send(i)}this._conn._data=[]}},_onMessage:function(e){var n,r,i='<close xmlns="urn:ietf:params:xml:ns:xmpp-framing" />';if(e.data===i)return this._conn.rawInput(i),this._conn.xmlInput(e),void(this._conn.disconnecting||this._conn._doDisconnect());if(0===e.data.search("<open ")){if(n=(new DOMParser).parseFromString(e.data,"text/xml").documentElement,!this._handleStreamStart(n))return}else r=this._streamWrap(e.data),n=(new DOMParser).parseFromString(r,"text/xml").documentElement;return this._check_streamerror(n,t.Status.ERROR)?void 0:this._conn.disconnecting&&"presence"===n.firstChild.nodeName&&"unavailable"===n.firstChild.getAttribute("type")?(this._conn.xmlInput(n),void this._conn.rawInput(t.serialize(n))):void this._conn._dataRecv(n,e.data)},_onOpen:function(){t.info("Websocket open");var e=this._buildStream();this._conn.xmlOutput(e.tree());var n=t.serialize(e);this._conn.rawOutput(n),this.socket.send(n)},_reqToData:function(t){return t},_send:function(){this._conn.flush()},_sendRestart:function(){clearTimeout(this._conn._idleTimeout),this._conn._onIdle.bind(this._conn)()}},t}),function(t){"function"==typeof define&&define.amd&&define("strophe",["strophe-core","strophe-bosh","strophe-websocket"],function(t){return t})}(this),t){if("function"!=typeof define||!define.amd)return t(Strophe,$build,$msg,$iq,$pres);var e=t;require(["strophe"],function(t){e(t.Strophe,t.$build,t.$msg,t.$iq,t.$pres)})}}(function(t,e,n,r,i){window.Strophe=t,window.$build=e,window.$msg=n,window.$iq=r,window.$pres=i}),Strophe.addConnectionPlugin("streamManagement",{autoSendCountOnEveryIncomingStanza:!1,requestResponseInterval:5,_c:null,_NS:"urn:xmpp:sm:3",_isStreamManagementEnabled:!1,_serverProcesssedStanzasCounter:null,_clientProcessedStanzasCounter:null,_clientSentStanzasCounter:null,_originalSend:null,_requestHandler:null,_incomingHandler:null,_requestResponseIntervalCount:0,init:function(t){this._c=t,Strophe.addNamespace("SM",this._NS),this._originalSend=this._c.send,this._c.send=this.send.bind(this)},statusChanged:function(t){t!==Strophe.Status.CONNECTED&&t!==Strophe.Status.DISCONNECTED||(this._serverProcesssedStanzasCounter=0,this._clientProcessedStanzasCounter=0,this._clientSentStanzasCounter=0,this._isStreamManagementEnabled=!1,this._requestResponseIntervalCount=0,
this._requestHandler&&this._c.deleteHandler(this._requestHandler),this._incomingHandler&&this._c.deleteHandler(this._incomingHandler),this._requestHandler=this._c.addHandler(this._handleServerRequestHandler.bind(this),this._NS,"r"),this._incomingHandler=this._c.addHandler(this._incomingStanzaHandler.bind(this)))},enable:function(t,e){this._c.send($build("enable",{xmlns:this._NS,resume:!1}));var n=setTimeout(function(){e("Stream management couldn't be enabled.")},5e3),r=this;this._c.addHandler(function(e){Strophe.isTagEqual(e,"enabled")&&(clearTimeout(n),r._isStreamManagementEnabled=!0,t())})},send:function(t){return(Strophe.isTagEqual(t,"iq")||Strophe.isTagEqual(t,"presence")||t.node&&"message"===t.node.tagName||Strophe.isTagEqual(t,"message"))&&this._increaseSentStanzasCounter(),this._originalSend.call(this._c,t)},_incomingStanzaHandler:function(t){return Strophe.isTagEqual(t,"enabled")&&t.getAttribute("xmlns")===this._NS&&(this._isStreamManagementEnabled=!0),(Strophe.isTagEqual(t,"iq")||Strophe.isTagEqual(t,"presence")||Strophe.isTagEqual(t,"message"))&&(this._increaseReceivedStanzasCounter(),this.autoSendCountOnEveryIncomingStanza&&this._answerProcessedStanzas()),Strophe.isTagEqual(t,"a")&&(this._setSentStanzasCounter(parseInt(t.getAttribute("h"))),this.requestResponseInterval>0&&(this._requestResponseIntervalCount=0)),!0},getClientSentStanzasCounter:function(){return this._clientSentStanzasCounter},_setSentStanzasCounter:function(t){this._serverProcesssedStanzasCounter=t,this._clientSentStanzasCounter!==this._serverProcesssedStanzasCounter&&console.info("Stream Management stanzas counter mismatch. Client value: "+this._clientSentStanzasCounter+" - Server value: "+this._serverProcesssedStanzasCounter)},_handleServerRequestHandler:function(){return this._answerProcessedStanzas(),!0},_answerProcessedStanzas:function(){this._isStreamManagementEnabled&&this._c.send($build("a",{xmlns:this._NS,h:this._clientProcessedStanzasCounter}))},_increaseSentStanzasCounter:function(){this._isStreamManagementEnabled&&(this._clientSentStanzasCounter++,this.requestResponseInterval>0&&(this._requestResponseIntervalCount++,this._requestResponseIntervalCount===this.requestResponseInterval&&(this._requestResponseIntervalCount=0,setTimeout(function(){this._originalSend.call(this._c,$build("r",{xmlns:this._NS}))}.bind(this),100))))},_increaseReceivedStanzasCounter:function(){this._isStreamManagementEnabled&&this._clientProcessedStanzasCounter++}});var Sha1={};Sha1.hash=function(t){t=t.utf8Encode();var e=[1518500249,1859775393,2400959708,3395469782];t+=String.fromCharCode(128);for(var n=t.length/4+2,r=Math.ceil(n/16),i=new Array(r),o=0;o<r;o++){i[o]=new Array(16);for(var s=0;s<16;s++)i[o][s]=t.charCodeAt(64*o+4*s)<<24|t.charCodeAt(64*o+4*s+1)<<16|t.charCodeAt(64*o+4*s+2)<<8|t.charCodeAt(64*o+4*s+3)}i[r-1][14]=8*(t.length-1)/Math.pow(2,32),i[r-1][14]=Math.floor(i[r-1][14]),i[r-1][15]=8*(t.length-1)&4294967295;for(var a,u,c,l,h,f=1732584193,d=4023233417,p=2562383102,g=271733878,v=3285377520,m=new Array(80),o=0;o<r;o++){for(var y=0;y<16;y++)m[y]=i[o][y];for(var y=16;y<80;y++)m[y]=Sha1.ROTL(m[y-3]^m[y-8]^m[y-14]^m[y-16],1);a=f,u=d,c=p,l=g,h=v;for(var y=0;y<80;y++){var b=Math.floor(y/20),_=Sha1.ROTL(a,5)+Sha1.f(b,u,c,l)+h+e[b]+m[y]&4294967295;h=l,l=c,c=Sha1.ROTL(u,30),u=a,a=_}f=f+a&4294967295,d=d+u&4294967295,p=p+c&4294967295,g=g+l&4294967295,v=v+h&4294967295}return Sha1.toHexStr(f)+Sha1.toHexStr(d)+Sha1.toHexStr(p)+Sha1.toHexStr(g)+Sha1.toHexStr(v)},Sha1.f=function(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}},Sha1.ROTL=function(t,e){return t<<e|t>>>32-e},Sha1.toHexStr=function(t){for(var e,n="",r=7;r>=0;r--)e=t>>>4*r&15,n+=e.toString(16);return n},"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}}),Strophe.addConnectionPlugin("httpFileUpload",{_c:null,init:function(t){this._c=t,Strophe.addNamespace("HTTP_FILE_UPLOAD","urn:xmpp:http:upload")},slot:function(t,e,n,r,i,o){var s=this._c.getUniqueId("httpFileUpload"),a=$iq({to:t,type:"get",id:s}).c("request",{xmlns:Strophe.NS.HTTP_FILE_UPLOAD}).c("filename",null,e).c("size",null,n).c("content-type",null,r);this._c.sendIQ(a,function(t){var e=t.getElementsByTagName("slot")[0];if(void 0!==e){var n={put:null,get:null},r=e.getElementsByTagName("put")[0];void 0!==r&&(n.put=Strophe.getText(r));var s=e.getElementsByTagName("get")[0];void 0!==s&&(n.get=Strophe.getText(s)),i(n)}else o("Couldn't get slot.")},o)}});var CryptoJS=CryptoJS||function(t,e){var n={},r=n.lib={},i=function(){},o=r.Base={extend:function(t){i.prototype=this;var e=new i;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)e[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<t;i+=4)e[r+i>>>2]=n[i>>>2];else e.push.apply(e,n);return this.sigBytes+=t,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-8*(n%4),e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=e[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-4*(r%8);return new s.init(n,e/2)}},c=a.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(e[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-8*(r%4);return new s.init(n,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},h=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o),a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0);if(e=a*o,i=t.min(4*e,i),e){for(var u=0;u<e;u+=o)this._doProcessBlock(r,u);u=r.splice(0,e),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});r.Hasher=h.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}});var f=n.algo={};return n}(Math);if(function(t){for(var e=CryptoJS,n=e.lib,r=n.WordArray,i=n.Hasher,n=e.algo,o=[],s=[],a=function(t){return 4294967296*(t-(0|t))|0},u=2,c=0;64>c;){var l;t:{l=u;for(var h=t.sqrt(l),f=2;f<=h;f++)if(!(l%f)){l=!1;break t}l=!0}l&&(8>c&&(o[c]=a(t.pow(u,.5))),s[c]=a(t.pow(u,1/3)),c++),u++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|t[e+f];else{var p=d[f-15],g=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[f]+d[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=c,c=u,u=a+p|0,a=o,o=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=t.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){function t(t,e,n){if(!l){l=!0,document.querySelectorAll("#version-modal .version-number")[0].innerText=t.detail.version;var r=document.getElementById("version-modal");r.style.display="block",document.querySelectorAll("#version-modal .confirm-button")[0].addEventListener("click",function(){l=!1,r.style.display="none",void 0!==e&&e()}),document.querySelectorAll("#version-modal .dismiss-button")[0].addEventListener("click",function(){l=!1,r.style.display="none",void 0!==n&&n()})}}function e(e){t(e,function(){s.installVersion(function(){s.restartApplication(function(){},function(){console.error("Provisioning failed to restart and install new version")})},function(){console.error("Provisioning failed to update")},{version:e.detail.version})},function(){console.info("Update postponed.")})}function n(){var t=document.body.getAttribute("data-schema"),e=window.document.querySelectorAll("body div.view-frame")[0];e.setAttribute("md-app",""+(a?"":t?t:"config.json")),angular.element(document).ready(function(){angular.bootstrap(document,["app"])})}function r(){c=!0,a||void 0===window.plugins||null===window.plugins||void 0===window.plugins.provisioning||null===window.plugins.provisioning?n():(s=window.plugins.provisioning,document.addEventListener("updateavailable",e,!1),n())}function i(){var t=localStorage.getItem("appName");a=void 0!==t&&null!==t,u?(document.addEventListener("deviceready",r,!1),setTimeout(function(){c||(console.error("deviceready was not fired"),n())},o)):n()}var o=5e3,s=null,a=!1,u=window.cordova!==!1,c=!1,l=!1;document.addEventListener("DOMContentLoaded",i,!1)}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(e[i>>>2]>>>24-8*(i%4)&255)<<16|(e[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|e[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&i+.75*s<n;s++)t.push(r.charAt(o>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(n=i));for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<2*(s%4),u=r.indexOf(t.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(a|u)<<24-8*(o%4),o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t){return t&&t.Object===Object?t:null}function n(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function r(t){return function(){try{return t.apply(this,arguments)}catch(e){return Gt.e=e,Gt}}}function i(t){throw t}function o(t,e){if(Zt&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(re)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+re+"\n");t.stack=s(i)}}function s(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;i>r;r++){var o=e[r];a(o)||u(o)||!o||n.push(o)}return n.join("\n")}function a(t){var e=l(t);if(!e)return!1;var n=e[0],r=e[1];return n===ee&&r>=ne&&Ps>=r}function u(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(){if(Zt)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=l(n);if(!r)return;return ee=r[0],r[1]}}function l(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function h(e,n,r,i,o,s){var a=qe(e),u=a.length,c=qe(n),l=c.length;if(u!==l&&!i)return!1;for(var h,f=u;f--;)if(h=a[f],!(i?h in n:He.call(n,h)))return!1;for(var d=i;++f<u;){h=a[f];var p,g=e[h],v=n[h];if(!(p===t?r(g,v,i,o,s):p))return!1;d||(d="constructor"===h)}if(!d){var m=e.constructor,y=n.constructor;if(m!==y&&"constructor"in e&&"constructor"in n&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function f(t,e,n){switch(n){case ye:case be:return+t===+e;case _e:return t.name===e.name&&t.message===e.message;case xe:return t!==+t?e!==+e:t===+e;case Ae:case Re:return t===e+""}return!1}function d(t){return!!t&&"object"==typeof t}function p(t){return"number"==typeof t&&t>-1&&t%1===0&&Ke>=t}function g(t){return d(t)&&p(t.length)&&!!Me[Ue.call(t)]}function v(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function m(e,n,r,i,o,s){var a=-1,u=e.length,c=n.length;if(u!==c&&!(i&&c>u))return!1;for(;++a<u;){var l,h=e[a],f=n[a];if(l!==t){if(l)continue;return!1}if(i){if(!v(n,function(t){return h===t||r(h,t,i,o,s)}))return!1}else if(h!==f&&!r(h,f,i,o,s))return!1}return!0}function y(t,e,n,r,i,o){var s=Ve(t),a=Ve(e),u=me,c=me;s||(u=Ue.call(t),u===ve?u=Ee:u!==Ee&&(s=g(t))),a||(c=Ue.call(e),c===ve&&(c=Ee));var l=u===Ee&&!Je(t),d=c===Ee&&!Je(e),p=u===c;if(p&&!s&&!l)return f(t,e,u);if(!r){var v=l&&He.call(t,"__wrapped__"),y=d&&He.call(e,"__wrapped__");if(v||y)return n(v?t.value():t,y?e.value():e,r,i,o)}if(!p)return!1;i||(i=[]),o||(o=[]);for(var b=i.length;b--;)if(i[b]===t)return o[b]===e;i.push(t),o.push(e);var _=(s?m:h)(t,e,n,r,i,o);return i.pop(),o.pop(),_}function b(t,e,n,r,i){return t===e||(null==t||null==e||!et(t)&&!d(e)?t!==t&&e!==e:y(t,e,b,n,r,i))}function _(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function w(t,e){this.id=t,this.value=e}function S(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function x(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function E(t){this._s=t,this.isDisposed=!1}function A(t){this._s=t}function C(t){this._s=t,this._l=t.length,this._i=0}function R(t){this._a=t}function N(t){this._a=t,this._l=I(t),this._i=0}function O(t){return"number"==typeof t&&Ht.isFinite(t)}function T(e){var n,r=e[le];if(!r&&"string"==typeof e)return n=new A(e),n[le]();if(!r&&e.length!==t)return n=new R(e),n[le]();if(!r)throw new TypeError("Object is not iterable");return e[le]()}function k(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function I(t){var e=+t.length;return isNaN(e)?0:0!==e&&O(e)?(e=k(e)*Math.floor(Math.abs(e)),0>=e?0:e>fr?fr:e):e}function P(t,e){return vn(t)||(t=xn),new pr(e,t)}function F(t,e){this.observer=t,this.parent=e}function D(t,e){return t.amb(e)}function $(){return!1}function j(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function $(){return!1}function j(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function $(){return!1}function L(){return[]}function $(){return!1}function L(){return[]}function j(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function M(t){return function(e){return t.subscribe(e)}}function B(t){return t.toArray()}function H(t){return t.length>0}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function K(t,e,n){var r=pe(e,n,3);return t.map(function(e,n){var i=r(e,n,t);return Wt(i)&&(i=ir(i)),(de(i)||fe(i))&&(i=dr(i)),i}).concatAll()}function q(t,e,n){for(var r=0,i=t.length;i>r;r++)if(n(t[r],e))return r;return-1}function J(t){this.comparer=t,this.set=[]}function V(e,n){return function(r){for(var i=r,o=0;n>o;o++){var s=i[e[o]];if("undefined"==typeof s)return t;i=s}return i}}function z(t){if(0===t.length)throw new ie;return t[0]}function X(t,e,n,r){var i=pe(e,n,3);return new Es(function(e){return t.subscribe(new ao(e,t,i,r))},t)}function W(t){return t?Jn.isObservable(t)?t:Wt(t)?Jn.fromPromise(t):tt(t)||Z(t)?mo.call(this,t):Yt(t)?Q.call(this,t):de(t)||fe(t)?Y.call(this,t):et(t)?G.call(this,t):t:t}function Y(t){return Jn.from(t).concatMap(function(t){return Jn.isObservable(t)||et(t)?W.call(null,t):Ut.Observable.just(t)}).toArray()}function G(e){function n(e,n){r[n]=t,o.push(e.map(function(t){r[n]=t}))}for(var r=new e.constructor,i=Object.keys(e),o=[],s=0,a=i.length;a>s;s++){var u=i[s],c=W.call(this,e[u]);c&&Jn.isObservable(c)?n(c,u):r[u]=e[u]}return Jn.forkJoin.apply(Jn,o).map(function(){return r})}function Q(t){var e=this;return new Es(function(n){t.call(e,function(){var t=arguments[0],e=arguments[1];if(t)return n.onError(t);if(arguments.length>2){for(var r=[],i=1,o=arguments.length;o>i;i++)r.push(arguments[i]);e=r}n.onNext(e),n.onCompleted()})})}function Z(t){return Yt(t.next)&&Yt(t["throw"])}function tt(t){var e=t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName||Z(e.prototype))}function et(t){return Object==t.constructor}function nt(t,e,n,r){var i=new Os;return r.push(rt(i,e,n)),t.apply(e,r),i.asObservable()}function rt(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];if(Yt(n)){if(i=Qt(n).apply(e,i),i===Gt)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function it(t,e,n,r){var i=new Os;return r.push(ot(i,e,n)),t.apply(e,r),i.asObservable()}function ot(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],s=1;i>s;s++)o[s-1]=arguments[s];if(Yt(n)){var o=Qt(n).apply(e,o);if(o===Gt)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function st(t){return Ht.StaticNodeList?t instanceof Ht.StaticNodeList||t instanceof Ht.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function at(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function ut(t,e,n){var r=new Ze,i=Object.prototype.toString.call(t);if(st(t)||"[object HTMLCollection]"===i)for(var o=0,s=t.length;s>o;o++)r.add(ut(t.item(o),e,n));else t&&r.add(new at(t,e,n));return r}function ct(t,e,n){return new Es(function(r){function i(t,e){if(c[e]=t,s[e]=!0,a||(a=s.every(qt))){if(o)return r.onError(o);var i=Qt(n).apply(null,c);if(i===Gt)return r.onError(i.e);r.onNext(i)}u&&c[1]&&r.onCompleted()}var o,s=[!1,!1],a=!1,u=!1,c=new Array(2);return new ln(t.subscribe(function(t){i(t,0)},function(t){c[1]?r.onError(t):o=t},function(){u=!0,c[1]&&r.onCompleted()}),e.subscribe(function(t){i(t,1)},function(t){r.onError(t)},function(){u=!0,i(!0,1)}))},t)}function B(t){return t.toArray()}function lt(t,e){return t.groupJoin(this,e,lr,function(t,e){return e})}function ht(t){var e=this;return new Es(function(n){var r=new Ns,i=new Ze,o=new fn(i);return n.onNext(Ye(r,o)),i.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),Wt(t)&&(t=ir(t)),i.add(t.subscribe(function(t){r.onCompleted(),r=new Ns,n.onNext(Ye(r,o))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),o},e)}function ft(t){var e=this;return new Es(function(n){function r(){var e;try{e=t()}catch(o){return void n.onError(o)}Wt(e)&&(e=ir(e));var u=new un;i.setDisposable(u),u.setDisposable(e.take(1).subscribe(Kt,function(t){a.onError(t),n.onError(t)},function(){a.onCompleted(),a=new Ns,n.onNext(Ye(a,s)),r()}))}var i=new cn,o=new Ze(i),s=new fn(o),a=new Ns;return n.onNext(Ye(a,s)),o.add(e.subscribe(function(t){a.onNext(t)},function(t){a.onError(t),n.onError(t)},function(){a.onCompleted(),n.onCompleted()})),r(),s},e)}function dt(t,e){return new Fo(t,e)}function j(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return e}function pt(t){this.patterns=t}function gt(t,e){this.expression=t,this.selector=e}function vt(t){return function(e){t.onError(e)}}function mt(t,e){return function(){var n=Qt(t.selector).apply(t,arguments);return n===Gt?e.onError(n.e):void e.onNext(n)}}function yt(t,e,n){var r=t.get(e);if(!r){var i=new Uo(e,n);return t.set(e,i),i}return r}function bt(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new Ho;for(var r=0,i=this.joinObserverArray.length;i>r;r++){var o=this.joinObserverArray[r];this.joinObservers.set(o,o)}}function _t(t,e){return new Ko(t,e)}function wt(t,e,n){return new Es(function(r){var i=t,o=gn(e);return n.scheduleRecursiveFuture(0,i,function(t,e){if(o>0){var s=n.now();i=new Date(i.getTime()+o),i.getTime()<=s&&(i=new Date(s+o))}r.onNext(t),e(t+1,new Date(i))})})}function St(t,e,n){return t===e?new Es(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):ar(function(){return wt(new Date(n.now()+t),e,n)})}function xt(t,e,n){return new Es(function(r){var i,o=!1,s=new cn,a=null,u=[],c=!1;return i=t.materialize().timestamp(n).subscribe(function(t){var i,l;"E"===t.value.kind?(u=[],u.push(t),a=t.value.error,l=!c):(u.push({value:t.value,timestamp:t.timestamp+e}),l=!o,o=!0),l&&(null!==a?r.onError(a):(i=new un,s.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var i,s,l,h;if(null===a){c=!0;do l=null,u.length>0&&u[0].timestamp-n.now()<=0&&(l=u.shift().value),null!==l&&l.accept(r);while(null!==l);h=!1,s=0,u.length>0?(h=!0,s=Math.max(0,u[0].timestamp-n.now())):o=!1,i=a,c=!1,null!==i?r.onError(i):h&&e(null,s)}}))))}),new ln(i,s)},t)}function Et(t,e,n){return ar(function(){return xt(t,e-n.now(),n)})}function At(t,e,n){var r,i;return Yt(e)?i=e:(r=e,i=n),new Es(function(e){function n(){u.setDisposable(t.subscribe(function(t){var n=Qt(i)(t);if(n===Gt)return e.onError(n.e);var r=new un;s.add(r),r.setDisposable(n.subscribe(function(){e.onNext(t),s.remove(r),o()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(r),o()}))},function(t){e.onError(t)},function(){a=!0,u.dispose(),o()}))}function o(){a&&0===s.length&&e.onCompleted()}var s=new Ze,a=!1,u=new cn;return r?u.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new ln(u,s)},t)}function Ct(t,e){return new Es(function(n){var r,i=!1,o=new cn,s=0,a=t.subscribe(function(t){var a=Qt(e)(t);if(a===Gt)return n.onError(a.e);Wt(a)&&(a=ir(a)),i=!0,r=t,s++;var u=s,c=new un;o.setDisposable(c),c.setDisposable(a.subscribe(function(){i&&s===u&&n.onNext(r),i=!1,c.dispose()},function(t){n.onError(t)},function(){i&&s===u&&n.onNext(r),i=!1,c.dispose()}))},function(t){o.dispose(),n.onError(t),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new ln(a,o)},t)}function B(t){return t.toArray()}function B(t){return t.toArray()}function Rt(t,e,n,r){return Yt(e)&&(r=n,n=e,e=br()),Jn.isObservable(r)||(r=Ar(new ts)),new Es(function(i){function o(t){function e(){return h=n===l}var n=l,o=new un;u.setDisposable(o),o.setDisposable(t.subscribe(function(){e()&&a.setDisposable(r.subscribe(i)),o.dispose()},function(t){e()&&i.onError(t)},function(){e()&&a.setDisposable(r.subscribe(i))}))}function s(){var t=!h;return t&&l++,t}var a=new cn,u=new cn,c=new un;a.setDisposable(c);var l=0,h=!1;return o(e),c.setDisposable(t.subscribe(function(t){if(s()){i.onNext(t);var e=Qt(n)(t);if(e===Gt)return i.onError(e.e);o(Wt(e)?ir(e):e)}},function(t){s()&&i.onError(t)},function(){s()&&i.onCompleted()})),new ln(a,u)},t)}function Nt(t,e,n,r){return vn(n)&&(r=n,n=Ar(new ts)),n instanceof Error&&(n=Ar(n)),vn(r)||(r=Nn),Jn.isObservable(n)||(n=Ar(new ts)),new Es(function(i){function o(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){c=s===t,c&&(Wt(n)&&(n=ir(n)),u.setDisposable(n.subscribe(i)))}))}var s=0,a=new un,u=new cn,c=!1,l=new cn;return u.setDisposable(a),o(),a.setDisposable(t.subscribe(function(t){c||(s++,i.onNext(t),o())},function(t){c||(s++,i.onError(t))},function(){c||(s++,i.onCompleted())})),new ln(u,l)},t)}function Ot(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}function Tt(t){this.predicate=t}function kt(t){this.predicate=t}function It(t,e){var n=this;this.scheduler=t,this.messages=e,this.subscriptions=[],this.observers=[];for(var r=0,i=this.messages.length;i>r;r++){var o=this.messages[r],s=o.value;!function(e){t.scheduleAbsolute(null,o.time,function(){for(var t=n.observers.slice(0),r=0,i=t.length;i>r;r++)e.accept(t[r]);return rn})}(s)}}var Pt={"function":!0,object:!0},Ft=Pt[typeof exports]&&exports&&!exports.nodeType?exports:null,Dt=Pt[typeof module]&&module&&!module.nodeType?module:null,$t=e(Ft&&Dt&&"object"==typeof global&&global),jt=e(Pt[typeof self]&&self),Lt=e(Pt[typeof window]&&window),Mt=Dt&&Dt.exports===Ft?Ft:null,Bt=e(Pt[typeof this]&&this),Ht=$t||Lt!==(Bt&&Bt.window)&&Lt||jt||Bt||Function("return this")(),Ut={internals:{},config:{Promise:Ht.Promise},helpers:{}},Kt=Ut.helpers.noop=function(){},qt=Ut.helpers.identity=function(t){return t},Jt=Ut.helpers.defaultNow=Date.now,Vt=Ut.helpers.defaultComparer=function(t,e){return ze(t,e)},zt=Ut.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},Xt=(Ut.helpers.defaultKeySerializer=function(t){return t.toString()},Ut.helpers.defaultError=function(t){throw t}),Wt=Ut.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Yt=Ut.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Gt={e:{}},Qt=Ut.internals.tryCatch=function(t){if(!Yt(t))throw new TypeError("fn must be a function");return r(t)};Ut.config.longStackSupport=!1;var Zt=!1,te=Qt(function(){throw new Error})();Zt=!!te.e&&!!te.e.stack;var ee,ne=c(),re="From previous event:",ie=Ut.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};ie.prototype=Object.create(Error.prototype),ie.prototype.name="EmptyError";var oe=Ut.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};oe.prototype=Object.create(Error.prototype),oe.prototype.name="ObjectDisposedError";var se=Ut.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};se.prototype=Object.create(Error.prototype),se.prototype.name="ArgumentOutOfRangeError";var ae=Ut.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};ae.prototype=Object.create(Error.prototype),ae.prototype.name="NotSupportedError";var ue=Ut.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};ue.prototype=Object.create(Error.prototype),ue.prototype.name="NotImplementedError";var ce=Ut.helpers.notImplemented=function(){throw new ue},le=(Ut.helpers.notSupported=function(){throw new ae},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Ht.Set&&"function"==typeof(new Ht.Set)["@@iterator"]&&(le="@@iterator");var he=Ut.doneEnumerator={done:!0,value:t},fe=Ut.helpers.isIterable=function(e){return e&&e[le]!==t},de=Ut.helpers.isArrayLike=function(e){return e&&e.length!==t};Ut.helpers.iterator=le;var pe=Ut.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ge=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],ve=(ge.length,"[object Arguments]"),me="[object Array]",ye="[object Boolean]",be="[object Date]",_e="[object Error]",we="[object Function]",Se="[object Map]",xe="[object Number]",Ee="[object Object]",Ae="[object RegExp]",Ce="[object Set]",Re="[object String]",Ne="[object WeakMap]",Oe="[object ArrayBuffer]",Te="[object Float32Array]",ke="[object Float64Array]",Ie="[object Int8Array]",Pe="[object Int16Array]",Fe="[object Int32Array]",De="[object Uint8Array]",$e="[object Uint8ClampedArray]",je="[object Uint16Array]",Le="[object Uint32Array]",Me={};Me[Te]=Me[ke]=Me[Ie]=Me[Pe]=Me[Fe]=Me[De]=Me[$e]=Me[je]=Me[Le]=!0,Me[ve]=Me[me]=Me[Oe]=Me[ye]=Me[be]=Me[_e]=Me[we]=Me[Se]=Me[xe]=Me[Ee]=Me[Ae]=Me[Ce]=Me[Re]=Me[Ne]=!1;var Be=Object.prototype,He=Be.hasOwnProperty,Ue=Be.toString,Ke=Math.pow(2,53)-1,qe=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;r>s;s++)t.call(i,n[s])&&a.push(n[s]);return a}}(),et=Ut.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},Je=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),Ve=Array.isArray||function(t){return d(t)&&p(t.length)&&Ue.call(t)===me},ze=Ut.internals.isEqual=function(t,e){return b(t,e)},Xe=({}.hasOwnProperty,Array.prototype.slice,Ut.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),We=Ut.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var i=0,o=e.length;o>i;i++){var s=e[i];for(var a in s)t[a]=s[a]}},Ye=Ut.internals.addRef=function(t,e){return new Es(function(n){return new ln(e.getDisposable(),t.subscribe(n))})};w.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Ge=Ut.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},Qe=Ge.prototype;Qe.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Qe.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},Qe.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},Qe.peek=function(){return this.items[0].value},Qe.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=t,this.heapify()},Qe.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Qe.enqueue=function(t){var e=this.length++;this.items[e]=new w((Ge.count++),t),this.percolate(e);
},Qe.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Ge.count=0;var Ze=Ut.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},tn=Ze.prototype;tn.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},tn.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},tn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var en=Ut.Disposable=function(t){this.isDisposed=!1,this.action=t||Kt};en.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var nn=en.create=function(t){return new en(t)},rn=en.empty={dispose:Kt},on=en.isDisposable=function(t){return t&&Yt(t.dispose)},sn=en.checkDisposed=function(t){if(t.isDisposed)throw new oe},an=en._fixup=function(t){return on(t)?t:rn},un=Ut.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};un.prototype.getDisposable=function(){return this.current},un.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},un.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var cn=Ut.SerialDisposable=function(){this.isDisposed=!1,this.current=null};cn.prototype.getDisposable=function(){return this.current},cn.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},cn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var ln=Ut.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};ln.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var hn=Ut.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};hn.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var fn=Ut.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?rn:new t(this)},e}();S.prototype.dispose=function(){this.scheduler.schedule(this,x)};var dn=Ut.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||zt,this.disposable=new un};dn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},dn.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},dn.prototype.isCancelled=function(){return this.disposable.isDisposed},dn.prototype.invokeCore=function(){return an(this.action(this.scheduler,this.state))};var pn=Ut.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new ue},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),i=t.normalize(i),0===i?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new ue},t.now=Jt,t.prototype.now=Jt,t.normalize=function(t){return 0>t&&(t=0),t},t}(),gn=pn.normalize,vn=pn.isScheduler;!function(t){function e(t,e){function n(e){function r(t,e){return s?o.remove(u):a=!0,i(e,n),rn}var s=!1,a=!1,u=t.schedule(e,r);a||(o.add(u),s=!0)}var r=e[0],i=e[1],o=new Ze;return i(r,n),o}function n(t,e){function n(e,r){function s(t,e){return a?o.remove(c):u=!0,i(e,n),rn}var a=!1,u=!1,c=t.scheduleFuture(e,r,s);u||(o.add(c),a=!0)}var r=e[0],i=e[1],o=new Ze;return i(r,n),o}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(pn.prototype),function(t){t.schedulePeriodic=function(t,e,n){if("undefined"==typeof Ht.setInterval)throw new ae;e=gn(e);var r=t,i=Ht.setInterval(function(){r=n(r)},e);return nn(function(){Ht.clearInterval(i)})}}(pn.prototype),function(t){t.catchError=t["catch"]=function(t){return new On(this,t)}}(pn.prototype);var mn,yn,bn=Ut.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=Qt(t._action)(t._state);r===Gt&&(t._cancel.dispose(),i(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new un;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),_n=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.schedule=function(t,e){return an(e(this,t))},e}(pn),wn=pn.immediate=new _n,Sn=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return Xe(n,t),n.prototype.schedule=function(t,n){var o=new dn(this,t,n,this.now());if(r)r.enqueue(o);else{r=new Ge(4),r.enqueue(o);var s=Qt(e)();r=null,s===Gt&&i(s.e)}return o.disposable},n.prototype.scheduleRequired=function(){return!r},n}(pn),xn=pn.currentThread=new Sn,En=function(){var t,e=Kt;if(Ht.setTimeout)t=Ht.setTimeout,e=Ht.clearTimeout;else{if(!Ht.WScript)throw new ae;t=function(t,e){Ht.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),An=En.setTimeout,Cn=En.clearTimeout;!function(){function t(e){if(o)An(function(){t(e)},0);else{var n=r[e];if(n){o=!0;var s=Qt(n)();yn(e),o=!1,s===Gt&&i(s.e)}}}function e(){if(!Ht.postMessage||Ht.importScripts)return!1;var t=!1,e=Ht.onmessage;return Ht.onmessage=function(){t=!0},Ht.postMessage("","*"),Ht.onmessage=e,t}var n=1,r={},o=!1;yn=function(t){delete r[t]};var s=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a="function"==typeof(a=$t&&Mt&&$t.setImmediate)&&!s.test(a)&&a;if(Yt(a))mn=function(e){var i=n++;return r[i]=e,a(function(){t(i)}),i};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))mn=function(e){var i=n++;return r[i]=e,process.nextTick(function(){t(i)}),i};else if(e()){var u="ms.rx.schedule"+Math.random(),c=function(e){"string"==typeof e.data&&e.data.substring(0,u.length)===u&&t(e.data.substring(u.length))};Ht.addEventListener("message",c,!1),mn=function(t){var e=n++;return r[e]=t,Ht.postMessage(u+e,"*"),e}}else if(Ht.MessageChannel){var l=new Ht.MessageChannel;l.port1.onmessage=function(e){t(e.data)},mn=function(t){var e=n++;return r[e]=t,l.port2.postMessage(e),e}}else mn="document"in Ht&&"onreadystatechange"in Ht.document.createElement("script")?function(e){var i=Ht.document.createElement("script"),o=n++;return r[o]=e,i.onreadystatechange=function(){t(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},Ht.document.documentElement.appendChild(i),o}:function(e){var i=n++;return r[i]=e,An(function(){t(i)},0),i}}();var Rn=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(en._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}function o(t,e,n){return function(){e(t,n)}}return Xe(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,yn(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Cn(this._id))},e.prototype.schedule=function(t,e){var i=new un,o=mn(n(i,e,this,t));return new ln(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new un,s=An(n(o,r,this,t),e);return new ln(o,new i(s))},e.prototype.scheduleLongRunning=function(t,e){var n=nn(Kt);return mn(o(t,e,n)),n},e}(pn),Nn=pn["default"]=pn.async=new Rn,On=function(t){function e(e,n){this._scheduler=e,this._handler=n,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this)}return Xe(e,t),e.prototype.schedule=function(t,e){return this._scheduler.schedule(t,this._wrap(e))},e.prototype._scheduleFuture=function(t,e,n){return this._scheduler.schedule(t,e,this._wrap(n))},e.prototype.now=function(){return this._scheduler.now()},e.prototype._clone=function(t){return new e(t,this._handler)},e.prototype._wrap=function(t){var e=this;return function(n,r){var o=Qt(t)(e._getRecursiveWrapper(n),r);return o===Gt?(e._handler(o.e)||i(o.e),rn):an(o)}},e.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},e.prototype.schedulePeriodic=function(t,e,n){var r=this,o=!1,s=new un;return s.setDisposable(this._scheduler.schedulePeriodic(t,e,function(t){if(o)return null;var e=Qt(n)(t);return e===Gt?(o=!0,r._handler(e.e)||i(e.e),s.dispose(),null):e})),s},e}(pn),Tn=Ut.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new ue},t.prototype._acceptObserver=function(t,e,n){throw new ue},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return vn(t)||(t=wn),new Es(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),kn=function(t){function e(t){this.value=t,this.kind="N"}return Xe(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(Tn),In=function(t){function e(t){this.error=t,this.kind="E"}return Xe(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(Tn),Pn=function(t){function e(){this.kind="C"}return Xe(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(Tn),Fn=Tn.createOnNext=function(t){return new kn(t)},Dn=Tn.createOnError=function(t){return new In(t)},$n=Tn.createOnCompleted=function(){return new Pn},jn=Ut.Observer=function(){};jn.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},jn.prototype.asObserver=function(){var t=this;return new Hn(function(e){t.onNext(e)},function(e){t.onError(e)},function(){t.onCompleted()})},jn.prototype.checked=function(){return new Un(this)};var Ln=jn.create=function(t,e,n){return t||(t=Kt),e||(e=Xt),n||(n=Kt),new Hn(t,e,n)};jn.fromNotifier=function(t,e){var n=pe(t,e,1);return new Hn(function(t){return n(Fn(t))},function(t){return n(Dn(t))},function(){return n($n())})},jn.prototype.notifyOn=function(t){return new qn(t,this)},jn.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var Mn,Bn=Ut.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Xe(e,t),e.prototype.next=ce,e.prototype.error=ce,e.prototype.completed=ce,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(jn),Hn=Ut.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Xe(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Bn),Un=function(t){function e(e){t.call(this),this._observer=e,this._state=0}Xe(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=Qt(this._observer.onNext).call(this._observer,t);this._state=0,e===Gt&&i(e.e)},n.onError=function(t){this.checkAccess();var e=Qt(this._observer.onError).call(this._observer,t);this._state=2,e===Gt&&i(e.e)},n.onCompleted=function(){this.checkAccess();var t=Qt(this._observer.onCompleted).call(this._observer);this._state=2,t===Gt&&i(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},e}(jn),Kn=Ut.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new cn}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function s(t,e){var n;if(!(t.queue.length>0))return void(t.isAcquired=!1);n=t.queue.shift();var r=Qt(n)();return r===Gt?(t.queue=[],t.hasFaulted=!0,i(r.e)):void e(t)}return Xe(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,s))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Bn),qn=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return Xe(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(Kn),Jn=Ut.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){o(e,t),r.call(n,e)},e.call(t,n)}}function e(){if(Ut.config.longStackSupport&&Zt){var e=this._subscribe,n=Qt(i)(new Error).e;this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return Mn=e.prototype,e.isObservable=function(t){return t&&Yt(t.subscribe)},Mn.subscribe=Mn.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Ln(t,e,n))},Mn.subscribeOnNext=function(t,e){return this._subscribe(Ln("undefined"!=typeof e?function(n){t.call(e,n)}:t))},Mn.subscribeOnError=function(t,e){return this._subscribe(Ln(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},Mn.subscribeOnCompleted=function(t,e){return this._subscribe(Ln(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),Vn=Ut.ObservableBase=function(t){function e(t){return t&&Yt(t.dispose)?t:Yt(t)?nn(t):rn}function n(t,n){var r=n[0],o=n[1],s=Qt(o.subscribeCore).call(o,r);s!==Gt||r.fail(Gt.e)||i(Gt.e),r.setDisposable(e(s))}function r(){t.call(this)}return Xe(r,t),r.prototype._subscribe=function(t){var e=new As(t),r=[e,this];return xn.scheduleRequired()?xn.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=ce,r}(Jn),zn=Ut.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=Yt(r)?r:null,this.selector=pe(Yt(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Xe(n,Bn),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=Qt(this.selector)(t,e,this.source);return n===Gt?this.o.onError(n.e):(Wt(n)&&(n=ir(n)),(de(n)||fe(n))&&(n=Jn.from(n)),void this.o.onNext(this._wrapResult(n,t,e)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Vn),Xn=Ut.internals.Enumerable=function(){};E.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var Wn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Qt(t.e.next).call(t.e);if(n===Gt)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;Wt(i)&&(i=ir(i));var o=new un;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r={isDisposed:!1,o:t,subscription:e,e:this.sources[le]()},i=xn.scheduleRecursive(r,n);return new hn([e,i,new E(r)])},Xe(r,Bn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Vn);Xn.prototype.concat=function(){return new Wn(this)};var Yn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=Qt(t.e.next).call(t.e);if(n===Gt)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;Wt(i)&&(i=ir(i));var o=new un;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r={isDisposed:!1,e:this.sources[le](),subscription:e,lastError:null,o:t},i=xn.scheduleRecursive(r,n);return new hn([e,i,new E(r)])},Xe(r,Bn),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Vn);Xn.prototype.catchError=function(){return new Yn(this)};var Gn=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Xe(e,t),e.prototype[le]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?he:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Xn),Qn=Xn.repeat=function(t,e){return new Gn(t,e)},Zn=function(t){function e(t,e,n){this.s=t,this.fn=e?pe(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Xe(e,t),e.prototype[le]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:he},e}(Xn),tr=Xn.of=function(t,e,n){return new Zn(t,e,n)},er=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new qn(this._s,t))},e}(Vn);Mn.observeOn=function(t){return new er(this,t)};var nr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];r.setDisposable(new S(t,n.subscribe(i)))}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new un,r=new cn;return r.setDisposable(e),e.setDisposable(this._s.schedule([this.source,r,t],n)),r},e}(Vn);Mn.subscribeOn=function(t){return new nr(this,t)};var rr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new un,i=this,o=this._p;return Yt(o)&&(o=Qt(o)(),o===Gt)?(t.onError(o.e),e):(o.then(function(r){e.setDisposable(i._s.schedule([t,r],n))},function(n){e.setDisposable(i._s.schedule([t,n],r))}),e)},e}(Vn),ir=Jn.fromPromise=function(t,e){return e||(e=Nn),new rr(t,e)};Mn.toPromise=function(t){if(t||(t=Ut.config.Promise),!t)throw new ae("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})};var or=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Xe(n,Bn),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Vn);Mn.toArray=function(){return new or(this)},Jn.create=function(t,e){return new Es(t,e)};var sr=function(t){function e(e){this._f=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=Qt(this._f)();return e===Gt?Ar(e.e).subscribe(t):(Wt(e)&&(e=ir(e)),e.subscribe(t))},e}(Vn),ar=Jn.defer=function(t){return new sr(t)},ur=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),rn}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new n(t,this.scheduler);return e.run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===wn?r(null,t):this.scheduler.schedule(t,r)},e}(Vn),cr=new ur(wn),lr=Jn.empty=function(t){return vn(t)||(t=wn),t===wn?cr:new ur(t)},hr=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){var o=Qt(e.next).call(e);if(o===Gt)return t.onError(o.e);if(o.done)return t.onCompleted();var s=o.value;return Yt(n)&&(s=Qt(n)(s,r),s===Gt)?t.onError(s.e):(t.onNext(s),void i(r+1))}}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=T(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Vn),fr=Math.pow(2,53)-1;A.prototype[le]=function(){return new C(this._s)},C.prototype[le]=function(){return this},C.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:he},R.prototype[le]=function(){return new N(this._a)},N.prototype[le]=function(){return this},N.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:he};var dr=Jn.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!Yt(e))throw new Error("mapFn when provided must be a function");if(e)var i=pe(e,n,2);return vn(r)||(r=xn),new hr(t,i,r)},pr=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,i){n>r?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Vn),gr=Jn.fromArray=function(t,e){return vn(e)||(e=xn),new pr(t,e)},vr=function(t){function e(e,n,r,i,o){this._initialState=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._s=o,t.call(this)}function n(t,e){if(t.first)t.first=!1;else if(t.newState=Qt(t.self._itrFn)(t.newState),t.newState===Gt)return t.o.onError(t.newState.e);var n=Qt(t.self._cndFn)(t.newState);if(n===Gt)return t.o.onError(n.e);if(n){var r=Qt(t.self._resFn)(t.newState);if(r===Gt)return t.o.onError(r.e);t.o.onNext(r),e(t)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,first:!0,newState:this._initialState};return this._s.scheduleRecursive(e,n)},e}(Vn);Jn.generate=function(t,e,n,r,i){return vn(i)||(i=xn),new vr(t,e,n,r,i)},Jn.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new pr(e,xn)},Jn.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new pr(n,t)},Jn.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Es(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},Jn.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Es(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var mr=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return rn},e}(Vn),yr=new mr,br=Jn.never=function(){return yr},_r=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Vn);Jn.pairs=function(t,e){return e||(e=xn),new _r(t,e)};var wr=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,i){e>r?(n.onNext(t+r),i(r+1)):n.onCompleted()}}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Vn);Jn.range=function(t,e,n){return vn(n)||(n=xn),new wr(t,e,n)};var Sr=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new F(t,this);return e.run()},e}(Vn);F.prototype.run=function(){function t(t,r){return(-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t?e.onCompleted():void r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Jn.repeat=function(t,e,n){return vn(n)||(n=xn),new Sr(t,e,n)};var xr=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),rn}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===wn?n(null,e):this._scheduler.schedule(e,n)},e}(Vn),Er=(Jn["return"]=Jn.just=function(t,e){return vn(e)||(e=wn),new xr(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onError(n),rn}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===wn?n(null,e):this._scheduler.schedule(e,n)},e}(Vn)),Ar=Jn["throw"]=function(t,e){return vn(e)||(e=wn),new Er(t,e)},Cr=function(t){function e(e,n){this._resFn=e,this._obsFn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=rn,n=Qt(this._resFn)();if(n===Gt)return new ln(Ar(n.e).subscribe(t),e);n&&(e=n);var r=Qt(this._obsFn)(n);return r===Gt?new ln(Ar(r.e).subscribe(t),e):new ln(r.subscribe(t),e)},e}(Vn);Jn.using=function(t,e){return new Cr(t,e)},Mn.amb=function(t){var e=this;return new Es(function(n){function r(){o||(o=s,c.dispose())}function i(){o||(o=a,u.dispose())}var o,s="L",a="R",u=new un,c=new un;Wt(t)&&(t=ir(t));var l=Ln(function(t){r(),o===s&&n.onNext(t)},function(t){r(),o===s&&n.onError(t)},function(){r(),o===s&&n.onCompleted()}),h=Ln(function(t){i(),o===a&&n.onNext(t)},function(t){i(),o===a&&n.onError(t)},function(){i(),o===a&&n.onCompleted()});return u.setDisposable(e.subscribe(l)),c.setDisposable(t.subscribe(h)),new ln(u,c)})},Jn.amb=function(){var t,e=br();if(Array.isArray(arguments[0]))t=arguments[0];else{var n=arguments.length;t=new Array(t);for(var r=0;n>r;r++)t[r]=arguments[r]}for(var r=0,n=t.length;n>r;r++)e=D(e,t[r]);return e};var Rr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new un,n=new cn;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Nr(t,n,this._fn))),n},e}(Vn),Nr=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=Qt(this._fn)(t);if(e===Gt)return this._o.onError(e.e);Wt(e)&&(e=ir(e));var n=new un;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(Bn);Mn["catch"]=function(t){return Yt(t)?new Rr(this,t):Or([this,t])};var Or=Jn["catch"]=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return tr(t).catchError()};Mn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Ir.apply(this,e)};var Tr=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:_(e,$),hasValueAll:!1,isDone:_(e,$),values:new Array(e)},i=0;e>i;i++){var o=this._params[i],s=new un;n[i]=s,Wt(o)&&(o=ir(o)),s.setDisposable(o.subscribe(new kr(t,i,this._cb,r)))}return new hn(n)},e}(Vn),kr=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}function n(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(qt))){var e=Qt(this._cb).apply(null,this._state.values);if(e===Gt)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(qt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(qt)&&this._o.onCompleted()},e}(Bn),Ir=Jn.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Yt(e[t-1])?e.pop():j;return Array.isArray(e[0])&&(e=e[0]),new Tr(e,r)};Mn.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),Dr.apply(null,t)};var Pr=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Bn),Fr=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];Wt(n)&&(n=ir(n));var r=new un;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Pr(t,e)))}}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r=nn(Kt),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=wn.scheduleRecursive(i,n);return new hn([e,r,o])},e}(Vn),Dr=Jn.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return new Fr(t)};Mn.concatAll=function(){return this.merge(1)};var $r=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze;return e.add(this.source.subscribe(new jr(t,this.maxConcurrent,e))),e},e}(Vn),jr=function(t){function e(e,n,r){this.o=e,this.max=n,
this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Xe(e,t),e.prototype.handleSubscribe=function(t){var e=new un;this.g.add(e),Wt(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Bn);Mn.merge=function(t){return"number"!=typeof t?Lr(this,t):new $r(this,t)};var Lr=Jn.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(vn(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=wn,e=0;r>e;e++)n.push(arguments[e]);else for(t=wn,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),P(t,n).mergeAll()},Mr=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze,n=new un;return e.add(n),n.setDisposable(this.source.subscribe(new Br(t,e))),e},e}(Vn),Br=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=new un;this.g.add(e),Wt(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Bn);Mn.mergeAll=function(){return new Mr(this)};var Hr=Ut.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Hr.prototype=Object.create(Error.prototype),Hr.prototype.name="CompositeError";var Ur=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new Ze,n=new un,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Kr(e,r))),e},e}(Vn),Kr=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Hr(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=new un;this._group.add(e),Wt(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Xe(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Bn);Jn.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=P(null,t);return new Ur(r)},Mn.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return Vr([this,t])};var qr=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(t.pos<t.sources.length){var n=t.sources[t.pos++];Wt(n)&&(n=ir(n));var r=new un;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Jr(t,e)))}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r={pos:0,subscription:e,o:t,sources:this.sources},i=wn.scheduleRecursive(r,n);return new ln(e,i)},e}(Vn),Jr=function(t){function e(e,n){this._state=e,this._recurse=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._state.o.onNext(t)},e.prototype.error=function(){this._recurse(this._state)},e.prototype.completed=function(){this._recurse(this._state)},e}(Bn),Vr=Jn.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new qr(t)},zr=function(t){function e(e,n){this._s=e,this._o=Wt(n)?ir(n):n,this._open=!1,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new un;e.setDisposable(this._s.subscribe(new Xr(t,this))),Wt(this._o)&&(this._o=ir(this._o));var n=new un;return n.setDisposable(this._o.subscribe(new Wr(t,this,n))),new ln(e,n)},e}(Vn),Xr=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Bn),Wr=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Bn);Mn.skipUntil=function(t){return new zr(this,t)};var Yr=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Bn.call(this)}function r(t,e){this.parent=t,this.id=e,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn,r=this.source.subscribe(new n(t,e));return new ln(r,e)},Xe(n,Bn),n.prototype.next=function(t){var e=new un,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),Wt(t)&&(t=ir(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Xe(r,Bn),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Vn);Mn["switch"]=Mn.switchLatest=function(){return new Yr(this)};var Gr=function(t){function e(e,n){this.source=e,this.other=Wt(n)?ir(n):n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return new ln(this.source.subscribe(t),this.other.subscribe(new Qr(t)))},e}(Vn),Qr=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=Kt,e}(Bn);Mn.takeUntil=function(t){return new Gr(this,t)};var Zr=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:_(e,$),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;r>o;o++){var s=this._ss[o],a=new un;Wt(s)&&(s=ir(s)),a.setDisposable(s.subscribe(new ti(t,o,n))),i[o]=a}var u=new un;return u.setDisposable(this._s.subscribe(new ei(t,this._cb,n))),i[r]=u,new hn(i)},e}(Vn),ti=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(qt)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=Kt,e}(Bn),ei=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=Qt(this._cb).apply(null,e);return n===Gt?this._o.onError(n.e):void this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Yt(e[t-1])?e.pop():j;return Array.isArray(e[0])&&(e=e[0]),new Zr(this,e,r)};var ni=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=_(e,$),i=_(e,L),o=0;e>o;o++){var s=this._s[o],a=new un;n[o]=a,Wt(s)&&(s=ir(s)),a.setDisposable(s.subscribe(new ri(t,o,this,i,r)))}return new hn(n)},e}(Vn),ri=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),o=Qt(this._p._cb).apply(null,e);if(o===Gt)return this._o.onError(o.e);this._o.onNext(o)}else this._d.filter(i(this._i)).every(qt)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(qt)&&this._o.onCompleted()},e}(Bn);Mn.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Yt(e[t-1])?e.pop():j;Array.isArray(e[0])&&(e=e[0]);var i=this;return e.unshift(i),new ni(e,r)},Jn.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=Yt(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var ii=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:_(n,L),done:_(n,$),cb:this._cb,o:t},o=0;n>o;o++)!function(t){var n=e[t],o=new un;(de(n)||fe(n))&&(n=dr(n)),r[t]=o,o.setDisposable(n.subscribe(new oi(i,t)))}(o);return new hn(r)},e}(Vn),oi=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function i(t){return function(e,n){return n!==t}}return Xe(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),o=Qt(this._s.cb).apply(null,e);if(o===Gt)return this._s.o.onError(o.e);this._s.o.onNext(o)}else this._s.done.filter(i(this._i)).every(qt)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(qt)&&this._s.o.onCompleted()},e}(Bn);Mn.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Yt(e[t-1])?e.pop():j,i=this;return e.unshift(i),new ii(e,r)},Mn.asObservable=function(){return new Es(M(this),this)},Mn.bufferWithCount=Mn.bufferCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).flatMap(B).filter(H)};var si=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ai(t))},e}(Vn),ai=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.dematerialize=function(){return new si(this)};var ui=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ci(t,this.keyFn,this.comparer))},e}(Vn),ci=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e,n=t;return Yt(this.keyFn)&&(n=Qt(this.keyFn)(t),n===Gt)?this.o.onError(n.e):this.hasCurrentKey&&(e=Qt(this.comparer)(this.currentKey,n),e===Gt)?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Bn);Mn.distinctUntilChanged=function(t,e){return e||(e=Vt),new ui(this,t,e)};var li=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Yt(e._oN)?Ln(e._oN||Kt,e._oE||Kt,e._oC||Kt):e._oN,this.isStopped=!1,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Xe(n,Bn),n.prototype.next=function(t){var e=Qt(this.t.onNext).call(this.t,t);e===Gt&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=Qt(this.t.onError).call(this.t,t);return e===Gt?this.o.onError(e.e):void this.o.onError(t)},n.prototype.completed=function(){var t=Qt(this.t.onCompleted).call(this.t);return t===Gt?this.o.onError(t.e):void this.o.onCompleted()},e}(Vn);Mn["do"]=Mn.tap=Mn.doAction=function(t,e,n){return new li(this,t,e,n)},Mn.doOnNext=Mn.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},Mn.doOnError=Mn.tapOnError=function(t,e){return this.tap(Kt,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},Mn.doOnCompleted=Mn.tapOnCompleted=function(t,e){return this.tap(Kt,null,"undefined"!=typeof e?function(){t.call(e)}:t)};var hi=function(t){function e(e,n,r){this.source=e,this._fn=pe(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=Qt(this.source.subscribe).call(this.source,t);return e===Gt&&(this._fn(),i(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=Qt(this._s.dispose).call(this._s);this._fn(),t===Gt&&i(t.e)}},e}(Vn);Mn["finally"]=function(t,e){return new hi(this,t,e)};var fi=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=Kt,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Vn);Mn.ignoreElements=function(){return new fi(this)};var di=function(t){function e(e,n){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new pi(t))},e}(Vn),pi=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext(Fn(t))},e.prototype.error=function(t){this._o.onNext(Dn(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext($n()),this._o.onCompleted()},e}(Bn);Mn.materialize=function(){return new di(this)},Mn.repeat=function(t){return Qn(this,t).concat()},Mn.retry=function(t){return Qn(this,t).catchError()};var gi=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Xe(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ns,i=new Ns,o=this._notifier(r),s=o.subscribe(i),a=this.source["@@iterator"](),u={isDisposed:!1},c=new cn,l=xn.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var s=a.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var l=s.value;Wt(l)&&(l=ir(l));var h=new un,f=new un;c.setDisposable(new ln(f,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),h.dispose()},function(){t.onCompleted()}))}});return new hn([s,c,l,e(u)])},n}(Vn);Mn.retryWhen=function(t){return new gi(U(this),t)};var vi=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Xe(n,t),n.prototype.subscribeCore=function(t){var n,r=new Ns,i=new Ns,o=this._notifier(r),s=o.subscribe(i),a=this.source["@@iterator"](),u={isDisposed:!1},c=new cn,l=xn.scheduleRecursive(null,function(e,o){if(!u.isDisposed){var s=a.next();if(s.done)return void(n?t.onError(n):t.onCompleted());var l=s.value;Wt(l)&&(l=ir(l));var h=new un,f=new un;c.setDisposable(new ln(f,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){f.setDisposable(i.subscribe(o,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),h.dispose()}))}});return new hn([s,c,l,e(u)])},n}(Vn);Mn.repeatWhen=function(t){return new vi(U(this),t)};var mi=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new yi(t,this))},e}(Vn),yi=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Qt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Qt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Gt?this._o.onError(this._a.e):(this._o.onNext(this._a),void this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Bn);Mn.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new mi(this,n,e,t)};var bi=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new _i(t,this._c))},e}(Vn),_i=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.skipLast=function(t){if(0>t)throw new se;return new bi(this,t)},Mn.startWith=function(){var t,e=0;arguments.length&&vn(arguments[0])?(t=arguments[0],e=1):t=wn;for(var n=[],r=e,i=arguments.length;i>r;r++)n.push(arguments[r]);return Dr.apply(null,[gr(n,t),this])};var wi=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Bn);Mn.takeLast=function(t){if(0>t)throw new se;var e=this;return new Es(function(n){return e.subscribe(new wi(n,t))},e)};var Si=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},e}(Bn);Mn.takeLastBuffer=function(t){if(0>t)throw new se;var e=this;return new Es(function(n){return e.subscribe(new Si(n,t))},e)},Mn.windowWithCount=Mn.windowCount=function(t,e){var n=this;if(+t||(t=0),Math.abs(t)===1/0&&(t=0),0>=t)throw new se;if(null==e&&(e=t),+e||(e=0),Math.abs(e)===1/0&&(e=0),0>=e)throw new se;return new Es(function(r){function i(){var t=new Ns;u.push(t),r.onNext(Ye(t,s))}var o=new un,s=new fn(o),a=0,u=[];return i(),o.setDisposable(n.subscribe(function(n){for(var r=0,o=u.length;o>r;r++)u[r].onNext(n);var s=a-t+1;s>=0&&s%e===0&&u.shift().onCompleted(),++a%e===0&&i()},function(t){for(;u.length>0;)u.shift().onError(t);r.onError(t)},function(){for(;u.length>0;)u.shift().onCompleted();r.onCompleted()})),s},n)},Mn.selectConcat=Mn.concatMap=function(t,e,n){return Yt(t)&&Yt(e)?this.concatMap(function(n,r){var i=t(n,r);return Wt(i)&&(i=ir(i)),(de(i)||fe(i))&&(i=dr(i)),i.map(function(t,i){return e(n,t,r,i)})}):Yt(t)?K(this,t,n):K(this,function(){return t})},Mn.concatMapObserver=Mn.selectConcatObserver=function(t,e,n,r){var i=this,o=pe(t,r,2),s=pe(e,r,1),a=pe(n,r,0);return new Es(function(t){var e=0;return i.subscribe(function(n){var r;try{r=o(n,e++)}catch(i){return void t.onError(i)}Wt(r)&&(r=ir(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}Wt(n)&&(n=ir(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=a()}catch(n){return void t.onError(n)}Wt(e)&&(e=ir(e)),t.onNext(e),t.onCompleted()})},this).concatAll()};var xi=function(t){function e(e,n){this._o=e,this._d=n,this._f=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._f=!0,this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},e}(Bn);Mn.defaultIfEmpty=function(e){var n=this;return e===t&&(e=null),new Es(function(t){return n.subscribe(new xi(t,e))},n)},J.prototype.push=function(t){var e=-1===q(this.set,t,this.comparer);return e&&this.set.push(t),e};var Ei=function(t){function e(e,n,r){this.source=e,this._keyFn=n,this._cmpFn=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ai(t,this._keyFn,this._cmpFn))},e}(Vn),Ai=function(t){function e(e,n,r){this._o=e,this._keyFn=n,this._h=new J(r),t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=t;return Yt(this._keyFn)&&(e=Qt(this._keyFn)(t),e===Gt)?this._o.onError(e.e):void(this._h.push(e)&&this._o.onNext(t))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.distinct=function(t,e){return e||(e=Vt),new Ei(this,t,e)},Mn.groupBy=function(t,e){return this.groupByUntil(t,e,br)},Mn.groupByUntil=function(e,n,r){var i=this;return new Es(function(o){var s=new Ho,a=new Ze,u=new fn(a),c=function(t){return function(e){e.onError(t)}};return a.add(i.subscribe(function(i){var l=Qt(e)(i);if(l===Gt)return s.forEach(c(l.e)),o.onError(l.e);var h=!1,f=s.get(l);if(f===t&&(f=new Ns,s.set(l,f),h=!0),h){var d=new Rs(l,f,u),p=new Rs(l,f),g=Qt(r)(p);if(g===Gt)return s.forEach(c(g.e)),o.onError(g.e);o.onNext(d);var v=new un;a.add(v),v.setDisposable(g.take(1).subscribe(Kt,function(t){s.forEach(c(t)),o.onError(t)},function(){s["delete"](l)&&f.onCompleted(),a.remove(v)}))}var m=i;return Yt(n)&&(m=Qt(n)(i),m===Gt)?(s.forEach(c(m.e)),o.onError(m.e)):void f.onNext(m)},function(t){s.forEach(c(t)),o.onError(t)},function(){s.forEach(function(t){t.onCompleted()}),o.onCompleted()})),u},i)};var Ci=function(t){function e(e,n,r){this.source=e,this.selector=pe(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Bn.call(this)}return Xe(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},Xe(r,Bn),r.prototype.next=function(t){var e=Qt(this.selector)(t,this.i++,this.source);return e===Gt?this.o.onError(e.e):void this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Vn);Mn.map=Mn.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Ci?this.internalMap(n,e):new Ci(this,n,e)},Mn.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;t>n;n++)e[n]=arguments[n];return this.map(V(e,t))},Mn.flatMap=Mn.selectMany=Mn.mergeMap=function(t,e,n){return new zn(this,t,e,n).mergeAll()},Mn.flatMapObserver=Mn.selectManyObserver=function(t,e,n,r){var i=this;return new Es(function(o){var s=0;return i.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(i){return void o.onError(i)}Wt(n)&&(n=ir(n)),o.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(i){return void o.onError(i)}Wt(n)&&(n=ir(n)),o.onNext(n),o.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void o.onError(e)}Wt(t)&&(t=ir(t)),o.onNext(t),o.onCompleted()})},i).mergeAll()},Mn.flatMapLatest=Mn.switchMap=function(t,e,n){return new zn(this,t,e,n).switchLatest()};var Ri=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Xe(n,Bn),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Mn.skip=function(t){if(0>t)throw new se;return new Ri(this,t)};var Ni=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Oi(t,this))},e}(Vn),Oi=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(!this._r){var e=Qt(this._p._fn)(t,this._i++,this._p);if(e===Gt)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.skipWhile=function(t,e){var n=pe(t,e,3);return new Ni(this,n)};var Ti=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Xe(n,Bn),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Vn);Mn.take=function(t,e){if(0>t)throw new se;return 0===t?lr(e):new Ti(this,t)};var ki=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ii(t,this))},e}(Vn),Ii=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return this._r&&(this._r=Qt(this._p._fn)(t,this._i++,this._p),this._r===Gt)?this._o.onError(this._r.e):void(this._r?this._o.onNext(t):this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.takeWhile=function(t,e){var n=pe(t,e,3);return new ki(this,n)};var Pi=function(t){function e(e,n,r){this.source=e,this.predicate=pe(n,r,3),t.call(this)}function n(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Bn.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},Xe(r,Bn),r.prototype.next=function(t){var e=Qt(this.predicate)(t,this.i++,this.source);return e===Gt?this.o.onError(e.e):void(e&&this.o.onNext(t))},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Vn);Mn.filter=Mn.where=function(t,e){return this instanceof Pi?this.internalFilter(t,e):new Pi(this,t,e)};var Fi=function(t){function e(e,n,r){this.source=e,this._k=n,this._c=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Di(t,this._k,this._c))},e}(Vn),Di=function(t){function e(e,n,r){this._o=e,this._k=n,this._c=r,this._v=null,this._hv=!1,this._l=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._k)(t);if(e===Gt)return this._o.onError(e.e);var n=0;if(this._hv){if(n=Qt(this._c)(e,this._v),n===Gt)return this._o.onError(n.e)}else this._hv=!0,this._v=e;n>0&&(this._v=e,this._l=[]),n>=0&&this._l.push(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},e}(Bn),$i=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ji(t,this))},e}(Vn),ji=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=Qt(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?Qt(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Gt?this._o.onError(this._a.e):void this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new ie),this._o.onCompleted()},e}(Bn);Mn.reduce=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new $i(this,n,e,t)};var Li=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Mi(t,this._fn,this.source))},e}(Vn),Mi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._fn)(t,this._i++,this._s);return e===Gt?this._o.onError(e.e):void(Boolean(e)&&(this._o.onNext(!0),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Bn);Mn.some=function(t,e){var n=pe(t,e,3);return new Li(this,n)};var Bi=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Hi(t))},e}(Vn),Hi=function(t){function e(e){this._o=e,t.call(this)}return Xe(e,t),e.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Bn);Mn.isEmpty=function(){return new Bi(this)};var Ui=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ki(t,this._fn,this.source))},e}(Vn),Ki=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._fn)(t,this._i++,this._s);return e===Gt?this._o.onError(e.e):void(Boolean(e)||(this._o.onNext(!1),this._o.onCompleted()))},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},e}(Bn);Mn.every=function(t,e){var n=pe(t,e,3);return new Ui(this,n)};var qi=function(t){function e(e,n,r){var i=+r||0;Math.abs(i)===1/0&&(i=0),this.source=e,this._elem=n,this._n=i,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),rn):this.source.subscribe(new Ji(t,this._elem,this._n))},e}(Vn),Ji=function(t){function e(e,n,r){this._o=e,this._elem=n,this._n=r,this._i=0,t.call(this)}function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}
return Xe(e,t),e.prototype.next=function(t){this._i++>=this._n&&n(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},e}(Bn);Mn.includes=function(t,e){return new qi(this,t,e)};var Vi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new zi(t,this._fn,this.source))},e}(Vn),zi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=Qt(this._fn)(t,this._i++,this._s);if(e===Gt)return this._o.onError(e.e);Boolean(e)&&this._c++}else this._c++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Bn);Mn.count=function(t,e){var n=pe(t,e,3);return new Vi(this,n)};var Xi=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),rn):this.source.subscribe(new Wi(t,this._e,this._n))},e}(Vn),Wi=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},e}(Bn);Mn.indexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new Xi(this,t,n)};var Yi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Gi(t,this._fn,this.source))},e}(Vn),Gi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._i=0,this._c=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=Qt(this._fn)(t,this._i++,this._s);if(e===Gt)return this._o.onError(e.e);this._c+=e}else this._c+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},e}(Bn);Mn.sum=function(t,e){var n=pe(t,e,3);return new Yi(this,n)},Mn.minBy=function(t,e){return e||(e=zt),new Fi(this,t,function(t,n){return-1*e(t,n)})},Mn.min=function(t){return this.minBy(qt,t).map(z)},Mn.maxBy=function(t,e){return e||(e=zt),new Fi(this,t,e)},Mn.max=function(t){return this.maxBy(qt,t).map(z)};var Qi=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Zi(t,this._fn,this.source))},e}(Vn),Zi=function(t){function e(e,n,r){this._o=e,this._fn=n,this._s=r,this._c=0,this._t=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(this._fn){var e=Qt(this._fn)(t,this._c++,this._s);if(e===Gt)return this._o.onError(e.e);this._t+=e}else this._c++,this._t+=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){return 0===this._c?this._o.onError(new ie):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},e}(Bn);Mn.average=function(t,e){var n,r=this;return Yt(t)&&(n=pe(t,e,3)),new Qi(r,n)},Mn.sequenceEqual=function(t,e){var n=this;return e||(e=Vt),new Es(function(r){var i=!1,o=!1,s=[],a=[],u=n.subscribe(function(t){if(a.length>0){var n=a.shift(),i=Qt(e)(n,t);if(i===Gt)return r.onError(i.e);i||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){i=!0,0===s.length&&(a.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});(de(t)||fe(t))&&(t=dr(t)),Wt(t)&&(t=ir(t));var c=t.subscribe(function(t){if(s.length>0){var n=s.shift(),o=Qt(e)(n,t);if(o===Gt)return r.onError(o.e);o||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):a.push(t)},function(t){r.onError(t)},function(){o=!0,0===a.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});return new ln(u,c)},n)};var to=function(t){function e(e,n,r){this.source=e,this._i=n,this._d=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new eo(t,this._i,this._d))},e}(Vn),eo=function(e){function n(t,n,r){this._o=t,this._i=n,this._d=r,e.call(this)}return Xe(n,e),n.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._d===t?this._o.onError(new se):(this._o.onNext(this._d),this._o.onCompleted())},n}(Bn);Mn.elementAt=function(t,e){if(0>t)throw new se;return new to(this,t,e)};var no=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Xe(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Qt(this._obj.predicate)(t,this._i++,this._s);if(n===Gt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);if(e){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Bn);Mn.single=function(t,e){var n={},r=this;if(n="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Yt(n.predicate)){var i=n.predicate;n.predicate=pe(i,n.thisArg,3)}return new Es(function(t){return r.subscribe(new no(t,n,r))},r)};var ro=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new io(t,this._obj,this.source))},e}(Vn),io=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,e.call(this)}return Xe(n,e),n.prototype.next=function(t){if(this._obj.predicate){var e=Qt(this._obj.predicate)(t,this._i++,this._s);if(e===Gt)return this._o.onError(e.e);Boolean(e)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Bn);Mn.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Yt(t.predicate)){var e=t.predicate;t.predicate=pe(e,t.thisArg,3)}return new ro(this,t)};var oo=function(t){function e(e,n){this.source=e,this._obj=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new so(t,this._obj,this.source))},e}(Vn),so=function(e){function n(t,n,r){this._o=t,this._obj=n,this._s=r,this._i=0,this._hv=!1,this._v=null,e.call(this)}return Xe(n,e),n.prototype.next=function(t){var e=!1;if(this._obj.predicate){var n=Qt(this._obj.predicate)(t,this._i++,this._s);if(n===Gt)return this._o.onError(n.e);Boolean(n)&&(e=!0)}else this._obj.predicate||(e=!0);e&&(this._hv=!0,this._v=t)},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===t?this._o.onError(new ie):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},n}(Bn);Mn.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},Yt(t.predicate)){var e=t.predicate;t.predicate=pe(e,t.thisArg,3)}return new oo(this,t)};var ao=function(t){function e(e,n,r,i){this._o=e,this._s=n,this._cb=r,this._y=i,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._cb)(t,this._i,this._s);return e===Gt?this._o.onError(e.e):void(e?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},e}(Bn);Mn.find=function(t,e){return X(this,t,e,!1)},Mn.findIndex=function(t,e){return X(this,t,e,!0)};var uo=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new co(t))},e}(Vn),co=function(t){function e(e){this._o=e,this._s=new Ht.Set,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.add(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},e}(Bn);Mn.toSet=function(){if("undefined"==typeof Ht.Set)throw new TypeError;return new uo(this)};var lo=function(t){function e(e,n,r){this.source=e,this._k=n,this._e=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ho(t,this._k,this._e))},e}(Vn),ho=function(t){function e(e,n,r){this._o=e,this._k=n,this._e=r,this._m=new Ht.Map,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._k)(t);if(e===Gt)return this._o.onError(e.e);var n=t;return this._e&&(n=Qt(this._e)(t),n===Gt)?this._o.onError(n.e):void this._m.set(e,n)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},e}(Bn);Mn.toMap=function(t,e){if("undefined"==typeof Ht.Map)throw new TypeError;return new lo(this,t,e)};var fo=function(t){function e(e,n,r){this.source=e,this._b=n,this._e=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new po(t,this._b,this._e))},e}(Vn),po=function(t){function e(e,n,r){this._o=e,this._b=n,this._e=r,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.slice=function(t,e){var n=t||0;if(0>n)throw new Ut.ArgumentOutOfRangeError;if("number"==typeof e&&n>e)throw new Ut.ArgumentOutOfRangeError;return new fo(this,n,e)};var go=function(t){function e(e,n,r){this.source=e,this._e=n,this._n=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),rn):this.source.subscribe(new vo(t,this._e,this._n))},e}(Vn),vo=function(t){function e(e,n,r){this._o=e,this._e=n,this._n=r,this._v=0,this._hv=!1,this._i=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},e}(Bn);Mn.lastIndexOf=function(t,e){var n=+e||0;return Math.abs(n)===1/0&&(n=0),new go(this,t,n)},Jn.wrap=function(t){function e(){return Jn.spawn.call(this,t.apply(this,arguments))}return e.__generatorFunction__=t,e};var mo=Jn.spawn=function(){for(var t=arguments[0],e=this,n=[],r=1,i=arguments.length;i>r;r++)n.push(arguments[r]);return new Es(function(r){function i(e){var n=Qt(t.next).call(t,e);return n===Gt?r.onError(n.e):void s(n)}function o(e){var n=Qt(t.next).call(t,e);return n===Gt?r.onError(n.e):void s(n)}function s(t){if(t.done)return r.onNext(t.value),void r.onCompleted();var n=W.call(e,t.value),s=null,u=!1;Jn.isObservable(n)?a.add(n.subscribe(function(t){u=!0,s=t},o,function(){u&&i(s)})):o(new TypeError("type not supported"))}var a=new Ze;return Yt(t)&&(t=t.apply(e,n)),t&&Yt(t.next)?(i(),a):(r.onNext(t),r.onCompleted())})};Jn.start=function(t,e,n){return yo(t,e,n)()};var yo=Jn.toAsync=function(t,e,n){return vn(n)||(n=Nn),function(){var r=arguments,i=new Os;return n.schedule(null,function(){var n;try{n=t.apply(e,r)}catch(o){return void i.onError(o)}i.onNext(n),i.onCompleted()}),i.asObservable()}};Jn.fromCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return nt(t,e,n,i)}},Jn.fromNodeCallback=function(t,e,n){return function(){"undefined"==typeof e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;r>o;o++)i[o]=arguments[o];return it(t,e,n,i)}},at.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},Ut.config.useNativeEvents=!1;var bo=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Yt(e)&&(n=Qt(e).apply(null,arguments),n===Gt)?t.onError(n.e):void t.onNext(n)}}return Xe(e,t),e.prototype.subscribeCore=function(t){return ut(this._el,this._n,n(t,this._fn))},e}(Vn);Jn.fromEvent=function(t,e,n){return t.addListener?wo(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):Ut.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new bo(t,e,n).publish().refCount():wo(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var _o=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];return Yt(e)&&(n=Qt(e).apply(null,arguments),n===Gt)?t.onError(n.e):void t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),i=this._add(e);return new r(this._del,e,i)},r.prototype.dispose=function(){this.isDisposed||(Yt(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Vn),wo=Jn.fromEventPattern=function(t,e,n){return new _o(t,e,n).publish().refCount()};Jn.startAsync=function(t){var e=Qt(t)();return e===Gt?Ar(e.e):ir(e)};var So=function(t){function e(e,n){this.source=e,this.controller=new Ns,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Xe(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=rn,i=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=rn)});return new hn([n,r,i])},e.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},e.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},e}(Jn);Mn.pausable=function(t){return new So(this,t)};var xo=function(e){function n(t,n){this.source=t,this.controller=new Ns,this.paused=!0,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,e.call(this)}return Xe(n,e),n.prototype._subscribe=function(e){function n(){for(;i.length>0;)e.onNext(i.shift())}var r,i=[],o=ct(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){r!==t&&o.shouldFire!==r?(r=o.shouldFire,o.shouldFire&&n()):(r=o.shouldFire,o.shouldFire?e.onNext(o.data):i.push(o.data))},function(t){n(),e.onError(t)},function(){n(),e.onCompleted()});return o},n.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},n.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},n}(Jn);Mn.pausableBuffered=function(t){return new xo(this,t)};var Eo=function(t){function e(e,n,r){t.call(this),this.subject=new Ao(n,r),this.source=e.multicast(this.subject).refCount()}return Xe(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Jn),Ao=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Ns,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||xn}return Xe(e,t),We(e.prototype,jn,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Tn.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Tn.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Tn.createOnNext(t)):(0===this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n),i=e.hasCompleted||e.hasFailed;return!i&&r>0?(e.requestedCount=r,nn(function(){e.requestedCount=0})):void 0}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Jn);Mn.controlled=function(t,e){return t&&vn(t)&&(e=t,t=!0),null==t&&(t=!0),new Eo(this,t,e)};var Co=function(t){function e(e){t.call(this),this.source=e}function n(t,e){return e.source.request(1)}Xe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new ln(this.subscription,Nn.schedule(this,n))};var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r,this.scheduleDisposable=null}function n(t,e){return e.observable.source.request(1)}return Xe(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.scheduleDisposable=Nn.schedule(this,n)},e.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Bn);return e}(Jn);Eo.prototype.stopAndWait=function(){return new Co(this)};var Ro=function(t){function e(e,n){t.call(this),this.source=e,this.windowSize=n}function n(t,e){return e.source.request(e.windowSize)}Xe(e,t),e.prototype._subscribe=function(t){return this.subscription=this.source.subscribe(new r(t,this,this.subscription)),new ln(this.subscription,Nn.schedule(this,n))};var r=function(t){function e(e,n,r){this.observer=e,this.observable=n,this.cancel=r,this.received=0,this.scheduleDisposable=null,t.call(this)}function n(t,e){return e.observable.source.request(e.observable.windowSize)}return Xe(e,t),e.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},e.prototype.error=function(t){this.observer.onError(t),this.dispose()},e.prototype.next=function(t){this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Nn.schedule(this,n))},e.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),t.prototype.dispose.call(this)},e}(Bn);return e}(Jn);Eo.prototype.windowed=function(t){return new Ro(this,t)},Mn.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e)&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t};var No=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new ln(this._fn2(e).subscribe(t),e.connect())},e}(Vn);Mn.multicast=function(t,e){return Yt(t)?new No(this,t,e):new ko(this,t)},Mn.publish=function(t){return t&&Yt(t)?this.multicast(function(){return new Ns},t):this.multicast(new Ns)},Mn.share=function(){return this.publish().refCount()},Mn.publishLast=function(t){return t&&Yt(t)?this.multicast(function(){return new Os},t):this.multicast(new Os)},Mn.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new Ts(e)},t):this.multicast(new Ts(t))},Mn.shareValue=function(t){return this.publishValue(t).refCount()},Mn.replay=function(t,e,n,r){return t&&Yt(t)?this.multicast(function(){return new ks(e,n,r)},t):this.multicast(new ks(e,n,r))},Mn.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var Oo=function(t,e){this._s=t,this._o=e};Oo.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var To=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1===++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0===--this._p._count&&this._p._connectableSubscription.dispose())},e}(Vn),ko=Ut.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Xe(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return rn;var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new To(this)},e}(Jn);Mn.singleInstance=function(){function t(){return r||(r=!0,e=n["finally"](function(){r=!1}).publish().refCount()),e}var e,n=this,r=!1;return new Es(function(e){return t().subscribe(e)})},Mn.join=function(t,e,n,r){var i=this;return new Es(function(o){var s=new Ze,a=!1,u=!1,c=0,l=0,h=new Ho,f=new Ho,d=function(t){o.onError(t)};return s.add(i.subscribe(function(t){var n=c++,i=new un;h.set(n,t),s.add(i);var u=Qt(e)(t);return u===Gt?o.onError(u.e):(i.setDisposable(u.take(1).subscribe(Kt,d,function(){h["delete"](n)&&0===h.size&&a&&o.onCompleted(),s.remove(i)})),void f.forEach(function(e){var n=Qt(r)(t,e);return n===Gt?o.onError(n.e):void o.onNext(n)}))},d,function(){a=!0,(u||0===h.size)&&o.onCompleted()})),s.add(t.subscribe(function(t){var e=l++,i=new un;f.set(e,t),s.add(i);var a=Qt(n)(t);return a===Gt?o.onError(a.e):(i.setDisposable(a.take(1).subscribe(Kt,d,function(){f["delete"](e)&&0===f.size&&u&&o.onCompleted(),s.remove(i)})),void h.forEach(function(e){var n=Qt(r)(e,t);return n===Gt?o.onError(n.e):void o.onNext(n)}))},d,function(){u=!0,(a||0===f.size)&&o.onCompleted()})),s},i)},Mn.groupJoin=function(t,e,n,r){var i=this;return new Es(function(o){function s(t){}var a=new Ze,u=new fn(a),c=new Ho,l=new Ho,h=0,f=0,s=function(t){return function(e){e.onError(t)}};return a.add(i.subscribe(function(t){var n=new Ns,i=h++;c.set(i,n);var f=Qt(r)(t,Ye(n,u));if(f===Gt)return c.forEach(s(f.e)),o.onError(f.e);o.onNext(f),l.forEach(function(t){n.onNext(t)});var d=new un;a.add(d);var p=Qt(e)(t);return p===Gt?(c.forEach(s(p.e)),o.onError(p.e)):void d.setDisposable(p.take(1).subscribe(Kt,function(t){c.forEach(s(t)),o.onError(t)},function(){c["delete"](i)&&n.onCompleted(),a.remove(d)}))},function(t){c.forEach(s(t)),o.onError(t)},function(){o.onCompleted()})),a.add(t.subscribe(function(t){var e=f++;l.set(e,t);var r=new un;a.add(r);var i=Qt(n)(t);return i===Gt?(c.forEach(s(i.e)),o.onError(i.e)):(r.setDisposable(i.take(1).subscribe(Kt,function(t){c.forEach(s(t)),o.onError(t)},function(){l["delete"](e),a.remove(r)})),void c.forEach(function(e){e.onNext(t)}))},function(t){c.forEach(s(t)),o.onError(t)})),u},i)},Mn.buffer=function(){return this.window.apply(this,arguments).flatMap(B)},Mn.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?ht.call(this,t):"function"==typeof t?ft.call(this,t):lt.call(this,t,e)};var Io=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Po(t))},e}(Vn),Po=function(t){function e(e){this._o=e,this._p=null,this._hp=!1,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._hp?this._o.onNext([this._p,t]):this._hp=!0,this._p=t},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.pairwise=function(){return new Io(this)},Mn.partition=function(t,e){var n=pe(t,e,3);return[this.filter(t,e),this.filter(function(t,e,r){return!n(t,e,r)})]};var Fo=function(t){function e(t,e){this.c=t,this.s=e}return Xe(e,t),e.prototype[le]=function(){var t=this;return{next:function(){return t.c()?{done:!1,value:t.s}:{done:!0,value:void 0}}}},e}(Xn);Mn.letBind=Mn["let"]=function(t){return t(this)},Jn["if"]=function(t,e,n){return ar(function(){return n||(n=lr()),Wt(e)&&(e=ir(e)),Wt(n)&&(n=ir(n)),"function"==typeof n.now&&(n=lr(n)),t()?e:n})},Jn["for"]=Jn.forIn=function(t,e,n){return tr(t,e,n).concat()};var Do=Jn["while"]=Jn.whileDo=function(t,e){return Wt(e)&&(e=ir(e)),dt(t,e).concat()};Mn.doWhile=function(t){return Dr([this,Do(t,this)])},Jn["case"]=function(t,e,n){return ar(function(){Wt(n)&&(n=ir(n)),n||(n=lr()),vn(n)&&(n=lr(n));var r=e[t()];return Wt(r)&&(r=ir(r)),r||n})};var $o=function(t){function e(e,n,r){this.source=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e){var n,r=t[0],i=t[1];if(!(r.q.length>0))return void(r.isAcquired=!1);n=r.q.shift();var o=new un;r.d.add(o),o.setDisposable(n.subscribe(new jo(r,i,o))),e([r,i])}return Xe(e,t),e.prototype._ensureActive=function(t){var e=!1;t.q.length>0&&(e=!t.isAcquired,t.isAcquired=!0),e&&t.m.setDisposable(this._scheduler.scheduleRecursive([t,this],n))},e.prototype.subscribeCore=function(t){var e=new cn,n=new Ze(e),r={q:[],m:e,d:n,activeCount:0,isAcquired:!1,o:t};return r.q.push(this.source),r.activeCount++,this._ensureActive(r),n},e}(Vn),jo=function(t){function e(e,n,r){this._s=e,this._p=n,this._m1=r,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.o.onNext(t);var e=Qt(this._p._fn)(t);return e===Gt?this._s.o.onError(e.e):(this._s.q.push(e),this._s.activeCount++,void this._p._ensureActive(this._s))},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},e}(Bn);Mn.expand=function(t,e){return vn(e)||(e=xn),new $o(this,t,e)};var Lo=function(t){function e(e,n){this._sources=e,this._cb=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){if(0===this._sources.length)return t.onCompleted(),rn;for(var e=this._sources.length,n={finished:!1,hasResults:new Array(e),hasCompleted:new Array(e),results:new Array(e)},r=new Ze,i=0,o=this._sources.length;o>i;i++){var s=this._sources[i];Wt(s)&&(s=ir(s)),r.add(s.subscribe(new Mo(t,n,i,this._cb,r)))}return r},e}(Vn),Mo=function(t){function e(e,n,r,i,o){this._o=e,this._s=n,this._i=r,this._cb=i,this._subs=o,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=t)},e.prototype.error=function(t){this._s.finished=!0,this._o.onError(t),this._subs.dispose()},e.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var t=0;t<this._s.results.length;t++)if(!this._s.hasCompleted[t])return;this._s.finished=!0;var e=Qt(this._cb).apply(null,this._s.results);if(e===Gt)return this._o.onError(e.e);this._o.onNext(e),this._o.onCompleted()}},e}(Bn);Jn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=Yt(e[t-1])?e.pop():j;return Array.isArray(e[0])&&(e=e[0]),new Lo(e,r)},Mn.forkJoin=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Jn.forkJoin.apply(null,e)},Mn.manySelect=Mn.extend=function(t,e){vn(e)||(e=Ut.Scheduler.immediate);var n=this;return ar(function(){var r;return n.map(function(t){var e=new Bo(t);return r&&r.onNext(t),r=e,e}).tap(Kt,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var Bo=function(t){function e(e){t.call(this),this.head=e,this.tail=new Os}return Xe(e,t),We(e.prototype,jn,{_subscribe:function(t){var e=new Ze;return e.add(xn.schedule(this,function(n,r){t.onNext(r.head),e.add(r.tail.mergeAll().subscribe(t))})),e},onCompleted:function(){this.onNext(Jn.empty())},onError:function(t){this.onNext(Jn["throw"](t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),e}(Jn),Ho=Ht.Map||function(){function e(){this.size=0,this._values=[],this._keys=[]}return e.prototype["delete"]=function(t){var e=this._keys.indexOf(t);return-1!==e&&(this._values.splice(e,1),this._keys.splice(e,1),this.size--,!0)},e.prototype.get=function(e){var n=this._keys.indexOf(e);return-1===n?t:this._values[n]},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);return-1===n?(this._keys.push(t),this._values.push(e),this.size++):this._values[n]=e,this},e.prototype.forEach=function(t,e){for(var n=0;n<this.size;n++)t.call(e,this._values[n],this._keys[n])},e}();pt.prototype.and=function(t){return new pt(this.patterns.concat(t))},pt.prototype.thenDo=function(t){return new gt(this,t)},gt.prototype.activate=function(t,e,n){for(var r=[],i=vt(e),o=0,s=this.expression.patterns.length;s>o;o++)r.push(yt(t,this.expression.patterns[o],i));var a=new bt(r,mt(this,e),function(){for(var t=0,e=r.length;e>t;t++)r[t].removeActivePlan(a);n(a)});for(o=0,s=r.length;s>o;o++)r[o].addActivePlan(a);return a},bt.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},bt.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],i=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(i=!0);if(i)this.onCompleted();else{this.dequeue();var o=[];for(t=0,e=r.length;t<r.length;t++)o.push(r[t].value);this.onNext.apply(this,o)}}};var Uo=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new un,this.isDisposed=!1}Xe(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.error);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=Kt,n.completed=Kt,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(Bn);Mn.and=function(t){return new pt([this,t])},Mn.thenDo=function(t){return new pt([this]).thenDo(t)},Jn.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Es(function(e){var n=[],r=new Ho,i=Ln(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(t){e.onCompleted()});try{for(var o=0,s=t.length;s>o;o++)n.push(t[o].activate(r,i,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(a){return Ar(a).subscribe(e)}var u=new Ze;return r.forEach(function(t){t.subscribe(),
u.add(t)}),u})};var Ko=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Vn),qo=Jn.interval=function(t,e){return St(t,t,vn(e)?e:Nn)};Jn.timer=function(e,n,r){var i;return vn(r)||(r=Nn),null!=n&&"number"==typeof n?i=n:vn(n)&&(r=n),(e instanceof Date||"number"==typeof e)&&i===t?_t(e,r):e instanceof Date&&i!==t?wt(e,n,r):St(e,i,r)},Mn.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return vn(n)||(n=Nn),e instanceof Date?Et(this,e,n):xt(this,e,n)}if(Jn.isObservable(t)||Yt(t))return At(this,t,arguments[1]);throw new Error("Invalid arguments")};var Jo=function(t){function e(e,n,r){vn(r)||(r=Nn),this.source=e,this._dt=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn;return new ln(this.source.subscribe(new Vo(t,this._dt,this._s,e)),e)},e}(Vn),Vo=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new un;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Bn);Mn.debounce=function(){if(Yt(arguments[0]))return Ct(this,arguments[0]);if("number"==typeof arguments[0])return new Jo(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Mn.windowWithTime=Mn.windowTime=function(t,e,n){var r,i=this;return null==e&&(r=t),vn(n)||(n=Nn),"number"==typeof e?r=e:vn(e)&&(r=t,n=e),new Es(function(e){function o(){var t=new un,i=!1,s=!1;h.setDisposable(t),c===u?(i=!0,s=!0):u>c?i=!0:s=!0;var d=i?c:u,p=d-f;f=d,i&&(c+=r),s&&(u+=r),t.setDisposable(n.scheduleFuture(null,p,function(){if(s){var t=new Ns;l.push(t),e.onNext(Ye(t,a))}i&&l.shift().onCompleted(),o()}))}var s,a,u=r,c=t,l=[],h=new cn,f=0;return s=new Ze(h),a=new fn(s),l.push(new Ns),e.onNext(Ye(l[0],a)),o(),s.add(i.subscribe(function(t){for(var e=0,n=l.length;n>e;e++)l[e].onNext(t)},function(t){for(var n=0,r=l.length;r>n;n++)l[n].onError(t);e.onError(t)},function(){for(var t=0,n=l.length;n>t;t++)l[t].onCompleted();e.onCompleted()})),a},i)},Mn.windowWithTimeOrCount=Mn.windowTimeOrCount=function(t,e,n){var r=this;return vn(n)||(n=Nn),new Es(function(i){function o(e){var r=new un;s.setDisposable(r),r.setDisposable(n.scheduleFuture(null,t,function(){if(e===l){c=0;var t=++l;h.onCompleted(),h=new Ns,i.onNext(Ye(h,u)),o(t)}}))}var s=new cn,a=new Ze(s),u=new fn(a),c=0,l=0,h=new Ns;return i.onNext(Ye(h,u)),o(0),a.add(r.subscribe(function(t){var n=0,r=!1;h.onNext(t),++c===e&&(r=!0,c=0,n=++l,h.onCompleted(),h=new Ns,i.onNext(Ye(h,u))),r&&o(n)},function(t){h.onError(t),i.onError(t)},function(){h.onCompleted(),i.onCompleted()})),u},r)},Mn.bufferWithTime=Mn.bufferTime=function(t,e,n){return this.windowWithTime(t,e,n).flatMap(B)},Mn.bufferWithTimeOrCount=Mn.bufferTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).flatMap(B)};var zo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Xo(t,this._s))},e}(Vn),Xo=function(t){function e(e,n){this._o=e,this._s=n,this._l=n.now(),t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now(),n=e-this._l;this._l=e,this._o.onNext({value:t,interval:n})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.timeInterval=function(t){return vn(t)||(t=Nn),new zo(this,t)};var Wo=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Yo(t,this._s))},e}(Vn),Yo=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.timestamp=function(t){return vn(t)||(t=Nn),new Wo(this,t)};var Go=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new un};return e.sourceSubscription.setDisposable(this.source.subscribe(new Zo(e))),new ln(e.sourceSubscription,this._sampler.subscribe(new Qo(e)))},e}(Vn),Qo=function(t){function e(e){this._s=e,t.call(this)}return Xe(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Bn),Zo=function(t){function e(e){this._s=e,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Bn);Mn.sample=function(t,e){return vn(e)||(e=Nn),"number"==typeof t?new Go(this,qo(t,e)):new Go(this,t)};var ts=Ut.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};ts.prototype=Object.create(Error.prototype),Mn.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Nt(this,t,arguments[1],arguments[2]);if(Jn.isObservable(t)||Yt(t))return Rt(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var es=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Qt(t.self._itrFn)(t.newState),t.newState===Gt)return t.o.onError(t.newState.e);if(t.hasResult=Qt(t.self._cndFn)(t.newState),t.hasResult===Gt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Qt(t.self._resFn)(t.newState),t.result===Gt)return t.o.onError(t.result.e);var n=Qt(t.self._timeFn)(t.newState);if(n===Gt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,new Date(this._s.now()),n)},e}(Vn);Jn.generateWithAbsoluteTime=function(t,e,n,r,i,o){return vn(o)||(o=Nn),new es(t,e,n,r,i,o)};var ns=function(t){function e(e,n,r,i,o,s){this._state=e,this._cndFn=n,this._itrFn=r,this._resFn=i,this._timeFn=o,this._s=s,t.call(this)}function n(t,e){if(t.hasResult&&t.o.onNext(t.result),t.first)t.first=!1;else if(t.newState=Qt(t.self._itrFn)(t.newState),t.newState===Gt)return t.o.onError(t.newState.e);if(t.hasResult=Qt(t.self._cndFn)(t.newState),t.hasResult===Gt)return t.o.onError(t.hasResult.e);if(t.hasResult){if(t.result=Qt(t.self._resFn)(t.newState),t.result===Gt)return t.o.onError(t.result.e);var n=Qt(t.self._timeFn)(t.newState);if(n===Gt)return t.o.onError(n.e);e(t,n)}else t.o.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){var e={o:t,self:this,newState:this._state,first:!0,hasResult:!1};return this._s.scheduleRecursiveFuture(e,0,n)},e}(Vn);Jn.generateWithRelativeTime=function(t,e,n,r,i,o){return vn(o)||(o=Nn),new ns(t,e,n,r,i,o)};var rs=function(t){function e(e,n,r){this.source=e,this._dt=n,this._s=r,t.call(this)}function n(t,e){var n=e[0],r=e[1],i=e[2];i.setDisposable(n.subscribe(r))}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new cn;return e.setDisposable(this._s.scheduleFuture([this.source,t,e],this._dt,n)),e},e}(Vn);Mn.delaySubscription=function(t,e){return vn(e)||(e=Nn),new rs(this,t,e)};var is=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new os(t,this))},e}(Vn),os=function(t){function e(e,n){this._o=e,this._s=n._s,this._d=n._d,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0&&t-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},e}(Bn);Mn.skipLastWithTime=function(t,e){return vn(e)||(e=Nn),new is(this,t,e)};var ss=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new as(t,this._d,this._s))},e}(Vn),as=function(t){function e(e,n,r){this._o=e,this._d=n,this._s=r,this._q=[],t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=this._s.now();for(this._q.push({interval:e,value:t});this._q.length>0&&e-this._q[0].interval>=this._d;)this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(var t=this._s.now();this._q.length>0;){var e=this._q.shift();t-e.interval<=this._d&&this._o.onNext(e.value)}this._o.onCompleted()},e}(Bn);Mn.takeLastWithTime=function(t,e){return vn(e)||(e=Nn),new ss(this,t,e)},Mn.takeLastBufferWithTime=function(t,e){var n=this;return vn(e)||(e=Nn),new Es(function(r){var i=[];return n.subscribe(function(n){var r=e.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=t;)i.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=t&&o.push(s.value)}r.onNext(o),r.onCompleted()})},n)};var us=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,t.call(this)}function n(t,e){e.onCompleted()}return Xe(e,t),e.prototype.subscribeCore=function(t){return new ln(this._s.scheduleFuture(t,this._d,n),this.source.subscribe(t))},e}(Vn);Mn.takeWithTime=function(t,e){return vn(e)||(e=Nn),new us(this,t,e)};var cs=function(t){function e(e,n,r){this.source=e,this._d=n,this._s=r,this._open=!1,t.call(this)}function n(t,e){e._open=!0}return Xe(e,t),e.prototype.subscribeCore=function(t){return new ln(this._s.scheduleFuture(this,this._d,n),this.source.subscribe(new ls(t,this)))},e}(Vn),ls=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.skipWithTime=function(t,e){return vn(e)||(e=Nn),new cs(this,t,e)};var hs=function(t){function e(e,n,r){this.source=e,this._st=n,this._s=r,t.call(this)}function n(t,e){e._open=!0}return Xe(e,t),e.prototype.subscribeCore=function(t){return this._open=!1,new ln(this._s.scheduleFuture(this,this._st,n),this.source.subscribe(new fs(t,this)))},e}(Vn),fs=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Bn);Mn.skipUntilWithTime=function(t,e){return vn(e)||(e=Nn),new hs(this,t,e)},Mn.takeUntilWithTime=function(t,e){vn(e)||(e=Nn);var n=this;return new Es(function(r){return new ln(e.scheduleFuture(r,t,function(t,e){e.onCompleted()}),n.subscribe(r))},n)},Mn.throttle=function(t,e){vn(e)||(e=Nn);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new Es(function(t){var i=0;return r.subscribe(function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)};var ds=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){var e=Qt(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Gt&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Bn);Mn.transduce=function(t){var e=this;return new Es(function(n){var r=t(Ot(n));return e.subscribe(new ds(n,r))},e)};var ps=function(t){function e(e){this.source=e,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){var e=new un,n=new Ze,r={hasCurrent:!1,isStopped:!1,o:t,g:n};return n.add(e),e.setDisposable(this.source.subscribe(new gs(r))),n},e}(Vn),gs=function(t){function e(e){this._s=e,t.call(this)}function n(e,n){this._s=e,this._i=n,t.call(this)}return Xe(e,t),e.prototype.next=function(t){if(!this._s.hasCurrent){this._s.hasCurrent=!0,Wt(t)&&(t=ir(t));var e=new un;this._s.g.add(e),e.setDisposable(t.subscribe(new n(this._s,e)))}},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},Xe(n,t),n.prototype.next=function(t){this._s.o.onNext(t)},n.prototype.error=function(t){this._s.o.onError(t)},n.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},e}(Bn);Mn.switchFirst=function(){return new ps(this)},Mn.flatMapFirst=Mn.exhaustMap=function(t,e,n){return new zn(this,t,e,n).switchFirst()},Mn.flatMapWithMaxConcurrent=Mn.flatMapMaxConcurrent=function(t,e,n,r){return new zn(this,e,n,r).merge(t)};var vs=Ut.VirtualTimeScheduler=function(t){function e(e,n){this.clock=e,this.comparer=n,this.isEnabled=!1,this.queue=new Ge(1024),t.call(this)}Xe(e,t);var n=e.prototype;return n.now=function(){return this.toAbsoluteTime(this.clock)},n.schedule=function(t,e){return this.scheduleAbsolute(t,this.clock,e)},n.scheduleFuture=function(t,e,n){var r=e instanceof Date?this.toRelativeTime(e-this.now()):this.toRelativeTime(e);return this.scheduleRelative(t,r,n)},n.add=ce,n.toAbsoluteTime=ce,n.toRelativeTime=ce,n.schedulePeriodic=function(t,e,n){var r=new bn(this,t,e,n);return r.start()},n.scheduleRelative=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsolute(t,r,n)},n.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},n.stop=function(){this.isEnabled=!1},n.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new se;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},n.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new se;0!==n&&this.advanceTo(e)},n.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new se;this.clock=e},n.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},n.scheduleAbsolute=function(t,e,n){function r(t,e){return i.queue.remove(o),n(t,e)}var i=this,o=new dn(this,t,r,e,this.comparer);return this.queue.enqueue(o),o.disposable},e}(pn);Ut.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,i=n||zt;t.call(this,r,i)}Xe(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toAbsoluteTime=function(t){return new Date(t).getTime()},n.toRelativeTime=function(t){return t},e}(Ut.VirtualTimeScheduler),Tt.prototype.equals=function(t){return t===this||null!=t&&("N"===t.kind&&this.predicate(t.value))},kt.prototype.equals=function(t){return t===this||null!=t&&("E"===t.kind&&this.predicate(t.error))};var ms=Ut.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(t,e){return"function"==typeof e?new ys(t,new Tt(e)):new ys(t,Tn.createOnNext(e))},onError:function(t,e){return"function"==typeof e?new ys(t,new kt(e)):new ys(t,Tn.createOnError(e))},onCompleted:function(t){return new ys(t,Tn.createOnCompleted())},subscribe:function(t,e){return new bs(t,e)}},ys=Ut.Recorded=function(t,e,n){this.time=t,this.value=e,this.comparer=n||Vt};ys.prototype.equals=function(t){return this.time===t.time&&this.comparer(this.value,t.value)},ys.prototype.toString=function(){return this.value.toString()+"@"+this.time};var bs=Ut.Subscription=function(t,e){this.subscribe=t,this.unsubscribe=e||Number.MAX_VALUE};bs.prototype.equals=function(t){return this.subscribe===t.subscribe&&this.unsubscribe===t.unsubscribe},bs.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var _s=Ut.MockDisposable=function(t){this.scheduler=t,this.disposes=[],this.disposes.push(this.scheduler.clock)};_s.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var ws=function(t){function e(e){t.call(this),this.scheduler=e,this.messages=[]}Xe(e,t);var n=e.prototype;return n.onNext=function(t){this.messages.push(new ys(this.scheduler.clock,Tn.createOnNext(t)))},n.onError=function(t){this.messages.push(new ys(this.scheduler.clock,Tn.createOnError(t)))},n.onCompleted=function(){this.messages.push(new ys(this.scheduler.clock,Tn.createOnCompleted()))},e}(jn);It.prototype.then=function(e,n){var r=this;this.subscriptions.push(new bs(this.scheduler.clock));var i,o=this.subscriptions.length-1,s=Ut.Observer.create(function(n){var a=e(n);if(a&&"function"==typeof a.then)i=a;else{var u=r.scheduler.clock;i=new It(r.scheduler,[Ut.ReactiveTest.onNext(u,t),Ut.ReactiveTest.onCompleted(u)])}var c=r.observers.indexOf(s);r.observers.splice(c,1),r.subscriptions[o]=new bs(r.subscriptions[o].subscribe,r.scheduler.clock)},function(t){n(t);var e=r.observers.indexOf(s);r.observers.splice(e,1),r.subscriptions[o]=new bs(r.subscriptions[o].subscribe,r.scheduler.clock)});return this.observers.push(s),i||new It(this.scheduler,this.messages)};var Ss=function(t){function e(e,n){t.call(this);var r,i,o=this;this.scheduler=e,this.messages=n,this.subscriptions=[],this.observers=[];for(var s=0,a=this.messages.length;a>s;s++)r=this.messages[s],i=r.value,function(t){e.scheduleAbsolute(null,r.time,function(){for(var e=o.observers.slice(0),n=0,r=e.length;r>n;n++)t.accept(e[n]);return rn})}(i)}return Xe(e,t),e.prototype._subscribe=function(t){var e=this;this.observers.push(t),this.subscriptions.push(new bs(this.scheduler.clock));var n=this.subscriptions.length-1;return nn(function(){var r=e.observers.indexOf(t);e.observers.splice(r,1),e.subscriptions[n]=new bs(e.subscriptions[n].subscribe,e.scheduler.clock)})},e}(Jn),xs=function(t){function e(e,n){t.call(this),this.scheduler=e,this.messages=n,this.subscriptions=[]}return Xe(e,t),e.prototype._subscribe=function(t){var e,n,r=this;this.subscriptions.push(new bs(this.scheduler.clock));for(var i=this.subscriptions.length-1,o=new Ze,s=0,a=this.messages.length;a>s;s++)e=this.messages[s],n=e.value,function(n){o.add(r.scheduler.scheduleRelative(null,e.time,function(){return n.accept(t),rn}))}(n);return nn(function(){r.subscriptions[i]=new bs(r.subscriptions[i].subscribe,r.scheduler.clock),o.dispose()})},e}(Jn);Ut.TestScheduler=function(t){function e(t,e){return t>e?1:e>t?-1:0}function n(){t.call(this,0,e)}return Xe(n,t),n.prototype.scheduleAbsolute=function(e,n,r){return n<=this.clock&&(n=this.clock+1),t.prototype.scheduleAbsolute.call(this,e,n,r)},n.prototype.add=function(t,e){return t+e},n.prototype.toAbsoluteTime=function(t){return new Date(t).getTime()},n.prototype.toRelativeTime=function(t){return t},n.prototype.startScheduler=function(t,e){e||(e={}),null==e.created&&(e.created=ms.created),null==e.subscribed&&(e.subscribed=ms.subscribed),null==e.disposed&&(e.disposed=ms.disposed);var n,r,i=this.createObserver();return this.scheduleAbsolute(null,e.created,function(){return n=t(),rn}),this.scheduleAbsolute(null,e.subscribed,function(){return r=n.subscribe(i),rn}),this.scheduleAbsolute(null,e.disposed,function(){return r.dispose(),rn}),this.start(),i},n.prototype.createHotObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new Ss(this,t)},n.prototype.createColdObservable=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new xs(this,t)},n.prototype.createResolvedPromise=function(t,e){return new It(this,[Ut.ReactiveTest.onNext(t,e),Ut.ReactiveTest.onCompleted(t)])},n.prototype.createRejectedPromise=function(t,e){return new It(this,[Ut.ReactiveTest.onError(t,e)])},n.prototype.createObserver=function(){return new ws(this)},n}(vs);var Es=Ut.AnonymousObservable=function(t){function e(t){return t&&Yt(t.dispose)?t:Yt(t)?nn(t):rn}function n(t,n){var r=n[0],o=n[1],s=Qt(o.__subscribe).call(o,r);s!==Gt||r.fail(Gt.e)||i(Gt.e),r.setDisposable(e(s))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Xe(r,t),r.prototype._subscribe=function(t){var e=new As(t),r=[e,this];return xn.scheduleRequired()?xn.schedule(r,n):n(null,r),e},r}(Jn),As=function(t){function e(e){t.call(this),this.observer=e,this.m=new un}Xe(e,t);var n=e.prototype;return n.next=function(t){var e=Qt(this.observer.onNext).call(this.observer,t);e===Gt&&(this.dispose(),i(e.e))},n.error=function(t){var e=Qt(this.observer.onError).call(this.observer,t);this.dispose(),e===Gt&&i(e.e)},n.completed=function(){var t=Qt(this.observer.onCompleted).call(this.observer);this.dispose(),t===Gt&&i(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Bn),Cs=function(t){function e(e,n){this._m=e,this._u=n,t.call(this)}return Xe(e,t),e.prototype.subscribeCore=function(t){return new ln(this._m.getDisposable(),this._u.subscribe(t))},e}(Vn),Rs=function(t){function e(e,n,r){t.call(this),this.key=e,this.underlyingObservable=r?new Cs(r,n):n}return Xe(e,t),e.prototype._subscribe=function(t){return this.underlyingObservable.subscribe(t)},e}(Jn),Ns=Ut.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Xe(e,t),We(e.prototype,jn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?this.hasError?(t.onError(this.error),rn):(t.onCompleted(),rn):(this.observers.push(t),new Oo(this,t))},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(sn(this),!this.isStopped)for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Is(t,e)},e}(Jn),Os=Ut.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Xe(e,t),We(e.prototype,jn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),rn):(this.observers.push(t),new Oo(this,t))},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){var t,e;if(sn(this),!this.isStopped){this.isStopped=!0;var r=n(this.observers),e=r.length;if(this.hasValue)for(t=0;e>t;t++){var i=r[t];i.onNext(this.value),i.onCompleted()}else for(t=0;e>t;t++)r[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){sn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Jn),Ts=Ut.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Xe(e,t),We(e.prototype,jn.prototype,{_subscribe:function(t){return sn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),rn):(this.observers.push(t),t.onNext(this.value),new Oo(this,t))},getValue:function(){return sn(this),this.hasError&&i(this.error),this.value},hasObservers:function(){return sn(this),this.observers.length>0},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=n(this.observers),r=e.length;r>t;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onError(t);this.observers.length=0}},onNext:function(t){if(sn(this),!this.isStopped){this.value=t;for(var e=0,r=n(this.observers),i=r.length;i>e;e++)r[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Jn),ks=Ut.ReplaySubject=function(t){function e(t,e){return nn(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function r(e,n,r){this.bufferSize=null==e?i:e,this.windowSize=null==n?i:n,this.scheduler=r||xn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var i=Math.pow(2,53)-1;return Xe(r,t),We(r.prototype,jn.prototype,{_subscribe:function(t){sn(this);var n=new Kn(this.scheduler,t),r=e(this,n);this._trim(this.scheduler.now()),this.observers.push(n);for(var i=0,o=this.q.length;o>i;i++)n.onNext(this.q[i].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return sn(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(sn(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var r=0,i=n(this.observers),o=i.length;o>r;r++){var s=i[r];s.onNext(t),s.ensureActive()}}},onError:function(t){if(sn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var r=0,i=n(this.observers),o=i.length;o>r;r++){var s=i[r];s.onError(t),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(sn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,r=n(this.observers),i=r.length;i>e;e++){var o=r[e];o.onCompleted(),o.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),r}(Jn),Is=Ut.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Xe(e,t),We(e.prototype,jn.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Jn);Ut.Pauser=function(t){function e(){t.call(this)}return Xe(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Ns),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ht.Rx=Ut,define(function(){return Ut})):Ft&&Dt?Mt?(Dt.exports=Ut).Rx=Ut:Ft.Rx=Ut:Ht.Rx=Ut;var Ps=c()}.call(this),function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";var r=t("lodash"),i={dataKeyToInput:function(t,e){return"function"==typeof e?e(t,this.context):r.get(t,e,null)},dataKeyArrayToInput:function(t,e){for(var n=e.length,r=0;r<n;++r){var i=e[r],o=this.dataKeyToInput(t,i);if(null!==o&&void 0!==o)return o}return null},evaluateDataKey:function(t,e){return Array.isArray(e)?this.dataKeyArrayToInput(t,e):this.dataKeyToInput(t,e)},evaluateValue:function(t,e){var n=typeof t;return"function"===n?t(e):"object"===n?this.run(t,e):t},content:function(t,e){var n=this,i=t.content,o=!1,s=Object.keys(i),a=s.reduce(function(i,s){var a=t.content[s],u=n.evaluateValue(a,e);return null!==u&&(t.ignoreDeep?i[s]=u:r.set(i,s,u),o=!0),i},{});return o?a:null},arrayContent:function(t,e){var n=this,r=t.arrayContent,i=r.reduce(function(t,r){var i=n.evaluateValue(r,e);return null!==i&&(Array.isArray(i)?Array.prototype.push.apply(t,i):t.push(i)),t},[]);return i.length?i:null},assign:function(t,e){var n=t.assign,i=this,o=n.reduce(function(t,n){var r=i.evaluateValue(n,e);return null!==r&&"object"==typeof r&&t.push(r),t},[{}]);if(1===o.length)return null;var s=r.assign.apply(null,o);return s},firstOf:function(t,e){for(var n=t.firstOf,r=0;r<n.length;++r){var i=n[r],o=this.evaluateValue(i,e);if(null!==o)return o}return null},constant:function(t,e){return t.constant},value:function(t,e){var n=t.value;return this.evaluateValue(n,e)},runForArray:function(t,e){var n=!1,r=this.actionKeys.reduce(function(e,r){return t[r]&&(e[r]=t[r],n=!0),e},{});if(!n)return e;var i=this,o=e.reduce(function(t,e){var n=i.run(r,e);return null!==n&&t.push(n),t},[]);return o.length>0?o:null},evaluateExistsWhen:function(t,e){var n=t.existsWhen;return!n||(Array.isArray(n)?n.every(function(t){return t(e)}):n(e))},evaluateExistsUnless:function(t,e){var n=t.existsUnless;return!!n&&(Array.isArray(n)?n.every(function(t){return t(e)}):n(e))},run:function(t,e){if(!this.evaluateExistsWhen(t,e))return null;if(this.evaluateExistsUnless(t,e))return null;if(null!==e&&void 0!==e&&t.dataKey&&(e=this.evaluateDataKey(e,t.dataKey)),null!==e&&t.dataTransform&&(e=t.dataTransform(e,this.context)),Array.isArray(e)){if(!t.single){var n=this.runForArray(t,e);return null===n&&null!==t["default"]&&void 0!==t["default"]&&(n=t["default"]),n}e=e[0]}var r=e;if(null!==e)for(var i=0;i<this.actionKeys.length;++i){var o=this.actionKeys[i];if(t.hasOwnProperty(o)){r=this[o](t,e);break}}return null===r&&null!==t["default"]&&void 0!==t["default"]&&(r=t["default"]),null!==r&&t.multiple&&(r=[r]),r},actionKeys:["content","value","assign","firstOf","constant","arrayContent"],context:{}};window.jsonapter={},window.jsonapter.instance=function(t,e){var n=Object.create(i);return t&&r.assign(n,t),e&&(n.actionKeys=n.actionKeys.concat(e)),n}},{lodash:2}],2:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===A,i=t===t,o=null===e,s=e===A,a=e===e;if(t>e&&!o||!i||n&&!s&&a||r&&a)return 1;if(t<e&&!n||!a||o&&!r&&i||s&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return v(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function s(t){return"function"==typeof t||!1}function a(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c){if(i>=u)return c;var l=n[i];return c*("asc"===l||l===!0?1:-1);
}}return t.index-e.index}function f(t){return qt[t]}function d(t){return Jt[t]}function p(t,e,n){return e?t=Xt[t]:n&&(t=Wt[t]),"\\"+t}function g(t){return"\\"+Wt[t]}function v(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function m(t){return!!t&&"object"==typeof t}function y(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function b(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=q,o[++i]=n);return o}function _(t,e){for(var n,r=-1,i=t.length,o=-1,s=[];++r<i;){var a=t[r],u=e?e(a,r,t):a;r&&n===u||(n=u,s[++o]=a)}return s}function w(t){for(var e=-1,n=t.length;++e<n&&y(t.charCodeAt(e)););return e}function S(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function x(t){return Vt[t]}function E(t){function e(t){if(m(t)&&!Oa(t)&&!(t instanceof G)){if(t instanceof y)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return dr(t)}return new y(t)}function n(){}function y(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function G(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ns,this.__views__=[]}function et(){var t=new G(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function rt(){if(this.__filtered__){var t=new G(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function qt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Oa(t),r=e<0,i=n?t.length:0,o=Vn(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,h=l.length,f=0,d=xs(u,this.__takeCount__);if(!n||i<B||i==u&&d==u)return nn(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&f<d;){c+=e;for(var g=-1,v=t[c];++g<h;){var m=l[g],y=m.iteratee,b=m.type,_=y(v);if(b==U)v=_;else if(!_){if(b==H)continue t;break t}}p[f++]=v}return p}function Jt(){this.__data__={}}function Vt(t){return this.has(t)&&delete this.__data__[t]}function zt(t){return"__proto__"==t?A:this.__data__[t]}function Xt(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Wt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Yt(t){var e=t?t.length:0;for(this.data={hash:ms(null),set:new hs};e--;)this.push(t[e])}function Gt(t,e){var n=t.data,r="string"==typeof e||Fi(e)?n.set.has(e):n.hash[e];return r?0:-1}function Qt(t){var e=this.data;"string"==typeof t||Fi(t)?e.set.add(t):e.hash[t]=!0}function Zt(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,s=Ho(r+o);++n<r;)s[n]=t[n];for(;++i<o;)s[n++]=e[i];return s}function te(t,e){var n=-1,r=t.length;for(e||(e=Ho(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function se(t,e,n,r){for(var i=-1,o=t.length,s=r,a=s;++i<o;){var u=t[i],c=+e(u);n(c,s)&&(s=c,a=u)}return a}function ae(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[++i]=s)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Ho(r);++n<r;)i[n]=e(t[n],n,t);return i}function ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function le(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function he(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function fe(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function pe(t,e){return t===A?e:t}function ge(t,e,n,r){return t!==A&&es.call(r,n)?t:e}function ve(t,e,n){for(var r=-1,i=Ba(e),o=i.length;++r<o;){var s=i[r],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(a!==A||s in t)||(t[s]=u)}return t}function me(t,e){return null==e?t:be(e,Ba(e),t)}function ye(t,e){for(var n=-1,r=null==t,i=!r&&Gn(t),o=i?t.length:0,s=e.length,a=Ho(s);++n<s;){var u=e[n];i?a[n]=Qn(u,o)?t[u]:A:a[n]=r?A:t[u]}return a}function be(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function _e(t,e,n){var r=typeof t;return"function"==r?e===A?t:sn(t,e,n):null==t?No:"object"==r?Me(t):e===A?Fo(t):Be(t,e)}function we(t,e,n,r,i,o,s){var a;if(n&&(a=i?n(t,r,i):n(t)),a!==A)return a;if(!Fi(t))return t;var u=Oa(t);if(u){if(a=zn(t),!e)return te(t,a)}else{var c=rs.call(t),l=c==Y;if(c!=Z&&c!=J&&(!l||i))return Kt[c]?Wn(t,c,e):i?t:{};if(a=Xn(l?{}:t),!e)return me(a,t)}o||(o=[]),s||(s=[]);for(var h=o.length;h--;)if(o[h]==t)return s[h];return o.push(t),s.push(a),(u?ee:ke)(t,function(r,i){a[i]=we(r,e,n,i,t,o,s)}),a}function Se(t,e,n){if("function"!=typeof t)throw new Yo(K);return fs(function(){t.apply(A,n)},e)}function xe(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,s=Kn(),a=s==o,u=a&&e.length>=B?gn(e):null,c=e.length;u&&(s=Gt,a=!1,e=u);t:for(;++i<n;){var l=t[i];if(a&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;r.push(l)}else s(e,l,0)<0&&r.push(l)}return r}function Ee(t,e){var n=!0;return $s(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ae(t,e,n,r){var i=r,o=i;return $s(t,function(t,s,a){var u=+e(t,s,a);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Ce(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===A||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Re(t,e){var n=[];return $s(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Ne(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Oe(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var s=t[i];m(s)&&Gn(s)&&(n||Oa(s)||Ai(s))?e?Oe(s,e,n,r):ce(r,s):n||(r[r.length]=s)}return r}function Te(t,e){return Ls(t,e,to)}function ke(t,e){return Ls(t,e,Ba)}function Ie(t,e){return Ms(t,e,Ba)}function Pe(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var s=e[n];Pi(t[s])&&(o[++i]=s)}return o}function Fe(t,e,n){if(null!=t){n!==A&&n in hr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:A}}function De(t,e,n,r,i,o){return t===e||(null==t||null==e||!Fi(t)&&!m(e)?t!==t&&e!==e:$e(t,e,De,n,r,i,o))}function $e(t,e,n,r,i,o,s){var a=Oa(t),u=Oa(e),c=V,l=V;a||(c=rs.call(t),c==J?c=Z:c!=Z&&(a=Ki(t))),u||(l=rs.call(e),l==J?l=Z:l!=Z&&(u=Ki(e)));var h=c==Z,f=l==Z,d=c==l;if(d&&!a&&!h)return Mn(t,e,c);if(!i){var p=h&&es.call(t,"__wrapped__"),g=f&&es.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,r,i,o,s)}if(!d)return!1;o||(o=[]),s||(s=[]);for(var v=o.length;v--;)if(o[v]==t)return s[v]==e;o.push(t),s.push(e);var m=(a?Ln:Bn)(t,e,n,r,i,o,s);return o.pop(),s.pop(),m}function je(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=hr(t);r--;){var s=e[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<i;){s=e[r];var a=s[0],u=t[a],c=s[1];if(o&&s[2]){if(u===A&&!(a in t))return!1}else{var l=n?n(u,c,a):A;if(!(l===A?De(c,u,n,!0):l))return!1}}return!0}function Le(t,e){var n=-1,r=Gn(t)?Ho(t.length):[];return $s(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Me(t){var e=qn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==A||n in hr(t)))}}return function(t){return je(t,e)}}function Be(t,e){var n=Oa(t),r=tr(t)&&rr(e),i=t+"";return t=fr(t),function(o){if(null==o)return!1;var s=i;if(o=hr(o),(n||!r)&&!(s in o)){if(o=1==t.length?o:Fe(o,Xe(t,0,-1)),null==o)return!1;s=Cr(t),o=hr(o)}return o[s]===e?e!==A||s in o:De(e,o[s],A,!0)}}function He(t,e,n,r,i){if(!Fi(t))return t;var o=Gn(e)&&(Oa(e)||Ki(e)),s=o?A:Ba(e);return ee(s||e,function(a,u){if(s&&(u=a,a=e[u]),m(a))r||(r=[]),i||(i=[]),Ue(t,e,u,He,n,r,i);else{var c=t[u],l=n?n(c,a,u,t,e):A,h=l===A;h&&(l=a),l===A&&(!o||u in t)||!h&&(l===l?l===c:c!==c)||(t[u]=l)}}),t}function Ue(t,e,n,r,i,o,s){for(var a=o.length,u=e[n];a--;)if(o[a]==u)return void(t[n]=s[a]);var c=t[n],l=i?i(c,u,n,t,e):A,h=l===A;h&&(l=u,Gn(u)&&(Oa(u)||Ki(u))?l=Oa(c)?c:Gn(c)?te(c):[]:Bi(u)||Ai(u)?l=Ai(c)?Xi(c):Bi(c)?c:{}:h=!1),o.push(u),s.push(l),h?t[n]=r(l,u,i,o,s):(l===l?l!==c:c===c)&&(t[n]=l)}function Ke(t){return function(e){return null==e?A:e[t]}}function qe(t){var e=t+"";return t=fr(t),function(n){return Fe(n,t,e)}}function Je(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Qn(r)){var i=r;ds.call(t,r,1)}}return t}function Ve(t,e){return t+ys(Cs()*(e-t+1))}function ze(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Xe(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===A||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Ho(i);++r<i;)o[r]=t[r+e];return o}function We(t,e){var n;return $s(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ye(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ge(t,e,n){var r=Hn(),i=-1;e=ue(e,function(t){return r(t)});var o=Le(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ye(o,function(t,e){return h(t,e,n)})}function Qe(t,e){var n=0;return $s(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Ze(t,e){var n=-1,r=Kn(),i=t.length,s=r==o,a=s&&i>=B,u=a?gn():null,c=[];u?(r=Gt,s=!1):(a=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],h=e?e(l,n,t):l;if(s&&l===l){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),c.push(l)}else r(u,h,0)<0&&((e||a)&&u.push(h),c.push(l))}return c}function tn(t,e){for(var n=-1,r=e.length,i=Ho(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Xe(t,r?0:o,r?o+1:i):Xe(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof G&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,ce([n],o.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=ks){for(;r<i;){var o=r+i>>>1,s=t[o];(n?s<=e:s<e)&&null!==s?r=o+1:i=o}return i}return on(t,e,No,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,s=e!==e,a=null===e,u=e===A;i<o;){var c=ys((i+o)/2),l=n(t[c]),h=l!==A,f=l===l;if(s)var d=f||r;else d=a?f&&h&&(r||null!=l):u?f&&(r||h):null!=l&&(r?l<=e:l<e);d?i=c+1:o=c}return xs(o,Ts)}function sn(t,e,n){if("function"!=typeof t)return No;if(e===A)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new ss(t.byteLength),n=new ps(e);return n.set(new ps(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=Ss(t.length-r,0),s=-1,a=e.length,u=Ho(a+o);++s<a;)u[s]=e[s];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[s++]=t[i++];return u}function cn(t,e,n){for(var r=-1,i=n.length,o=-1,s=Ss(t.length-i,0),a=-1,u=e.length,c=Ho(s+u);++o<s;)c[o]=t[o];for(var l=o;++a<u;)c[l+a]=e[a];for(;++r<i;)c[l+n[r]]=t[o++];return c}function ln(t,e){return function(n,r,i){var o=e?e():{};if(r=Hn(r,i,3),Oa(n))for(var s=-1,a=n.length;++s<a;){var u=n[s];t(o,u,r(u,s,n),n)}else $s(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function hn(t){return mi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:A,s=i>2?n[2]:A,a=i>1?n[i-1]:A;for("function"==typeof o?(o=sn(o,a,5),i-=2):(o="function"==typeof a?a:A,i-=o?1:0),s&&Zn(n[0],n[1],s)&&(o=i<3?A:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function fn(t,e){return function(n,r){var i=n?Us(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,s=hr(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function dn(t){return function(e,n,r){for(var i=hr(e),o=r(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(i[u],u,i)===!1)break}return e}}function pn(t,e){function n(){var i=this&&this!==ne&&this instanceof n?r:t;return i.apply(e,arguments)}var r=mn(t);return n}function gn(t){return ms&&hs?new Yt(t):null}function vn(t){return function(e){for(var n=-1,r=Ao(lo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function mn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ds(t.prototype),r=t.apply(n,e);return Fi(r)?r:n}}function yn(t){function e(n,r,i){i&&Zn(n,r,i)&&(r=A);var o=jn(n,t,A,A,A,A,A,r);return o.placeholder=e.placeholder,o}return e}function bn(t,e){return mi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(A,n))})}function _n(t,e){return function(n,r,i){if(i&&Zn(n,r,i)&&(r=A),r=Hn(r,i,3),1==r.length){n=Oa(n)?n:lr(n);var o=se(n,r,t,e);if(!n.length||o!==e)return o}return Ae(n,r,t,e)}}function wn(t,e){return function(n,r,o){if(r=Hn(r,o,3),Oa(n)){var s=i(n,r,e);return s>-1?n[s]:A}return Ne(n,r,t)}}function Sn(t){return function(e,n,r){return e&&e.length?(n=Hn(n,r,3),i(e,n,t)):-1}}function xn(t){return function(e,n,r){return n=Hn(n,r,3),Ne(e,n,t,!0)}}function En(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,o=Ho(n);t?r--:++r<n;){var s=o[i++]=arguments[r];if("function"!=typeof s)throw new Yo(K);!e&&y.prototype.thru&&"wrapper"==Un(s)&&(e=new y([],(!0)))}for(r=e?-1:n;++r<n;){s=o[r];var a=Un(s),u="wrapper"==a?Hs(s):A;e=u&&er(u[0])&&u[1]==(F|T|I|D)&&!u[4].length&&1==u[9]?e[Un(u[0])].apply(e,u[3]):1==s.length&&er(s)?e[a]():e.thru(s)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Oa(r)&&r.length>=B)return e.plant(r).value();for(var i=0,s=n?o[i].apply(this,t):r;++i<n;)s=o[i].call(this,s);return s}}}function An(t,e){return function(n,r,i){return"function"==typeof r&&i===A&&Oa(n)?t(n,r):e(n,sn(r,i,3))}}function Cn(t){return function(e,n,r){return"function"==typeof n&&r===A||(n=sn(n,r,3)),t(e,n,to)}}function Rn(t){return function(e,n,r){return"function"==typeof n&&r===A||(n=sn(n,r,3)),t(e,n)}}function Nn(t){return function(e,n,r){var i={};return n=Hn(n,r,3),ke(e,function(e,r,o){var s=n(e,r,o);r=t?s:r,e=t?e:s,i[r]=e}),i}}function On(t){return function(e,n,r){return e=a(e),(t?e:"")+Pn(e,n,r)+(t?"":e)}}function Tn(t){var e=mi(function(n,r){var i=b(r,e.placeholder);return jn(n,t,A,r,i)});return e}function kn(t,e){return function(n,r,i,o){var s=arguments.length<3;return"function"==typeof r&&o===A&&Oa(n)?t(n,r,i,s):ze(n,Hn(r,o,4),i,s,e)}}function In(t,e,n,r,i,o,s,a,u,c){function l(){for(var y=arguments.length,_=y,w=Ho(y);_--;)w[_]=arguments[_];if(r&&(w=un(w,r,i)),o&&(w=cn(w,o,s)),p||v){var S=l.placeholder,x=b(w,S);if(y-=x.length,y<c){var E=a?te(a):A,C=Ss(c-y,0),O=p?x:A,T=p?A:x,k=p?w:A,F=p?A:w;e|=p?I:P,e&=~(p?P:I),g||(e&=~(R|N));var D=[t,e,n,k,O,F,T,E,u,C],$=In.apply(A,D);return er(t)&&Ks($,D),$.placeholder=S,$}}var j=f?n:this,L=d?j[t]:t;return a&&(w=ur(w,a)),h&&u<w.length&&(w.length=u),this&&this!==ne&&this instanceof l&&(L=m||mn(t)),L.apply(j,w)}var h=e&F,f=e&R,d=e&N,p=e&T,g=e&O,v=e&k,m=d?A:mn(t);return l}function Pn(t,e,n){var r=t.length;if(e=+e,r>=e||!_s(e))return"";var i=e-r;return n=null==n?" ":n+"",mo(n,vs(i/n.length)).slice(0,i)}function Fn(t,e,n,r){function i(){for(var e=-1,a=arguments.length,u=-1,c=r.length,l=Ho(c+a);++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++e];var h=this&&this!==ne&&this instanceof i?s:t;return h.apply(o?n:this,l)}var o=e&R,s=mn(t);return i}function Dn(t){var e=Jo[t];return function(t,n){return n=n===A?0:+n||0,n?(n=cs(10,n),e(t*n)/n):e(t)}}function $n(t){return function(e,n,r,i){var o=Hn(r);return null==r&&o===_e?rn(e,n,t):on(e,n,o(r,i,1),t)}}function jn(t,e,n,r,i,o,s,a){var u=e&N;if(!u&&"function"!=typeof t)throw new Yo(K);var c=r?r.length:0;if(c||(e&=~(I|P),r=i=A),c-=i?i.length:0,e&P){var l=r,h=i;r=i=A}var f=u?A:Hs(t),d=[t,e,n,r,i,l,h,o,s,a];if(f&&(ir(d,f),e=d[1],a=d[9]),d[9]=null==a?u?0:t.length:Ss(a-c,0)||0,e==R)var p=pn(d[0],d[2]);else p=e!=I&&e!=(R|I)||d[4].length?In.apply(A,d):Fn.apply(A,d);var g=f?Bs:Ks;return g(p,d)}function Ln(t,e,n,r,i,o,s){var a=-1,u=t.length,c=e.length;if(u!=c&&!(i&&c>u))return!1;for(;++a<u;){var l=t[a],h=e[a],f=r?r(i?h:l,i?l:h,a):A;if(f!==A){if(f)continue;return!1}if(i){if(!fe(e,function(t){return l===t||n(l,t,r,i,o,s)}))return!1}else if(l!==h&&!n(l,h,r,i,o,s))return!1}return!0}function Mn(t,e,n){switch(n){case z:case X:return+t==+e;case W:return t.name==e.name&&t.message==e.message;case Q:return t!=+t?e!=+e:t==+e;case tt:case nt:return t==e+""}return!1}function Bn(t,e,n,r,i,o,s){var a=Ba(t),u=a.length,c=Ba(e),l=c.length;if(u!=l&&!i)return!1;for(var h=u;h--;){var f=a[h];if(!(i?f in e:es.call(e,f)))return!1}for(var d=i;++h<u;){f=a[h];var p=t[f],g=e[f],v=r?r(i?g:p,i?p:g,f):A;if(!(v===A?n(p,g,r,i,o,s):v))return!1;d||(d="constructor"==f)}if(!d){var m=t.constructor,y=e.constructor;if(m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function Hn(t,n,r){var i=e.callback||Co;return i=i===Co?_e:i,r?i(t,n,r):i}function Un(t){for(var e=t.name,n=Fs[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Kn(t,n,r){var i=e.indexOf||Er;return i=i===Er?o:i,t?i(t,n,r):i}function qn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Jn(t,e){var n=null==t?A:t[e];return ji(n)?n:A}function Vn(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=xs(e,t+s);break;case"takeRight":t=Ss(t,e-s)}}return{start:t,end:e}}function zn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Xn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=zo),new e}function Wn(t,e,n){var r=t.constructor;switch(e){case it:return an(t);case z:case X:return new r((+t));case ot:case st:case at:case ut:case ct:case lt:case ht:case ft:case dt:var i=t.buffer;return new r(n?an(i):i,t.byteOffset,t.length);case Q:case nt:return new r(t);case tt:var o=new r(t.source,It.exec(t));o.lastIndex=t.lastIndex}return o}function Yn(t,e,n){null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Fe(t,Xe(e,0,-1)),e=Cr(e));var r=null==t?t:t[e];return null==r?A:r.apply(t,n)}function Gn(t){return null!=t&&nr(Us(t))}function Qn(t,e){return t="number"==typeof t||Dt.test(t)?+t:-1,e=null==e?Is:e,t>-1&&t%1==0&&t<e}function Zn(t,e,n){if(!Fi(n))return!1;var r=typeof e;if("number"==r?Gn(n)&&Qn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&At.test(t)||"number"==n)return!0;if(Oa(t))return!1;var r=!Et.test(t);return r||null!=e&&t in hr(e)}function er(t){var n=Un(t);if(!(n in G.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Hs(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Is}function rr(t){return t===t&&!Fi(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<F,s=r==F&&n==T||r==F&&n==D&&t[7].length<=e[8]||r==(F|D)&&n==T;if(!o&&!s)return t;r&R&&(t[2]=e[2],i|=n&R?0:O);var a=e[3];if(a){var u=t[3];t[3]=u?un(u,a,e[4]):te(a),t[4]=u?b(t[3],q):te(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?cn(u,a,e[6]):te(a),t[6]=u?b(t[5],q):te(e[6])),a=e[7],a&&(t[7]=te(a)),r&F&&(t[8]=null==t[8]?e[8]:xs(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===A?e:Ta(t,e,or)}function sr(t,e){t=hr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function ar(t,e){var n={};return Te(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=xs(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Qn(o,n)?i[o]:A}return t}function cr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Oa(t)||Ai(t)),o=-1,s=[];++o<n;){var a=e[o];(i&&Qn(a,r)||es.call(t,a))&&s.push(a)}return s}function lr(t){return null==t?[]:Gn(t)?Fi(t)?t:zo(t):oo(t)}function hr(t){return Fi(t)?t:zo(t)}function fr(t){if(Oa(t))return t;var e=[];return a(t).replace(Ct,function(t,n,r,i){e.push(r?i.replace(Tt,"$1"):n||t)}),e}function dr(t){return t instanceof G?t.clone():new y(t.__wrapped__,t.__chain__,te(t.__actions__))}function pr(t,e,n){e=(n?Zn(t,e,n):null==e)?1:Ss(ys(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,s=Ho(vs(i/e));r<i;)s[++o]=Xe(t,r,r+=e);return s}function gr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function vr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Xe(t,e<0?0:e)):[]}function mr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Xe(t,0,e<0?0:e)):[]}function yr(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!0,!0):[]}function br(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!0):[]}function _r(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Zn(t,e,n)&&(n=0,r=i),Ce(t,e,n,r)):[]}function wr(t){return t?t[0]:A}function Sr(t,e,n){var r=t?t.length:0;return n&&Zn(t,e,n)&&(e=!1),r?Oe(t,e):[]}function xr(t){var e=t?t.length:0;return e?Oe(t,!0):[]}function Er(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?Ss(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return o(t,e,n||0)}function Ar(t){return mr(t,1)}function Cr(t){var e=t?t.length:0;return e?t[e-1]:A}function Rr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?Ss(r+n,0):xs(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Nr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Kn(),i=t.length;++n<i;)for(var o=0,s=t[n];(o=r(e,s,o))>-1;)ds.call(e,o,1);return e}function Or(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],s=t.length;for(e=Hn(e,n,3);++i<s;){var a=t[i];e(a,i,t)&&(r.push(a),o.push(i))}return Je(t,o),r}function Tr(t){return vr(t,1)}function kr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Zn(t,e,n)&&(e=0,n=r),Xe(t,e,n)):[]}function Ir(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Xe(t,0,e<0?0:e)):[]}function Pr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Xe(t,e<0?0:e)):[]}function Fr(t,e,n){return t&&t.length?en(t,Hn(e,n,3),!1,!0):[]}function Dr(t,e,n){return t&&t.length?en(t,Hn(e,n,3)):[]}function $r(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Zn(t,e,r)?A:e,e=!1);var s=Hn();return null==n&&s===_e||(n=s(n,r,3)),e&&Kn()==o?_(t,n):Ze(t,n)}function jr(t){if(!t||!t.length)return[];var e=-1,n=0;t=ae(t,function(t){if(Gn(t))return n=Ss(t.length,n),!0});for(var r=Ho(n);++e<n;)r[e]=ue(t,Ke(e));return r}function Lr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=jr(t);return null==e?i:(e=sn(e,n,4),ue(i,function(t){return le(t,e,A,!0)}))}function Mr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Gn(n))var r=r?ce(xe(r,n),xe(n,r)):n}return r?Ze(r):[]}function Br(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Oa(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Hr(t){var n=e(t);return n.__chain__=!0,n}function Ur(t,e,n){return e.call(n,t),t}function Kr(t,e,n){return e.call(n,t)}function qr(){return Hr(this)}function Jr(){return new y(this.value(),this.__chain__)}function Vr(t){for(var e,r=this;r instanceof n;){var i=dr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function zr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof G){var n=t;return this.__actions__.length&&(n=new G(this)),n=n.reverse(),n.__actions__.push({func:Kr,args:[e],thisArg:A}),new y(n,this.__chain__)}return this.thru(e)}function Xr(){return this.value()+""}function Wr(){return nn(this.__wrapped__,this.__actions__)}function Yr(t,e,n){var r=Oa(t)?oe:Ee;return n&&Zn(t,e,n)&&(e=A),"function"==typeof e&&n===A||(e=Hn(e,n,3)),r(t,e)}function Gr(t,e,n){var r=Oa(t)?ae:Re;return e=Hn(e,n,3),r(t,e)}function Qr(t,e){return ia(t,Me(e))}function Zr(t,e,n,r){var i=t?Us(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Zn(e,n,r)?0:n<0?Ss(i+n,0):n||0,"string"==typeof t||!Oa(t)&&Ui(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Kn(t,e,n)>-1}function ti(t,e,n){var r=Oa(t)?ue:Le;return e=Hn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Fo(e))}function ni(t,e,n){var r=Oa(t)?ae:Re;return e=Hn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Zn(t,e,n):null==e){t=lr(t);var r=t.length;return r>0?t[Ve(0,r-1)]:A}var i=-1,o=zi(t),r=o.length,s=r-1;for(e=xs(e<0?0:+e||0,r);++i<e;){var a=Ve(i,s),u=o[a];o[a]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Ns)}function oi(t){var e=t?Us(t):0;return nr(e)?e:Ba(t).length}function si(t,e,n){var r=Oa(t)?fe:We;return n&&Zn(t,e,n)&&(e=A),"function"==typeof e&&n===A||(e=Hn(e,n,3)),r(t,e)}function ai(t,e,n){if(null==t)return[];n&&Zn(t,e,n)&&(e=A);var r=-1;e=Hn(e,n,3);var i=Le(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ye(i,l)}function ui(t,e,n,r){return null==t?[]:(r&&Zn(e,n,r)&&(n=A),Oa(e)||(e=null==e?[]:[e]),Oa(n)||(n=null==n?[]:[n]),Ge(t,e,n))}function ci(t,e){return Gr(t,Me(e))}function li(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Yo(K);var n=t;t=e,e=n}return t=_s(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function hi(t,e,n){return n&&Zn(t,e,n)&&(e=A),e=t&&null==e?t.length:Ss(+e||0,0),jn(t,F,A,A,A,A,e)}function fi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Yo(K);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=A),n}}function di(t,e,n){function r(){d&&as(d),c&&as(c),g=0,c=d=p=A}function i(e,n){n&&as(n),c=d=p=A,e&&(g=ga(),l=t.apply(f,u),d||c||(u=f=A))}function o(){var t=e-(ga()-h);t<=0||t>e?i(p,c):d=fs(o,t)}function s(){i(m,d)}function a(){if(u=arguments,h=ga(),f=this,p=m&&(d||!y),v===!1)var n=y&&!d;else{c||y||(g=h);var r=v-(h-g),i=r<=0||r>v;i?(c&&(c=as(c)),g=h,l=t.apply(f,u)):c||(c=fs(s,r))}return i&&d?d=as(d):d||e===v||(d=fs(o,e)),n&&(i=!0,l=t.apply(f,u)),!i||d||c||(u=f=A),l}var u,c,l,h,f,d,p,g=0,v=!1,m=!0;if("function"!=typeof t)throw new Yo(K);if(e=e<0?0:+e||0,n===!0){var y=!0;m=!1}else Fi(n)&&(y=!!n.leading,v="maxWait"in n&&Ss(+n.maxWait||0,e),m="trailing"in n?!!n.trailing:m);return a.cancel=r,a}function pi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Yo(K);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new pi.Cache,n}function gi(t){if("function"!=typeof t)throw new Yo(K);return function(){return!t.apply(this,arguments)}}function vi(t){return fi(2,t)}function mi(t,e){if("function"!=typeof t)throw new Yo(K);return e=Ss(e===A?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=Ss(n.length-e,0),o=Ho(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Ho(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=o,t.apply(this,s)}}function yi(t){if("function"!=typeof t)throw new Yo(K);return function(e){return t.apply(this,e)}}function bi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Yo(K);return n===!1?r=!1:Fi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),di(t,e,{leading:r,maxWait:+e,trailing:i})}function _i(t,e){return e=null==e?No:e,jn(e,I,A,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Zn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,sn(n,r,1)):we(t,e)}function Si(t,e,n){return"function"==typeof e?we(t,!0,sn(e,n,1)):we(t,!0)}function xi(t,e){return t>e}function Ei(t,e){return t>=e}function Ai(t){return m(t)&&Gn(t)&&es.call(t,"callee")&&!ls.call(t,"callee")}function Ci(t){return t===!0||t===!1||m(t)&&rs.call(t)==z}function Ri(t){return m(t)&&rs.call(t)==X}function Ni(t){return!!t&&1===t.nodeType&&m(t)&&!Bi(t)}function Oi(t){return null==t||(Gn(t)&&(Oa(t)||Ui(t)||Ai(t)||m(t)&&Pi(t.splice))?!t.length:!Ba(t).length)}function Ti(t,e,n,r){n="function"==typeof n?sn(n,r,3):A;var i=n?n(t,e):A;return i===A?De(t,e,n):!!i}function ki(t){return m(t)&&"string"==typeof t.message&&rs.call(t)==W}function Ii(t){return"number"==typeof t&&_s(t)}function Pi(t){return Fi(t)&&rs.call(t)==Y}function Fi(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Di(t,e,n,r){return n="function"==typeof n?sn(n,r,3):A,je(t,qn(e),n)}function $i(t){return Mi(t)&&t!=+t}function ji(t){return null!=t&&(Pi(t)?os.test(ts.call(t)):m(t)&&Ft.test(t))}function Li(t){return null===t}function Mi(t){return"number"==typeof t||m(t)&&rs.call(t)==Q}function Bi(t){var e;if(!m(t)||rs.call(t)!=Z||Ai(t)||!es.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Te(t,function(t,e){n=e}),n===A||es.call(t,n)}function Hi(t){return Fi(t)&&rs.call(t)==tt}function Ui(t){return"string"==typeof t||m(t)&&rs.call(t)==nt}function Ki(t){return m(t)&&nr(t.length)&&!!Ut[rs.call(t)]}function qi(t){return t===A}function Ji(t,e){return t<e}function Vi(t,e){return t<=e}function zi(t){var e=t?Us(t):0;return nr(e)?e?te(t):[]:oo(t)}function Xi(t){return be(t,to(t))}function Wi(t,e,n){var r=Ds(t);return n&&Zn(t,e,n)&&(e=A),e?me(r,e):r}function Yi(t){return Pe(t,to(t))}function Gi(t,e,n){var r=null==t?A:Fe(t,fr(e),e+"");return r===A?n:r}function Qi(t,e){if(null==t)return!1;var n=es.call(t,e);if(!n&&!tr(e)){if(e=fr(e),t=1==e.length?t:Fe(t,Xe(e,0,-1)),null==t)return!1;e=Cr(e),n=es.call(t,e)}return n||nr(t.length)&&Qn(e,t.length)&&(Oa(t)||Ai(t))}function Zi(t,e,n){n&&Zn(t,e,n)&&(e=A);for(var r=-1,i=Ba(t),o=i.length,s={};++r<o;){var a=i[r],u=t[a];e?es.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function to(t){if(null==t)return[];Fi(t)||(t=zo(t));var e=t.length;e=e&&nr(e)&&(Oa(t)||Ai(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Ho(e),s=e>0;++r<e;)o[r]=r+"";for(var a in t)s&&Qn(a,e)||"constructor"==a&&(i||!es.call(t,a))||o.push(a);return o}function eo(t){t=hr(t);for(var e=-1,n=Ba(t),r=n.length,i=Ho(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?A:t[e];return r===A&&(null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:Fe(t,Xe(e,0,-1)),r=null==t?A:t[Cr(e)]),r=r===A?n:r),Pi(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:fr(e);for(var i=-1,o=e.length,s=o-1,a=t;null!=a&&++i<o;){var u=e[i];Fi(a)&&(i==s?a[u]=n:null==a[u]&&(a[u]=Qn(e[i+1])?[]:{})),a=a[u]}return t}function io(t,e,n,r){var i=Oa(t)||Ki(t);if(e=Hn(e,r,4),null==n)if(i||Fi(t)){var o=t.constructor;n=i?Oa(t)?new o:[]:Ds(Pi(o)?o.prototype:A)}else n={};return(i?ee:ke)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,Ba(t))}function so(t){return tn(t,to(t))}function ao(t,e,n){return e=+e||0,n===A?(n=e,e=0):n=+n||0,t>=xs(e,n)&&t<Ss(e,n)}function uo(t,e,n){n&&Zn(t,e,n)&&(e=n=A);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Cs();return xs(t+o*(e-t+us("1e-"+((o+"").length-1))),e)}return Ve(t,e)}function co(t){return t=a(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function lo(t){return t=a(t),t&&t.replace($t,f).replace(Ot,"")}function ho(t,e,n){t=a(t),e+="";var r=t.length;return n=n===A?r:xs(n<0?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function fo(t){return t=a(t),t&&_t.test(t)?t.replace(yt,d):t}function po(t){return t=a(t),t&&Nt.test(t)?t.replace(Rt,p):t||"(?:)"}function go(t,e,n){t=a(t),e=+e;var r=t.length;if(r>=e||!_s(e))return t;var i=(e-r)/2,o=ys(i),s=vs(i);return n=Pn("",s,n),n.slice(0,o)+t+n}function vo(t,e,n){return(n?Zn(t,e,n):null==e)?e=0:e&&(e=+e),t=_o(t),As(t,e||(Pt.test(t)?16:10))}function mo(t,e){var n="";if(t=a(t),e=+e,e<1||!t||!_s(e))return n;do e%2&&(n+=t),e=ys(e/2),t+=t;while(e);return n}function yo(t,e,n){return t=a(t),n=null==n?0:xs(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function bo(t,n,r){var i=e.templateSettings;r&&Zn(t,n,r)&&(n=r=A),t=a(t),n=ve(me({},r||n),i,ge);var o,s,u=ve(me({},n.imports),i.imports,ge),c=Ba(u),l=tn(u,c),h=0,f=n.interpolate||jt,d="__p += '",p=Xo((n.escape||jt).source+"|"+f.source+"|"+(f===xt?kt:jt).source+"|"+(n.evaluate||jt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ht+"]")+"\n";
t.replace(p,function(e,n,r,i,a,u){return r||(r=i),d+=t.slice(h,u).replace(Lt,g),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),a&&(s=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),d+="';\n";var m=n.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(s?d.replace(pt,""):d).replace(gt,"$1").replace(vt,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Ga(function(){return qo(c,v+"return "+d).apply(A,l)});if(y.source=d,ki(y))throw y;return y}function _o(t,e,n){var r=t;return(t=a(t))?(n?Zn(r,e,n):null==e)?t.slice(w(t),S(t)+1):(e+="",t.slice(u(t,e),c(t,e)+1)):t}function wo(t,e,n){var r=t;return t=a(t),t?(n?Zn(r,e,n):null==e)?t.slice(w(t)):t.slice(u(t,e+"")):t}function So(t,e,n){var r=t;return t=a(t),t?(n?Zn(r,e,n):null==e)?t.slice(0,S(t)+1):t.slice(0,c(t,e+"")+1):t}function xo(t,e,n){n&&Zn(t,e,n)&&(e=A);var r=$,i=j;if(null!=e)if(Fi(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?a(e.omission):i}else r=+e||0;if(t=a(t),r>=t.length)return t;var s=r-i.length;if(s<1)return i;var u=t.slice(0,s);if(null==o)return u+i;if(Hi(o)){if(t.slice(s).search(o)){var c,l,h=t.slice(0,s);for(o.global||(o=Xo(o.source,(It.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(h);)l=c.index;u=u.slice(0,null==l?s:l)}}else if(t.indexOf(o,s)!=s){var f=u.lastIndexOf(o);f>-1&&(u=u.slice(0,f))}return u+i}function Eo(t){return t=a(t),t&&bt.test(t)?t.replace(mt,x):t}function Ao(t,e,n){return n&&Zn(t,e,n)&&(e=A),t=a(t),t.match(e||Mt)||[]}function Co(t,e,n){return n&&Zn(t,e,n)&&(e=A),m(t)?Oo(t):_e(t,e)}function Ro(t){return function(){return t}}function No(t){return t}function Oo(t){return Me(we(t,!0))}function To(t,e){return Be(t,we(e,!0))}function ko(t,e,n){if(null==n){var r=Fi(e),i=r?Ba(e):A,o=i&&i.length?Pe(e,i):A;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Pe(e,Ba(e)));var s=!0,a=-1,u=Pi(t),c=o.length;n===!1?s=!1:Fi(n)&&"chain"in n&&(s=n.chain);for(;++a<c;){var l=o[a],h=e[l];t[l]=h,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(h))}return t}function Io(){return ne._=is,this}function Po(){}function Fo(t){return tr(t)?Ke(t):qe(t)}function Do(t){return function(e){return Fe(t,fr(e),e+"")}}function $o(t,e,n){n&&Zn(t,e,n)&&(e=n=A),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=Ss(vs((e-t)/(n||1)),0),o=Ho(i);++r<i;)o[r]=t,t+=n;return o}function jo(t,e,n){if(t=ys(t),t<1||!_s(t))return[];var r=-1,i=Ho(xs(t,Os));for(e=sn(e,n,1);++r<t;)r<Os?i[r]=e(r):e(r);return i}function Lo(t){var e=++ns;return a(t)+e}function Mo(t,e){return(+t||0)+(+e||0)}function Bo(t,e,n){return n&&Zn(t,e,n)&&(e=A),e=Hn(e,n,3),1==e.length?de(Oa(t)?t:lr(t),e):Qe(t,e)}t=t?re.defaults(ne.Object(),t,re.pick(ne,Bt)):ne;var Ho=t.Array,Uo=t.Date,Ko=t.Error,qo=t.Function,Jo=t.Math,Vo=t.Number,zo=t.Object,Xo=t.RegExp,Wo=t.String,Yo=t.TypeError,Go=Ho.prototype,Qo=zo.prototype,Zo=Wo.prototype,ts=qo.prototype.toString,es=Qo.hasOwnProperty,ns=0,rs=Qo.toString,is=ne._,os=Xo("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=t.ArrayBuffer,as=t.clearTimeout,us=t.parseFloat,cs=Jo.pow,ls=Qo.propertyIsEnumerable,hs=Jn(t,"Set"),fs=t.setTimeout,ds=Go.splice,ps=t.Uint8Array,gs=Jn(t,"WeakMap"),vs=Jo.ceil,ms=Jn(zo,"create"),ys=Jo.floor,bs=Jn(Ho,"isArray"),_s=t.isFinite,ws=Jn(zo,"keys"),Ss=Jo.max,xs=Jo.min,Es=Jn(Uo,"now"),As=t.parseInt,Cs=Jo.random,Rs=Vo.NEGATIVE_INFINITY,Ns=Vo.POSITIVE_INFINITY,Os=4294967295,Ts=Os-1,ks=Os>>>1,Is=9007199254740991,Ps=gs&&new gs,Fs={};e.support={};e.templateSettings={escape:wt,evaluate:St,interpolate:xt,variable:"",imports:{_:e}};var Ds=function(){function t(){}return function(e){if(Fi(e)){t.prototype=e;var n=new t;t.prototype=A}return n||{}}}(),$s=fn(ke),js=fn(Ie,!0),Ls=dn(),Ms=dn(!0),Bs=Ps?function(t,e){return Ps.set(t,e),t}:No,Hs=Ps?function(t){return Ps.get(t)}:Po,Us=Ke("length"),Ks=function(){var t=0,e=0;return function(n,r){var i=ga(),o=M-(i-e);if(e=i,o>0){if(++t>=L)return n}else t=0;return Bs(n,r)}}(),qs=mi(function(t,e){return m(t)&&Gn(t)?xe(t,Oe(e,!1,!0)):[]}),Js=Sn(),Vs=Sn(!0),zs=mi(function(t){for(var e=t.length,n=e,r=Ho(h),i=Kn(),s=i==o,a=[];n--;){var u=t[n]=Gn(u=t[n])?u:[];r[n]=s&&u.length>=120?gn(n&&u):null}var c=t[0],l=-1,h=c?c.length:0,f=r[0];t:for(;++l<h;)if(u=c[l],(f?Gt(f,u):i(a,u,0))<0){for(var n=e;--n;){var d=r[n];if((d?Gt(d,u):i(t[n],u,0))<0)continue t}f&&f.push(u),a.push(u)}return a}),Xs=mi(function(t,e){e=Oe(e);var n=ye(t,e);return Je(t,e.sort(r)),n}),Ws=$n(),Ys=$n(!0),Gs=mi(function(t){return Ze(Oe(t,!1,!0))}),Qs=mi(function(t,e){return Gn(t)?xe(t,e):[]}),Zs=mi(jr),ta=mi(function(t){var e=t.length,n=e>2?t[e-2]:A,r=e>1?t[e-1]:A;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):A,r=A),t.length=e,Lr(t,n,r)}),ea=mi(function(t){return t=Oe(t),this.thru(function(e){return Zt(Oa(e)?e:[hr(e)],t)})}),na=mi(function(t,e){return ye(t,Oe(e))}),ra=ln(function(t,e,n){es.call(t,n)?++t[n]:t[n]=1}),ia=wn($s),oa=wn(js,!0),sa=An(ee,$s),aa=An(ie,js),ua=ln(function(t,e,n){es.call(t,n)?t[n].push(e):t[n]=[e]}),ca=ln(function(t,e,n){t[n]=e}),la=mi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),s=Gn(t)?Ho(t.length):[];return $s(t,function(t){var a=i?e:o&&null!=t?t[e]:A;s[++r]=a?a.apply(t,n):Yn(t,e,n)}),s}),ha=ln(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fa=kn(le,$s),da=kn(he,js),pa=mi(function(t,e){if(null==t)return[];var n=e[2];return n&&Zn(e[0],e[1],n)&&(e.length=1),Ge(t,Oe(e),[])}),ga=Es||function(){return(new Uo).getTime()},va=mi(function(t,e,n){var r=R;if(n.length){var i=b(n,va.placeholder);r|=I}return jn(t,r,e,n,i)}),ma=mi(function(t,e){e=e.length?Oe(e):Yi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=jn(t[i],R,t)}return t}),ya=mi(function(t,e,n){var r=R|N;if(n.length){var i=b(n,ya.placeholder);r|=I}return jn(e,r,t,n,i)}),ba=yn(T),_a=yn(k),wa=mi(function(t,e){return Se(t,1,e)}),Sa=mi(function(t,e,n){return Se(t,e,n)}),xa=En(),Ea=En(!0),Aa=mi(function(t,e){if(e=Oe(e),"function"!=typeof t||!oe(e,s))throw new Yo(K);var n=e.length;return mi(function(r){for(var i=xs(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Ca=Tn(I),Ra=Tn(P),Na=mi(function(t,e){return jn(t,D,A,A,A,Oe(e))}),Oa=bs||function(t){return m(t)&&nr(t.length)&&rs.call(t)==V},Ta=hn(He),ka=hn(function(t,e,n){return n?ve(t,e,n):me(t,e)}),Ia=bn(ka,pe),Pa=bn(Ta,or),Fa=xn(ke),Da=xn(Ie),$a=Cn(Ls),ja=Cn(Ms),La=Rn(ke),Ma=Rn(Ie),Ba=ws?function(t){var e=null==t?A:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Gn(t)?cr(t):Fi(t)?ws(t):[]}:cr,Ha=Nn(!0),Ua=Nn(),Ka=mi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Oe(e),Wo);return sr(t,xe(to(t),e))}var n=sn(e[0],e[1],3);return ar(t,function(t,e,r){return!n(t,e,r)})}),qa=mi(function(t,e){return null==t?{}:"function"==typeof e[0]?ar(t,sn(e[0],e[1],3)):sr(t,Oe(e))}),Ja=vn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Va=vn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),za=On(),Xa=On(!0),Wa=vn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ya=vn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ga=mi(function(t,e){try{return t.apply(A,e)}catch(n){return ki(n)?n:new Ko(n)}}),Qa=mi(function(t,e){return function(n){return Yn(n,t,e)}}),Za=mi(function(t,e){return function(n){return Yn(t,n,e)}}),tu=Dn("ceil"),eu=Dn("floor"),nu=_n(xi,Rs),ru=_n(Ji,Ns),iu=Dn("round");return e.prototype=n.prototype,y.prototype=Ds(n.prototype),y.prototype.constructor=y,G.prototype=Ds(n.prototype),G.prototype.constructor=G,Jt.prototype["delete"]=Vt,Jt.prototype.get=zt,Jt.prototype.has=Xt,Jt.prototype.set=Wt,Yt.prototype.push=Qt,pi.Cache=Jt,e.after=li,e.ary=hi,e.assign=ka,e.at=na,e.before=fi,e.bind=va,e.bindAll=ma,e.bindKey=ya,e.callback=Co,e.chain=Hr,e.chunk=pr,e.compact=gr,e.constant=Ro,e.countBy=ra,e.create=Wi,e.curry=ba,e.curryRight=_a,e.debounce=di,e.defaults=Ia,e.defaultsDeep=Pa,e.defer=wa,e.delay=Sa,e.difference=qs,e.drop=vr,e.dropRight=mr,e.dropRightWhile=yr,e.dropWhile=br,e.fill=_r,e.filter=Gr,e.flatten=Sr,e.flattenDeep=xr,e.flow=xa,e.flowRight=Ea,e.forEach=sa,e.forEachRight=aa,e.forIn=$a,e.forInRight=ja,e.forOwn=La,e.forOwnRight=Ma,e.functions=Yi,e.groupBy=ua,e.indexBy=ca,e.initial=Ar,e.intersection=zs,e.invert=Zi,e.invoke=la,e.keys=Ba,e.keysIn=to,e.map=ti,e.mapKeys=Ha,e.mapValues=Ua,e.matches=Oo,e.matchesProperty=To,e.memoize=pi,e.merge=Ta,e.method=Qa,e.methodOf=Za,e.mixin=ko,e.modArgs=Aa,e.negate=gi,e.omit=Ka,e.once=vi,e.pairs=eo,e.partial=Ca,e.partialRight=Ra,e.partition=ha,e.pick=qa,e.pluck=ei,e.property=Fo,e.propertyOf=Do,e.pull=Nr,e.pullAt=Xs,e.range=$o,e.rearg=Na,e.reject=ni,e.remove=Or,e.rest=Tr,e.restParam=mi,e.set=ro,e.shuffle=ii,e.slice=kr,e.sortBy=ai,e.sortByAll=pa,e.sortByOrder=ui,e.spread=yi,e.take=Ir,e.takeRight=Pr,e.takeRightWhile=Fr,e.takeWhile=Dr,e.tap=Ur,e.throttle=bi,e.thru=Kr,e.times=jo,e.toArray=zi,e.toPlainObject=Xi,e.transform=io,e.union=Gs,e.uniq=$r,e.unzip=jr,e.unzipWith=Lr,e.values=oo,e.valuesIn=so,e.where=ci,e.without=Qs,e.wrap=_i,e.xor=Mr,e.zip=Zs,e.zipObject=Br,e.zipWith=ta,e.backflow=Ea,e.collect=ti,e.compose=Ea,e.each=sa,e.eachRight=aa,e.extend=ka,e.iteratee=Co,e.methods=Yi,e.object=Br,e.select=Gr,e.tail=Tr,e.unique=$r,ko(e,e),e.add=Mo,e.attempt=Ga,e.camelCase=Ja,e.capitalize=co,e.ceil=tu,e.clone=wi,e.cloneDeep=Si,e.deburr=lo,e.endsWith=ho,e.escape=fo,e.escapeRegExp=po,e.every=Yr,e.find=ia,e.findIndex=Js,e.findKey=Fa,e.findLast=oa,e.findLastIndex=Vs,e.findLastKey=Da,e.findWhere=Qr,e.first=wr,e.floor=eu,e.get=Gi,e.gt=xi,e.gte=Ei,e.has=Qi,e.identity=No,e.includes=Zr,e.indexOf=Er,e.inRange=ao,e.isArguments=Ai,e.isArray=Oa,e.isBoolean=Ci,e.isDate=Ri,e.isElement=Ni,e.isEmpty=Oi,e.isEqual=Ti,e.isError=ki,e.isFinite=Ii,e.isFunction=Pi,e.isMatch=Di,e.isNaN=$i,e.isNative=ji,e.isNull=Li,e.isNumber=Mi,e.isObject=Fi,e.isPlainObject=Bi,e.isRegExp=Hi,e.isString=Ui,e.isTypedArray=Ki,e.isUndefined=qi,e.kebabCase=Va,e.last=Cr,e.lastIndexOf=Rr,e.lt=Ji,e.lte=Vi,e.max=nu,e.min=ru,e.noConflict=Io,e.noop=Po,e.now=ga,e.pad=go,e.padLeft=za,e.padRight=Xa,e.parseInt=vo,e.random=uo,e.reduce=fa,e.reduceRight=da,e.repeat=mo,e.result=no,e.round=iu,e.runInContext=E,e.size=oi,e.snakeCase=Wa,e.some=si,e.sortedIndex=Ws,e.sortedLastIndex=Ys,e.startCase=Ya,e.startsWith=yo,e.sum=Bo,e.template=bo,e.trim=_o,e.trimLeft=wo,e.trimRight=So,e.trunc=xo,e.unescape=Eo,e.uniqueId=Lo,e.words=Ao,e.all=Yr,e.any=si,e.contains=Zr,e.eq=Ti,e.detect=ia,e.foldl=fa,e.foldr=da,e.head=wr,e.include=Zr,e.inject=fa,ko(e,function(){var t={};return ke(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=C,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){G.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new G(this);n=null==n?1:Ss(ys(n)||0,0);var i=this.clone();return r?i.__takeCount__=xs(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},G.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=U;G.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Hn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");G.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");G.prototype[t]=function(){return this.__filtered__?new G(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Me:Fo;G.prototype[t]=function(t){return this[n](r(t))}}),G.prototype.compact=function(){return this.filter(No)},G.prototype.reject=function(t,e){return t=Hn(t,e,1),this.filter(function(e){return!t(e)})},G.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new G(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==A&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},G.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},G.prototype.toArray=function(){return this.take(Ns)},ke(G.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=e[i?"take"+("last"==n?"Right":""):n];o&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,u=s instanceof G,c=e[0],l=u||Oa(s);l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=function(t){return i&&n?o(t,1)[0]:o.apply(A,ce([t],e))},f={func:Kr,args:[h],thisArg:A},d=u&&!a;if(i&&!n)return d?(s=s.clone(),s.__actions__.push(f),t.call(s)):o.call(A,this.value())[0];if(!i&&l){s=d?s:new G(this);var p=t.apply(s,e);return p.__actions__.push(f),new y(p,n)}return this.thru(h)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Zo:Go)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),ke(G.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Fs[i]||(Fs[i]=[]);o.push({name:n,func:r})}}),Fs[In(A,N).name]=[{name:"wrapper",func:A}],G.prototype.clone=et,G.prototype.reverse=rt,G.prototype.value=qt,e.prototype.chain=qr,e.prototype.commit=Jr,e.prototype.concat=ea,e.prototype.plant=Vr,e.prototype.reverse=zr,e.prototype.toString=Xr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Wr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var A,C="3.10.1",R=1,N=2,O=4,T=8,k=16,I=32,P=64,F=128,D=256,$=30,j="...",L=150,M=16,B=200,H=1,U=2,K="Expected a function",q="__lodash_placeholder__",J="[object Arguments]",V="[object Array]",z="[object Boolean]",X="[object Date]",W="[object Error]",Y="[object Function]",G="[object Map]",Q="[object Number]",Z="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",ot="[object Float32Array]",st="[object Float64Array]",at="[object Int8Array]",ut="[object Int16Array]",ct="[object Int32Array]",lt="[object Uint8Array]",ht="[object Uint8ClampedArray]",ft="[object Uint16Array]",dt="[object Uint32Array]",pt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,bt=RegExp(mt.source),_t=RegExp(yt.source),wt=/<%-([\s\S]+?)%>/g,St=/<%([\s\S]+?)%>/g,xt=/<%=([\s\S]+?)%>/g,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,At=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Rt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Nt=RegExp(Rt.source),Ot=/[\u0300-\u036f\ufe20-\ufe23]/g,Tt=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,It=/\w*$/,Pt=/^0[xX]/,Ft=/^\[object .+?Constructor\]$/,Dt=/^\d+$/,$t=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,jt=/($^)/,Lt=/['\n\r\u2028\u2029\\]/g,Mt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Bt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ht=-1,Ut={};Ut[ot]=Ut[st]=Ut[at]=Ut[ut]=Ut[ct]=Ut[lt]=Ut[ht]=Ut[ft]=Ut[dt]=!0,Ut[J]=Ut[V]=Ut[it]=Ut[z]=Ut[X]=Ut[W]=Ut[Y]=Ut[G]=Ut[Q]=Ut[Z]=Ut[tt]=Ut[et]=Ut[nt]=Ut[rt]=!1;var Kt={};Kt[J]=Kt[V]=Kt[it]=Kt[z]=Kt[X]=Kt[ot]=Kt[st]=Kt[at]=Kt[ut]=Kt[ct]=Kt[Q]=Kt[Z]=Kt[tt]=Kt[nt]=Kt[lt]=Kt[ht]=Kt[ft]=Kt[dt]=!0,Kt[W]=Kt[Y]=Kt[G]=Kt[et]=Kt[rt]=!1;var qt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Vt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zt={"function":!0,object:!0},Xt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Wt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=zt[typeof n]&&n&&!n.nodeType&&n,Gt=zt[typeof e]&&e&&!e.nodeType&&e,Qt=Yt&&Gt&&"object"==typeof t&&t&&t.Object&&t,Zt=zt[typeof self]&&self&&self.Object&&self,te=zt[typeof window]&&window&&window.Object&&window,ee=Gt&&Gt.exports===Yt&&Yt,ne=Qt||te!==(this&&this.window)&&te||Zt||this,re=E();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ne._=re,define(function(){return re})):Yt&&Gt?ee?(Gt.exports=re)._=re:Yt._=re:ne._=re}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),"undefined"==typeof YAHOO||!YAHOO)var YAHOO={};YAHOO.namespace=function(){var t,e,n,r=arguments,i=null;for(t=0;t<r.length;t+=1)for(n=(""+r[t]).split("."),i=YAHOO,e="YAHOO"==n[0]?1:0;e<n.length;e+=1)i[n[e]]=i[n[e]]||{},i=i[n[e]];return i},YAHOO.log=function(t,e,n){var r=YAHOO.widget.Logger;return!(!r||!r.log)&&r.log(t,e,n)},YAHOO.register=function(t,e,n){var r,i,o,s,a,u=YAHOO.env.modules;for(u[t]||(u[t]={versions:[],builds:[]}),r=u[t],i=n.version,o=n.build,s=YAHOO.env.listeners,r.name=t,r.version=i,r.build=o,r.versions.push(i),r.builds.push(o),r.mainClass=e,a=0;a<s.length;a+=1)s[a](r);e?(e.VERSION=i,e.BUILD=o):YAHOO.log("mainClass is undefined for module "+t,"warn")},YAHOO.env=YAHOO.env||{modules:[],listeners:[]},YAHOO.env.getVersion=function(t){return YAHOO.env.modules[t]||null},YAHOO.env.parseUA=function(t){var e,n=function(t){var e=0;return parseFloat(t.replace(/\./g,function(){return 1==e++?"":"."}))},r=navigator,i={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:r&&r.cajaVersion,secure:!1,os:null},o=t||navigator&&navigator.userAgent,s=window&&window.location,a=s&&s.href;return i.secure=a&&0===a.toLowerCase().indexOf("https"),o&&(/windows|win32/i.test(o)?i.os="windows":/macintosh/i.test(o)?i.os="macintosh":/rhino/i.test(o)&&(i.os="rhino"),/KHTML/.test(o)&&(i.webkit=1),e=o.match(/AppleWebKit\/([^\s]*)/),e&&e[1]&&(i.webkit=n(e[1]),/ Mobile\//.test(o)?(i.mobile="Apple",e=o.match(/OS ([^\s]*)/),e&&e[1]&&(e=n(e[1].replace("_","."))),i.ios=e,i.ipad=i.ipod=i.iphone=0,e=o.match(/iPad|iPod|iPhone/),e&&e[0]&&(i[e[0].toLowerCase()]=i.ios)):(e=o.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/),e&&(i.mobile=e[0]),/webOS/.test(o)&&(i.mobile="WebOS",e=o.match(/webOS\/([^\s]*);/),e&&e[1]&&(i.webos=n(e[1]))),/ Android/.test(o)&&(i.mobile="Android",e=o.match(/Android ([^\s]*);/),e&&e[1]&&(i.android=n(e[1])))),e=o.match(/Chrome\/([^\s]*)/),e&&e[1]?i.chrome=n(e[1]):(e=o.match(/AdobeAIR\/([^\s]*)/),e&&(i.air=e[0]))),i.webkit||(e=o.match(/Opera[\s\/]([^\s]*)/),e&&e[1]?(i.opera=n(e[1]),e=o.match(/Version\/([^\s]*)/),e&&e[1]&&(i.opera=n(e[1])),e=o.match(/Opera Mini[^;]*/),e&&(i.mobile=e[0])):(e=o.match(/MSIE\s([^;]*)/),e&&e[1]?i.ie=n(e[1]):(e=o.match(/Gecko\/([^\s]*)/),e&&(i.gecko=1,e=o.match(/rv:([^\s\)]*)/),e&&e[1]&&(i.gecko=n(e[1]))))))),i},YAHOO.env.ua=YAHOO.env.parseUA(),function(){if(YAHOO.namespace("util","widget","example"),"undefined"!=typeof YAHOO_config){var t,e=YAHOO_config.listener,n=YAHOO.env.listeners,r=!0;if(e){for(t=0;t<n.length;t++)if(n[t]==e){r=!1;break}r&&n.push(e)}}}(),YAHOO.lang=YAHOO.lang||{},function(){var t=YAHOO.lang,e=Object.prototype,n="[object Array]",r="[object Function]",i="[object Object]",o=[],s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},a=["toString","valueOf"],u={isArray:function(t){return e.toString.apply(t)===n},isBoolean:function(t){return"boolean"==typeof t},isFunction:function(t){return"function"==typeof t||e.toString.apply(t)===r},isNull:function(t){return null===t},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isObject:function(e){return e&&("object"==typeof e||t.isFunction(e))||!1},isString:function(t){return"string"==typeof t},isUndefined:function(t){return"undefined"==typeof t},_IEEnumFix:YAHOO.env.ua.ie?function(n,r){var i,o,s;for(i=0;i<a.length;i+=1)o=a[i],s=r[o],t.isFunction(s)&&s!=e[o]&&(n[o]=s)}:function(){},escapeHTML:function(t){return t.replace(/[&<>"'\/`]/g,function(t){return s[t]})},extend:function(n,r,i){if(!r||!n)throw new Error("extend failed, please check that all dependencies are included.");var o,s=function(){};if(s.prototype=r.prototype,n.prototype=new s,n.prototype.constructor=n,n.superclass=r.prototype,r.prototype.constructor==e.constructor&&(r.prototype.constructor=r),i){for(o in i)t.hasOwnProperty(i,o)&&(n.prototype[o]=i[o]);t._IEEnumFix(n.prototype,i)}},augmentObject:function(e,n){if(!n||!e)throw new Error("Absorb failed, verify dependencies.");var r,i,o=arguments,s=o[2];if(s&&s!==!0)for(r=2;r<o.length;r+=1)e[o[r]]=n[o[r]];else{for(i in n)!s&&i in e||(e[i]=n[i]);t._IEEnumFix(e,n)}return e},augmentProto:function(e,n){if(!n||!e)throw new Error("Augment failed, verify dependencies.");var r,i=[e.prototype,n.prototype];for(r=2;r<arguments.length;r+=1)i.push(arguments[r]);return t.augmentObject.apply(this,i),e},dump:function(e,n){var r,i,o=[],s="{...}",a="f(){...}",u=", ",c=" => ";if(!t.isObject(e))return e+"";if(e instanceof Date||"nodeType"in e&&"tagName"in e)return e;if(t.isFunction(e))return a;if(n=t.isNumber(n)?n:3,t.isArray(e)){for(o.push("["),r=0,i=e.length;r<i;r+=1)t.isObject(e[r])?o.push(n>0?t.dump(e[r],n-1):s):o.push(e[r]),o.push(u);o.length>1&&o.pop(),o.push("]")}else{o.push("{");for(r in e)t.hasOwnProperty(e,r)&&(o.push(r+c),t.isObject(e[r])?o.push(n>0?t.dump(e[r],n-1):s):o.push(e[r]),o.push(u));o.length>1&&o.pop(),o.push("}")}return o.join("")},substitute:function(e,n,r,o){for(var s,a,u,c,l,h,f,d,p,g=[],v=e.length,m="dump",y=" ",b="{",_="}";(s=e.lastIndexOf(b,v),!(s<0))&&(a=e.indexOf(_,s),!(s+1>a));)f=e.substring(s+1,a),c=f,h=null,u=c.indexOf(y),u>-1&&(h=c.substring(u+1),c=c.substring(0,u)),l=n[c],r&&(l=r(c,l,h)),t.isObject(l)?t.isArray(l)?l=t.dump(l,parseInt(h,10)):(h=h||"",d=h.indexOf(m),d>-1&&(h=h.substring(4)),p=l.toString(),l=p===i||d>-1?t.dump(l,parseInt(h,10)):p):t.isString(l)||t.isNumber(l)||(l="~-"+g.length+"-~",g[g.length]=f),e=e.substring(0,s)+l+e.substring(a+1),o===!1&&(v=s-1);for(s=g.length-1;s>=0;s-=1)e=e.replace(new RegExp("~-"+s+"-~"),"{"+g[s]+"}","g");return e},trim:function(t){try{return t.replace(/^\s+|\s+$/g,"")}catch(e){return t}},merge:function(){var e,n={},r=arguments,i=r.length;for(e=0;e<i;e+=1)t.augmentObject(n,r[e],!0);return n},later:function(e,n,r,i,s){e=e||0,n=n||{};var a,u,c=r,l=i;if(t.isString(r)&&(c=n[r]),!c)throw new TypeError("method undefined");return t.isUndefined(i)||t.isArray(l)||(l=[i]),a=function(){c.apply(n,l||o)},u=s?setInterval(a,e):setTimeout(a,e),{interval:s,cancel:function(){this.interval?clearInterval(u):clearTimeout(u)}}},isValue:function(e){return t.isObject(e)||t.isString(e)||t.isNumber(e)||t.isBoolean(e)}};t.hasOwnProperty=e.hasOwnProperty?function(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}:function(e,n){return!t.isUndefined(e[n])&&e.constructor.prototype[n]!==e[n]},u.augmentObject(t,u,!0),YAHOO.util.Lang=t,t.augment=t.augmentProto,YAHOO.augment=t.augmentProto,YAHOO.extend=t.extend}(),YAHOO.register("yahoo",YAHOO,{version:"2.9.0",build:"2800"});var CryptoJS=CryptoJS||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],n!=e?this.sigBytes=n:this.sigBytes=4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n=[],r=0;r<e;r+=4)n.push(4294967296*t.random()|0);return new o.init(n,e)}}),s=n.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,a=4*s,u=i/a;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*s,l=t.min(4*c,i);if(c){for(var h=0;h<c;h+=s)this._doProcessBlock(r,h);var f=r.splice(0,c);n.sigBytes-=l}return new o.init(f,l)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math);!function(t){var e=CryptoJS,n=e.lib,r=n.Base,i=n.WordArray,e=e.x64={};e.Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),e.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:8*e.length},toX32:function(){for(var t=this.words,e=t.length,n=[],r=0;r<e;r++){var o=t[r];n.push(o.high),n.push(o.low)}return i.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),CryptoJS.lib.Cipher||function(t){var e=CryptoJS,n=e.lib,r=n.Base,i=n.WordArray,o=n.BufferedBlockAlgorithm,s=e.enc.Base64,a=e.algo.EvpKDF,u=n.Cipher=o.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,n,r){return("string"==typeof n?p:d).encrypt(t,e,n,r)},decrypt:function(e,n,r){return("string"==typeof n?p:d).decrypt(t,e,n,r)}}}});n.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=e.mode={},l=function(e,n,r){var i=this._iv;i?this._iv=t:i=this._prevBlock;for(var o=0;o<r;o++)e[n+o]^=i[o]},h=(n.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize;l.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)}}),h.Decryptor=h.extend({processBlock:function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),l.call(this,t,e,r),this._prevBlock=i}}),c=c.CBC=h,h=(e.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,n=n-t.sigBytes%n,r=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(r);n=i.create(o,n),t.concat(n)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},n.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:h}),reset:function(){u.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var f=n.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),c=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?i.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){t=s.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var n=i.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:n})}},d=n.SerializableCipher=r.extend({cfg:r.extend({format:c}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return e=i.finalize(e),i=i.cfg,f.create({ciphertext:e,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,n,r){return r||(r=i.random(8)),t=a.create({keySize:e+n}).compute(t,r),n=i.create(t.words.slice(e),4*n),t.sigBytes=4*e,f.create({key:t,iv:n,salt:r})}},p=n.PasswordBasedCipher=d.extend({cfg:d.cfg.extend({kdf:e}),encrypt:function(t,e,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=d.encrypt.call(this,t,e,n.key,r),t.mixIn(n),t},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,e.salt),r.iv=n.iv,d.decrypt.call(this,t,e,n.key,r)}})}(),function(){for(var t=CryptoJS,e=t.lib.BlockCipher,n=t.algo,r=[],i=[],o=[],s=[],a=[],u=[],c=[],l=[],h=[],f=[],d=[],p=0;256>p;p++)d[p]=128>p?p<<1:p<<1^283;
for(var g=0,v=0,p=0;256>p;p++){var m=v^v<<1^v<<2^v<<3^v<<4,m=m>>>8^255&m^99;r[g]=m,i[m]=g;var y=d[g],b=d[y],_=d[b],w=257*d[m]^16843008*m;o[g]=w<<24|w>>>8,s[g]=w<<16|w>>>16,a[g]=w<<8|w>>>24,u[g]=w,w=16843009*_^65537*b^257*y^16843008*g,c[m]=w<<24|w>>>8,l[m]=w<<16|w>>>16,h[m]=w<<8|w>>>24,f[m]=w,g?(g=y^d[d[d[_^y]]],v^=d[d[v]]):g=v=1}var S=[0,1,2,4,8,16,32,64,128,27,54],n=n.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes/4,t=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],o=0;o<t;o++)if(o<n)i[o]=e[o];else{var s=i[o-1];o%n?6<n&&4==o%n&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=s<<8|s>>>24,s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=S[o/n|0]<<24),i[o]=i[o-n]^s}for(e=this._invKeySchedule=[],n=0;n<t;n++)o=t-n,s=n%4?i[o]:i[o-4],e[n]=4>n||4>=o?s:c[r[s>>>24]]^l[r[s>>>16&255]]^h[r[s>>>8&255]]^f[r[255&s]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,o,s,a,u,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,l,h,f,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,i,o,s,a){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<u;p++)var g=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[d++],v=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^n[d++],m=r[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^n[d++],f=r[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[d++],c=g,l=v,h=m;g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],v=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d++],m=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],t[e]=g,t[e+1]=v,t[e+2]=m,t[e+3]=f},keySize:8});t.AES=e._createHelper(n)}(),function(){function t(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function e(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var n=CryptoJS,r=n.lib,i=r.WordArray,r=r.BlockCipher,o=n.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=o.DES=r.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;56>n;n++){var r=s[n]-1;e[n]=t[r>>>5]>>>31-r%32&1}for(t=this._subKeys=[],r=0;16>r;r++){for(var i=t[r]=[],o=u[r],n=0;24>n;n++)i[n/6|0]|=e[(a[n]-1+o)%28]<<31-n%6,i[4+(n/6|0)]|=e[28+(a[n+24]-1+o)%28]<<31-n%6;for(i[0]=i[0]<<1|i[0]>>>31,n=1;7>n;n++)i[n]>>>=4*(n-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(e=this._invSubKeys=[],n=0;16>n;n++)e[n]=t[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(n,r,i){this._lBlock=n[r],this._rBlock=n[r+1],t.call(this,4,252645135),t.call(this,16,65535),e.call(this,2,858993459),e.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;16>o;o++){for(var s=i[o],a=this._lBlock,u=this._rBlock,h=0,f=0;8>f;f++)h|=c[f][((u^s[f])&l[f])>>>0];this._lBlock=u,this._rBlock=a^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,t.call(this,1,1431655765),e.call(this,8,16711935),e.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),n[r]=this._lBlock,n[r+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=r._createHelper(h),o=o.TripleDES=r.extend({_doReset:function(){var t=this._key.words;this._des1=h.createEncryptor(i.create(t.slice(0,2))),this._des2=h.createEncryptor(i.create(t.slice(2,4))),this._des3=h.createEncryptor(i.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2}),n.TripleDES=r._createHelper(o)}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(e[i>>>2]>>>24-8*(i%4)&255)<<16|(e[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|e[i+2>>>2]>>>24-8*((i+2)%4)&255,s=0;4>s&&i+.75*s<n;s++)t.push(r.charAt(o>>>6*(3-s)&63));if(e=r.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var n=t.length,r=this._map,i=r.charAt(64);i&&(i=t.indexOf(i),-1!=i&&(n=i));for(var i=[],o=0,s=0;s<n;s++)if(s%4){var a=r.indexOf(t.charAt(s-1))<<2*(s%4),u=r.indexOf(t.charAt(s))>>>6-2*(s%4);i[o>>>2]|=(a|u)<<24-8*(o%4),o++}return e.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,n,r,i,o,s){return t=t+(e&n|~e&r)+i+s,(t<<o|t>>>32-o)+e}function n(t,e,n,r,i,o,s){return t=t+(e&r|n&~r)+i+s,(t<<o|t>>>32-o)+e}function r(t,e,n,r,i,o,s){return t=t+(e^n^r)+i+s,(t<<o|t>>>32-o)+e}function i(t,e,n,r,i,o,s){return t=t+(n^(e|~r))+i+s,(t<<o|t>>>32-o)+e}for(var o=CryptoJS,s=o.lib,a=s.WordArray,u=s.Hasher,s=o.algo,c=[],l=0;64>l;l++)c[l]=4294967296*t.abs(t.sin(l+1))|0;s=s.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,o){for(var s=0;16>s;s++){var a=o+s,u=t[a];t[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var s=this._hash.words,a=t[o+0],u=t[o+1],l=t[o+2],h=t[o+3],f=t[o+4],d=t[o+5],p=t[o+6],g=t[o+7],v=t[o+8],m=t[o+9],y=t[o+10],b=t[o+11],_=t[o+12],w=t[o+13],S=t[o+14],x=t[o+15],E=s[0],A=s[1],C=s[2],R=s[3],E=e(E,A,C,R,a,7,c[0]),R=e(R,E,A,C,u,12,c[1]),C=e(C,R,E,A,l,17,c[2]),A=e(A,C,R,E,h,22,c[3]),E=e(E,A,C,R,f,7,c[4]),R=e(R,E,A,C,d,12,c[5]),C=e(C,R,E,A,p,17,c[6]),A=e(A,C,R,E,g,22,c[7]),E=e(E,A,C,R,v,7,c[8]),R=e(R,E,A,C,m,12,c[9]),C=e(C,R,E,A,y,17,c[10]),A=e(A,C,R,E,b,22,c[11]),E=e(E,A,C,R,_,7,c[12]),R=e(R,E,A,C,w,12,c[13]),C=e(C,R,E,A,S,17,c[14]),A=e(A,C,R,E,x,22,c[15]),E=n(E,A,C,R,u,5,c[16]),R=n(R,E,A,C,p,9,c[17]),C=n(C,R,E,A,b,14,c[18]),A=n(A,C,R,E,a,20,c[19]),E=n(E,A,C,R,d,5,c[20]),R=n(R,E,A,C,y,9,c[21]),C=n(C,R,E,A,x,14,c[22]),A=n(A,C,R,E,f,20,c[23]),E=n(E,A,C,R,m,5,c[24]),R=n(R,E,A,C,S,9,c[25]),C=n(C,R,E,A,h,14,c[26]),A=n(A,C,R,E,v,20,c[27]),E=n(E,A,C,R,w,5,c[28]),R=n(R,E,A,C,l,9,c[29]),C=n(C,R,E,A,g,14,c[30]),A=n(A,C,R,E,_,20,c[31]),E=r(E,A,C,R,d,4,c[32]),R=r(R,E,A,C,v,11,c[33]),C=r(C,R,E,A,b,16,c[34]),A=r(A,C,R,E,S,23,c[35]),E=r(E,A,C,R,u,4,c[36]),R=r(R,E,A,C,f,11,c[37]),C=r(C,R,E,A,g,16,c[38]),A=r(A,C,R,E,y,23,c[39]),E=r(E,A,C,R,w,4,c[40]),R=r(R,E,A,C,a,11,c[41]),C=r(C,R,E,A,h,16,c[42]),A=r(A,C,R,E,p,23,c[43]),E=r(E,A,C,R,m,4,c[44]),R=r(R,E,A,C,_,11,c[45]),C=r(C,R,E,A,x,16,c[46]),A=r(A,C,R,E,l,23,c[47]),E=i(E,A,C,R,a,6,c[48]),R=i(R,E,A,C,g,10,c[49]),C=i(C,R,E,A,S,15,c[50]),A=i(A,C,R,E,d,21,c[51]),E=i(E,A,C,R,_,6,c[52]),R=i(R,E,A,C,h,10,c[53]),C=i(C,R,E,A,y,15,c[54]),A=i(A,C,R,E,u,21,c[55]),E=i(E,A,C,R,v,6,c[56]),R=i(R,E,A,C,x,10,c[57]),C=i(C,R,E,A,p,15,c[58]),A=i(A,C,R,E,w,21,c[59]),E=i(E,A,C,R,f,6,c[60]),R=i(R,E,A,C,b,10,c[61]),C=i(C,R,E,A,l,15,c[62]),A=i(A,C,R,E,m,21,c[63]);s[0]=s[0]+E|0,s[1]=s[1]+A|0,s[2]=s[2]+C|0,s[3]=s[3]+R|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;n[i>>>5]|=128<<24-i%32;var o=t.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(n.length+1),this._process(),e=this._hash,n=e.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return e},clone:function(){var t=u.clone.call(this);return t._hash=this._hash.clone(),t}}),o.MD5=u._createHelper(s),o.HmacMD5=u._createHmacHelper(s)}(Math),function(){var t=CryptoJS,e=t.lib,n=e.WordArray,r=e.Hasher,i=[],e=t.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=0;80>c;c++){if(16>c)i[c]=0|t[e+c];else{var l=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=l<<1|l>>>31}l=(r<<5|r>>>27)+u+i[c],l=20>c?l+((o&s|~o&a)+1518500249):40>c?l+((o^s^a)+1859775393):60>c?l+((o&s|o&a|s&a)-1894007588):l+((o^s^a)-899497514),u=a,a=s,s=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),e[(r+64>>>9<<4)+15]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=r._createHelper(e),t.HmacSHA1=r._createHmacHelper(e)}(),function(t){for(var e=CryptoJS,n=e.lib,r=n.WordArray,i=n.Hasher,n=e.algo,o=[],s=[],a=function(t){return 4294967296*(t-(0|t))|0},u=2,c=0;64>c;){var l;t:{l=u;for(var h=t.sqrt(l),f=2;f<=h;f++)if(!(l%f)){l=!1;break t}l=!0}l&&(8>c&&(o[c]=a(t.pow(u,.5))),s[c]=a(t.pow(u,1/3)),c++),u++}var d=[],n=n.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)d[f]=0|t[e+f];else{var p=d[f-15],g=d[f-2];d[f]=((p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3)+d[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+d[f-16]}p=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+s[f]+d[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&o^i&o),h=l,l=c,c=u,u=a+p|0,a=o,o=i,i=r,r=p+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=t.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),function(){var t=CryptoJS,e=t.lib.WordArray,n=t.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new e.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=4,t}});t.SHA224=r._createHelper(n),t.HmacSHA224=r._createHmacHelper(n)}(),function(){function t(){return i.create.apply(i,arguments)}for(var e=CryptoJS,n=e.lib.Hasher,r=e.x64,i=r.Word,o=r.WordArray,r=e.algo,s=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],a=[],u=0;80>u;u++)a[u]=t();r=r.SHA512=n.extend({_doReset:function(){this._hash=new o.init([new i.init(1779033703,4089235720),new i.init(3144134277,2227873595),new i.init(1013904242,4271175723),new i.init(2773480762,1595750129),new i.init(1359893119,2917565137),new i.init(2600822924,725511199),new i.init(528734635,4215389547),new i.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],u=n[3],c=n[4],l=n[5],h=n[6],n=n[7],f=r.high,d=r.low,p=i.high,g=i.low,v=o.high,m=o.low,y=u.high,b=u.low,_=c.high,w=c.low,S=l.high,x=l.low,E=h.high,A=h.low,C=n.high,R=n.low,N=f,O=d,T=p,k=g,I=v,P=m,F=y,D=b,$=_,j=w,L=S,M=x,B=E,H=A,U=C,K=R,q=0;80>q;q++){var J=a[q];if(16>q)var V=J.high=0|t[e+2*q],z=J.low=0|t[e+2*q+1];else{var V=a[q-15],z=V.high,X=V.low,V=(z>>>1|X<<31)^(z>>>8|X<<24)^z>>>7,X=(X>>>1|z<<31)^(X>>>8|z<<24)^(X>>>7|z<<25),W=a[q-2],z=W.high,Y=W.low,W=(z>>>19|Y<<13)^(z<<3|Y>>>29)^z>>>6,Y=(Y>>>19|z<<13)^(Y<<3|z>>>29)^(Y>>>6|z<<26),z=a[q-7],G=z.high,Q=a[q-16],Z=Q.high,Q=Q.low,z=X+z.low,V=V+G+(z>>>0<X>>>0?1:0),z=z+Y,V=V+W+(z>>>0<Y>>>0?1:0),z=z+Q,V=V+Z+(z>>>0<Q>>>0?1:0);J.high=V,J.low=z}var G=$&L^~$&B,Q=j&M^~j&H,J=N&T^N&I^T&I,tt=O&k^O&P^k&P,X=(N>>>28|O<<4)^(N<<30|O>>>2)^(N<<25|O>>>7),W=(O>>>28|N<<4)^(O<<30|N>>>2)^(O<<25|N>>>7),Y=s[q],et=Y.high,nt=Y.low,Y=K+((j>>>14|$<<18)^(j>>>18|$<<14)^(j<<23|$>>>9)),Z=U+(($>>>14|j<<18)^($>>>18|j<<14)^($<<23|j>>>9))+(Y>>>0<K>>>0?1:0),Y=Y+Q,Z=Z+G+(Y>>>0<Q>>>0?1:0),Y=Y+nt,Z=Z+et+(Y>>>0<nt>>>0?1:0),Y=Y+z,Z=Z+V+(Y>>>0<z>>>0?1:0),z=W+tt,J=X+J+(z>>>0<W>>>0?1:0),U=B,K=H,B=L,H=M,L=$,M=j,j=D+Y|0,$=F+Z+(j>>>0<D>>>0?1:0)|0,F=I,D=P,I=T,P=k,T=N,k=O,O=Y+z|0,N=Z+J+(O>>>0<Y>>>0?1:0)|0}d=r.low=d+O,r.high=f+N+(d>>>0<O>>>0?1:0),g=i.low=g+k,i.high=p+T+(g>>>0<k>>>0?1:0),m=o.low=m+P,o.high=v+I+(m>>>0<P>>>0?1:0),b=u.low=b+D,u.high=y+F+(b>>>0<D>>>0?1:0),w=c.low=w+j,c.high=_+$+(w>>>0<j>>>0?1:0),x=l.low=x+M,l.high=S+L+(x>>>0<M>>>0?1:0),A=h.low=A+H,h.high=E+B+(A>>>0<H>>>0?1:0),R=n.low=R+K,n.high=C+U+(R>>>0<K>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[(r+128>>>10<<5)+30]=Math.floor(n/4294967296),e[(r+128>>>10<<5)+31]=n,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32}),e.SHA512=n._createHelper(r),e.HmacSHA512=n._createHmacHelper(r)}(),function(){var t=CryptoJS,e=t.x64,n=e.Word,r=e.WordArray,e=t.algo,i=e.SHA512,e=e.SHA384=i.extend({_doReset:function(){this._hash=new r.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=i._doFinalize.call(this);return t.sigBytes-=16,t}});t.SHA384=i._createHelper(e),t.HmacSHA384=i._createHmacHelper(e)}(),function(){var t=CryptoJS,e=t.lib,n=e.WordArray,r=e.Hasher,e=t.algo,i=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),o=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),a=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=n.create([0,1518500249,1859775393,2400959708,2840853838]),c=n.create([1352829926,1548603684,1836072691,2053994217,0]),e=e.RIPEMD160=r.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=0;16>n;n++){var r=e+n,l=t[r];t[r]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var h,f,d,p,g,v,m,y,b,_,r=this._hash.words,l=u.words,w=c.words,S=i.words,x=o.words,E=s.words,A=a.words;v=h=r[0],m=f=r[1],y=d=r[2],b=p=r[3],_=g=r[4];for(var C,n=0;80>n;n+=1)C=h+t[e+S[n]]|0,C=16>n?C+((f^d^p)+l[0]):32>n?C+((f&d|~f&p)+l[1]):48>n?C+(((f|~d)^p)+l[2]):64>n?C+((f&p|d&~p)+l[3]):C+((f^(d|~p))+l[4]),C|=0,C=C<<E[n]|C>>>32-E[n],C=C+g|0,h=g,g=p,p=d<<10|d>>>22,d=f,f=C,C=v+t[e+x[n]]|0,C=16>n?C+((m^(y|~b))+w[0]):32>n?C+((m&b|y&~b)+w[1]):48>n?C+(((m|~y)^b)+w[2]):64>n?C+((m&y|~m&b)+w[3]):C+((m^y^b)+w[4]),C|=0,C=C<<A[n]|C>>>32-A[n],C=C+_|0,v=_,_=b,b=y<<10|y>>>22,y=m,m=C;C=r[1]+d+b|0,r[1]=r[2]+p+_|0,r[2]=r[3]+g+v|0,r[3]=r[4]+h+m|0,r[4]=r[0]+f+y|0,r[0]=C},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;for(e[r>>>5]|=128<<24-r%32,e[(r+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process(),t=this._hash,e=t.words,n=0;5>n;n++)r=e[n],e[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});t.RIPEMD160=r._createHelper(e),t.HmacRIPEMD160=r._createHmacHelper(e)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var o=this._oKey=n.clone(),s=this._iKey=n.clone(),a=o.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;o.sigBytes=s.sigBytes=i,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib,n=e.Base,r=e.WordArray,e=t.algo,i=e.HMAC,o=e.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,o=i.create(n.hasher,t),s=r.create(),a=r.create([1]),u=s.words,c=a.words,l=n.keySize,n=n.iterations;u.length<l;){var h=o.update(e).finalize(a);o.reset();for(var f=h.words,d=f.length,p=h,g=1;g<n;g++){p=o.finalize(p),o.reset();for(var v=p.words,m=0;m<d;m++)f[m]^=v[m]}s.concat(h),c[0]++}return s.sigBytes=4*l,s}});t.PBKDF2=function(t,e,n){return o.create(n).compute(t,e)}}();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64pad="=",dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;vv<=9;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;vv<36;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256,rng_state,rng_pool,rng_pptr;
if(null==rng_pool){rng_pool=new Array,rng_pptr=0;var t;if(window.crypto&&window.crypto.getRandomValues){var ua=new Uint8Array(32);for(window.crypto.getRandomValues(ua),t=0;t<32;++t)rng_pool[rng_pptr++]=ua[t]}if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_pptr<rng_psize;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes,RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,RSAKey.prototype.encryptOAEP=RSAEncryptOAEP,RSAKey.prototype.type="RSA",RSAKey.prototype.doPrivate=RSADoPrivate,RSAKey.prototype.setPrivate=RSASetPrivate,RSAKey.prototype.setPrivateEx=RSASetPrivateEx,RSAKey.prototype.generate=RSAGenerate,RSAKey.prototype.decrypt=RSADecrypt,RSAKey.prototype.decryptOAEP=RSADecryptOAEP,ECFieldElementFp.prototype.equals=feFpEquals,ECFieldElementFp.prototype.toBigInteger=feFpToBigInteger,ECFieldElementFp.prototype.negate=feFpNegate,ECFieldElementFp.prototype.add=feFpAdd,ECFieldElementFp.prototype.subtract=feFpSubtract,ECFieldElementFp.prototype.multiply=feFpMultiply,ECFieldElementFp.prototype.square=feFpSquare,ECFieldElementFp.prototype.divide=feFpDivide,ECPointFp.prototype.getX=pointFpGetX,ECPointFp.prototype.getY=pointFpGetY,ECPointFp.prototype.equals=pointFpEquals,ECPointFp.prototype.isInfinity=pointFpIsInfinity,ECPointFp.prototype.negate=pointFpNegate,ECPointFp.prototype.add=pointFpAdd,ECPointFp.prototype.twice=pointFpTwice,ECPointFp.prototype.multiply=pointFpMultiply,ECPointFp.prototype.multiplyTwo=pointFpMultiplyTwo,ECCurveFp.prototype.getQ=curveFpGetQ,ECCurveFp.prototype.getA=curveFpGetA,ECCurveFp.prototype.getB=curveFpGetB,ECCurveFp.prototype.equals=curveFpEquals,ECCurveFp.prototype.getInfinity=curveFpGetInfinity,ECCurveFp.prototype.fromBigInteger=curveFpFromBigInteger,ECCurveFp.prototype.decodePointHex=curveFpDecodePointHex,ECFieldElementFp.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},ECPointFp.prototype.getEncoded=function(t){var e=function(t,e){var n=t.toByteArrayUnsigned();if(e<n.length)n=n.slice(n.length-e);else for(;e>n.length;)n.unshift(0);return n},n=this.getX().toBigInteger(),r=this.getY().toBigInteger(),i=e(n,32);return t?r.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(e(r,32))),i},ECPointFp.decodeFrom=function(t,e){var n=(e[0],e.length-1),r=e.slice(1,1+n/2),i=e.slice(1+n/2,1+n);r.unshift(0),i.unshift(0);var o=new BigInteger(r),s=new BigInteger(i);return new ECPointFp(t,t.fromBigInteger(o),t.fromBigInteger(s))},ECPointFp.decodeFromHex=function(t,e){var n=(e.substr(0,2),e.length-2),r=e.substr(2,n/2),i=e.substr(2+n/2,n/2),o=new BigInteger(r,16),s=new BigInteger(i,16);return new ECPointFp(t,t.fromBigInteger(o),t.fromBigInteger(s))},ECPointFp.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),n=t.y.subtract(this.y),r=n.divide(e),i=r.square().subtract(this.x).subtract(t.x),o=r.multiply(this.x.subtract(i)).subtract(this.y);return new ECPointFp(this.curve,i,o)},ECPointFp.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(BigInteger.valueOf(2)),e=this.curve.fromBigInteger(BigInteger.valueOf(3)),n=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),r=n.square().subtract(this.x.multiply(t)),i=n.multiply(this.x.subtract(r)).subtract(this.y);return new ECPointFp(this.curve,r,i)},ECPointFp.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,n=t,r=n.multiply(new BigInteger("3")),i=this.negate(),o=this;for(e=r.bitLength()-2;e>0;--e){o=o.twice();var s=r.testBit(e),a=n.testBit(e);s!=a&&(o=o.add2D(s?this:i))}return o},ECPointFp.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),n=this.curve.getA().toBigInteger(),r=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=e.multiply(e).mod(i),s=t.multiply(t).multiply(t).add(n.multiply(t)).add(r).mod(i);return o.equals(s)},ECPointFp.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},ECPointFp.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),n=this.getY().toBigInteger();if(e.compareTo(BigInteger.ONE)<0||e.compareTo(t.subtract(BigInteger.ONE))>0)throw new Error("x coordinate out of bounds");if(n.compareTo(BigInteger.ONE)<0||n.compareTo(t.subtract(BigInteger.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var jsonParse=function(){function t(t,e,n){return e?s[e]:String.fromCharCode(parseInt(n,16))}var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",n='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+n+'*")',i=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+r+")","g"),o=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),s={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=new String(""),u="\\",c=({"{":Object,"[":Array},Object.hasOwnProperty);return function(e,n){var r,s=e.match(i),l=s[0],h=!1;"{"===l?r={}:"["===l?r=[]:(r=[],h=!0);for(var f,d=[r],p=1-h,g=s.length;p<g;++p){l=s[p];var v;switch(l.charCodeAt(0)){default:v=d[0],v[f||v.length]=+l,f=void 0;break;case 34:if(l=l.substring(1,l.length-1),l.indexOf(u)!==-1&&(l=l.replace(o,t)),v=d[0],!f){if(!(v instanceof Array)){f=l||a;break}f=v.length}v[f]=l,f=void 0;break;case 91:v=d[0],d.unshift(v[f||v.length]=[]),f=void 0;break;case 93:d.shift();break;case 102:v=d[0],v[f||v.length]=!1,f=void 0;break;case 110:v=d[0],v[f||v.length]=null,f=void 0;break;case 116:v=d[0],v[f||v.length]=!0,f=void 0;break;case 123:v=d[0],d.unshift(v[f||v.length]={}),f=void 0;break;case 125:d.shift()}}if(h){if(1!==d.length)throw new Error;r=r[0]}else if(d.length)throw new Error;if(n){var m=function(t,e){var r=t[e];if(r&&"object"==typeof r){var i=null;for(var o in r)if(c.call(r,o)&&r!==t){var s=m(r,o);void 0!==s?r[o]=s:(i||(i=[]),i.push(o))}if(i)for(var a=i.length;--a>=0;)delete r[i[a]]}return n.call(t,e,r)};r=m({"":r},"")}return r}}();"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(t){var e=t.toString(16);return e.length%2==1&&(e="0"+e),e},this.bigIntToMinTwosComplementsHex=function(t){var e=t.toString(16);if("-"!=e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var n=e.substr(1),r=n.length;r%2==1?r+=1:e.match(/^[0-7]/)||(r+=2);for(var i="",o=0;o<r;o++)i+="f";var s=new BigInteger(i,16),a=s.xor(t).add(BigInteger.ONE);e=a.toString(16).replace(/^-/,"")}return e},this.getPEMStringFromHex=function(t,e){var n=hextob64(t),r=n.replace(/(.{64})/g,"$1\r\n");return r=r.replace(/\r\n$/,""),"-----BEGIN "+e+"-----\r\n"+r+"\r\n-----END "+e+"-----\r\n"},this.newObject=function(t){var e=KJUR.asn1,n=Object.keys(t);if(1!=n.length)throw"key of param shall be only one.";var r=n[0];if(":bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:seq:set:tag:".indexOf(":"+r+":")==-1)throw"undefined key: "+r;if("bool"==r)return new e.DERBoolean(t[r]);if("int"==r)return new e.DERInteger(t[r]);if("bitstr"==r)return new e.DERBitString(t[r]);if("octstr"==r)return new e.DEROctetString(t[r]);if("null"==r)return new e.DERNull(t[r]);if("oid"==r)return new e.DERObjectIdentifier(t[r]);if("enum"==r)return new e.DEREnumerated(t[r]);if("utf8str"==r)return new e.DERUTF8String(t[r]);if("numstr"==r)return new e.DERNumericString(t[r]);if("prnstr"==r)return new e.DERPrintableString(t[r]);if("telstr"==r)return new e.DERTeletexString(t[r]);if("ia5str"==r)return new e.DERIA5String(t[r]);if("utctime"==r)return new e.DERUTCTime(t[r]);if("gentime"==r)return new e.DERGeneralizedTime(t[r]);if("seq"==r){for(var i=t[r],o=[],s=0;s<i.length;s++){var a=e.ASN1Util.newObject(i[s]);o.push(a)}return new e.DERSequence({array:o})}if("set"==r){for(var i=t[r],o=[],s=0;s<i.length;s++){var a=e.ASN1Util.newObject(i[s]);o.push(a)}return new e.DERSet({array:o})}if("tag"==r){var u=t[r];if("[object Array]"===Object.prototype.toString.call(u)&&3==u.length){var c=e.ASN1Util.newObject(u[2]);return new e.DERTaggedObject({tag:u[0],explicit:u[1],obj:c})}var l={};if(void 0!==u.explicit&&(l.explicit=u.explicit),void 0!==u.tag&&(l.tag=u.tag),void 0===u.obj)throw"obj shall be specified for 'tag'.";return l.obj=e.ASN1Util.newObject(u.obj),new e.DERTaggedObject(l)}},this.jsonToASN1HEX=function(t){var e=this.newObject(t);return e.getEncodedHex()}},KJUR.asn1.ASN1Util.oidHexToInt=function(t){for(var e="",n=parseInt(t.substr(0,2),16),r=Math.floor(n/40),i=n%40,e=r+"."+i,o="",s=2;s<t.length;s+=2){var a=parseInt(t.substr(s,2),16),u=("00000000"+a.toString(2)).slice(-8);if(o+=u.substr(1,7),"0"==u.substr(0,1)){var c=new BigInteger(o,2);e=e+"."+c.toString(10),o=""}}return e},KJUR.asn1.ASN1Util.oidIntToHex=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new BigInteger(t,10),i=r.toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";i=s+i;for(var a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),o=40*parseInt(i[0])+parseInt(i[1]);r+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);return r},KJUR.asn1.ASN1Object=function(){var t="";this.getLengthHexFromValue=function(){if("undefined"==typeof this.hV||null==this.hV)throw"this.hV is null or undefined.";if(this.hV.length%2==1)throw"value hex must be even length: n="+t.length+",v="+this.hV;var e=this.hV.length/2,n=e.toString(16);if(n.length%2==1&&(n="0"+n),e<128)return n;var r=n.length/2;if(r>15)throw"ASN.1 length too long to represent by 8x: n = "+e.toString(16);var i=128+r;return i.toString(16)+n},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""}},KJUR.asn1.DERAbstractString=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(this.s)},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t?this.setString(t):"undefined"!=typeof t.str?this.setString(t.str):"undefined"!=typeof t.hex&&this.setStringHex(t.hex))},YAHOO.lang.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractTime=function(t){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(t){utc=t.getTime()+6e4*t.getTimezoneOffset();var e=new Date(utc);return e},this.formatDate=function(t,e,n){var r=this.zeroPadding,i=this.localDateToUTC(t),o=String(i.getFullYear());"utc"==e&&(o=o.substr(2,2));var s=r(String(i.getMonth()+1),2),a=r(String(i.getDate()),2),u=r(String(i.getHours()),2),c=r(String(i.getMinutes()),2),l=r(String(i.getSeconds()),2),h=o+s+a+u+c+l;if(n===!0){var f=i.getMilliseconds();if(0!=f){var d=r(String(f),3);d=d.replace(/[0]+$/,""),h=h+"."+d}}return h+"Z"},this.zeroPadding=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=stohex(t)},this.setByDateValue=function(t,e,n,r,i,o){var s=new Date(Date.UTC(t,e-1,n,r,i,o,0));this.setByDate(s)},this.getFreshValueHex=function(){return this.hV}},YAHOO.lang.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object),KJUR.asn1.DERAbstractStructured=function(t){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,"undefined"!=typeof t&&"undefined"!=typeof t.array&&(this.asn1Array=t.array)},YAHOO.lang.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object),KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV="0101ff"},YAHOO.lang.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object),KJUR.asn1.DERInteger=function(t){KJUR.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new BigInteger(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.bigint?this.setByBigInteger(t.bigint):"undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},YAHOO.lang.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object),KJUR.asn1.DERBitString=function(t){if(void 0!==t&&"undefined"!=typeof t.obj){var e=KJUR.asn1.ASN1Util.newObject(t.obj);t.hex="00"+e.getEncodedHex()}KJUR.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(t){this.hTLV=null,this.isModified=!0,this.hV=t},this.setUnusedBitsAndHexValue=function(t,e){if(t<0||7<t)throw"unused bits shall be from 0 to 7: u = "+t;var n="0"+t;this.hTLV=null,this.isModified=!0,this.hV=n+e},this.setByBinaryString=function(t){t=t.replace(/0+$/,"");var e=8-t.length%8;8==e&&(e=0);for(var n=0;n<=e;n++)t+="0";for(var r="",n=0;n<t.length-1;n+=8){var i=t.substr(n,8),o=parseInt(i,2).toString(16);1==o.length&&(o="0"+o),r+=o}this.hTLV=null,this.isModified=!0,this.hV="0"+e+r},this.setByBooleanArray=function(t){for(var e="",n=0;n<t.length;n++)e+=1==t[n]?"1":"0";this.setByBinaryString(e)},this.newFalseArray=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=!1;return e},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("string"==typeof t&&t.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(t):"undefined"!=typeof t.hex?this.setHexValueIncludingUnusedBits(t.hex):"undefined"!=typeof t.bin?this.setByBinaryString(t.bin):"undefined"!=typeof t.array&&this.setByBooleanArray(t.array))},YAHOO.lang.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object),KJUR.asn1.DEROctetString=function(t){if(void 0!==t&&"undefined"!=typeof t.obj){var e=KJUR.asn1.ASN1Util.newObject(t.obj);t.hex=e.getEncodedHex()}KJUR.asn1.DEROctetString.superclass.constructor.call(this,t),this.hT="04"},YAHOO.lang.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},YAHOO.lang.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object),KJUR.asn1.DERObjectIdentifier=function(t){var e=function(t){var e=t.toString(16);return 1==e.length&&(e="0"+e),e},n=function(t){var n="",r=new BigInteger(t,10),i=r.toString(2),o=7-i.length%7;7==o&&(o=0);for(var s="",a=0;a<o;a++)s+="0";i=s+i;for(var a=0;a<i.length-1;a+=7){var u=i.substr(a,7);a!=i.length-7&&(u="1"+u),n+=e(parseInt(u,2))}return n};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){if(!t.match(/^[0-9.]+$/))throw"malformed oid string: "+t;var r="",i=t.split("."),o=40*parseInt(i[0])+parseInt(i[1]);r+=e(o),i.splice(0,2);for(var s=0;s<i.length;s++)r+=n(i[s]);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var e=KJUR.asn1.x509.OID.name2oid(t);if(""===e)throw"DERObjectIdentifier oidName undefined: "+t;this.setValueOidString(e)},this.getFreshValueHex=function(){return this.hV},void 0!==t&&("string"==typeof t?t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t):void 0!==t.oid?this.setValueOidString(t.oid):void 0!==t.hex?this.setValueHex(t.hex):void 0!==t.name&&this.setValueName(t.name))},YAHOO.lang.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.DEREnumerated=function(t){KJUR.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t)},this.setByInteger=function(t){var e=new BigInteger(String(t),10);this.setByBigInteger(e)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t["int"]?this.setByInteger(t["int"]):"number"==typeof t?this.setByInteger(t):"undefined"!=typeof t.hex&&this.setValueHex(t.hex))},YAHOO.lang.extend(KJUR.asn1.DEREnumerated,KJUR.asn1.ASN1Object),KJUR.asn1.DERUTF8String=function(t){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,t),this.hT="0c"},YAHOO.lang.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERNumericString=function(t){KJUR.asn1.DERNumericString.superclass.constructor.call(this,t),this.hT="12"},YAHOO.lang.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERPrintableString=function(t){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,t),this.hT="13"},YAHOO.lang.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERTeletexString=function(t){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,t),this.hT="14"},YAHOO.lang.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString),KJUR.asn1.DERIA5String=function(t){KJUR.asn1.DERIA5String.superclass.constructor.call(this,t),this.hT="16"},YAHOO.lang.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString),KJUR.asn1.DERUTCTime=function(t){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,t),this.hT="17",this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return"undefined"==typeof this.date&&"undefined"==typeof this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{12}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date))},YAHOO.lang.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERGeneralizedTime=function(t){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,t),this.hT="18",this.withMillis=!1,this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.date=t,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=stohex(this.s)),this.hV},void 0!==t&&(void 0!==t.str?this.setString(t.str):"string"==typeof t&&t.match(/^[0-9]{14}Z$/)?this.setString(t):void 0!==t.hex?this.setStringHex(t.hex):void 0!==t.date&&this.setByDate(t.date),t.millis===!0&&(this.withMillis=!0))},YAHOO.lang.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime),KJUR.asn1.DERSequence=function(t){KJUR.asn1.DERSequence.superclass.constructor.call(this,t),this.hT="30",this.getFreshValueHex=function(){for(var t="",e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t+=n.getEncodedHex()}return this.hV=t,this.hV}},YAHOO.lang.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERSet=function(t){KJUR.asn1.DERSet.superclass.constructor.call(this,t),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,e=0;e<this.asn1Array.length;e++){var n=this.asn1Array[e];t.push(n.getEncodedHex())}return 1==this.sortFlag&&t.sort(),this.hV=t.join(""),this.hV},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured),KJUR.asn1.DERTaggedObject=function(t){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this),this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(t,e,n){this.hT=e,this.isExplicit=t,this.asn1Object=n,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=n.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,e),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},"undefined"!=typeof t&&("undefined"!=typeof t.tag&&(this.hT=t.tag),"undefined"!=typeof t.explicit&&(this.isExplicit=t.explicit),"undefined"!=typeof t.obj&&(this.asn1Object=t.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},YAHOO.lang.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);var ASN1HEX=new function(){};ASN1HEX.getByteLengthOfL_AtObj=function(t,e){if("8"!=t.substring(e+2,e+3))return 1;var n=parseInt(t.substring(e+3,e+4));return 0==n?-1:0<n&&n<10?n+1:-2},ASN1HEX.getHexOfL_AtObj=function(t,e){var n=ASN1HEX.getByteLengthOfL_AtObj(t,e);return n<1?"":t.substring(e+2,e+2+2*n)},ASN1HEX.getIntOfL_AtObj=function(t,e){var n=ASN1HEX.getHexOfL_AtObj(t,e);if(""==n)return-1;var r;return r=parseInt(n.substring(0,1))<8?new BigInteger(n,16):new BigInteger(n.substring(2),16),r.intValue()},ASN1HEX.getStartPosOfV_AtObj=function(t,e){var n=ASN1HEX.getByteLengthOfL_AtObj(t,e);return n<0?n:e+2*(n+1)},ASN1HEX.getHexOfV_AtObj=function(t,e){var n=ASN1HEX.getStartPosOfV_AtObj(t,e),r=ASN1HEX.getIntOfL_AtObj(t,e);return t.substring(n,n+2*r)},ASN1HEX.getHexOfTLV_AtObj=function(t,e){var n=t.substr(e,2),r=ASN1HEX.getHexOfL_AtObj(t,e),i=ASN1HEX.getHexOfV_AtObj(t,e);return n+r+i},ASN1HEX.getPosOfNextSibling_AtObj=function(t,e){var n=ASN1HEX.getStartPosOfV_AtObj(t,e),r=ASN1HEX.getIntOfL_AtObj(t,e);return n+2*r},ASN1HEX.getPosArrayOfChildren_AtObj=function(t,e){var n=new Array,r=ASN1HEX.getStartPosOfV_AtObj(t,e);"03"==t.substr(e,2)?n.push(r+2):n.push(r);for(var i=ASN1HEX.getIntOfL_AtObj(t,e),o=r,s=0;;){var a=ASN1HEX.getPosOfNextSibling_AtObj(t,o);if(null==a||a-r>=2*i)break;if(s>=200)break;n.push(a),o=a,s++}return n},ASN1HEX.getNthChildIndex_AtObj=function(t,e,n){var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);return r[n]},ASN1HEX.getDecendantIndexByNthList=function(t,e,n){if(0==n.length)return e;var r=n.shift(),i=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);return ASN1HEX.getDecendantIndexByNthList(t,i[r],n)},ASN1HEX.getDecendantHexTLVByNthList=function(t,e,n){var r=ASN1HEX.getDecendantIndexByNthList(t,e,n);return ASN1HEX.getHexOfTLV_AtObj(t,r)},ASN1HEX.getDecendantHexVByNthList=function(t,e,n){var r=ASN1HEX.getDecendantIndexByNthList(t,e,n);return ASN1HEX.getHexOfV_AtObj(t,r)},ASN1HEX.getVbyList=function(t,e,n,r){var i=ASN1HEX.getDecendantIndexByNthList(t,e,n);if(void 0===i)throw"can't find nthList object";if(void 0!==r&&t.substr(i,2)!=r)throw"checking tag doesn't match: "+t.substr(i,2)+"!="+r;return ASN1HEX.getHexOfV_AtObj(t,i)},ASN1HEX.hextooidstr=function(t){var e=function(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t},n=[],r=t.substr(0,2),i=parseInt(r,16);n[0]=new String(Math.floor(i/40)),n[1]=new String(i%40);for(var o=t.substr(2),s=[],a=0;a<o.length/2;a++)s.push(parseInt(o.substr(2*a,2),16));for(var u=[],c="",a=0;a<s.length;a++)128&s[a]?c+=e((127&s[a]).toString(2),7):(c+=e((127&s[a]).toString(2),7),u.push(new String(parseInt(c,2))),c="");var l=n.join(".");return u.length>0&&(l=l+"."+u.join(".")),l},ASN1HEX.dump=function(t,e,n,r){var i=function(t,e){if(t.length<=2*e)return t;var n=t.substr(0,e)+"..(total "+t.length/2+"bytes).."+t.substr(t.length-e,e);return n};void 0===e&&(e={ommit_long_octet:32}),void 0===n&&(n=0),void 0===r&&(r="");var o=e.ommit_long_octet;if("01"==t.substr(n,2)){var s=ASN1HEX.getHexOfV_AtObj(t,n);return"00"==s?r+"BOOLEAN FALSE\n":r+"BOOLEAN TRUE\n"}if("02"==t.substr(n,2)){var s=ASN1HEX.getHexOfV_AtObj(t,n);return r+"INTEGER "+i(s,o)+"\n"}if("03"==t.substr(n,2)){var s=ASN1HEX.getHexOfV_AtObj(t,n);return r+"BITSTRING "+i(s,o)+"\n"}if("04"==t.substr(n,2)){var s=ASN1HEX.getHexOfV_AtObj(t,n);if(ASN1HEX.isASN1HEX(s)){var a=r+"OCTETSTRING, encapsulates\n";return a+=ASN1HEX.dump(s,e,0,r+"  ")}return r+"OCTETSTRING "+i(s,o)+"\n"}if("05"==t.substr(n,2))return r+"NULL\n";if("06"==t.substr(n,2)){var u=ASN1HEX.getHexOfV_AtObj(t,n),c=KJUR.asn1.ASN1Util.oidHexToInt(u),l=KJUR.asn1.x509.OID.oid2name(c),h=c.replace(/\./g," ");return""!=l?r+"ObjectIdentifier "+l+" ("+h+")\n":r+"ObjectIdentifier ("+h+")\n"}if("0c"==t.substr(n,2))return r+"UTF8String '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"'\n";if("13"==t.substr(n,2))return r+"PrintableString '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"'\n";if("14"==t.substr(n,2))return r+"TeletexString '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"'\n";if("16"==t.substr(n,2))return r+"IA5String '"+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"'\n";if("17"==t.substr(n,2))return r+"UTCTime "+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"\n";if("18"==t.substr(n,2))return r+"GeneralizedTime "+hextoutf8(ASN1HEX.getHexOfV_AtObj(t,n))+"\n";if("30"==t.substr(n,2)){if("3000"==t.substr(n,4))return r+"SEQUENCE {}\n";var a=r+"SEQUENCE\n",f=ASN1HEX.getPosArrayOfChildren_AtObj(t,n),d=e;if((2==f.length||3==f.length)&&"06"==t.substr(f[0],2)&&"04"==t.substr(f[f.length-1],2)){var p=ASN1HEX.getHexOfV_AtObj(t,f[0]),c=KJUR.asn1.ASN1Util.oidHexToInt(p),l=KJUR.asn1.x509.OID.oid2name(c),g=JSON.parse(JSON.stringify(e));g.x509ExtName=l,d=g}for(var v=0;v<f.length;v++)a+=ASN1HEX.dump(t,d,f[v],r+"  ");return a}if("31"==t.substr(n,2)){for(var a=r+"SET\n",f=ASN1HEX.getPosArrayOfChildren_AtObj(t,n),v=0;v<f.length;v++)a+=ASN1HEX.dump(t,e,f[v],r+"  ");return a}var m=parseInt(t.substr(n,2),16);if(0!=(128&m)){var y=31&m;if(0!=(32&m)){for(var a=r+"["+y+"]\n",f=ASN1HEX.getPosArrayOfChildren_AtObj(t,n),v=0;v<f.length;v++)a+=ASN1HEX.dump(t,e,f[v],r+"  ");return a}var s=ASN1HEX.getHexOfV_AtObj(t,n);"68747470"==s.substr(0,8)&&(s=hextoutf8(s)),"subjectAltName"===e.x509ExtName&&2==y&&(s=hextoutf8(s));var a=r+"["+y+"] "+s+"\n";return a}return r+"UNKNOWN("+t.substr(n,2)+") "+ASN1HEX.getHexOfV_AtObj(t,n)+"\n"},ASN1HEX.isASN1HEX=function(t){if(t.length%2==1)return!1;var e=ASN1HEX.getIntOfL_AtObj(t,0),n=t.substr(0,2),r=ASN1HEX.getHexOfL_AtObj(t,0),i=t.length-n.length-r.length;return i==2*e},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),"undefined"!=typeof KJUR.asn1.x509&&KJUR.asn1.x509||(KJUR.asn1.x509={}),KJUR.asn1.x509.Certificate=function(t){KJUR.asn1.x509.Certificate.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(t,e){var n=PKCS5PKEY.getDecryptedKeyHex(t,e),r=new RSAKey;r.readPrivateKeyFromASN1HexString(n),this.prvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,sig=new KJUR.crypto.Signature({alg:"SHA1withRSA"}),sig.init(this.prvKey),sig.updateHex(this.asn1TBSCert.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var t=new KJUR.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.setSignatureHex=function(t){this.asn1SignatureAlg=this.asn1TBSCert.asn1SignatureAlg,this.hexSig=t,this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var e=new KJUR.asn1.DERSequence({array:[this.asn1TBSCert,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=e.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var t=this.getEncodedHex(),e=CryptoJS.enc.Hex.parse(t),n=CryptoJS.enc.Base64.stringify(e),r=n.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN CERTIFICATE-----\r\n"+r+"\r\n-----END CERTIFICATE-----\r\n"},"undefined"!=typeof t&&("undefined"!=typeof t.tbscertobj&&(this.asn1TBSCert=t.tbscertobj),"undefined"!=typeof t.prvkeyobj?this.prvKey=t.prvkeyobj:"undefined"!=typeof t.rsaprvkey?this.prvKey=t.rsaprvkey:"undefined"!=typeof t.rsaprvpem&&"undefined"!=typeof t.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(t.rsaprvpem,t.rsaprvpas))},YAHOO.lang.extend(KJUR.asn1.x509.Certificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertificate=function(t){KJUR.asn1.x509.TBSCertificate.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new KJUR.asn1.DERTaggedObject({obj:new KJUR.asn1.DERInteger({"int":2})}),this.asn1SerialNumber=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1NotBefore=null,this.asn1NotAfter=null,this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSerialNumberByParam=function(t){this.asn1SerialNumber=new KJUR.asn1.DERInteger(t)},this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new KJUR.asn1.x509.X500Name(t)},this.setNotBeforeByParam=function(t){this.asn1NotBefore=new KJUR.asn1.x509.Time(t)},this.setNotAfterByParam=function(t){this.asn1NotAfter=new KJUR.asn1.x509.Time(t)},this.setSubjectByParam=function(t){this.asn1Subject=new KJUR.asn1.x509.X500Name(t)},this.setSubjectPublicKeyByParam=function(t){this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=KEYUTIL.getKey(t);this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(e)},this.appendExtension=function(t){this.extensionsArray.push(t)},this.appendExtensionByName=function(t,e){KJUR.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(null==this.asn1NotBefore||null==this.asn1NotAfter)throw"notBefore and/or notAfter not set";var t=new KJUR.asn1.DERSequence({array:[this.asn1NotBefore,this.asn1NotAfter]});if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SerialNumber),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(t),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var e=new KJUR.asn1.DERSequence({array:this.extensionsArray}),n=new KJUR.asn1.DERTaggedObject({explicit:!0,tag:"a3",obj:e});this.asn1Array.push(n)}var r=new KJUR.asn1.DERSequence({array:this.asn1Array});return this.hTLV=r.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertificate,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension=function(t){KJUR.asn1.x509.Extension.superclass.constructor.call(this);this.getEncodedHex=function(){var t=new KJUR.asn1.DERObjectIdentifier({oid:this.oid}),e=new KJUR.asn1.DEROctetString({hex:this.getExtnValueHex()}),n=new Array;n.push(t),this.critical&&n.push(new KJUR.asn1.DERBoolean),n.push(e);var r=new KJUR.asn1.DERSequence({array:n});return r.getEncodedHex()},this.critical=!1,"undefined"!=typeof t&&"undefined"!=typeof t.critical&&(this.critical=t.critical)},YAHOO.lang.extend(KJUR.asn1.x509.Extension,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Extension.appendByNameToArray=function(t,e,n){if("basicconstraints"==t.toLowerCase()){var r=new KJUR.asn1.x509.BasicConstraints(e);n.push(r)}else if("keyusage"==t.toLowerCase()){var r=new KJUR.asn1.x509.KeyUsage(e);n.push(r)}else if("crldistributionpoints"==t.toLowerCase()){var r=new KJUR.asn1.x509.CRLDistributionPoints(e);
n.push(r)}else if("extkeyusage"==t.toLowerCase()){var r=new KJUR.asn1.x509.ExtKeyUsage(e);n.push(r)}else if("authoritykeyidentifier"==t.toLowerCase()){var r=new KJUR.asn1.x509.AuthorityKeyIdentifier(e);n.push(r)}else if("authorityinfoaccess"==t.toLowerCase()){var r=new KJUR.asn1.x509.AuthorityInfoAccess(e);n.push(r)}else if("subjectaltname"==t.toLowerCase()){var r=new KJUR.asn1.x509.SubjectAltName(e);n.push(r)}else{if("issueraltname"!=t.toLowerCase())throw"unsupported extension name: "+t;var r=new KJUR.asn1.x509.IssuerAltName(e);n.push(r)}},KJUR.asn1.x509.KeyUsage=function(t){KJUR.asn1.x509.KeyUsage.superclass.constructor.call(this,t),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.15","undefined"!=typeof t&&"undefined"!=typeof t.bin&&(this.asn1ExtnValue=new KJUR.asn1.DERBitString(t))},YAHOO.lang.extend(KJUR.asn1.x509.KeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.BasicConstraints=function(t){KJUR.asn1.x509.BasicConstraints.superclass.constructor.call(this,t);this.getExtnValueHex=function(){var t=new Array;this.cA&&t.push(new KJUR.asn1.DERBoolean),this.pathLen>-1&&t.push(new KJUR.asn1.DERInteger({"int":this.pathLen}));var e=new KJUR.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,"undefined"!=typeof t&&("undefined"!=typeof t.cA&&(this.cA=t.cA),"undefined"!=typeof t.pathLen&&(this.pathLen=t.pathLen))},YAHOO.lang.extend(KJUR.asn1.x509.BasicConstraints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRLDistributionPoints=function(t){KJUR.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,t),this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.setByDPArray=function(t){this.asn1ExtnValue=new KJUR.asn1.DERSequence({array:t})},this.setByOneURI=function(t){var e=new KJUR.asn1.x509.GeneralNames([{uri:t}]),n=new KJUR.asn1.x509.DistributionPointName(e),r=new KJUR.asn1.x509.DistributionPoint({dpobj:n});this.setByDPArray([r])},this.oid="2.5.29.31","undefined"!=typeof t&&("undefined"!=typeof t.array?this.setByDPArray(t.array):"undefined"!=typeof t.uri&&this.setByOneURI(t.uri))},YAHOO.lang.extend(KJUR.asn1.x509.CRLDistributionPoints,KJUR.asn1.x509.Extension),KJUR.asn1.x509.ExtKeyUsage=function(t){KJUR.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,t),this.setPurposeArray=function(t){this.asn1ExtnValue=new KJUR.asn1.DERSequence;for(var e=0;e<t.length;e++){var n=new KJUR.asn1.DERObjectIdentifier(t[e]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.37","undefined"!=typeof t&&"undefined"!=typeof t.array&&this.setPurposeArray(t.array)},YAHOO.lang.extend(KJUR.asn1.x509.ExtKeyUsage,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityKeyIdentifier=function(t){KJUR.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,t),this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var t=new Array;this.asn1KID&&t.push(new KJUR.asn1.DERTaggedObject({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&t.push(new KJUR.asn1.DERTaggedObject({explicit:!1,tag:"a1",obj:this.asn1CertIssuer})),this.asn1CertSN&&t.push(new KJUR.asn1.DERTaggedObject({explicit:!1,tag:"82",obj:this.asn1CertSN}));var e=new KJUR.asn1.DERSequence({array:t});return this.asn1ExtnValue=e,this.asn1ExtnValue.getEncodedHex()},this.setKIDByParam=function(t){this.asn1KID=new KJUR.asn1.DEROctetString(t)},this.setCertIssuerByParam=function(t){this.asn1CertIssuer=new KJUR.asn1.x509.X500Name(t)},this.setCertSNByParam=function(t){this.asn1CertSN=new KJUR.asn1.DERInteger(t)},this.oid="2.5.29.35","undefined"!=typeof t&&("undefined"!=typeof t.kid&&this.setKIDByParam(t.kid),"undefined"!=typeof t.issuer&&this.setCertIssuerByParam(t.issuer),"undefined"!=typeof t.sn&&this.setCertSNByParam(t.sn))},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityKeyIdentifier,KJUR.asn1.x509.Extension),KJUR.asn1.x509.AuthorityInfoAccess=function(t){KJUR.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,t),this.setAccessDescriptionArray=function(t){for(var e=new Array,n=0;n<t.length;n++){var r=new KJUR.asn1.DERObjectIdentifier(t[n].accessMethod),i=new KJUR.asn1.x509.GeneralName(t[n].accessLocation),o=new KJUR.asn1.DERSequence({array:[r,i]});e.push(o)}this.asn1ExtnValue=new KJUR.asn1.DERSequence({array:e})},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="1.3.6.1.5.5.7.1.1","undefined"!=typeof t&&"undefined"!=typeof t.array&&this.setAccessDescriptionArray(t.array)},YAHOO.lang.extend(KJUR.asn1.x509.AuthorityInfoAccess,KJUR.asn1.x509.Extension),KJUR.asn1.x509.SubjectAltName=function(t){KJUR.asn1.x509.SubjectAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.17",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},YAHOO.lang.extend(KJUR.asn1.x509.SubjectAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.IssuerAltName=function(t){KJUR.asn1.x509.IssuerAltName.superclass.constructor.call(this,t),this.setNameArray=function(t){this.asn1ExtnValue=new KJUR.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.getEncodedHex()},this.oid="2.5.29.18",void 0!==t&&void 0!==t.array&&this.setNameArray(t.array)},YAHOO.lang.extend(KJUR.asn1.x509.IssuerAltName,KJUR.asn1.x509.Extension),KJUR.asn1.x509.CRL=function(t){KJUR.asn1.x509.CRL.superclass.constructor.call(this);this.setRsaPrvKeyByPEMandPass=function(t,e){var n=PKCS5PKEY.getDecryptedKeyHex(t,e),r=new RSAKey;r.readPrivateKeyFromASN1HexString(n),this.rsaPrvKey=r},this.sign=function(){this.asn1SignatureAlg=this.asn1TBSCertList.asn1SignatureAlg,sig=new KJUR.crypto.Signature({alg:"SHA1withRSA",prov:"cryptojs/jsrsa"}),sig.initSign(this.rsaPrvKey),sig.updateHex(this.asn1TBSCertList.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var t=new KJUR.asn1.DERSequence({array:[this.asn1TBSCertList,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=t.getEncodedHex(),this.isModified=!1},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},this.getPEMString=function(){var t=this.getEncodedHex(),e=CryptoJS.enc.Hex.parse(t),n=CryptoJS.enc.Base64.stringify(e),r=n.replace(/(.{64})/g,"$1\r\n");return"-----BEGIN X509 CRL-----\r\n"+r+"\r\n-----END X509 CRL-----\r\n"},"undefined"!=typeof t&&("undefined"!=typeof t.tbsobj&&(this.asn1TBSCertList=t.tbsobj),"undefined"!=typeof t.rsaprvkey&&(this.rsaPrvKey=t.rsaprvkey),"undefined"!=typeof t.rsaprvpem&&"undefined"!=typeof t.rsaprvpas&&this.setRsaPrvKeyByPEMandPass(t.rsaprvpem,t.rsaprvpas))},YAHOO.lang.extend(KJUR.asn1.x509.CRL,KJUR.asn1.ASN1Object),KJUR.asn1.x509.TBSCertList=function(t){KJUR.asn1.x509.TBSCertList.superclass.constructor.call(this);this.setSignatureAlgByParam=function(t){this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier(t)},this.setIssuerByParam=function(t){this.asn1Issuer=new KJUR.asn1.x509.X500Name(t)},this.setThisUpdateByParam=function(t){this.asn1ThisUpdate=new KJUR.asn1.x509.Time(t)},this.setNextUpdateByParam=function(t){this.asn1NextUpdate=new KJUR.asn1.x509.Time(t)},this.addRevokedCert=function(t,e){var n={};void 0!=t&&null!=t&&(n.sn=t),void 0!=e&&null!=e&&(n.time=e);var r=new KJUR.asn1.x509.CRLEntry(n);this.aRevokedCert.push(r)},this.getEncodedHex=function(){if(this.asn1Array=new Array,null!=this.asn1Version&&this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1SignatureAlg),this.asn1Array.push(this.asn1Issuer),this.asn1Array.push(this.asn1ThisUpdate),null!=this.asn1NextUpdate&&this.asn1Array.push(this.asn1NextUpdate),this.aRevokedCert.length>0){var t=new KJUR.asn1.DERSequence({array:this.aRevokedCert});this.asn1Array.push(t)}var e=new KJUR.asn1.DERSequence({array:this.asn1Array});return this.hTLV=e.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize=function(){this.asn1Version=null,this.asn1SignatureAlg=null,this.asn1Issuer=null,this.asn1ThisUpdate=null,this.asn1NextUpdate=null,this.aRevokedCert=new Array},this._initialize()},YAHOO.lang.extend(KJUR.asn1.x509.TBSCertList,KJUR.asn1.ASN1Object),KJUR.asn1.x509.CRLEntry=function(t){KJUR.asn1.x509.CRLEntry.superclass.constructor.call(this);this.setCertSerial=function(t){this.sn=new KJUR.asn1.DERInteger(t)},this.setRevocationDate=function(t){this.time=new KJUR.asn1.x509.Time(t)},this.getEncodedHex=function(){var t=new KJUR.asn1.DERSequence({array:[this.sn,this.time]});return this.TLV=t.getEncodedHex(),this.TLV},"undefined"!=typeof t&&("undefined"!=typeof t.time&&this.setRevocationDate(t.time),"undefined"!=typeof t.sn&&this.setCertSerial(t.sn))},YAHOO.lang.extend(KJUR.asn1.x509.CRLEntry,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name=function(t){if(KJUR.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=new Array,this.setByString=function(t){var e=t.split("/");e.shift();for(var n=0;n<e.length;n++)this.asn1Array.push(new KJUR.asn1.x509.RDN({str:e[n]}))},this.setByLdapString=function(t){var e=KJUR.asn1.x509.X500Name.ldapToOneline(t);this.setByString(e)},this.setByObject=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=new KJUR.asn1.x509.RDN({str:e+"="+t[e]});this.asn1Array?this.asn1Array.push(n):this.asn1Array=[n]}},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new KJUR.asn1.DERSequence({array:this.asn1Array});return this.hTLV=t.getEncodedHex(),this.hTLV},void 0!==t){if(void 0!==t.str?this.setByString(t.str):void 0!==t.ldapstr?this.setByLdapString(t.ldapstr):"object"==typeof t&&this.setByObject(t),void 0!==t.certissuer){var e=new X509;e.hex=X509.pemToHex(t.certissuer),this.hTLV=e.getIssuerHex()}if(void 0!==t.certsubject){var e=new X509;e.hex=X509.pemToHex(t.certsubject),this.hTLV=e.getSubjectHex()}}},YAHOO.lang.extend(KJUR.asn1.x509.X500Name,KJUR.asn1.ASN1Object),KJUR.asn1.x509.X500Name.onelineToLDAP=function(t){if("/"!==t.substr(0,1))throw"malformed input";t=t.substr(1);var e=t.split("/");return e.reverse(),e=e.map(function(t){return t.replace(/,/,"\\,")}),e.join(",")},KJUR.asn1.x509.X500Name.ldapToOneline=function(t){for(var e=t.split(","),n=!1,r=[],i=0;e.length>0;i++){var o=e.shift();if(n===!0){var s=r.pop(),a=(s+","+o).replace(/\\,/g,",");r.push(a),n=!1}else r.push(o);"\\"===o.substr(-1,1)&&(n=!0)}return r=r.map(function(t){return t.replace("/","\\/")}),r.reverse(),"/"+r.join("/")},KJUR.asn1.x509.RDN=function(t){KJUR.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=new Array,this.addByString=function(t){this.asn1Array.push(new KJUR.asn1.x509.AttributeTypeAndValue({str:t}))},this.addByMultiValuedString=function(t){for(var e=KJUR.asn1.x509.RDN.parseString(t),n=0;n<e.length;n++)this.addByString(e[n])},this.getEncodedHex=function(){var t=new KJUR.asn1.DERSet({array:this.asn1Array});return this.TLV=t.getEncodedHex(),this.TLV},"undefined"!=typeof t&&"undefined"!=typeof t.str&&this.addByMultiValuedString(t.str)},YAHOO.lang.extend(KJUR.asn1.x509.RDN,KJUR.asn1.ASN1Object),KJUR.asn1.x509.RDN.parseString=function(t){for(var e=t.split(/\+/),n=!1,r=[],i=0;e.length>0;i++){var o=e.shift();if(n===!0){var s=r.pop(),a=(s+"+"+o).replace(/\\\+/g,"+");r.push(a),n=!1}else r.push(o);"\\"===o.substr(-1,1)&&(n=!0)}for(var u=!1,c=[],i=0;r.length>0;i++){var o=r.shift();if(u===!0){var l=c.pop();if(o.match(/"$/)){var a=(l+"+"+o).replace(/^([^=]+)="(.*)"$/,"$1=$2");c.push(a),u=!1}else c.push(l+"+"+o)}else c.push(o);o.match(/^[^=]+="/)&&(u=!0)}return c},KJUR.asn1.x509.AttributeTypeAndValue=function(t){KJUR.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this);var e="utf8";this.setByString=function(t){var e=t.match(/^([^=]+)=(.+)$/);if(!e)throw"malformed attrTypeAndValueStr: "+t;this.setByAttrTypeAndValueStr(e[1],e[2])},this.setByAttrTypeAndValueStr=function(t,n){this.typeObj=KJUR.asn1.x509.OID.atype2obj(t);var r=e;"C"==t&&(r="prn"),this.valueObj=this.getValueObj(r,n)},this.getValueObj=function(t,e){if("utf8"==t)return new KJUR.asn1.DERUTF8String({str:e});if("prn"==t)return new KJUR.asn1.DERPrintableString({str:e});if("tel"==t)return new KJUR.asn1.DERTeletexString({str:e});if("ia5"==t)return new KJUR.asn1.DERIA5String({str:e});throw"unsupported directory string type: type="+t+" value="+e},this.getEncodedHex=function(){var t=new KJUR.asn1.DERSequence({array:[this.typeObj,this.valueObj]});return this.TLV=t.getEncodedHex(),this.TLV},"undefined"!=typeof t&&"undefined"!=typeof t.str&&this.setByString(t.str)},YAHOO.lang.extend(KJUR.asn1.x509.AttributeTypeAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.x509.SubjectPublicKeyInfo=function(t){KJUR.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);this.setRSAKey=function(t){if(!RSAKey.prototype.isPrototypeOf(t))throw"argument is not RSAKey instance";this.rsaKey=t;var e=new KJUR.asn1.DERInteger({bigint:t.n}),n=new KJUR.asn1.DERInteger({"int":t.e}),r=new KJUR.asn1.DERSequence({array:[e,n]}),i=r.getEncodedHex();this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+i})},this.setRSAPEM=function(t){if(!t.match(/-----BEGIN PUBLIC KEY-----/))throw"key not supported";var e=t;e=e.replace(/^-----[^-]+-----/,""),e=e.replace(/-----[^-]+-----\s*$/,"");var n=e.replace(/\s+/g,""),r=CryptoJS.enc.Base64.parse(n),i=CryptoJS.enc.Hex.stringify(r),o=_rsapem_getHexValueArrayOfChildrenFromHex(i),s=o[1],a=s.substr(2),u=_rsapem_getHexValueArrayOfChildrenFromHex(a),c=new RSAKey;c.setPublic(u[0],u[1]),this.setRSAKey(c)},this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";var t=new KJUR.asn1.DERSequence({array:[this.asn1AlgId,this.asn1SubjPKey]});return t},this.getEncodedHex=function(){var t=this.getASN1Object();return this.hTLV=t.getEncodedHex(),this.hTLV},this._setRSAKey=function(t){var e=KJUR.asn1.ASN1Util.newObject({seq:[{"int":{bigint:t.n}},{"int":{"int":t.e}}]}),n=e.getEncodedHex();this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+n})},this._setEC=function(t){var e=new KJUR.asn1.DERObjectIdentifier({name:t.curveName});this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"ecPublicKey",asn1params:e}),this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+t.pubKeyHex})},this._setDSA=function(t){var e=new KJUR.asn1.ASN1Util.newObject({seq:[{"int":{bigint:t.p}},{"int":{bigint:t.q}},{"int":{bigint:t.g}}]});this.asn1AlgId=new KJUR.asn1.x509.AlgorithmIdentifier({name:"dsa",asn1params:e});var n=new KJUR.asn1.DERInteger({bigint:t.y});this.asn1SubjPKey=new KJUR.asn1.DERBitString({hex:"00"+n.getEncodedHex()})},"undefined"!=typeof t&&("undefined"!=typeof RSAKey&&t instanceof RSAKey?this._setRSAKey(t):"undefined"!=typeof KJUR.crypto.ECDSA&&t instanceof KJUR.crypto.ECDSA?this._setEC(t):"undefined"!=typeof KJUR.crypto.DSA&&t instanceof KJUR.crypto.DSA?this._setDSA(t):"undefined"!=typeof t.rsakey?this.setRSAKey(t.rsakey):"undefined"!=typeof t.rsapem&&this.setRSAPEM(t.rsapem))},YAHOO.lang.extend(KJUR.asn1.x509.SubjectPublicKeyInfo,KJUR.asn1.ASN1Object),KJUR.asn1.x509.Time=function(t){KJUR.asn1.x509.Time.superclass.constructor.call(this);this.setTimeParams=function(t){this.timeParams=t},this.getEncodedHex=function(){var t=null;return t=null!=this.timeParams?"utc"==this.type?new KJUR.asn1.DERUTCTime(this.timeParams):new KJUR.asn1.DERGeneralizedTime(this.timeParams):"utc"==this.type?new KJUR.asn1.DERUTCTime:new KJUR.asn1.DERGeneralizedTime,this.TLV=t.getEncodedHex(),this.TLV},this.type="utc","undefined"!=typeof t&&("undefined"!=typeof t.type?this.type=t.type:"undefined"!=typeof t.str&&(t.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),t.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=t)},YAHOO.lang.extend(KJUR.asn1.x509.Time,KJUR.asn1.ASN1Object),KJUR.asn1.x509.AlgorithmIdentifier=function(t){KJUR.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this);this.getEncodedHex=function(){if(null==this.nameAlg&&null==this.asn1Alg)throw"algorithm not specified";null!=this.nameAlg&&null==this.asn1Alg&&(this.asn1Alg=KJUR.asn1.x509.OID.name2obj(this.nameAlg));var t=[this.asn1Alg];this.paramEmpty||t.push(this.asn1Params);var e=new KJUR.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("undefined"!=typeof t.name&&(this.nameAlg=t.name),"undefined"!=typeof t.asn1params&&(this.asn1Params=t.asn1params),"undefined"!=typeof t.paramempty&&(this.paramEmpty=t.paramempty)),null==this.asn1Params&&(this.asn1Params=new KJUR.asn1.DERNull)},YAHOO.lang.extend(KJUR.asn1.x509.AlgorithmIdentifier,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralName=function(t){KJUR.asn1.x509.GeneralName.superclass.constructor.call(this);var e={rfc822:"81",dns:"82",dn:"a4",uri:"86"};this.explicit=!1,this.setByParam=function(t){var n=null;if(void 0!==t){if(void 0!==t.rfc822&&(this.type="rfc822",n=new KJUR.asn1.DERIA5String({str:t[this.type]})),void 0!==t.dns&&(this.type="dns",n=new KJUR.asn1.DERIA5String({str:t[this.type]})),void 0!==t.uri&&(this.type="uri",n=new KJUR.asn1.DERIA5String({str:t[this.type]})),void 0!==t.dn&&(this.type="dn",n=new KJUR.asn1.x509.X500Name({str:t.dn})),void 0!==t.ldapdn&&(this.type="dn",n=new KJUR.asn1.x509.X500Name({ldapstr:t.ldapdn})),void 0!==t.certissuer){this.type="dn",this.explicit=!0;var r=t.certissuer,i=null;if(r.match(/^[0-9A-Fa-f]+$/),r.indexOf("-----BEGIN ")!=-1&&(i=X509.pemToHex(r)),null==i)throw"certissuer param not cert";var o=new X509;o.hex=i;var s=o.getIssuerHex();n=new KJUR.asn1.ASN1Object,n.hTLV=s}if(void 0!==t.certsubj){this.type="dn",this.explicit=!0;var r=t.certsubj,i=null;if(r.match(/^[0-9A-Fa-f]+$/),r.indexOf("-----BEGIN ")!=-1&&(i=X509.pemToHex(r)),null==i)throw"certsubj param not cert";var o=new X509;o.hex=i;var s=o.getSubjectHex();n=new KJUR.asn1.ASN1Object,n.hTLV=s}if(null==this.type)throw"unsupported type in params="+t;this.asn1Obj=new KJUR.asn1.DERTaggedObject({explicit:this.explicit,tag:e[this.type],obj:n})}},this.getEncodedHex=function(){return this.asn1Obj.getEncodedHex()},void 0!==t&&this.setByParam(t)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.GeneralNames=function(t){KJUR.asn1.x509.GeneralNames.superclass.constructor.call(this);this.setByParamArray=function(t){for(var e=0;e<t.length;e++){var n=new KJUR.asn1.x509.GeneralName(t[e]);this.asn1Array.push(n)}},this.getEncodedHex=function(){var t=new KJUR.asn1.DERSequence({array:this.asn1Array});return t.getEncodedHex()},this.asn1Array=new Array,"undefined"!=typeof t&&this.setByParamArray(t)},YAHOO.lang.extend(KJUR.asn1.x509.GeneralNames,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPointName=function(t){KJUR.asn1.x509.DistributionPointName.superclass.constructor.call(this);if(this.getEncodedHex=function(){if("full"!=this.type)throw"currently type shall be 'full': "+this.type;return this.asn1Obj=new KJUR.asn1.DERTaggedObject({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.getEncodedHex(),this.hTLV},"undefined"!=typeof t){if(!KJUR.asn1.x509.GeneralNames.prototype.isPrototypeOf(t))throw"This class supports GeneralNames only as argument";this.type="full",this.tag="a0",this.asn1V=t}},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPointName,KJUR.asn1.ASN1Object),KJUR.asn1.x509.DistributionPoint=function(t){KJUR.asn1.x509.DistributionPoint.superclass.constructor.call(this);this.getEncodedHex=function(){var t=new KJUR.asn1.DERSequence;if(null!=this.asn1DP){var e=new KJUR.asn1.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});t.appendASN1Object(e)}return this.hTLV=t.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"undefined"!=typeof t.dpobj&&(this.asn1DP=t.dpobj)},YAHOO.lang.extend(KJUR.asn1.x509.DistributionPoint,KJUR.asn1.ASN1Object),KJUR.asn1.x509.OID=new function(t){this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",countryName:"2.5.4.6",streetAddress:"2.5.4.9",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",ecPublicKey:"1.2.840.10045.2.1",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",extensionRequest:"1.2.840.113549.1.9.14"},this.objCache={},this.name2obj=function(t){if("undefined"!=typeof this.objCache[t])return this.objCache[t];if("undefined"==typeof this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var e=this.name2oidList[t],n=new KJUR.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n},this.atype2obj=function(t){if("undefined"!=typeof this.objCache[t])return this.objCache[t];if("undefined"==typeof this.atype2oidList[t])throw"AttributeType name undefined: "+t;var e=this.atype2oidList[t],n=new KJUR.asn1.DERObjectIdentifier({oid:e});return this.objCache[t]=n,n}},KJUR.asn1.x509.OID.oid2name=function(t){var e=KJUR.asn1.x509.OID.name2oidList;for(var n in e)if(e[n]==t)return n;return""},KJUR.asn1.x509.OID.oid2atype=function(t){var e=KJUR.asn1.x509.OID.atype2oidList;for(var n in e)if(e[n]==t)return n;return t},KJUR.asn1.x509.OID.name2oid=function(t){var e=KJUR.asn1.x509.OID.name2oidList;return void 0===e[t]?"":e[t]},KJUR.asn1.x509.X509Util=new function(){this.getPKCS8PubKeyPEMfromRSAKey=function(t){var e=null,n=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(t.n),r=KJUR.asn1.ASN1Util.integerToByteHex(t.e),i=new KJUR.asn1.DERInteger({hex:n}),o=new KJUR.asn1.DERInteger({hex:r}),s=new KJUR.asn1.DERSequence({array:[i,o]}),a=s.getEncodedHex(),u=new KJUR.asn1.x509.AlgorithmIdentifier({name:"rsaEncryption"}),c=new KJUR.asn1.DERBitString({hex:"00"+a}),l=new KJUR.asn1.DERSequence({array:[u,c]}),h=l.getEncodedHex(),e=KJUR.asn1.ASN1Util.getPEMStringFromHex(h,"PUBLIC KEY");return e}},KJUR.asn1.x509.X509Util.newCertPEM=function(t){var e=KJUR.asn1.x509,n=new e.TBSCertificate;if(void 0===t.serial)throw"serial number undefined.";if(n.setSerialNumberByParam(t.serial),"string"!=typeof t.sigalg.name)throw"unproper signature algorithm name";if(n.setSignatureAlgByParam(t.sigalg),void 0===t.issuer)throw"issuer name undefined.";if(n.setIssuerByParam(t.issuer),void 0===t.notbefore)throw"notbefore undefined.";if(n.setNotBeforeByParam(t.notbefore),void 0===t.notafter)throw"notafter undefined.";if(n.setNotAfterByParam(t.notafter),void 0===t.subject)throw"subject name undefined.";if(n.setSubjectByParam(t.subject),void 0===t.sbjpubkey)throw"subject public key undefined.";if(n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var r=0;r<t.ext.length;r++)for(key in t.ext[r])n.appendExtensionByName(key,t.ext[r][key]);if(void 0===t.cakey&&void 0===t.sighex)throw"param cakey and sighex undefined.";var i=null,o=null;return t.cakey&&(i=KEYUTIL.getKey.apply(null,t.cakey),o=new e.Certificate({tbscertobj:n,prvkeyobj:i}),o.sign()),t.sighex&&(o=new e.Certificate({tbscertobj:n}),o.setSignatureHex(t.sighex)),o.getPEMString()},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),"undefined"!=typeof KJUR.asn1.cms&&KJUR.asn1.cms||(KJUR.asn1.cms={}),KJUR.asn1.cms.Attribute=function(t){KJUR.asn1.cms.Attribute.superclass.constructor.call(this);this.getEncodedHex=function(){var t,e,n;t=new KJUR.asn1.DERObjectIdentifier({oid:this.attrTypeOid}),e=new KJUR.asn1.DERSet({array:this.valueList});try{e.getEncodedHex()}catch(r){throw"fail valueSet.getEncodedHex in Attribute(1)/"+r}n=new KJUR.asn1.DERSequence({array:[t,e]});try{this.hTLV=n.getEncodedHex()}catch(r){throw"failed seq.getEncodedHex in Attribute(2)/"+r}return this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.Attribute,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentType=function(t){KJUR.asn1.cms.ContentType.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.3";var e=null;if("undefined"!=typeof t){var e=new KJUR.asn1.DERObjectIdentifier(t);this.valueList=[e]}},YAHOO.lang.extend(KJUR.asn1.cms.ContentType,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.MessageDigest=function(t){if(KJUR.asn1.cms.MessageDigest.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.4","undefined"!=typeof t)if(t.eciObj instanceof KJUR.asn1.cms.EncapsulatedContentInfo&&"string"==typeof t.hashAlg){var e=t.eciObj.eContentValueHex,n=t.hashAlg,r=KJUR.crypto.Util.hashHex(e,n),i=new KJUR.asn1.DEROctetString({hex:r});i.getEncodedHex(),this.valueList=[i]}else{var i=new KJUR.asn1.DEROctetString(t);i.getEncodedHex(),this.valueList=[i]}},YAHOO.lang.extend(KJUR.asn1.cms.MessageDigest,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningTime=function(t){if(KJUR.asn1.cms.SigningTime.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.5","undefined"!=typeof t){var e=new KJUR.asn1.x509.Time(t);try{e.getEncodedHex()}catch(n){throw"SigningTime.getEncodedHex() failed/"+n}this.valueList=[e]}},YAHOO.lang.extend(KJUR.asn1.cms.SigningTime,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificate=function(t){KJUR.asn1.cms.SigningCertificate.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.12";var e=KJUR.asn1,n=KJUR.asn1.cms,r=KJUR.crypto;this.setCerts=function(t){for(var i=[],o=0;o<t.length;o++){var s=KEYUTIL.getHexFromPEM(t[o]),a=r.Util.hashHex(s,"sha1"),u=new e.DEROctetString({hex:a});u.getEncodedHex();var c=new n.IssuerAndSerialNumber({cert:t[o]});c.getEncodedHex();var l=new e.DERSequence({array:[u,c]});l.getEncodedHex(),i.push(l)}var h=new e.DERSequence({array:i});h.getEncodedHex(),this.valueList=[h]},"undefined"!=typeof t&&"object"==typeof t.array&&this.setCerts(t.array)},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificate,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.SigningCertificateV2=function(t){KJUR.asn1.cms.SigningCertificateV2.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.47";var e=KJUR.asn1,n=KJUR.asn1.x509,r=KJUR.asn1.cms,i=KJUR.crypto;if(this.setCerts=function(t,o){for(var s=[],a=0;a<t.length;a++){var u=KEYUTIL.getHexFromPEM(t[a]),c=[];"sha256"!=o&&c.push(new n.AlgorithmIdentifier({name:o}));var l=i.Util.hashHex(u,o),h=new e.DEROctetString({hex:l});h.getEncodedHex(),c.push(h);var f=new r.IssuerAndSerialNumber({cert:t[a]});f.getEncodedHex(),c.push(f);var d=new e.DERSequence({array:c});d.getEncodedHex(),s.push(d)}var p=new e.DERSequence({array:s});p.getEncodedHex(),this.valueList=[p]},"undefined"!=typeof t&&"object"==typeof t.array){var o="sha256";"string"==typeof t.hashAlg&&(o=t.hashAlg),this.setCerts(t.array,o)}},YAHOO.lang.extend(KJUR.asn1.cms.SigningCertificateV2,KJUR.asn1.cms.Attribute),KJUR.asn1.cms.IssuerAndSerialNumber=function(t){KJUR.asn1.cms.IssuerAndSerialNumber.superclass.constructor.call(this);var e=KJUR.asn1,n=e.x509;this.setByCertPEM=function(t){var r=KEYUTIL.getHexFromPEM(t),i=new X509;i.hex=r;var o=i.getIssuerHex();this.dIssuer=new n.X500Name,this.dIssuer.hTLV=o;var s=i.getSerialNumberHex();this.dSerial=new e.DERInteger({hex:s})},this.getEncodedHex=function(){var t=new KJUR.asn1.DERSequence({array:[this.dIssuer,this.dSerial]});return this.hTLV=t.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("string"==typeof t&&t.indexOf("-----BEGIN ")!=-1&&this.setByCertPEM(t),t.issuer&&t.serial&&(t.issuer instanceof KJUR.asn1.x509.X500Name?this.dIssuer=t.issuer:this.dIssuer=new KJUR.asn1.x509.X500Name(t.issuer),t.serial instanceof KJUR.asn1.DERInteger?this.dSerial=t.serial:this.dSerial=new KJUR.asn1.DERInteger(t.serial)),"string"==typeof t.cert&&this.setByCertPEM(t.cert))},YAHOO.lang.extend(KJUR.asn1.cms.IssuerAndSerialNumber,KJUR.asn1.ASN1Object),KJUR.asn1.cms.AttributeList=function(t){KJUR.asn1.cms.AttributeList.superclass.constructor.call(this),this.list=new Array,this.sortFlag=!0,this.add=function(t){t instanceof KJUR.asn1.cms.Attribute&&this.list.push(t)},this.length=function(){return this.list.length},this.clear=function(){this.list=new Array,this.hTLV=null,this.hV=null},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new KJUR.asn1.DERSet({array:this.list,sortflag:this.sortFlag});return this.hTLV=t.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"undefined"!=typeof t.sortflag&&0==t.sortflag&&(this.sortFlag=!1)},YAHOO.lang.extend(KJUR.asn1.cms.AttributeList,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignerInfo=function(t){KJUR.asn1.cms.SignerInfo.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.cms,r=KJUR.asn1.x509;this.dCMSVersion=new e.DERInteger({"int":1}),this.dSignerIdentifier=null,this.dDigestAlgorithm=null,this.dSignedAttrs=new n.AttributeList,this.dSigAlg=null,this.dSig=null,this.dUnsignedAttrs=new n.AttributeList,this.setSignerIdentifier=function(t){if("string"==typeof t&&t.indexOf("CERTIFICATE")!=-1&&t.indexOf("BEGIN")!=-1&&t.indexOf("END")!=-1){this.dSignerIdentifier=new n.IssuerAndSerialNumber({cert:t})}},this.setForContentAndHash=function(t){"undefined"!=typeof t&&(t.eciObj instanceof KJUR.asn1.cms.EncapsulatedContentInfo&&(this.dSignedAttrs.add(new n.ContentType({oid:"1.2.840.113549.1.7.1"})),this.dSignedAttrs.add(new n.MessageDigest({eciObj:t.eciObj,hashAlg:t.hashAlg}))),"undefined"!=typeof t.sdObj&&t.sdObj instanceof KJUR.asn1.cms.SignedData&&t.sdObj.digestAlgNameList.join(":").indexOf(t.hashAlg)==-1&&t.sdObj.digestAlgNameList.push(t.hashAlg),"string"==typeof t.hashAlg&&(this.dDigestAlgorithm=new r.AlgorithmIdentifier({name:t.hashAlg
})))},this.sign=function(t,n){this.dSigAlg=new r.AlgorithmIdentifier({name:n});var i=this.dSignedAttrs.getEncodedHex(),o=KEYUTIL.getKey(t),s=new KJUR.crypto.Signature({alg:n});s.init(o),s.updateHex(i);var a=s.sign();this.dSig=new e.DEROctetString({hex:a})},this.addUnsigned=function(t){this.hTLV=null,this.dUnsignedAttrs.hTLV=null,this.dUnsignedAttrs.add(t)},this.getEncodedHex=function(){if(this.dSignedAttrs instanceof KJUR.asn1.cms.AttributeList&&0==this.dSignedAttrs.length())throw"SignedAttrs length = 0 (empty)";var t=new e.DERTaggedObject({obj:this.dSignedAttrs,tag:"a0",explicit:!1}),n=null;this.dUnsignedAttrs.length()>0&&(n=new e.DERTaggedObject({obj:this.dUnsignedAttrs,tag:"a1",explicit:!1}));var r=[this.dCMSVersion,this.dSignerIdentifier,this.dDigestAlgorithm,t,this.dSigAlg,this.dSig];null!=n&&r.push(n);var i=new e.DERSequence({array:r});return this.hTLV=i.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.SignerInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.EncapsulatedContentInfo=function(t){KJUR.asn1.cms.EncapsulatedContentInfo.superclass.constructor.call(this);var e=KJUR.asn1;KJUR.asn1.cms,KJUR.asn1.x509;this.dEContentType=new e.DERObjectIdentifier({name:"data"}),this.dEContent=null,this.isDetached=!1,this.eContentValueHex=null,this.setContentType=function(t){t.match(/^[0-2][.][0-9.]+$/)?this.dEContentType=new e.DERObjectIdentifier({oid:t}):this.dEContentType=new e.DERObjectIdentifier({name:t})},this.setContentValue=function(t){"undefined"!=typeof t&&("string"==typeof t.hex?this.eContentValueHex=t.hex:"string"==typeof t.str&&(this.eContentValueHex=utf8tohex(t.str)))},this.setContentValueHex=function(t){this.eContentValueHex=t},this.setContentValueStr=function(t){this.eContentValueHex=utf8tohex(t)},this.getEncodedHex=function(){if("string"!=typeof this.eContentValueHex)throw"eContentValue not yet set";var t=new e.DEROctetString({hex:this.eContentValueHex});this.dEContent=new e.DERTaggedObject({obj:t,tag:"a0",explicit:!0});var n=[this.dEContentType];this.isDetached||n.push(this.dEContent);var r=new e.DERSequence({array:n});return this.hTLV=r.getEncodedHex(),this.hTLV}},YAHOO.lang.extend(KJUR.asn1.cms.EncapsulatedContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.ContentInfo=function(t){KJUR.asn1.cms.ContentInfo.superclass.constructor.call(this);var e=KJUR.asn1,n=(KJUR.asn1.cms,KJUR.asn1.x509);this.dContentType=null,this.dContent=null,this.setContentType=function(t){"string"==typeof t&&(this.dContentType=n.OID.name2obj(t))},this.getEncodedHex=function(){var t=new e.DERTaggedObject({obj:this.dContent,tag:"a0",explicit:!0}),n=new e.DERSequence({array:[this.dContentType,t]});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&(t.type&&this.setContentType(t.type),t.obj&&t.obj instanceof e.ASN1Object&&(this.dContent=t.obj))},YAHOO.lang.extend(KJUR.asn1.cms.ContentInfo,KJUR.asn1.ASN1Object),KJUR.asn1.cms.SignedData=function(t){KJUR.asn1.cms.SignedData.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.cms,r=KJUR.asn1.x509;this.dCMSVersion=new e.DERInteger({"int":1}),this.dDigestAlgs=null,this.digestAlgNameList=[],this.dEncapContentInfo=new n.EncapsulatedContentInfo,this.dCerts=null,this.certificateList=[],this.crlList=[],this.signerInfoList=[new n.SignerInfo],this.addCertificatesByPEM=function(t){var n=KEYUTIL.getHexFromPEM(t),r=new e.ASN1Object;r.hTLV=n,this.certificateList.push(r)},this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(null==this.dDigestAlgs){for(var t=[],n=0;n<this.digestAlgNameList.length;n++){var i=this.digestAlgNameList[n],o=new r.AlgorithmIdentifier({name:i});t.push(o)}this.dDigestAlgs=new e.DERSet({array:t})}var s=[this.dCMSVersion,this.dDigestAlgs,this.dEncapContentInfo];if(null==this.dCerts&&this.certificateList.length>0){var a=new e.DERSet({array:this.certificateList});this.dCerts=new e.DERTaggedObject({obj:a,tag:"a0",explicit:!1})}null!=this.dCerts&&s.push(this.dCerts);var u=new e.DERSet({array:this.signerInfoList});s.push(u);var c=new e.DERSequence({array:s});return this.hTLV=c.getEncodedHex(),this.hTLV},this.getContentInfo=function(){this.getEncodedHex();var t=new n.ContentInfo({type:"signed-data",obj:this});return t},this.getContentInfoEncodedHex=function(){var t=this.getContentInfo(),e=t.getEncodedHex();return e},this.getPEM=function(){var t=this.getContentInfoEncodedHex(),n=e.ASN1Util.getPEMStringFromHex(t,"CMS");return n}},YAHOO.lang.extend(KJUR.asn1.cms.SignedData,KJUR.asn1.ASN1Object),KJUR.asn1.cms.CMSUtil=new function(){},KJUR.asn1.cms.CMSUtil.newSignedData=function(t){var e=KJUR.asn1.cms,n=KJUR.asn1.cades,r=new e.SignedData;if(r.dEncapContentInfo.setContentValue(t.content),"object"==typeof t.certs)for(var i=0;i<t.certs.length;i++)r.addCertificatesByPEM(t.certs[i]);r.signerInfoList=[];for(var i=0;i<t.signerInfos.length;i++){var o=t.signerInfos[i],s=new e.SignerInfo;s.setSignerIdentifier(o.signerCert),s.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:o.hashAlg});for(attrName in o.sAttr){var a=o.sAttr[attrName];if("SigningTime"==attrName){var u=new e.SigningTime(a);s.dSignedAttrs.add(u)}if("SigningCertificate"==attrName){var u=new e.SigningCertificate(a);s.dSignedAttrs.add(u)}if("SigningCertificateV2"==attrName){var u=new e.SigningCertificateV2(a);s.dSignedAttrs.add(u)}if("SignaturePolicyIdentifier"==attrName){var u=new n.SignaturePolicyIdentifier(a);s.dSignedAttrs.add(u)}}s.sign(o.signerPrvKey,o.sigAlg),r.signerInfoList.push(s)}return r},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),"undefined"!=typeof KJUR.asn1.tsp&&KJUR.asn1.tsp||(KJUR.asn1.tsp={}),KJUR.asn1.tsp.Accuracy=function(t){KJUR.asn1.tsp.Accuracy.superclass.constructor.call(this);var e=KJUR.asn1;this.seconds=null,this.millis=null,this.micros=null,this.getEncodedHex=function(){var t=null,n=null,r=null,i=[];if(null!=this.seconds&&(t=new e.DERInteger({"int":this.seconds}),i.push(t)),null!=this.millis){var o=new e.DERInteger({"int":this.millis});n=new e.DERTaggedObject({obj:o,tag:"80",explicit:!1}),i.push(n)}if(null!=this.micros){var s=new e.DERInteger({"int":this.micros});r=new e.DERTaggedObject({obj:s,tag:"81",explicit:!1}),i.push(r)}var a=new e.DERSequence({array:i});return this.hTLV=a.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("number"==typeof t.seconds&&(this.seconds=t.seconds),"number"==typeof t.millis&&(this.millis=t.millis),"number"==typeof t.micros&&(this.micros=t.micros))},YAHOO.lang.extend(KJUR.asn1.tsp.Accuracy,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.MessageImprint=function(t){KJUR.asn1.tsp.MessageImprint.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.x509;this.dHashAlg=null,this.dHashValue=null,this.getEncodedHex=function(){if("string"==typeof this.hTLV)return this.hTLV;var t=new e.DERSequence({array:[this.dHashAlg,this.dHashValue]});return t.getEncodedHex()},"undefined"!=typeof t&&("string"==typeof t.hashAlg&&(this.dHashAlg=new n.AlgorithmIdentifier({name:t.hashAlg})),"string"==typeof t.hashValue&&(this.dHashValue=new e.DEROctetString({hex:t.hashValue})))},YAHOO.lang.extend(KJUR.asn1.tsp.MessageImprint,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampReq=function(t){KJUR.asn1.tsp.TimeStampReq.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.tsp;this.dVersion=new e.DERInteger({"int":1}),this.dMessageImprint=null,this.dPolicy=null,this.dNonce=null,this.certReq=!0,this.setMessageImprint=function(t){return t instanceof KJUR.asn1.tsp.MessageImprint?void(this.dMessageImprint=t):void("object"==typeof t&&(this.dMessageImprint=new n.MessageImprint(t)))},this.getEncodedHex=function(){if(null==this.dMessageImprint)throw"messageImprint shall be specified";var t=[this.dVersion,this.dMessageImprint];null!=this.dPolicy&&t.push(this.dPolicy),null!=this.dNonce&&t.push(this.dNonce),this.certReq&&t.push(new e.DERBoolean);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("object"==typeof t.mi&&this.setMessageImprint(t.mi),"object"==typeof t.policy&&(this.dPolicy=new e.DERObjectIdentifier(t.policy)),"object"==typeof t.nonce&&(this.dNonce=new e.DERInteger(t.nonce)),"boolean"==typeof t.certreq&&(this.certReq=t.certreq))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampReq,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TSTInfo=function(t){KJUR.asn1.tsp.TSTInfo.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.x509,r=KJUR.asn1.tsp;if(this.dVersion=new e.DERInteger({"int":1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerialNumber=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.getEncodedHex=function(){var t=[this.dVersion];if(null==this.dPolicy)throw"policy shall be specified.";if(t.push(this.dPolicy),null==this.dMessageImprint)throw"messageImprint shall be specified.";if(t.push(this.dMessageImprint),null==this.dSerialNumber)throw"serialNumber shall be specified.";if(t.push(this.dSerialNumber),null==this.dGenTime)throw"genTime shall be specified.";t.push(this.dGenTime),null!=this.dAccuracy&&t.push(this.dAccuracy),null!=this.dOrdering&&t.push(this.dOrdering),null!=this.dNonce&&t.push(this.dNonce),null!=this.dTsa&&t.push(this.dTsa);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t){if("string"==typeof t.policy){if(!t.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new e.DERObjectIdentifier({oid:t.policy})}"undefined"!=typeof t.messageImprint&&(this.dMessageImprint=new r.MessageImprint(t.messageImprint)),"undefined"!=typeof t.serialNumber&&(this.dSerialNumber=new e.DERInteger(t.serialNumber)),"undefined"!=typeof t.genTime&&(this.dGenTime=new e.DERGeneralizedTime(t.genTime)),"undefind"!=typeof t.accuracy&&(this.dAccuracy=new r.Accuracy(t.accuracy)),"undefined"!=typeof t.ordering&&1==t.ordering&&(this.dOrdering=new e.DERBoolean),"undefined"!=typeof t.nonce&&(this.dNonce=new e.DERInteger(t.nonce)),"undefined"!=typeof t.tsa&&(this.dTsa=new n.X500Name(t.tsa))}},YAHOO.lang.extend(KJUR.asn1.tsp.TSTInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.TimeStampResp=function(t){KJUR.asn1.tsp.TimeStampResp.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.tsp;this.dStatus=null,this.dTST=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dTST&&t.push(this.dTST);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("object"==typeof t.status&&(this.dStatus=new n.PKIStatusInfo(t.status)),"undefined"!=typeof t.tst&&t.tst instanceof KJUR.asn1.ASN1Object&&(this.dTST=t.tst.getContentInfo()))},YAHOO.lang.extend(KJUR.asn1.tsp.TimeStampResp,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatusInfo=function(t){KJUR.asn1.tsp.PKIStatusInfo.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.tsp;this.dStatus=null,this.dStatusString=null,this.dFailureInfo=null,this.getEncodedHex=function(){if(null==this.dStatus)throw"status shall be specified";var t=[this.dStatus];null!=this.dStatusString&&t.push(this.dStatusString),null!=this.dFailureInfo&&t.push(this.dFailureInfo);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("object"==typeof t.status&&(this.dStatus=new n.PKIStatus(t.status)),"object"==typeof t.statstr&&(this.dStatusString=new n.PKIFreeText({array:t.statstr})),"object"==typeof t.failinfo&&(this.dFailureInfo=new n.PKIFailureInfo(t.failinfo)))},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatusInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus=function(t){KJUR.asn1.tsp.PKIStatus.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.tsp;if(this.getEncodedHex=function(){return this.hTLV=this.dStatus.getEncodedHex(),this.hTLV},"undefined"!=typeof t)if("undefined"!=typeof t.name){var r=n.PKIStatus.valueList;if("undefined"==typeof r[t.name])throw"name undefined: "+t.name;this.dStatus=new e.DERInteger({"int":r[t.name]})}else this.dStatus=new e.DERInteger(t)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIStatus,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIStatus.valueList={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5},KJUR.asn1.tsp.PKIFreeText=function(t){KJUR.asn1.tsp.PKIFreeText.superclass.constructor.call(this);var e=KJUR.asn1;this.textList=[],this.getEncodedHex=function(){for(var t=[],n=0;n<this.textList.length;n++)t.push(new e.DERUTF8String({str:this.textList[n]}));var r=new e.DERSequence({array:t});return this.hTLV=r.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"object"==typeof t.array&&(this.textList=t.array)},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFreeText,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo=function(t){KJUR.asn1.tsp.PKIFailureInfo.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.tsp;if(this.value=null,this.getEncodedHex=function(){if(null==this.value)throw"value shall be specified";var t=new Number(this.value).toString(2),n=new e.DERBitString;return n.setByBinaryString(t),this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t)if("string"==typeof t.name){var r=n.PKIFailureInfo.valueList;if("undefined"==typeof r[t.name])throw"name undefined: "+t.name;this.value=r[t.name]}else"number"==typeof t["int"]&&(this.value=t["int"])},YAHOO.lang.extend(KJUR.asn1.tsp.PKIFailureInfo,KJUR.asn1.ASN1Object),KJUR.asn1.tsp.PKIFailureInfo.valueList={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25},KJUR.asn1.tsp.AbstractTSAAdapter=function(t){this.getTSTHex=function(t,e){throw"not implemented yet"}},KJUR.asn1.tsp.SimpleTSAAdapter=function(t){KJUR.asn1.tsp.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(t,e){var n=KJUR.crypto.Util.hashHex(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:n},this.params.tstInfo.serialNumber={"int":this.serial++};var r=Math.floor(1e9*Math.random());this.params.tstInfo.nonce={"int":r};var i=KJUR.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return i.getContentInfoEncodedHex()},"undefined"!=typeof t&&(this.params=t)},YAHOO.lang.extend(KJUR.asn1.tsp.SimpleTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.FixedTSAAdapter=function(t){KJUR.asn1.tsp.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(t,e){var n=KJUR.crypto.Util.hashHex(t,e);this.params.tstInfo.messageImprint={hashAlg:e,hashValue:n};var r=KJUR.asn1.tsp.TSPUtil.newTimeStampToken(this.params);return r.getContentInfoEncodedHex()},"undefined"!=typeof t&&(this.params=t)},YAHOO.lang.extend(KJUR.asn1.tsp.FixedTSAAdapter,KJUR.asn1.tsp.AbstractTSAAdapter),KJUR.asn1.tsp.TSPUtil=new function(){},KJUR.asn1.tsp.TSPUtil.newTimeStampToken=function(t){var e=KJUR.asn1.cms,n=KJUR.asn1.tsp,r=new e.SignedData,i=new n.TSTInfo(t.tstInfo),o=i.getEncodedHex();if(r.dEncapContentInfo.setContentValue({hex:o}),r.dEncapContentInfo.setContentType("tstinfo"),"object"==typeof t.certs)for(var s=0;s<t.certs.length;s++)r.addCertificatesByPEM(t.certs[s]);var a=r.signerInfoList[0];a.setSignerIdentifier(t.signerCert),a.setForContentAndHash({sdObj:r,eciObj:r.dEncapContentInfo,hashAlg:t.hashAlg});var u=new e.SigningCertificate({array:[t.signerCert]});return a.dSignedAttrs.add(u),a.sign(t.signerPrvKey,t.sigAlg),r},KJUR.asn1.tsp.TSPUtil.parseTimeStampReq=function(t){var e={};e.certreq=!1;var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(n.length<2)throw"TimeStampReq must have at least 2 items";var r=ASN1HEX.getHexOfTLV_AtObj(t,n[1]);e.mi=KJUR.asn1.tsp.TSPUtil.parseMessageImprint(r);for(var i=2;i<n.length;i++){var o=n[i],s=t.substr(o,2);if("06"==s){var a=ASN1HEX.getHexOfV_AtObj(t,o);e.policy=ASN1HEX.hextooidstr(a)}"02"==s&&(e.nonce=ASN1HEX.getHexOfV_AtObj(t,o)),"01"==s&&(e.certreq=!0)}return e},KJUR.asn1.tsp.TSPUtil.parseMessageImprint=function(t){var e={};if("30"!=t.substr(0,2))throw"head of messageImprint hex shall be '30'";var n=(ASN1HEX.getPosArrayOfChildren_AtObj(t,0),ASN1HEX.getDecendantIndexByNthList(t,0,[0,0])),r=ASN1HEX.getHexOfV_AtObj(t,n),i=ASN1HEX.hextooidstr(r),o=KJUR.asn1.x509.OID.oid2name(i);if(""==o)throw"hashAlg name undefined: "+i;var s=o,a=ASN1HEX.getDecendantIndexByNthList(t,0,[1]);return e.hashAlg=s,e.hashValue=ASN1HEX.getHexOfV_AtObj(t,a),e},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),"undefined"!=typeof KJUR.asn1.cades&&KJUR.asn1.cades||(KJUR.asn1.cades={}),KJUR.asn1.cades.SignaturePolicyIdentifier=function(t){KJUR.asn1.cades.SignaturePolicyIdentifier.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.15";var e=KJUR.asn1,n=KJUR.asn1.cades;if("undefined"!=typeof t&&"string"==typeof t.oid&&"object"==typeof t.hash){var r=new e.DERObjectIdentifier({oid:t.oid}),i=new n.OtherHashAlgAndValue(t.hash),o=new e.DERSequence({array:[r,i]});this.valueList=[o]}},YAHOO.lang.extend(KJUR.asn1.cades.SignaturePolicyIdentifier,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherHashAlgAndValue=function(t){KJUR.asn1.cades.OtherHashAlgAndValue.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.x509;this.dAlg=null,this.dHash=null,this.getEncodedHex=function(){var t=new e.DERSequence({array:[this.dAlg,this.dHash]});return this.hTLV=t.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"string"==typeof t.alg&&"string"==typeof t.hash&&(this.dAlg=new n.AlgorithmIdentifier({name:t.alg}),this.dHash=new e.DEROctetString({hex:t.hash}))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHashAlgAndValue,KJUR.asn1.ASN1Object),KJUR.asn1.cades.SignatureTimeStamp=function(t){KJUR.asn1.cades.SignatureTimeStamp.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.14",this.tstHex=null;var e=KJUR.asn1;if("undefined"!=typeof t){if("undefined"!=typeof t.res)if("string"==typeof t.res&&t.res.match(/^[0-9A-Fa-f]+$/));else if(!(t.res instanceof KJUR.asn1.ASN1Object))throw"res param shall be ASN1Object or hex string";if("undefined"!=typeof t.tst)if("string"==typeof t.tst&&t.tst.match(/^[0-9A-Fa-f]+$/)){var n=new e.ASN1Object;this.tstHex=t.tst,n.hTLV=this.tstHex,n.getEncodedHex(),this.valueList=[n]}else if(!(t.tst instanceof KJUR.asn1.ASN1Object))throw"tst param shall be ASN1Object or hex string"}},YAHOO.lang.extend(KJUR.asn1.cades.SignatureTimeStamp,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.CompleteCertificateRefs=function(t){KJUR.asn1.cades.CompleteCertificateRefs.superclass.constructor.call(this),this.attrTypeOid="1.2.840.113549.1.9.16.2.21";var e=(KJUR.asn1,KJUR.asn1.cades);this.setByArray=function(t){this.valueList=[];for(var n=0;n<t.length;n++){var r=new e.OtherCertID(t[n]);this.valueList.push(r)}},"undefined"!=typeof t&&"object"==typeof t&&"number"==typeof t.length&&this.setByArray(t)},YAHOO.lang.extend(KJUR.asn1.cades.CompleteCertificateRefs,KJUR.asn1.cms.Attribute),KJUR.asn1.cades.OtherCertID=function(t){KJUR.asn1.cades.OtherCertID.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.cms,r=KJUR.asn1.cades;this.hasIssuerSerial=!0,this.dOtherCertHash=null,this.dIssuerSerial=null,this.setByCertPEM=function(t){this.dOtherCertHash=new r.OtherHash(t),this.hasIssuerSerial&&(this.dIssuerSerial=new n.IssuerAndSerialNumber(t))},this.getEncodedHex=function(){if(null!=this.hTLV)return this.hTLV;if(null==this.dOtherCertHash)throw"otherCertHash not set";var t=[this.dOtherCertHash];null!=this.dIssuerSerial&&t.push(this.dIssuerSerial);var n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&("string"==typeof t&&t.indexOf("-----BEGIN ")!=-1&&this.setByCertPEM(t),"object"==typeof t&&(t.hasis===!1&&(this.hasIssuerSerial=!1),"string"==typeof t.cert&&this.setByCertPEM(t.cert)))},YAHOO.lang.extend(KJUR.asn1.cades.OtherCertID,KJUR.asn1.ASN1Object),KJUR.asn1.cades.OtherHash=function(t){KJUR.asn1.cades.OtherHash.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.cades;if(this.alg="sha256",this.dOtherHash=null,this.setByCertPEM=function(t){if(t.indexOf("-----BEGIN ")==-1)throw"certPEM not to seem PEM format";var e=X509.pemToHex(t),r=KJUR.crypto.Util.hashHex(e,this.alg);this.dOtherHash=new n.OtherHashAlgAndValue({alg:this.alg,hash:r})},this.getEncodedHex=function(){if(null==this.dOtherHash)throw"OtherHash not set";return this.dOtherHash.getEncodedHex()},"undefined"!=typeof t)if("string"==typeof t)if(t.indexOf("-----BEGIN ")!=-1)this.setByCertPEM(t);else{if(!t.match(/^[0-9A-Fa-f]+$/))throw"unsupported string value for params";this.dOtherHash=new e.DEROctetString({hex:t})}else"object"==typeof t&&("string"==typeof t.cert?("string"==typeof t.alg&&(this.alg=t.alg),this.setByCertPEM(t.cert)):this.dOtherHash=new n.OtherHashAlgAndValue(t))},YAHOO.lang.extend(KJUR.asn1.cades.OtherHash,KJUR.asn1.ASN1Object),KJUR.asn1.cades.CAdESUtil=new function(){},KJUR.asn1.cades.CAdESUtil.addSigTS=function(t,e,n){},KJUR.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(t){var e=KJUR.asn1,n=KJUR.asn1.cms,r=KJUR.asn1.cades.CAdESUtil,i={};if("06092a864886f70d010702"!=ASN1HEX.getDecendantHexTLVByNthList(t,0,[0]))throw"hex is not CMS SignedData";var o=ASN1HEX.getDecendantIndexByNthList(t,0,[1,0]),s=ASN1HEX.getPosArrayOfChildren_AtObj(t,o);if(s.length<4)throw"num of SignedData elem shall be 4 at least";var a=s.shift();i.version=ASN1HEX.getHexOfTLV_AtObj(t,a);var u=s.shift();i.algs=ASN1HEX.getHexOfTLV_AtObj(t,u);var c=s.shift();i.encapcontent=ASN1HEX.getHexOfTLV_AtObj(t,c),i.certs=null,i.revs=null,i.si=[];var l=s.shift();"a0"==t.substr(l,2)&&(i.certs=ASN1HEX.getHexOfTLV_AtObj(t,l),l=s.shift()),"a1"==t.substr(l,2)&&(i.revs=ASN1HEX.getHexOfTLV_AtObj(t,l),l=s.shift());var h=l;if("31"!=t.substr(h,2))throw"Can't find signerInfos";for(var f=ASN1HEX.getPosArrayOfChildren_AtObj(t,h),d=0;d<f.length;d++){var p=f[d],g=r.parseSignerInfoForAddingUnsigned(t,p,d);i.si[d]=g}var v=null;i.obj=new n.SignedData,v=new e.ASN1Object,v.hTLV=i.version,i.obj.dCMSVersion=v,v=new e.ASN1Object,v.hTLV=i.algs,i.obj.dDigestAlgs=v,v=new e.ASN1Object,v.hTLV=i.encapcontent,i.obj.dEncapContentInfo=v,v=new e.ASN1Object,v.hTLV=i.certs,i.obj.dCerts=v,i.obj.signerInfoList=[];for(var d=0;d<i.si.length;d++)i.obj.signerInfoList.push(i.si[d].obj);return i},KJUR.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(t,e,n){var r=KJUR.asn1,i=KJUR.asn1.cms,o={},s=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(6!=s.length)throw"not supported items for SignerInfo (!=6)";var a=s.shift();o.version=ASN1HEX.getHexOfTLV_AtObj(t,a);var u=s.shift();o.si=ASN1HEX.getHexOfTLV_AtObj(t,u);var c=s.shift();o.digalg=ASN1HEX.getHexOfTLV_AtObj(t,c);var l=s.shift();o.sattrs=ASN1HEX.getHexOfTLV_AtObj(t,l);var h=s.shift();o.sigalg=ASN1HEX.getHexOfTLV_AtObj(t,h);var f=s.shift();o.sig=ASN1HEX.getHexOfTLV_AtObj(t,f),o.sigval=ASN1HEX.getHexOfV_AtObj(t,f);var d=null;return o.obj=new i.SignerInfo,d=new r.ASN1Object,d.hTLV=o.version,o.obj.dCMSVersion=d,d=new r.ASN1Object,d.hTLV=o.si,o.obj.dSignerIdentifier=d,d=new r.ASN1Object,d.hTLV=o.digalg,o.obj.dDigestAlgorithm=d,d=new r.ASN1Object,d.hTLV=o.sattrs,o.obj.dSignedAttrs=d,d=new r.ASN1Object,d.hTLV=o.sigalg,o.obj.dSigAlg=d,d=new r.ASN1Object,d.hTLV=o.sig,o.obj.dSig=d,o.obj.dUnsignedAttrs=new i.AttributeList,o},"undefined"!=typeof KJUR.asn1.csr&&KJUR.asn1.csr||(KJUR.asn1.csr={}),KJUR.asn1.csr.CertificationRequest=function(t){KJUR.asn1.csr.CertificationRequest.superclass.constructor.call(this);this.sign=function(t,e){null==this.prvKey&&(this.prvKey=e),this.asn1SignatureAlg=new KJUR.asn1.x509.AlgorithmIdentifier({name:t}),sig=new KJUR.crypto.Signature({alg:t}),sig.initSign(this.prvKey),sig.updateHex(this.asn1CSRInfo.getEncodedHex()),this.hexSig=sig.sign(),this.asn1Sig=new KJUR.asn1.DERBitString({hex:"00"+this.hexSig});var n=new KJUR.asn1.DERSequence({array:[this.asn1CSRInfo,this.asn1SignatureAlg,this.asn1Sig]});this.hTLV=n.getEncodedHex(),this.isModified=!1},this.getPEMString=function(){var t=KJUR.asn1.ASN1Util.getPEMStringFromHex(this.getEncodedHex(),"CERTIFICATE REQUEST");return t},this.getEncodedHex=function(){if(0==this.isModified&&null!=this.hTLV)return this.hTLV;throw"not signed yet"},"undefined"!=typeof t&&"undefined"!=typeof t.csrinfo&&(this.asn1CSRInfo=t.csrinfo)},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequest,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CertificationRequestInfo=function(t){KJUR.asn1.csr.CertificationRequestInfo.superclass.constructor.call(this),this._initialize=function(){this.asn1Array=new Array,this.asn1Version=new KJUR.asn1.DERInteger({"int":0}),this.asn1Subject=null,this.asn1SubjPKey=null,this.extensionsArray=new Array},this.setSubjectByParam=function(t){this.asn1Subject=new KJUR.asn1.x509.X500Name(t)},this.setSubjectPublicKeyByGetKey=function(t){var e=KEYUTIL.getKey(t);this.asn1SubjPKey=new KJUR.asn1.x509.SubjectPublicKeyInfo(e)},this.appendExtensionByName=function(t,e){KJUR.asn1.x509.Extension.appendByNameToArray(t,e,this.extensionsArray)},this.getEncodedHex=function(){if(this.asn1Array=new Array,this.asn1Array.push(this.asn1Version),this.asn1Array.push(this.asn1Subject),this.asn1Array.push(this.asn1SubjPKey),this.extensionsArray.length>0){var t=new KJUR.asn1.DERSequence({array:this.extensionsArray}),e=new KJUR.asn1.DERSet({array:[t]}),n=new KJUR.asn1.DERSequence({array:[new KJUR.asn1.DERObjectIdentifier({oid:"1.2.840.113549.1.9.14"}),e]}),r=new KJUR.asn1.DERTaggedObject({explicit:!0,tag:"a0",obj:n});this.asn1Array.push(r)}else{var r=new KJUR.asn1.DERTaggedObject({explicit:!1,tag:"a0",obj:new KJUR.asn1.DERNull});this.asn1Array.push(r)}var i=new KJUR.asn1.DERSequence({array:this.asn1Array});return this.hTLV=i.getEncodedHex(),this.isModified=!1,this.hTLV},this._initialize()},YAHOO.lang.extend(KJUR.asn1.csr.CertificationRequestInfo,KJUR.asn1.ASN1Object),KJUR.asn1.csr.CSRUtil=new function(){},KJUR.asn1.csr.CSRUtil.newCSRPEM=function(t){var e=KJUR.asn1.csr;if(void 0===t.subject)throw"parameter subject undefined";if(void 0===t.sbjpubkey)throw"parameter sbjpubkey undefined";if(void 0===t.sigalg)throw"parameter sigalg undefined";if(void 0===t.sbjprvkey)throw"parameter sbjpubkey undefined";var n=new e.CertificationRequestInfo;if(n.setSubjectByParam(t.subject),n.setSubjectPublicKeyByGetKey(t.sbjpubkey),void 0!==t.ext&&void 0!==t.ext.length)for(var r=0;r<t.ext.length;r++)for(key in t.ext[r])n.appendExtensionByName(key,t.ext[r][key]);var i=new e.CertificationRequest({csrinfo:n}),o=KEYUTIL.getKey(t.sbjprvkey);i.sign(t.sigalg,o);var s=i.getPEMString();return s},KJUR.asn1.csr.CSRUtil.getInfo=function(t){var e={};if(e.subject={},e.pubkey={},t.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw"argument is not PEM file";var n=KEYUTIL.getHexFromPEM(t,"CERTIFICATE REQUEST");return e.subject.hex=ASN1HEX.getDecendantHexTLVByNthList(n,0,[0,1]),e.subject.name=X509.hex2dn(e.subject.hex),e.pubkey.hex=ASN1HEX.getDecendantHexTLVByNthList(n,0,[0,2]),e.pubkey.obj=KEYUTIL.getKey(e.pubkey.hex,null,"pkcs8pub"),e},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.asn1&&KJUR.asn1||(KJUR.asn1={}),"undefined"!=typeof KJUR.asn1.ocsp&&KJUR.asn1.ocsp||(KJUR.asn1.ocsp={}),KJUR.asn1.ocsp.DEFAULT_HASH="sha1",KJUR.asn1.ocsp.CertID=function(t){KJUR.asn1.ocsp.CertID.superclass.constructor.call(this);var e=KJUR.asn1,n=KJUR.asn1.x509;if(this.dHashAlg=null,this.dIssuerNameHash=null,this.dIssuerKeyHash=null,this.dSerialNumber=null,this.setByValue=function(t,r,i,o){void 0===o&&(o=KJUR.asn1.ocsp.DEFAULT_HASH),this.dHashAlg=new n.AlgorithmIdentifier({name:o}),this.dIssuerNameHash=new e.DEROctetString({hex:t}),this.dIssuerKeyHash=new e.DEROctetString({hex:r}),this.dSerialNumber=new e.DERInteger({hex:i})},this.setByCert=function(t,e,n){void 0===n&&(n=KJUR.asn1.ocsp.DEFAULT_HASH);var r=new X509;r.readCertPEM(e);var i=new X509;i.readCertPEM(t);var o=X509.getPublicKeyInfoPropOfCertPEM(t),s=o.keyhex,a=r.getSerialNumberHex(),u=KJUR.crypto.Util.hashHex(i.getSubjectHex(),n),c=KJUR.crypto.Util.hashHex(s,n);this.setByValue(u,c,a,n),this.hoge=r.getSerialNumberHex()},this.getEncodedHex=function(){if(null===this.dHashAlg&&null===this.dIssuerNameHash&&null===this.dIssuerKeyHash&&null===this.dSerialNumber)throw"not yet set values";var t=[this.dHashAlg,this.dIssuerNameHash,this.dIssuerKeyHash,this.dSerialNumber],n=new e.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t){var r=t;if("undefined"!=typeof r.issuerCert&&"undefined"!=typeof r.subjectCert){var i=KJUR.asn1.ocsp.DEFAULT_HASH;"undefined"==typeof r.alg&&(i=void 0),this.setByCert(r.issuerCert,r.subjectCert,i)}else{if("undefined"==typeof r.namehash||"undefined"==typeof r.keyhash||"undefined"==typeof r.serial)throw"invalid constructor arguments";var i=KJUR.asn1.ocsp.DEFAULT_HASH;"undefined"==typeof r.alg&&(i=void 0),this.setByValue(r.namehash,r.keyhash,r.serial,i)}}},YAHOO.lang.extend(KJUR.asn1.ocsp.CertID,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.Request=function(t){if(KJUR.asn1.ocsp.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.getEncodedHex=function(){var t=[];if(null===this.dReqCert)throw"reqCert not set";t.push(this.dReqCert);var e=new KJUR.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof t){var e=new KJUR.asn1.ocsp.CertID(t);this.dReqCert=e}},YAHOO.lang.extend(KJUR.asn1.ocsp.Request,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.TBSRequest=function(t){KJUR.asn1.ocsp.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(t){for(var e=[],n=0;n<t.length;n++){var r=new KJUR.asn1.ocsp.Request(t[0]);e.push(r)}this.dRequestList=e},this.getEncodedHex=function(){var t=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var e=new KJUR.asn1.DERSequence({array:this.dRequestList});if(t.push(e),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new KJUR.asn1.DERSequence({array:t});return this.hTLV=n.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"undefined"!=typeof t.reqList&&this.setRequestListByParam(t.reqList)},YAHOO.lang.extend(KJUR.asn1.ocsp.TBSRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPRequest=function(t){if(KJUR.asn1.ocsp.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.getEncodedHex=function(){var t=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(t.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var e=new KJUR.asn1.DERSequence({array:t});return this.hTLV=e.getEncodedHex(),this.hTLV},"undefined"!=typeof t&&"undefined"!=typeof t.reqList){var e=new KJUR.asn1.ocsp.TBSRequest(t);this.dTbsRequest=e}},YAHOO.lang.extend(KJUR.asn1.ocsp.OCSPRequest,KJUR.asn1.ASN1Object),KJUR.asn1.ocsp.OCSPUtil={},KJUR.asn1.ocsp.OCSPUtil.getRequestHex=function(t,e,n){void 0===n&&(n=KJUR.asn1.ocsp.DEFAULT_HASH);var r={alg:n,issuerCert:t,subjectCert:e},i=new KJUR.asn1.ocsp.OCSPRequest({reqList:[r]});return i.getEncodedHex()},KJUR.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(t){var e={};try{var n=ASN1HEX.getVbyList(t,0,[0],"0a");e.responseStatus=parseInt(n,16)}catch(r){}if(0!==e.responseStatus)return e;try{var i=ASN1HEX.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,1]);"80"===t.substr(i,2)?e.certStatus="good":"a1"===t.substr(i,2)?(e.certStatus="revoked",e.revocationTime=hextoutf8(ASN1HEX.getDecendantHexVByNthList(t,i,[0]))):"82"===t.substr(i,2)&&(e.certStatus="unknown")}catch(r){}try{var o=ASN1HEX.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,2]);e.thisUpdate=hextoutf8(ASN1HEX.getHexOfV_AtObj(t,o))}catch(r){}try{var s=ASN1HEX.getDecendantIndexByNthList(t,0,[1,0,1,0,0,2,0,3]);"a0"===t.substr(s,2)&&(e.nextUpdate=hextoutf8(ASN1HEX.getDecendantHexVByNthList(t,s,[0])))}catch(r){}return e};var KJUR;"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.lang&&KJUR.lang||(KJUR.lang={}),KJUR.lang.String=function(){};var utf8tob64u,b64utoutf8;"function"==typeof Buffer?(utf8tob64u=function(t){return b64tob64u(new Buffer(t,"utf8").toString("base64"))},b64utoutf8=function(t){return new Buffer(b64utob64(t),"base64").toString("utf8");
}):(utf8tob64u=function(t){return hextob64u(uricmptohex(encodeURIComponentAll(t)))},b64utoutf8=function(t){return decodeURIComponent(hextouricmp(b64utohex(t)))}),KJUR.lang.String.isInteger=function(t){return!!t.match(/^[0-9]+$/)||!!t.match(/^-[0-9]+$/)},KJUR.lang.String.isHex=function(t){return!(t.length%2!=0||!t.match(/^[0-9a-f]+$/)&&!t.match(/^[0-9A-F]+$/))},KJUR.lang.String.isBase64=function(t){return t=t.replace(/\s+/g,""),!(!t.match(/^[0-9A-Za-z+\/]+={0,3}$/)||t.length%4!=0)},KJUR.lang.String.isBase64URL=function(t){return!t.match(/[+\/=]/)&&(t=b64utob64(t),KJUR.lang.String.isBase64(t))},KJUR.lang.String.isIntegerArray=function(t){return t=t.replace(/\s+/g,""),!!t.match(/^\[[0-9,]+\]$/)};var strdiffidx=function(t,e){var n=t.length;t.length>e.length&&(n=e.length);for(var r=0;r<n;r++)if(t.charCodeAt(r)!=e.charCodeAt(r))return r;return t.length!=e.length?n:-1};"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:CryptoJS.algo.MD5,sha1:CryptoJS.algo.SHA1,sha224:CryptoJS.algo.SHA224,sha256:CryptoJS.algo.SHA256,sha384:CryptoJS.algo.SHA384,sha512:CryptoJS.algo.SHA512,ripemd160:CryptoJS.algo.RIPEMD160},this.getDigestInfoHex=function(t,e){if("undefined"==typeof this.DIGESTINFOHEAD[e])throw"alg not supported in Util.DIGESTINFOHEAD: "+e;return this.DIGESTINFOHEAD[e]+t},this.getPaddedDigestInfoHex=function(t,e,n){var r=this.getDigestInfoHex(t,e),i=n/4;if(r.length+22>i)throw"key is too short for SigAlg: keylen="+n+","+e;for(var o="0001",s="00"+r,a="",u=i-o.length-s.length,c=0;c<u;c+=2)a+="ff";var l=o+a+s;return l},this.hashString=function(t,e){var n=new KJUR.crypto.MessageDigest({alg:e});return n.digestString(t)},this.hashHex=function(t,e){var n=new KJUR.crypto.MessageDigest({alg:e});return n.digestHex(t)},this.sha1=function(t){var e=new KJUR.crypto.MessageDigest({alg:"sha1",prov:"cryptojs"});return e.digestString(t)},this.sha256=function(t){var e=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return e.digestString(t)},this.sha256Hex=function(t){var e=new KJUR.crypto.MessageDigest({alg:"sha256",prov:"cryptojs"});return e.digestHex(t)},this.sha512=function(t){var e=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return e.digestString(t)},this.sha512Hex=function(t){var e=new KJUR.crypto.MessageDigest({alg:"sha512",prov:"cryptojs"});return e.digestHex(t)},this.md5=function(t){var e=new KJUR.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return e.digestString(t)},this.ripemd160=function(t){var e=new KJUR.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return e.digestString(t)},this.getCryptoJSMDByName=function(t){}},KJUR.crypto.MessageDigest=function(t){this.setAlgAndProvider=function(t,e){if(t=KJUR.crypto.MessageDigest.getCanonicalAlgName(t),null!==t&&void 0===e&&(e=KJUR.crypto.Util.DEFAULTPROVIDER[t]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)!=-1&&"cryptojs"==e){try{this.md=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=CryptoJS.enc.Hex.parse(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return t.toString(CryptoJS.enc.Hex)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}if(":sha256:".indexOf(t)!=-1&&"sjcl"==e){try{this.md=new sjcl.hash.sha256}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(t){this.md.update(t)},this.updateHex=function(t){var e=sjcl.codec.hex.toBits(t);this.md.update(e)},this.digest=function(){var t=this.md.finalize();return sjcl.codec.hex.fromBits(t)},this.digestString=function(t){return this.updateString(t),this.digest()},this.digestHex=function(t){return this.updateHex(t),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==t&&void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},KJUR.crypto.MessageDigest.getCanonicalAlgName=function(t){return"string"==typeof t&&(t=t.toLowerCase(),t=t.replace(/-/,"")),t},KJUR.crypto.MessageDigest.getHashLength=function(t){var e=KJUR.crypto.MessageDigest,n=e.getCanonicalAlgName(t);if(void 0===e.HASHLENGTH[n])throw"not supported algorithm: "+t;return e.HASHLENGTH[n]},KJUR.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},KJUR.crypto.Mac=function(t){this.setAlgAndProvider=function(t,e){if(t=t.toLowerCase(),null==t&&(t="hmacsha1"),t=t.toLowerCase(),"hmac"!=t.substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+t;void 0===e&&(e=KJUR.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+e;var n=t.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)!=-1&&"cryptojs"==e){try{var r=KJUR.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=CryptoJS.algo.HMAC.create(r,this.pass)}catch(i){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+i}this.updateString=function(t){this.mac.update(t)},this.updateHex=function(t){var e=CryptoJS.enc.Hex.parse(t);this.mac.update(e)},this.doFinal=function(){var t=this.mac.finalize();return t.toString(CryptoJS.enc.Hex)},this.doFinalString=function(t){return this.updateString(t),this.doFinal()},this.doFinalHex=function(t){return this.updateHex(t),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if("string"==typeof t){var e=t;return t.length%2!=1&&t.match(/^[0-9A-Fa-f]+$/)||(e=rstrtohex(t)),void(this.pass=CryptoJS.enc.Hex.parse(e))}if("object"!=typeof t)throw"KJUR.crypto.Mac unsupported password type: "+t;var e=null;if(void 0!==t.hex){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;e=t.hex}if(void 0!==t.utf8&&(e=utf8tohex(t.utf8)),void 0!==t.rstr&&(e=rstrtohex(t.rstr)),void 0!==t.b64&&(e=b64tohex(t.b64)),void 0!==t.b64u&&(e=b64utohex(t.b64u)),null==e)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=CryptoJS.enc.Hex.parse(e)},void 0!==t&&(void 0!==t.pass&&this.setPassword(t.pass),void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov&&(this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},KJUR.crypto.Signature=function(t){var e=null;if(this._setAlgNames=function(){var t=this.algName.match(/^(.+)with(.+)$/);t&&(this.mdAlgName=t[1].toLowerCase(),this.pubkeyAlgName=t[2].toLowerCase())},this._zeroPaddingOfSignature=function(t,e){for(var n="",r=e/4-t.length,i=0;i<r;i++)n+="0";return n+t},this.setAlgAndProvider=function(t,e){if(this._setAlgNames(),"cryptojs/jsrsa"!=e)throw"provider not supported: "+e;if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new KJUR.crypto.MessageDigest({alg:this.mdAlgName})}catch(n){throw"setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+n}this.init=function(t,e){var n=null;try{n=void 0===e?KEYUTIL.getKey(t):KEYUTIL.getKey(t,e)}catch(r){throw"init failed:"+r}if(n.isPrivate===!0)this.prvKey=n,this.state="SIGN";else{if(n.isPublic!==!0)throw"init failed.:"+n;this.pubKey=n,this.state="VERIFY"}},this.initSign=function(t){"string"==typeof t.ecprvhex&&"string"==typeof t.eccurvename?(this.ecprvhex=t.ecprvhex,this.eccurvename=t.eccurvename):this.prvKey=t,this.state="SIGN"},this.initVerifyByPublicKey=function(t){"string"==typeof t.ecpubhex&&"string"==typeof t.eccurvename?(this.ecpubhex=t.ecpubhex,this.eccurvename=t.eccurvename):t instanceof KJUR.crypto.ECDSA?this.pubKey=t:t instanceof RSAKey&&(this.pubKey=t),this.state="VERIFY"},this.initVerifyByCertificatePEM=function(t){var e=new X509;e.readCertPEM(t),this.pubKey=e.subjectPublicKeyRSA,this.state="VERIFY"},this.updateString=function(t){this.md.updateString(t)},this.updateHex=function(t){this.md.updateHex(t)},this.sign=function(){if(this.sHashHex=this.md.digest(),"undefined"!=typeof this.ecprvhex&&"undefined"!=typeof this.eccurvename){var t=new KJUR.crypto.ECDSA({curve:this.eccurvename});this.hSign=t.signHex(this.sHashHex,this.ecprvhex)}else if(this.prvKey instanceof RSAKey&&"rsaandmgf1"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof RSAKey&&"rsa"==this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof KJUR.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof KJUR.crypto.DSA))throw"Signature: unsupported public key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(t){return this.updateString(t),this.sign()},this.signHex=function(t){return this.updateHex(t),this.sign()},this.verify=function(t){if(this.sHashHex=this.md.digest(),"undefined"!=typeof this.ecpubhex&&"undefined"!=typeof this.eccurvename){var e=new KJUR.crypto.ECDSA({curve:this.eccurvename});return e.verifyHex(this.sHashHex,t,this.ecpubhex)}if(this.pubKey instanceof RSAKey&&"rsaandmgf1"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,t,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof RSAKey&&"rsa"==this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof KJUR.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);if(this.pubKey instanceof KJUR.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,t);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(t,e){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.initVerifyByPublicKey=function(t){throw"initVerifyByPublicKey(rsaPubKeyy) not supported for this alg:prov="+this.algProvName},this.initVerifyByCertificatePEM=function(t){throw"initVerifyByCertificatePEM(certPEM) not supported for this alg:prov="+this.algProvName},this.initSign=function(t){throw"initSign(prvKey) not supported for this alg:prov="+this.algProvName},this.updateString=function(t){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(t){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(t){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(t){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=t,void 0!==t&&(void 0!==t.alg&&(this.algName=t.alg,void 0===t.prov?this.provName=KJUR.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=t.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==t.psssaltlen&&(this.pssSaltLen=t.psssaltlen),void 0!==t.prvkeypem)){if(void 0!==t.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{var e=new RSAKey;e.readPrivateKeyFromPEMString(t.prvkeypem),this.initSign(e)}catch(n){throw"fatal error to load pem private key: "+n}}},KJUR.crypto.Cipher=function(t){},KJUR.crypto.Cipher.encrypt=function(t,e,n){if(e instanceof RSAKey&&e.isPublic){var r=KJUR.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.encrypt(t);if("RSAOAEP"===r)return e.encryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.encryptOAEP(t,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.encrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.decrypt=function(t,e,n){if(e instanceof RSAKey&&e.isPrivate){var r=KJUR.crypto.Cipher.getAlgByKeyAndName(e,n);if("RSA"===r)return e.decrypt(t);if("RSAOAEP"===r)return e.decryptOAEP(t,"sha1");var i=r.match(/^RSAOAEP(\d+)$/);if(null!==i)return e.decryptOAEP(t,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+n}throw"Cipher.decrypt: unsupported key or algorithm"},KJUR.crypto.Cipher.getAlgByKeyAndName=function(t,e){if(t instanceof RSAKey){if(":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(e)!=-1)return e;if(null===e||void 0===e)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+e}throw"getAlgByKeyAndName: not supported algorithm name: "+e},KJUR.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECDSA=function(t){var e="secp256r1",n=new SecureRandom;this.type="EC",this.getBigRandom=function(t){return new BigInteger(t.bitLength(),n).mod(t.subtract(BigInteger.ONE)).add(BigInteger.ONE)},this.setNamedCurve=function(t){this.ecparams=KJUR.crypto.ECParameterDB.getByName(t),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=t},this.setPrivateKeyHex=function(t){this.isPrivate=!0,this.prvKeyHex=t},this.setPublicKeyHex=function(t){this.isPublic=!0,this.pubKeyHex=t},this.getPublicKeyXYHex=function(){var t=this.pubKeyHex;if("04"!==t.substr(0,2))throw"this method supports uncompressed format(04) only";var e=this.ecparams.keylen/4;if(t.length!==2+2*e)throw"malformed public key hex length";var n={};return n.x=t.substr(2,e),n.y=t.substr(2+e),n},this.getShortNISTPCurveName=function(){var t=this.curveName;return"secp256r1"===t||"NIST P-256"===t||"P-256"===t||"prime256v1"===t?"P-256":"secp384r1"===t||"NIST P-384"===t||"P-384"===t?"P-384":null},this.generateKeyPairHex=function(){var t=this.ecparams.n,e=this.getBigRandom(t),n=this.ecparams.G.multiply(e),r=n.getX().toBigInteger(),i=n.getY().toBigInteger(),o=this.ecparams.keylen/4,s=("0000000000"+e.toString(16)).slice(-o),a=("0000000000"+r.toString(16)).slice(-o),u=("0000000000"+i.toString(16)).slice(-o),c="04"+a+u;return this.setPrivateKeyHex(s),this.setPublicKeyHex(c),{ecprvhex:s,ecpubhex:c}},this.signWithMessageHash=function(t){return this.signHex(t,this.prvKeyHex)},this.signHex=function(t,e){var n=new BigInteger(e,16),r=this.ecparams.n,i=new BigInteger(t,16);do var o=this.getBigRandom(r),s=this.ecparams.G,a=s.multiply(o),u=a.getX().toBigInteger().mod(r);while(u.compareTo(BigInteger.ZERO)<=0);var c=o.modInverse(r).multiply(i.add(n.multiply(u))).mod(r);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(u,c)},this.sign=function(t,e){var n=e,r=this.ecparams.n,i=BigInteger.fromByteArrayUnsigned(t);do var o=this.getBigRandom(r),s=this.ecparams.G,a=s.multiply(o),u=a.getX().toBigInteger().mod(r);while(u.compareTo(BigInteger.ZERO)<=0);var c=o.modInverse(r).multiply(i.add(n.multiply(u))).mod(r);return this.serializeSig(u,c)},this.verifyWithMessageHash=function(t,e){return this.verifyHex(t,e,this.pubKeyHex)},this.verifyHex=function(t,e,n){var r,i,o=KJUR.crypto.ECDSA.parseSigHex(e);r=o.r,i=o.s;var s;s=ECPointFp.decodeFromHex(this.ecparams.curve,n);var a=new BigInteger(t,16);return this.verifyRaw(a,r,i,s)},this.verify=function(t,e,n){var r,i;if(Bitcoin.Util.isArray(e)){var o=this.parseSig(e);r=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw"Invalid value for signature";r=e.r,i=e.s}var s;if(n instanceof ECPointFp)s=n;else{if(!Bitcoin.Util.isArray(n))throw"Invalid format for pubkey value, must be byte array or ECPointFp";s=ECPointFp.decodeFrom(this.ecparams.curve,n)}var a=BigInteger.fromByteArrayUnsigned(t);return this.verifyRaw(a,r,i,s)},this.verifyRaw=function(t,e,n,r){var i=this.ecparams.n,o=this.ecparams.G;if(e.compareTo(BigInteger.ONE)<0||e.compareTo(i)>=0)return!1;if(n.compareTo(BigInteger.ONE)<0||n.compareTo(i)>=0)return!1;var s=n.modInverse(i),a=t.multiply(s).mod(i),u=e.multiply(s).mod(i),c=o.multiply(a).add(r.multiply(u)),l=c.getX().toBigInteger().mod(i);return l.equals(e)},this.serializeSig=function(t,e){var n=t.toByteArraySigned(),r=e.toByteArraySigned(),i=[];return i.push(2),i.push(n.length),i=i.concat(n),i.push(2),i.push(r.length),i=i.concat(r),i.unshift(i.length),i.unshift(48),i},this.parseSig=function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(e=2,2!=t[e])throw new Error("First element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);if(e+=2+t[e+1],2!=t[e])throw new Error("Second element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);e+=2+t[e+1];var i=BigInteger.fromByteArrayUnsigned(n),o=BigInteger.fromByteArrayUnsigned(r);return{r:i,s:o}},this.parseSigCompact=function(t){if(65!==t.length)throw"Signature has the wrong length";var e=t[0]-27;if(e<0||e>7)throw"Invalid signature type";var n=this.ecparams.n,r=BigInteger.fromByteArrayUnsigned(t.slice(1,33)).mod(n),i=BigInteger.fromByteArrayUnsigned(t.slice(33,65)).mod(n);return{r:r,s:i,i:e}},void 0!==t&&void 0!==t.curve&&(this.curveName=t.curve),void 0===this.curveName&&(this.curveName=e),this.setNamedCurve(this.curveName),void 0!==t&&(void 0!==t.prv&&this.setPrivateKeyHex(t.prv),void 0!==t.pub&&this.setPublicKeyHex(t.pub))},KJUR.crypto.ECDSA.parseSigHex=function(t){var e=KJUR.crypto.ECDSA.parseSigHexInHexRS(t),n=new BigInteger(e.r,16),r=new BigInteger(e.s,16);return{r:n,s:r}},KJUR.crypto.ECDSA.parseSigHexInHexRS=function(t){if("30"!=t.substr(0,2))throw"signature is not a ASN.1 sequence";var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"number of signature ASN.1 sequence elements seem wrong";var n=e[0],r=e[1];if("02"!=t.substr(n,2))throw"1st item of sequene of signature is not ASN.1 integer";if("02"!=t.substr(r,2))throw"2nd item of sequene of signature is not ASN.1 integer";var i=ASN1HEX.getHexOfV_AtObj(t,n),o=ASN1HEX.getHexOfV_AtObj(t,r);return{r:i,s:o}},KJUR.crypto.ECDSA.asn1SigToConcatSig=function(t){var e=KJUR.crypto.ECDSA.parseSigHexInHexRS(t),n=e.r,r=e.s;if("00"==n.substr(0,2)&&n.length/2*8%128==8&&(n=n.substr(2)),"00"==r.substr(0,2)&&r.length/2*8%128==8&&(r=r.substr(2)),n.length/2*8%128!=0)throw"unknown ECDSA sig r length error";if(r.length/2*8%128!=0)throw"unknown ECDSA sig s length error";return n+r},KJUR.crypto.ECDSA.concatSigToASN1Sig=function(t){if(t.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var e=t.substr(0,t.length/2),n=t.substr(t.length/2);return KJUR.crypto.ECDSA.hexRSSigToASN1Sig(e,n)},KJUR.crypto.ECDSA.hexRSSigToASN1Sig=function(t,e){var n=new BigInteger(t,16),r=new BigInteger(e,16);return KJUR.crypto.ECDSA.biRSSigToASN1Sig(n,r)},KJUR.crypto.ECDSA.biRSSigToASN1Sig=function(t,e){var n=new KJUR.asn1.DERInteger({bigint:t}),r=new KJUR.asn1.DERInteger({bigint:e}),i=new KJUR.asn1.DERSequence({array:[n,r]});return i.getEncodedHex()},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.ECParameterDB=new function(){function t(t){return new BigInteger(t,16)}var e={},n={};this.getByName=function(t){var r=t;if("undefined"!=typeof n[r]&&(r=n[t]),"undefined"!=typeof e[r])return e[r];throw"unregistered EC curve name: "+r},this.regist=function(r,i,o,s,a,u,c,l,h,f,d,p){e[r]={};var g=t(o),v=t(s),m=t(a),y=t(u),b=t(c),_=new ECCurveFp(g,v,m),w=_.decodePointHex("04"+l+h);e[r].name=r,e[r].keylen=i,e[r].curve=_,e[r].G=w,e[r].n=y,e[r].h=b,e[r].oid=d,e[r].info=p;for(var S=0;S<f.length;S++)n[f[S]]=r}},KJUR.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),KJUR.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),KJUR.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),KJUR.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),KJUR.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),KJUR.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),KJUR.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),KJUR.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.crypto&&KJUR.crypto||(KJUR.crypto={}),KJUR.crypto.DSA=function(){function t(t,e,n,i,o,s){var a=KJUR.crypto.Util.hashString(e,t.toLowerCase()),a=a.substr(0,o.bitLength()/4),u=new BigInteger(a,16),c=r(BigInteger.ONE.add(BigInteger.ONE),o.subtract(BigInteger.ONE)),l=n.modPow(c,i).mod(o),h=c.modInverse(o).multiply(u.add(s.multiply(l))).mod(o),f=new Array;return f[0]=l,f[1]=h,f}function e(t){var e=openpgp.config.config.prefer_hash_algorithm;switch(Math.round(t.bitLength()/8)){case 20:return 2!=e&&e>11&&10!=e&&e<8?2:e;case 28:return e>11&&e<8?11:e;case 32:return e>10&&e<8?8:e;default:return util.print_debug("DSA select hash algorithm: returning null for an unknown length of q"),null}}function n(t,e,n,r,i,o,s,a){var u=KJUR.crypto.Util.hashString(r,t.toLowerCase()),u=u.substr(0,o.bitLength()/4),c=new BigInteger(u,16);if(BigInteger.ZERO.compareTo(e)>0||e.compareTo(o)>0||BigInteger.ZERO.compareTo(n)>0||n.compareTo(o)>0)return util.print_error("invalid DSA Signature"),null;var l=n.modInverse(o),h=c.multiply(l).mod(o),f=e.multiply(l).mod(o),d=s.modPow(h,i).multiply(a.modPow(f,i)).mod(i).mod(o);return 0==d.compareTo(e)}function r(t,e){if(!(e.compareTo(t)<=0)){for(var n=e.subtract(t),r=i(n.bitLength());r>n;)r=i(n.bitLength());return t.add(r)}}function i(t){if(t<0)return null;var e=Math.floor((t+7)/8),n=o(e);return t%8>0&&(n=String.fromCharCode(Math.pow(2,t%8)-1&n.charCodeAt(0))+n.substring(1)),new BigInteger(a(n),16)}function o(t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(s());return e}function s(){var t=new Uint32Array(1);return window.crypto.getRandomValues(t),255&t[0]}function a(t){if(null==t)return"";for(var e,n=[],r=t.length,i=0;i<r;){for(e=t[i++].charCodeAt().toString(16);e.length<2;)e="0"+e;n.push(""+e)}return n.join("")}this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.setPrivate=function(t,e,n,r,i){this.isPrivate=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=i},this.setPublic=function(t,e,n,r){this.isPublic=!0,this.p=t,this.q=e,this.g=n,this.y=r,this.x=null},this.signWithMessageHash=function(t){var e=this.p,n=this.q,i=this.g,o=(this.y,this.x),s=(t.substr(0,n.bitLength()/4),new BigInteger(t,16)),a=r(BigInteger.ONE.add(BigInteger.ONE),n.subtract(BigInteger.ONE)),u=i.modPow(a,e).mod(n),c=a.modInverse(n).multiply(s.add(o.multiply(u))).mod(n),l=KJUR.asn1.ASN1Util.jsonToASN1HEX({seq:[{"int":{bigint:u}},{"int":{bigint:c}}]});return l},this.verifyWithMessageHash=function(t,e){var n=this.p,r=this.q,i=this.g,o=this.y,s=this.parseASN1Signature(e),a=s[0],u=s[1],t=t.substr(0,r.bitLength()/4),c=new BigInteger(t,16);if(BigInteger.ZERO.compareTo(a)>0||a.compareTo(r)>0||BigInteger.ZERO.compareTo(u)>0||u.compareTo(r)>0)throw"invalid DSA signature";var l=u.modInverse(r),h=c.multiply(l).mod(r),f=a.multiply(l).mod(r),d=i.modPow(h,n).multiply(o.modPow(f,n)).mod(n).mod(r);return 0==d.compareTo(a)},this.parseASN1Signature=function(t){try{var e=new BigInteger(ASN1HEX.getVbyList(t,0,[0],"02"),16),n=new BigInteger(ASN1HEX.getVbyList(t,0,[1],"02"),16);return[e,n]}catch(r){throw"malformed DSA signature"}},this.select_hash_algorithm=e,this.sign=t,this.verify=n,this.getRandomBigIntegerInRange=r,this.getRandomBigInteger=i,this.getRandomBytes=o};var PKCS5PKEY=function(){var t=function(t,e,r){return n(CryptoJS.AES,t,e,r)},e=function(t,e,r){return n(CryptoJS.TripleDES,t,e,r)},n=function(t,e,n,r){var i=CryptoJS.enc.Hex.parse(e),o=CryptoJS.enc.Hex.parse(n),s=CryptoJS.enc.Hex.parse(r),a={};a.key=o,a.iv=s,a.ciphertext=i;var u=t.decrypt(a,o,{iv:s});return CryptoJS.enc.Hex.stringify(u)},r=function(t,e,n){return o(CryptoJS.AES,t,e,n)},i=function(t,e,n){return o(CryptoJS.TripleDES,t,e,n)},o=function(t,e,n,r){var i=CryptoJS.enc.Hex.parse(e),o=CryptoJS.enc.Hex.parse(n),s=CryptoJS.enc.Hex.parse(r),a=t.encrypt(i,o,{iv:s}),u=CryptoJS.enc.Hex.parse(a.toString()),c=CryptoJS.enc.Base64.stringify(u);return c},s={"AES-256-CBC":{proc:t,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:i,keylen:24,ivlen:8}},a=function(t){return s[t].proc},u=function(t){var e=CryptoJS.lib.WordArray.random(t),n=CryptoJS.enc.Hex.stringify(e);return n},c=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,o=0;t.indexOf("\r\n\r\n")!=-1&&(i=t.indexOf("\r\n\r\n"),o=2),t.indexOf("\n\n")!=-1&&(i=t.indexOf("\n\n"),o=1);var s=t.indexOf("-----END");if(i!=-1&&s!=-1){var a=t.substring(i+2*o,s-o);a=a.replace(/\s+/g,""),e.data=a}return e},l=function(t,e,n){for(var r=n.substring(0,16),i=CryptoJS.enc.Hex.parse(r),o=CryptoJS.enc.Utf8.parse(e),a=s[t].keylen+s[t].ivlen,u="",c=null;;){var l=CryptoJS.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(i),c=l.finalize(),u+=CryptoJS.enc.Hex.stringify(c),u.length>=2*a)break}var h={};return h.keyhex=u.substr(0,2*s[t].keylen),h.ivhex=u.substr(2*s[t].keylen,2*s[t].ivlen),h},h=function(t,e,n,r){var i=CryptoJS.enc.Base64.parse(t),o=CryptoJS.enc.Hex.stringify(i),a=s[e].proc,u=a(o,n,r);return u},f=function(t,e,n,r){var i=s[e].eproc,o=i(t,n,r);return o};return{version:"1.0.5",getHexFromPEM:function(t,e){var n=t;if(n.indexOf("BEGIN "+e)==-1)throw"can't find PEM header: "+e;n=n.replace("-----BEGIN "+e+"-----",""),n=n.replace("-----END "+e+"-----","");var r=n.replace(/\s+/g,""),i=b64tohex(r);
return i},getDecryptedKeyHexByKeyIV:function(t,e,n,r){var i=a(e);return i(t,n,r)},parsePKCS5PEM:function(t){return c(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return l(t,e,n)},decryptKeyB64:function(t,e,n,r){return h(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=c(t),r=(n.type,n.cipher),i=n.ivsalt,o=n.data,s=l(r,e,i),a=s.keyhex,u=h(o,r,a,i);return u},getRSAKeyFromEncryptedPKCS5PEM:function(t,e){var n=this.getDecryptedKeyHex(t,e),r=new RSAKey;return r.readPrivateKeyFromASN1HexString(n),r},getEryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r){var i="";if("undefined"!=typeof n&&null!=n||(n="AES-256-CBC"),"undefined"==typeof s[n])throw"PKCS5PKEY unsupported algorithm: "+n;if("undefined"==typeof r||null==r){var o=s[n].ivlen,a=u(o);r=a.toUpperCase()}var c=l(n,e,r),h=c.keyhex,d=f(t,n,h,r),p=d.replace(/(.{64})/g,"$1\r\n"),i="-----BEGIN RSA PRIVATE KEY-----\r\n";return i+="Proc-Type: 4,ENCRYPTED\r\n",i+="DEK-Info: "+n+","+r+"\r\n",i+="\r\n",i+=p,i+="\r\n-----END RSA PRIVATE KEY-----\r\n"},getEryptedPKCS5PEMFromRSAKey:function(t,e,n,r){var i=new KJUR.asn1.DERInteger({"int":0}),o=new KJUR.asn1.DERInteger({bigint:t.n}),s=new KJUR.asn1.DERInteger({"int":t.e}),a=new KJUR.asn1.DERInteger({bigint:t.d}),u=new KJUR.asn1.DERInteger({bigint:t.p}),c=new KJUR.asn1.DERInteger({bigint:t.q}),l=new KJUR.asn1.DERInteger({bigint:t.dmp1}),h=new KJUR.asn1.DERInteger({bigint:t.dmq1}),f=new KJUR.asn1.DERInteger({bigint:t.coeff}),d=new KJUR.asn1.DERSequence({array:[i,o,s,a,u,c,l,h,f]}),p=d.getEncodedHex();return this.getEryptedPKCS5PEMFromPrvKeyHex(p,e,n,r)},newEncryptedPKCS5PEM:function(t,e,n,r){"undefined"!=typeof e&&null!=e||(e=1024),"undefined"!=typeof n&&null!=n||(n="10001");var i=new RSAKey;i.generate(e,n);var o=null;return o="undefined"==typeof r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(pkey,t):this.getEncryptedPKCS5PEMFromRSAKey(pkey,t,r)},getRSAKeyFromPlainPKCS8PEM:function(t){if(t.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var e=this.getHexFromPEM(t,"PRIVATE KEY"),n=this.getRSAKeyFromPlainPKCS8Hex(e);return n},getRSAKeyFromPlainPKCS8Hex:function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"outer DERSequence shall have 3 elements: "+e.length;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[1]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[1]),r=ASN1HEX.getHexOfTLV_AtObj(t,e[2]),i=ASN1HEX.getHexOfV_AtObj(r,0),o=new RSAKey;return o.readPrivateKeyFromASN1HexString(i),o},parseHexOfEncryptedPKCS8:function(t){var e={},n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;e.ciphertext=ASN1HEX.getHexOfV_AtObj(t,n[1]);var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=ASN1HEX.getHexOfV_AtObj(t,r[0]))throw"this only supports pkcs5PBES2";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var o=ASN1HEX.getPosArrayOfChildren_AtObj(t,i[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+o.length;if("2a864886f70d0307"!=ASN1HEX.getHexOfV_AtObj(t,o[0]))throw"this only supports TripleDES";e.encryptionSchemeAlg="TripleDES",e.encryptionSchemeIV=ASN1HEX.getHexOfV_AtObj(t,o[1]);var s=ASN1HEX.getPosArrayOfChildren_AtObj(t,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+s.length;if("2a864886f70d01050c"!=ASN1HEX.getHexOfV_AtObj(t,s[0]))throw"this only supports pkcs5PBKDF2";var a=ASN1HEX.getPosArrayOfChildren_AtObj(t,s[1]);if(a.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+a.length;e.pbkdf2Salt=ASN1HEX.getHexOfV_AtObj(t,a[0]);var u=ASN1HEX.getHexOfV_AtObj(t,a[1]);try{e.pbkdf2Iter=parseInt(u,16)}catch(c){throw"malformed format pbkdf2Iter: "+u}return e},getPBKDF2KeyHexFromParam:function(t,e){var n=CryptoJS.enc.Hex.parse(t.pbkdf2Salt),r=t.pbkdf2Iter,i=CryptoJS.PBKDF2(e,n,{keySize:6,iterations:r}),o=CryptoJS.enc.Hex.stringify(i);return o},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=this.getHexFromPEM(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=PKCS5PKEY.getPBKDF2KeyHexFromParam(r,e),o={};o.ciphertext=CryptoJS.enc.Hex.parse(r.ciphertext);var s=CryptoJS.enc.Hex.parse(i),a=CryptoJS.enc.Hex.parse(r.encryptionSchemeIV),u=CryptoJS.TripleDES.decrypt(o,s,{iv:a}),c=CryptoJS.enc.Hex.stringify(u);return c},getRSAKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e),r=this.getRSAKeyFromPlainPKCS8Hex(n);return r},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e),r=this.getKeyFromPlainPrivatePKCS8Hex(n);return r},parsePlainPrivatePKCS8Hex:function(t){var e={};if(e.algparam=null,"30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(t,r[0]),"06"==t.substr(r[1],2)&&(e.algparam=ASN1HEX.getHexOfV_AtObj(t,r[1])),"04"!=t.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=ASN1HEX.getStartPosOfV_AtObj(t,n[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PRIVATE KEY"),n=this.getKeyFromPlainPrivatePKCS8Hex(e);return n},getKeyFromPlainPrivatePKCS8Hex:function(t){var e=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==e.algoid){this.parsePrivateRawRSAKeyHexAtObj(t,e);var n=e.key,r=new RSAKey;return r.setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),r}if("2a8648ce3d0201"==e.algoid){if(this.parsePrivateRawECKeyHexAtObj(t,e),void 0===KJUR.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var i=KJUR.crypto.OID.oidhex2name[e.algparam],r=new KJUR.crypto.ECDSA({curve:i,prv:e.key});return r}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY"),n=this.getRSAKeyFromPublicPKCS8Hex(e);return n},getKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY"),n=this.getKeyFromPublicPKCS8Hex(e);return n},getKeyFromPublicPKCS8Hex:function(t){var e=this.parsePublicPKCS8Hex(t);if("2a864886f70d010101"==e.algoid){var n=this.parsePublicRawRSAKeyHex(e.key),r=new RSAKey;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==e.algoid){if(void 0===KJUR.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var i=KJUR.crypto.OID.oidhex2name[e.algparam],r=new KJUR.crypto.ECDSA({curve:i,pub:e.key});return r}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(t){var e={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(n[0],2))throw"malformed RSA key(code:003)";if(e.n=ASN1HEX.getHexOfV_AtObj(t,n[0]),"02"!=t.substr(n[1],2))throw"malformed RSA key(code:004)";return e.e=ASN1HEX.getHexOfV_AtObj(t,n[1]),e},parsePrivateRawRSAKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed RSA private key(code:001)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n);if(9!=r.length)throw"malformed RSA private key(code:002)";e.key={},e.key.n=ASN1HEX.getHexOfV_AtObj(t,r[1]),e.key.e=ASN1HEX.getHexOfV_AtObj(t,r[2]),e.key.d=ASN1HEX.getHexOfV_AtObj(t,r[3]),e.key.p=ASN1HEX.getHexOfV_AtObj(t,r[4]),e.key.q=ASN1HEX.getHexOfV_AtObj(t,r[5]),e.key.dp=ASN1HEX.getHexOfV_AtObj(t,r[6]),e.key.dq=ASN1HEX.getHexOfV_AtObj(t,r[7]),e.key.co=ASN1HEX.getHexOfV_AtObj(t,r[8])},parsePrivateRawECKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed ECC private key(code:001)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n);if(3!=r.length)throw"malformed ECC private key(code:002)";if("04"!=t.substr(r[1],2))throw"malformed ECC private key(code:003)";e.key=ASN1HEX.getHexOfV_AtObj(t,r[1])},parsePublicPKCS8Hex:function(t){var e={};e.algparam=null;var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=t.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(t,i[0]),"06"==t.substr(i[1],2)&&(e.algparam=ASN1HEX.getHexOfV_AtObj(t,i[1])),"03"!=t.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=ASN1HEX.getHexOfV_AtObj(t,n[1]).substr(2),e},getRSAKeyFromPublicPKCS8Hex:function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"outer DERSequence shall have 2 elements: "+e.length;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[0]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=t.substr(e[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var r=ASN1HEX.getStartPosOfV_AtObj(t,e[1])+2;if("30"!=t.substr(r,2))throw"PKCS8 Public Key is not SEQUENCE.";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"inner DERSequence shall have 2 elements: "+i.length;if("02"!=t.substr(i[0],2))throw"N is not ASN.1 INTEGER";if("02"!=t.substr(i[1],2))throw"E is not ASN.1 INTEGER";var o=ASN1HEX.getHexOfV_AtObj(t,i[0]),s=ASN1HEX.getHexOfV_AtObj(t,i[1]),a=new RSAKey;return a.setPublic(o,s),a}}}(),KEYUTIL=function(){var t=function(t,e,n){return r(CryptoJS.AES,t,e,n)},e=function(t,e,n){return r(CryptoJS.TripleDES,t,e,n)},n=function(t,e,n){return r(CryptoJS.DES,t,e,n)},r=function(t,e,n,r){var i=CryptoJS.enc.Hex.parse(e),o=CryptoJS.enc.Hex.parse(n),s=CryptoJS.enc.Hex.parse(r),a={};a.key=o,a.iv=s,a.ciphertext=i;var u=t.decrypt(a,o,{iv:s});return CryptoJS.enc.Hex.stringify(u)},i=function(t,e,n){return a(CryptoJS.AES,t,e,n)},o=function(t,e,n){return a(CryptoJS.TripleDES,t,e,n)},s=function(t,e,n){return a(CryptoJS.DES,t,e,n)},a=function(t,e,n,r){var i=CryptoJS.enc.Hex.parse(e),o=CryptoJS.enc.Hex.parse(n),s=CryptoJS.enc.Hex.parse(r),a=t.encrypt(i,o,{iv:s}),u=CryptoJS.enc.Hex.parse(a.toString()),c=CryptoJS.enc.Base64.stringify(u);return c},u={"AES-256-CBC":{proc:t,eproc:i,keylen:32,ivlen:16},"AES-192-CBC":{proc:t,eproc:i,keylen:24,ivlen:16},"AES-128-CBC":{proc:t,eproc:i,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:e,eproc:o,keylen:24,ivlen:8},"DES-CBC":{proc:n,eproc:s,keylen:8,ivlen:8}},c=function(t){return u[t].proc},l=function(t){var e=CryptoJS.lib.WordArray.random(t),n=CryptoJS.enc.Hex.stringify(e);return n},h=function(t){var e={},n=t.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));n&&(e.cipher=n[1],e.ivsalt=n[2]);var r=t.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));r&&(e.type=r[1]);var i=-1,o=0;t.indexOf("\r\n\r\n")!=-1&&(i=t.indexOf("\r\n\r\n"),o=2),t.indexOf("\n\n")!=-1&&(i=t.indexOf("\n\n"),o=1);var s=t.indexOf("-----END");if(i!=-1&&s!=-1){var a=t.substring(i+2*o,s-o);a=a.replace(/\s+/g,""),e.data=a}return e},f=function(t,e,n){for(var r=n.substring(0,16),i=CryptoJS.enc.Hex.parse(r),o=CryptoJS.enc.Utf8.parse(e),s=u[t].keylen+u[t].ivlen,a="",c=null;;){var l=CryptoJS.algo.MD5.create();if(null!=c&&l.update(c),l.update(o),l.update(i),c=l.finalize(),a+=CryptoJS.enc.Hex.stringify(c),a.length>=2*s)break}var h={};return h.keyhex=a.substr(0,2*u[t].keylen),h.ivhex=a.substr(2*u[t].keylen,2*u[t].ivlen),h},d=function(t,e,n,r){var i=CryptoJS.enc.Base64.parse(t),o=CryptoJS.enc.Hex.stringify(i),s=u[e].proc,a=s(o,n,r);return a},p=function(t,e,n,r){var i=u[e].eproc,o=i(t,n,r);return o};return{version:"1.0.0",getHexFromPEM:function(t,e){var n=t;if(n.indexOf("-----BEGIN ")==-1)throw"can't find PEM header: "+e;"string"==typeof e&&""!=e?(n=n.replace("-----BEGIN "+e+"-----",""),n=n.replace("-----END "+e+"-----","")):(n=n.replace(/-----BEGIN [^-]+-----/,""),n=n.replace(/-----END [^-]+-----/,""));var r=n.replace(/\s+/g,""),i=b64tohex(r);return i},getDecryptedKeyHexByKeyIV:function(t,e,n,r){var i=c(e);return i(t,n,r)},parsePKCS5PEM:function(t){return h(t)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(t,e,n){return f(t,e,n)},decryptKeyB64:function(t,e,n,r){return d(t,e,n,r)},getDecryptedKeyHex:function(t,e){var n=h(t),r=(n.type,n.cipher),i=n.ivsalt,o=n.data,s=f(r,e,i),a=s.keyhex,u=d(o,r,a,i);return u},getRSAKeyFromEncryptedPKCS5PEM:function(t,e){var n=this.getDecryptedKeyHex(t,e),r=new RSAKey;return r.readPrivateKeyFromASN1HexString(n),r},getEncryptedPKCS5PEMFromPrvKeyHex:function(t,e,n,r,i){var o="";if("undefined"!=typeof r&&null!=r||(r="AES-256-CBC"),"undefined"==typeof u[r])throw"KEYUTIL unsupported algorithm: "+r;if("undefined"==typeof i||null==i){var s=u[r].ivlen,a=l(s);i=a.toUpperCase()}var c=f(r,n,i),h=c.keyhex,d=p(e,r,h,i),g=d.replace(/(.{64})/g,"$1\r\n"),o="-----BEGIN "+t+" PRIVATE KEY-----\r\n";return o+="Proc-Type: 4,ENCRYPTED\r\n",o+="DEK-Info: "+r+","+i+"\r\n",o+="\r\n",o+=g,o+="\r\n-----END "+t+" PRIVATE KEY-----\r\n"},getEncryptedPKCS5PEMFromRSAKey:function(t,e,n,r){var i=new KJUR.asn1.DERInteger({"int":0}),o=new KJUR.asn1.DERInteger({bigint:t.n}),s=new KJUR.asn1.DERInteger({"int":t.e}),a=new KJUR.asn1.DERInteger({bigint:t.d}),u=new KJUR.asn1.DERInteger({bigint:t.p}),c=new KJUR.asn1.DERInteger({bigint:t.q}),l=new KJUR.asn1.DERInteger({bigint:t.dmp1}),h=new KJUR.asn1.DERInteger({bigint:t.dmq1}),f=new KJUR.asn1.DERInteger({bigint:t.coeff}),d=new KJUR.asn1.DERSequence({array:[i,o,s,a,u,c,l,h,f]}),p=d.getEncodedHex();return this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",p,e,n,r)},newEncryptedPKCS5PEM:function(t,e,n,r){"undefined"!=typeof e&&null!=e||(e=1024),"undefined"!=typeof n&&null!=n||(n="10001");var i=new RSAKey;i.generate(e,n);var o=null;return o="undefined"==typeof r||null==r?this.getEncryptedPKCS5PEMFromRSAKey(i,t):this.getEncryptedPKCS5PEMFromRSAKey(i,t,r)},getRSAKeyFromPlainPKCS8PEM:function(t){if(t.match(/ENCRYPTED/))throw"pem shall be not ENCRYPTED";var e=this.getHexFromPEM(t,"PRIVATE KEY"),n=this.getRSAKeyFromPlainPKCS8Hex(e);return n},getRSAKeyFromPlainPKCS8Hex:function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"outer DERSequence shall have 3 elements: "+e.length;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[1]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmIdentifier is not rsaEnc: "+n;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[1]),r=ASN1HEX.getHexOfTLV_AtObj(t,e[2]),i=ASN1HEX.getHexOfV_AtObj(r,0),o=new RSAKey;return o.readPrivateKeyFromASN1HexString(i),o},parseHexOfEncryptedPKCS8:function(t){var e={},n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed format: SEQUENCE(0).items != 2: "+n.length;e.ciphertext=ASN1HEX.getHexOfV_AtObj(t,n[1]);var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n[0]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+r.length;if("2a864886f70d01050d"!=ASN1HEX.getHexOfV_AtObj(t,r[0]))throw"this only supports pkcs5PBES2";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r[1]);if(2!=r.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+i.length;var o=ASN1HEX.getPosArrayOfChildren_AtObj(t,i[1]);if(2!=o.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+o.length;if("2a864886f70d0307"!=ASN1HEX.getHexOfV_AtObj(t,o[0]))throw"this only supports TripleDES";e.encryptionSchemeAlg="TripleDES",e.encryptionSchemeIV=ASN1HEX.getHexOfV_AtObj(t,o[1]);var s=ASN1HEX.getPosArrayOfChildren_AtObj(t,i[0]);if(2!=s.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+s.length;if("2a864886f70d01050c"!=ASN1HEX.getHexOfV_AtObj(t,s[0]))throw"this only supports pkcs5PBKDF2";var a=ASN1HEX.getPosArrayOfChildren_AtObj(t,s[1]);if(a.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+a.length;e.pbkdf2Salt=ASN1HEX.getHexOfV_AtObj(t,a[0]);var u=ASN1HEX.getHexOfV_AtObj(t,a[1]);try{e.pbkdf2Iter=parseInt(u,16)}catch(c){throw"malformed format pbkdf2Iter: "+u}return e},getPBKDF2KeyHexFromParam:function(t,e){var n=CryptoJS.enc.Hex.parse(t.pbkdf2Salt),r=t.pbkdf2Iter,i=CryptoJS.PBKDF2(e,n,{keySize:6,iterations:r}),o=CryptoJS.enc.Hex.stringify(i);return o},getPlainPKCS8HexFromEncryptedPKCS8PEM:function(t,e){var n=this.getHexFromPEM(t,"ENCRYPTED PRIVATE KEY"),r=this.parseHexOfEncryptedPKCS8(n),i=KEYUTIL.getPBKDF2KeyHexFromParam(r,e),o={};o.ciphertext=CryptoJS.enc.Hex.parse(r.ciphertext);var s=CryptoJS.enc.Hex.parse(i),a=CryptoJS.enc.Hex.parse(r.encryptionSchemeIV),u=CryptoJS.TripleDES.decrypt(o,s,{iv:a}),c=CryptoJS.enc.Hex.stringify(u);return c},getRSAKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e),r=this.getRSAKeyFromPlainPKCS8Hex(n);return r},getKeyFromEncryptedPKCS8PEM:function(t,e){var n=this.getPlainPKCS8HexFromEncryptedPKCS8PEM(t,e),r=this.getKeyFromPlainPrivatePKCS8Hex(n);return r},parsePlainPrivatePKCS8Hex:function(t){var e={};if(e.algparam=null,"30"!=t.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=n.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=t.substr(n[1],2))throw"malformed PKCS8 private key(code:003)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n[1]);if(2!=r.length)throw"malformed PKCS8 private key(code:004)";if("06"!=t.substr(r[0],2))throw"malformed PKCS8 private key(code:005)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(t,r[0]),"06"==t.substr(r[1],2)&&(e.algparam=ASN1HEX.getHexOfV_AtObj(t,r[1])),"04"!=t.substr(n[2],2))throw"malformed PKCS8 private key(code:006)";return e.keyidx=ASN1HEX.getStartPosOfV_AtObj(t,n[2]),e},getKeyFromPlainPrivatePKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PRIVATE KEY"),n=this.getKeyFromPlainPrivatePKCS8Hex(e);return n},getKeyFromPlainPrivatePKCS8Hex:function(t){var e=this.parsePlainPrivatePKCS8Hex(t);if("2a864886f70d010101"==e.algoid){this.parsePrivateRawRSAKeyHexAtObj(t,e);var n=e.key,r=new RSAKey;return r.setPrivateEx(n.n,n.e,n.d,n.p,n.q,n.dp,n.dq,n.co),r}if("2a8648ce3d0201"==e.algoid){if(this.parsePrivateRawECKeyHexAtObj(t,e),void 0===KJUR.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var i=KJUR.crypto.OID.oidhex2name[e.algparam],r=new KJUR.crypto.ECDSA({curve:i});return r.setPublicKeyHex(e.pubkey),r.setPrivateKeyHex(e.key),r.isPublic=!1,r}if("2a8648ce380401"==e.algoid){var o=ASN1HEX.getVbyList(t,0,[1,1,0],"02"),s=ASN1HEX.getVbyList(t,0,[1,1,1],"02"),a=ASN1HEX.getVbyList(t,0,[1,1,2],"02"),u=ASN1HEX.getVbyList(t,0,[2,0],"02"),c=new BigInteger(o,16),l=new BigInteger(s,16),h=new BigInteger(a,16),f=new BigInteger(u,16),r=new KJUR.crypto.DSA;return r.setPrivate(c,l,h,null,f),r}throw"unsupported private key algorithm"},getRSAKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY"),n=this.getRSAKeyFromPublicPKCS8Hex(e);return n},getKeyFromPublicPKCS8PEM:function(t){var e=this.getHexFromPEM(t,"PUBLIC KEY"),n=this.getKeyFromPublicPKCS8Hex(e);return n},getKeyFromPublicPKCS8Hex:function(t){var e=this.parsePublicPKCS8Hex(t);if("2a864886f70d010101"==e.algoid){var n=this.parsePublicRawRSAKeyHex(e.key),r=new RSAKey;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==e.algoid){if(void 0===KJUR.crypto.OID.oidhex2name[e.algparam])throw"KJUR.crypto.OID.oidhex2name undefined: "+e.algparam;var i=KJUR.crypto.OID.oidhex2name[e.algparam],r=new KJUR.crypto.ECDSA({curve:i,pub:e.key});return r}if("2a8648ce380401"==e.algoid){var o=e.algparam,s=ASN1HEX.getHexOfV_AtObj(e.key,0),r=new KJUR.crypto.DSA;return r.setPublic(new BigInteger(o.p,16),new BigInteger(o.q,16),new BigInteger(o.g,16),new BigInteger(s,16)),r}throw"unsupported public key algorithm"},parsePublicRawRSAKeyHex:function(t){var e={};if("30"!=t.substr(0,2))throw"malformed RSA key(code:001)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"malformed RSA key(code:002)";if("02"!=t.substr(n[0],2))throw"malformed RSA key(code:003)";if(e.n=ASN1HEX.getHexOfV_AtObj(t,n[0]),"02"!=t.substr(n[1],2))throw"malformed RSA key(code:004)";return e.e=ASN1HEX.getHexOfV_AtObj(t,n[1]),e},parsePrivateRawRSAKeyHexAtObj:function(t,e){var n=e.keyidx;if("30"!=t.substr(n,2))throw"malformed RSA private key(code:001)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n);if(9!=r.length)throw"malformed RSA private key(code:002)";e.key={},e.key.n=ASN1HEX.getHexOfV_AtObj(t,r[1]),e.key.e=ASN1HEX.getHexOfV_AtObj(t,r[2]),e.key.d=ASN1HEX.getHexOfV_AtObj(t,r[3]),e.key.p=ASN1HEX.getHexOfV_AtObj(t,r[4]),e.key.q=ASN1HEX.getHexOfV_AtObj(t,r[5]),e.key.dp=ASN1HEX.getHexOfV_AtObj(t,r[6]),e.key.dq=ASN1HEX.getHexOfV_AtObj(t,r[7]),e.key.co=ASN1HEX.getHexOfV_AtObj(t,r[8])},parsePrivateRawECKeyHexAtObj:function(t,e){var n=e.keyidx,r=ASN1HEX.getVbyList(t,n,[1],"04"),i=ASN1HEX.getVbyList(t,n,[2,0],"03").substr(2);e.key=r,e.pubkey=i},parsePublicPKCS8Hex:function(t){var e={};e.algparam=null;var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=n.length)throw"outer DERSequence shall have 2 elements: "+n.length;var r=n[0];if("30"!=t.substr(r,2))throw"malformed PKCS8 public key(code:001)";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"malformed PKCS8 public key(code:002)";if("06"!=t.substr(i[0],2))throw"malformed PKCS8 public key(code:003)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(t,i[0]),"06"==t.substr(i[1],2)?e.algparam=ASN1HEX.getHexOfV_AtObj(t,i[1]):"30"==t.substr(i[1],2)&&(e.algparam={},e.algparam.p=ASN1HEX.getVbyList(t,i[1],[0],"02"),e.algparam.q=ASN1HEX.getVbyList(t,i[1],[1],"02"),e.algparam.g=ASN1HEX.getVbyList(t,i[1],[2],"02")),"03"!=t.substr(n[1],2))throw"malformed PKCS8 public key(code:004)";return e.key=ASN1HEX.getHexOfV_AtObj(t,n[1]).substr(2),e},getRSAKeyFromPublicPKCS8Hex:function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(2!=e.length)throw"outer DERSequence shall have 2 elements: "+e.length;var n=ASN1HEX.getHexOfTLV_AtObj(t,e[0]);if("300d06092a864886f70d0101010500"!=n)throw"PKCS8 AlgorithmId is not rsaEncryption";if("03"!=t.substr(e[1],2))throw"PKCS8 Public Key is not BITSTRING encapslated.";var r=ASN1HEX.getStartPosOfV_AtObj(t,e[1])+2;if("30"!=t.substr(r,2))throw"PKCS8 Public Key is not SEQUENCE.";var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r);if(2!=i.length)throw"inner DERSequence shall have 2 elements: "+i.length;if("02"!=t.substr(i[0],2))throw"N is not ASN.1 INTEGER";if("02"!=t.substr(i[1],2))throw"E is not ASN.1 INTEGER";var o=ASN1HEX.getHexOfV_AtObj(t,i[0]),s=ASN1HEX.getHexOfV_AtObj(t,i[1]),a=new RSAKey;return a.setPublic(o,s),a}}}();KEYUTIL.getKey=function(t,e,n){if("undefined"!=typeof RSAKey&&t instanceof RSAKey)return t;if("undefined"!=typeof KJUR.crypto.ECDSA&&t instanceof KJUR.crypto.ECDSA)return t;if("undefined"!=typeof KJUR.crypto.DSA&&t instanceof KJUR.crypto.DSA)return t;if(void 0!==t.curve&&void 0!==t.xy&&void 0===t.d)return new KJUR.crypto.ECDSA({pub:t.xy,curve:t.curve});if(void 0!==t.curve&&void 0!==t.d)return new KJUR.crypto.ECDSA({prv:t.d,curve:t.curve});if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d){var r=new RSAKey;return r.setPublic(t.n,t.e),r}if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.co&&void 0===t.qi){var r=new RSAKey;return r.setPrivateEx(t.n,t.e,t.d,t.p,t.q,t.dp,t.dq,t.co),r}if(void 0===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0===t.p){var r=new RSAKey;return r.setPrivate(t.n,t.e,t.d),r}if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0===t.x){var r=new KJUR.crypto.DSA;return r.setPublic(t.p,t.q,t.g,t.y),r}if(void 0!==t.p&&void 0!==t.q&&void 0!==t.g&&void 0!==t.y&&void 0!==t.x){var r=new KJUR.crypto.DSA;return r.setPrivate(t.p,t.q,t.g,t.y,t.x),r}if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0===t.d){var r=new RSAKey;return r.setPublic(b64utohex(t.n),b64utohex(t.e)),r}if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d&&void 0!==t.p&&void 0!==t.q&&void 0!==t.dp&&void 0!==t.dq&&void 0!==t.qi){var r=new RSAKey;return r.setPrivateEx(b64utohex(t.n),b64utohex(t.e),b64utohex(t.d),b64utohex(t.p),b64utohex(t.q),b64utohex(t.dp),b64utohex(t.dq),b64utohex(t.qi)),r}if("RSA"===t.kty&&void 0!==t.n&&void 0!==t.e&&void 0!==t.d){var r=new RSAKey;return r.setPrivate(b64utohex(t.n),b64utohex(t.e),b64utohex(t.d)),r}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0===t.d){var i=new KJUR.crypto.ECDSA({curve:t.crv}),o=i.ecparams.keylen/4,s=("0000000000"+b64utohex(t.x)).slice(-o),a=("0000000000"+b64utohex(t.y)).slice(-o),u="04"+s+a;return i.setPublicKeyHex(u),i}if("EC"===t.kty&&void 0!==t.crv&&void 0!==t.x&&void 0!==t.y&&void 0!==t.d){var i=new KJUR.crypto.ECDSA({curve:t.crv}),o=i.ecparams.keylen/4,s=("0000000000"+b64utohex(t.x)).slice(-o),a=("0000000000"+b64utohex(t.y)).slice(-o),u="04"+s+a,c=("0000000000"+b64utohex(t.d)).slice(-o);return i.setPublicKeyHex(u),i.setPrivateKeyHex(c),i}if(t.indexOf("-END CERTIFICATE-",0)!=-1||t.indexOf("-END X509 CERTIFICATE-",0)!=-1||t.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return X509.getPublicKeyFromCertPEM(t);if("pkcs8pub"===n)return KEYUTIL.getKeyFromPublicPKCS8Hex(t);if(t.indexOf("-END PUBLIC KEY-")!=-1)return KEYUTIL.getKeyFromPublicPKCS8PEM(t);if("pkcs5prv"===n){var r=new RSAKey;return r.readPrivateKeyFromASN1HexString(t),r}if("pkcs5prv"===n){var r=new RSAKey;return r.readPrivateKeyFromASN1HexString(t),r}if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var l=KEYUTIL.getHexFromPEM(t,"RSA PRIVATE KEY");return KEYUTIL.getKey(l,null,"pkcs5prv")}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")==-1){var h=this.getHexFromPEM(t,"DSA PRIVATE KEY"),f=ASN1HEX.getVbyList(h,0,[1],"02"),d=ASN1HEX.getVbyList(h,0,[2],"02"),p=ASN1HEX.getVbyList(h,0,[3],"02"),g=ASN1HEX.getVbyList(h,0,[4],"02"),v=ASN1HEX.getVbyList(h,0,[5],"02"),r=new KJUR.crypto.DSA;return r.setPrivate(new BigInteger(f,16),new BigInteger(d,16),new BigInteger(p,16),new BigInteger(g,16),new BigInteger(v,16)),r}if(t.indexOf("-END PRIVATE KEY-")!=-1)return KEYUTIL.getKeyFromPlainPrivatePKCS8PEM(t);if(t.indexOf("-END RSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1)return KEYUTIL.getRSAKeyFromEncryptedPKCS5PEM(t,e);if(t.indexOf("-END EC PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var h=KEYUTIL.getDecryptedKeyHex(t,e),r=ASN1HEX.getVbyList(h,0,[1],"04"),m=ASN1HEX.getVbyList(h,0,[2,0],"06"),y=ASN1HEX.getVbyList(h,0,[3,0],"03").substr(2),b="";if(void 0===KJUR.crypto.OID.oidhex2name[m])throw"undefined OID(hex) in KJUR.crypto.OID: "+m;b=KJUR.crypto.OID.oidhex2name[m];var i=new KJUR.crypto.ECDSA({name:b});return i.setPublicKeyHex(y),i.setPrivateKeyHex(r),i.isPublic=!1,i}if(t.indexOf("-END DSA PRIVATE KEY-")!=-1&&t.indexOf("4,ENCRYPTED")!=-1){var h=KEYUTIL.getDecryptedKeyHex(t,e),f=ASN1HEX.getVbyList(h,0,[1],"02"),d=ASN1HEX.getVbyList(h,0,[2],"02"),p=ASN1HEX.getVbyList(h,0,[3],"02"),g=ASN1HEX.getVbyList(h,0,[4],"02"),v=ASN1HEX.getVbyList(h,0,[5],"02"),r=new KJUR.crypto.DSA;return r.setPrivate(new BigInteger(f,16),new BigInteger(d,16),new BigInteger(p,16),new BigInteger(g,16),new BigInteger(v,16)),r}if(t.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return KEYUTIL.getKeyFromEncryptedPKCS8PEM(t,e);throw"not supported argument"},KEYUTIL.generateKeypair=function(t,e){if("RSA"==t){var n=e,r=new RSAKey;r.generate(n,"10001"),r.isPrivate=!0,r.isPublic=!0;var i=new RSAKey,o=r.n.toString(16),s=r.e.toString(16);i.setPublic(o,s),i.isPrivate=!1,i.isPublic=!0;var a={};return a.prvKeyObj=r,a.pubKeyObj=i,a}if("EC"==t){var u=e,c=new KJUR.crypto.ECDSA({curve:u}),l=c.generateKeyPairHex(),r=new KJUR.crypto.ECDSA({curve:u});r.setPublicKeyHex(l.ecpubhex),r.setPrivateKeyHex(l.ecprvhex),r.isPrivate=!0,r.isPublic=!1;var i=new KJUR.crypto.ECDSA({curve:u});i.setPublicKeyHex(l.ecpubhex),i.isPrivate=!1,i.isPublic=!0;var a={};return a.prvKeyObj=r,a.pubKeyObj=i,a}throw"unknown algorithm: "+t},KEYUTIL.getPEM=function(t,e,n,r,i){function o(t){var e=KJUR.asn1.ASN1Util.newObject({seq:[{"int":0},{"int":{bigint:t.n}},{"int":t.e},{"int":{bigint:t.d}},{"int":{bigint:t.p}},{"int":{bigint:t.q}},{"int":{bigint:t.dmp1}},{"int":{bigint:t.dmq1}},{"int":{bigint:t.coeff}}]});return e}function s(t){var e=KJUR.asn1.ASN1Util.newObject({seq:[{"int":1},{octstr:{hex:t.prvKeyHex}},{tag:["a0",!0,{oid:{name:t.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]});return e}function a(t){var e=KJUR.asn1.ASN1Util.newObject({seq:[{"int":0},{"int":{bigint:t.p}},{"int":{bigint:t.q}},{"int":{bigint:t.g}},{"int":{bigint:t.y}},{"int":{bigint:t.x}}]});return e}var u=KJUR.asn1,c=KJUR.crypto;if(("undefined"!=typeof RSAKey&&t instanceof RSAKey||"undefined"!=typeof c.DSA&&t instanceof c.DSA||"undefined"!=typeof c.ECDSA&&t instanceof c.ECDSA)&&1==t.isPublic&&(void 0===e||"PKCS8PUB"==e)){var l=new KJUR.asn1.x509.SubjectPublicKeyInfo(t),h=l.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(h,"PUBLIC KEY")}if("PKCS1PRV"==e&&"undefined"!=typeof RSAKey&&t instanceof RSAKey&&(void 0===n||null==n)&&1==t.isPrivate){var l=o(t),h=l.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(h,"RSA PRIVATE KEY")}if("PKCS1PRV"==e&&"undefined"!=typeof RSAKey&&t instanceof KJUR.crypto.ECDSA&&(void 0===n||null==n)&&1==t.isPrivate){var f=new KJUR.asn1.DERObjectIdentifier({name:t.curveName}),d=f.getEncodedHex(),p=s(t),g=p.getEncodedHex(),v="";return v+=u.ASN1Util.getPEMStringFromHex(d,"EC PARAMETERS"),v+=u.ASN1Util.getPEMStringFromHex(g,"EC PRIVATE KEY")}if("PKCS1PRV"==e&&"undefined"!=typeof KJUR.crypto.DSA&&t instanceof KJUR.crypto.DSA&&(void 0===n||null==n)&&1==t.isPrivate){var l=a(t),h=l.getEncodedHex();return u.ASN1Util.getPEMStringFromHex(h,"DSA PRIVATE KEY")}if("PKCS5PRV"==e&&"undefined"!=typeof RSAKey&&t instanceof RSAKey&&void 0!==n&&null!=n&&1==t.isPrivate){var l=o(t),h=l.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",h,n,r)}if("PKCS5PRV"==e&&"undefined"!=typeof KJUR.crypto.ECDSA&&t instanceof KJUR.crypto.ECDSA&&void 0!==n&&null!=n&&1==t.isPrivate){var l=s(t),h=l.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",h,n,r)}if("PKCS5PRV"==e&&"undefined"!=typeof KJUR.crypto.DSA&&t instanceof KJUR.crypto.DSA&&void 0!==n&&null!=n&&1==t.isPrivate){var l=a(t),h=l.getEncodedHex();return void 0===r&&(r="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",h,n,r)}var m=function(t,e){var n=y(t,e),r=new KJUR.asn1.ASN1Util.newObject({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:n.pbkdf2Salt}},{"int":n.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:n.encryptionSchemeIV}}]}]}]},{octstr:{hex:n.ciphertext}}]});return r.getEncodedHex()},y=function(t,e){var n=100,r=CryptoJS.lib.WordArray.random(8),i="DES-EDE3-CBC",o=CryptoJS.lib.WordArray.random(8),s=CryptoJS.PBKDF2(e,r,{keySize:6,iterations:n}),a=CryptoJS.enc.Hex.parse(t),u=CryptoJS.TripleDES.encrypt(a,s,{iv:o})+"",c={};return c.ciphertext=u,c.pbkdf2Salt=CryptoJS.enc.Hex.stringify(r),c.pbkdf2Iter=n,c.encryptionSchemeAlg=i,c.encryptionSchemeIV=CryptoJS.enc.Hex.stringify(o),c};if("PKCS8PRV"==e&&"undefined"!=typeof RSAKey&&t instanceof RSAKey&&1==t.isPrivate){var b=o(t),_=b.getEncodedHex(),l=KJUR.asn1.ASN1Util.newObject({seq:[{"int":0},{seq:[{oid:{name:"rsaEncryption"}},{"null":!0}]},{octstr:{hex:_}}]}),h=l.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(h,"PRIVATE KEY");var g=m(h,n);return u.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&"undefined"!=typeof KJUR.crypto.ECDSA&&t instanceof KJUR.crypto.ECDSA&&1==t.isPrivate){var b=new KJUR.asn1.ASN1Util.newObject({seq:[{"int":1},{octstr:{hex:t.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+t.pubKeyHex}}]}]}),_=b.getEncodedHex(),l=KJUR.asn1.ASN1Util.newObject({seq:[{"int":0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:t.curveName}}]},{octstr:{hex:_}}]}),h=l.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(h,"PRIVATE KEY");var g=m(h,n);
return u.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==e&&"undefined"!=typeof KJUR.crypto.DSA&&t instanceof KJUR.crypto.DSA&&1==t.isPrivate){var b=new KJUR.asn1.DERInteger({bigint:t.x}),_=b.getEncodedHex(),l=KJUR.asn1.ASN1Util.newObject({seq:[{"int":0},{seq:[{oid:{name:"dsa"}},{seq:[{"int":{bigint:t.p}},{"int":{bigint:t.q}},{"int":{bigint:t.g}}]}]},{octstr:{hex:_}}]}),h=l.getEncodedHex();if(void 0===n||null==n)return u.ASN1Util.getPEMStringFromHex(h,"PRIVATE KEY");var g=m(h,n);return u.ASN1Util.getPEMStringFromHex(g,"ENCRYPTED PRIVATE KEY")}throw"unsupported object nor format"},KEYUTIL.getKeyFromCSRPEM=function(t){var e=KEYUTIL.getHexFromPEM(t,"CERTIFICATE REQUEST"),n=KEYUTIL.getKeyFromCSRHex(e);return n},KEYUTIL.getKeyFromCSRHex=function(t){var e=KEYUTIL.parseCSRHex(t),n=KEYUTIL.getKey(e.p8pubkeyhex,null,"pkcs8pub");return n},KEYUTIL.parseCSRHex=function(t){var e={},n=t;if("30"!=n.substr(0,2))throw"malformed CSR(code:001)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0);if(r.length<1)throw"malformed CSR(code:002)";if("30"!=n.substr(r[0],2))throw"malformed CSR(code:003)";var i=ASN1HEX.getPosArrayOfChildren_AtObj(n,r[0]);if(i.length<3)throw"malformed CSR(code:004)";return e.p8pubkeyhex=ASN1HEX.getHexOfTLV_AtObj(n,i[2]),e},KEYUTIL.getJWKFromKey=function(t){var e={};if(t instanceof RSAKey&&t.isPrivate)return e.kty="RSA",e.n=hextob64u(t.n.toString(16)),e.e=hextob64u(t.e.toString(16)),e.d=hextob64u(t.d.toString(16)),e.p=hextob64u(t.p.toString(16)),e.q=hextob64u(t.q.toString(16)),e.dp=hextob64u(t.dmp1.toString(16)),e.dq=hextob64u(t.dmq1.toString(16)),e.qi=hextob64u(t.coeff.toString(16)),e;if(t instanceof RSAKey&&t.isPublic)return e.kty="RSA",e.n=hextob64u(t.n.toString(16)),e.e=hextob64u(t.e.toString(16)),e;if(t instanceof KJUR.crypto.ECDSA&&t.isPrivate){var n=t.getShortNISTPCurveName();if("P-256"!==n&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=hextob64u(r.x),e.y=hextob64u(r.y),e.d=hextob64u(t.prvKeyHex),e}if(t instanceof KJUR.crypto.ECDSA&&t.isPublic){var n=t.getShortNISTPCurveName();if("P-256"!==n&&"P-384"!==n)throw"unsupported curve name for JWT: "+n;var r=t.getPublicKeyXYHex();return e.kty="EC",e.crv=n,e.x=hextob64u(r.x),e.y=hextob64u(r.y),e}throw"not supported key object"},RSAKey.prototype.readPrivateKeyFromPEMString=_rsapem_readPrivateKeyFromPEMString,RSAKey.prototype.readPrivateKeyFromASN1HexString=_rsapem_readPrivateKeyFromASN1HexString;var _RE_HEXDECONLY=new RegExp("");_RE_HEXDECONLY.compile("[^0-9a-f]","gi"),RSAKey.prototype.signWithMessageHash=_rsasign_signWithMessageHash,RSAKey.prototype.signString=_rsasign_signString,RSAKey.prototype.signStringWithSHA1=_rsasign_signStringWithSHA1,RSAKey.prototype.signStringWithSHA256=_rsasign_signStringWithSHA256,RSAKey.prototype.sign=_rsasign_signString,RSAKey.prototype.signWithSHA1=_rsasign_signStringWithSHA1,RSAKey.prototype.signWithSHA256=_rsasign_signStringWithSHA256,RSAKey.prototype.signWithMessageHashPSS=_rsasign_signWithMessageHashPSS,RSAKey.prototype.signStringPSS=_rsasign_signStringPSS,RSAKey.prototype.signPSS=_rsasign_signStringPSS,RSAKey.SALT_LEN_HLEN=-1,RSAKey.SALT_LEN_MAX=-2,RSAKey.prototype.verifyWithMessageHash=_rsasign_verifyWithMessageHash,RSAKey.prototype.verifyString=_rsasign_verifyString,RSAKey.prototype.verifyHexSignatureForMessage=_rsasign_verifyHexSignatureForMessage,RSAKey.prototype.verify=_rsasign_verifyString,RSAKey.prototype.verifyHexSignatureForByteArrayMessage=_rsasign_verifyHexSignatureForMessage,RSAKey.prototype.verifyWithMessageHashPSS=_rsasign_verifyWithMessageHashPSS,RSAKey.prototype.verifyStringPSS=_rsasign_verifyStringPSS,RSAKey.prototype.verifyPSS=_rsasign_verifyStringPSS,RSAKey.SALT_LEN_RECOVER=-2,X509.pemToBase64=function(t){var e=t;return e=e.replace("-----BEGIN CERTIFICATE-----",""),e=e.replace("-----END CERTIFICATE-----",""),e=e.replace(/[ \n]+/g,"")},X509.pemToHex=function(t){var e=X509.pemToBase64(t),n=b64tohex(e);return n},X509.getSubjectPublicKeyPosFromCertHex=function(t){var e=X509.getSubjectPublicKeyInfoPosFromCertHex(t);if(e==-1)return-1;var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(2!=n.length)return-1;var r=n[1];if("03"!=t.substring(r,r+2))return-1;var i=ASN1HEX.getStartPosOfV_AtObj(t,r);return"00"!=t.substring(i,i+2)?-1:i+2},X509.getSubjectPublicKeyInfoPosFromCertHex=function(t){var e=ASN1HEX.getStartPosOfV_AtObj(t,0),n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);return n.length<1?-1:"a003020102"==t.substring(n[0],n[0]+10)?n.length<6?-1:n[6]:n.length<5?-1:n[5]},X509.getPublicKeyHexArrayFromCertHex=function(t){var e=X509.getSubjectPublicKeyPosFromCertHex(t),n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(2!=n.length)return[];var r=ASN1HEX.getHexOfV_AtObj(t,n[0]),i=ASN1HEX.getHexOfV_AtObj(t,n[1]);return null!=r&&null!=i?[r,i]:[]},X509.getHexTbsCertificateFromCert=function(t){var e=ASN1HEX.getStartPosOfV_AtObj(t,0);return e},X509.getPublicKeyHexArrayFromCertPEM=function(t){var e=X509.pemToHex(t),n=X509.getPublicKeyHexArrayFromCertHex(e);return n},X509.hex2dn=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed DN";for(var n=new Array,r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e),i=0;i<r.length;i++)n.push(X509.hex2rdn(t,r[i]));return n=n.map(function(t){return t.replace("/","\\/")}),"/"+n.join("/")},X509.hex2rdn=function(t,e){if(void 0===e&&(e=0),"31"!==t.substr(e,2))throw"malformed RDN";for(var n=new Array,r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e),i=0;i<r.length;i++)n.push(X509.hex2attrTypeValue(t,r[i]));return n=n.map(function(t){return t.replace("+","\\+")}),n.join("+")},X509.hex2attrTypeValue=function(t,e){if(void 0===e&&(e=0),"30"!==t.substr(e,2))throw"malformed attribute type and value";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);2!==n.length||"06"!==t.substr(n[0],2);var r=ASN1HEX.getHexOfV_AtObj(t,n[0]),i=KJUR.asn1.ASN1Util.oidHexToInt(r),o=KJUR.asn1.x509.OID.oid2atype(i),s=ASN1HEX.getHexOfV_AtObj(t,n[1]),a=hextorstr(s);return o+"="+a},X509.getPublicKeyFromCertPEM=function(t){var e=X509.getPublicKeyInfoPropOfCertPEM(t);if("2a864886f70d010101"==e.algoid){var n=KEYUTIL.parsePublicRawRSAKeyHex(e.keyhex),r=new RSAKey;return r.setPublic(n.n,n.e),r}if("2a8648ce3d0201"==e.algoid){var i=KJUR.crypto.OID.oidhex2name[e.algparam],r=new KJUR.crypto.ECDSA({curve:i,info:e.keyhex});return r.setPublicKeyHex(e.keyhex),r}if("2a8648ce380401"==e.algoid){var o=ASN1HEX.getVbyList(e.algparam,0,[0],"02"),s=ASN1HEX.getVbyList(e.algparam,0,[1],"02"),a=ASN1HEX.getVbyList(e.algparam,0,[2],"02"),u=ASN1HEX.getHexOfV_AtObj(e.keyhex,0);u=u.substr(2);var r=new KJUR.crypto.DSA;return r.setPublic(new BigInteger(o,16),new BigInteger(s,16),new BigInteger(a,16),new BigInteger(u,16)),r}throw"unsupported key"},X509.getPublicKeyInfoPropOfCertPEM=function(t){var e={};e.algparam=null;var n=X509.pemToHex(t),r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0);if(3!=r.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=n.substr(r[0],2))throw"malformed X.509 certificate PEM (code:002)";var i=ASN1HEX.getPosArrayOfChildren_AtObj(n,r[0]),o=6;if("a0"!==n.substr(i[0],2)&&(o=5),i.length<o+1)throw"malformed X.509 certificate PEM (code:003)";var s=ASN1HEX.getPosArrayOfChildren_AtObj(n,i[o]);if(2!=s.length)throw"malformed X.509 certificate PEM (code:004)";var a=ASN1HEX.getPosArrayOfChildren_AtObj(n,s[0]);if(2!=a.length)throw"malformed X.509 certificate PEM (code:005)";if(e.algoid=ASN1HEX.getHexOfV_AtObj(n,a[0]),"06"==n.substr(a[1],2)?e.algparam=ASN1HEX.getHexOfV_AtObj(n,a[1]):"30"==n.substr(a[1],2)&&(e.algparam=ASN1HEX.getHexOfTLV_AtObj(n,a[1])),"03"!=n.substr(s[1],2))throw"malformed X.509 certificate PEM (code:006)";var u=ASN1HEX.getHexOfV_AtObj(n,s[1]);return e.keyhex=u.substr(2),e},X509.getPublicKeyInfoPosOfCertHEX=function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=t.substr(e[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e[0]);if(n.length<7)throw"malformed X.509 certificate PEM (code:003)";return n[6]},X509.getV3ExtInfoListOfCertHex=function(t){var e=ASN1HEX.getPosArrayOfChildren_AtObj(t,0);if(3!=e.length)throw"malformed X.509 certificate PEM (code:001)";if("30"!=t.substr(e[0],2))throw"malformed X.509 certificate PEM (code:002)";var n=ASN1HEX.getPosArrayOfChildren_AtObj(t,e[0]);if(n.length<8)throw"malformed X.509 certificate PEM (code:003)";if("a3"!=t.substr(n[7],2))throw"malformed X.509 certificate PEM (code:004)";var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n[7]);if(1!=r.length)throw"malformed X.509 certificate PEM (code:005)";if("30"!=t.substr(r[0],2))throw"malformed X.509 certificate PEM (code:006)";for(var i=ASN1HEX.getPosArrayOfChildren_AtObj(t,r[0]),o=i.length,s=new Array(o),a=0;a<o;a++)s[a]=X509.getV3ExtItemInfo_AtObj(t,i[a]);return s},X509.getV3ExtItemInfo_AtObj=function(t,e){var n={};n.posTLV=e;var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,e);if(2!=r.length&&3!=r.length)throw"malformed X.509v3 Ext (code:001)";if("06"!=t.substr(r[0],2))throw"malformed X.509v3 Ext (code:002)";var i=ASN1HEX.getHexOfV_AtObj(t,r[0]);n.oid=ASN1HEX.hextooidstr(i),n.critical=!1,3==r.length&&(n.critical=!0);var o=r[r.length-1];if("04"!=t.substr(o,2))throw"malformed X.509v3 Ext (code:003)";return n.posV=ASN1HEX.getStartPosOfV_AtObj(t,o),n},X509.getHexOfTLV_V3ExtValue=function(t,e){var n=X509.getPosOfTLV_V3ExtValue(t,e);return n==-1?null:ASN1HEX.getHexOfTLV_AtObj(t,n)},X509.getHexOfV_V3ExtValue=function(t,e){var n=X509.getPosOfTLV_V3ExtValue(t,e);return n==-1?null:ASN1HEX.getHexOfV_AtObj(t,n)},X509.getPosOfTLV_V3ExtValue=function(t,e){var n=e;if(e.match(/^[0-9.]+$/)||(n=KJUR.asn1.x509.OID.name2oid(e)),""==n)return-1;for(var r=X509.getV3ExtInfoListOfCertHex(t),i=0;i<r.length;i++){var o=r[i];if(o.oid==n)return o.posV}return-1},X509.getExtBasicConstraints=function(t){var e=X509.getHexOfV_V3ExtValue(t,"basicConstraints");if(null===e)return null;if(""===e)return{};if("0101ff"===e)return{cA:!0};if("0101ff02"===e.substr(0,8)){var n=ASN1HEX.getHexOfV_AtObj(e,6),r=parseInt(n,16);return{cA:!0,pathLen:r}}throw"unknown error"},X509.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],X509.getExtKeyUsageBin=function(t){var e=X509.getHexOfV_V3ExtValue(t,"keyUsage");if(""==e)return"";if(e.length%2!=0||e.length<=2)throw"malformed key usage value";var n=parseInt(e.substr(0,2)),r=parseInt(e.substr(2),16).toString(2);return r.substr(0,r.length-n)},X509.getExtKeyUsageString=function(t){for(var e=X509.getExtKeyUsageBin(t),n=new Array,r=0;r<e.length;r++)"1"==e.substr(r,1)&&n.push(X509.KEYUSAGE_NAME[r]);return n.join(",")},X509.getExtSubjectKeyIdentifier=function(t){var e=X509.getHexOfV_V3ExtValue(t,"subjectKeyIdentifier");return e},X509.getExtAuthorityKeyIdentifier=function(t){var e={},n=X509.getHexOfTLV_V3ExtValue(t,"authorityKeyIdentifier");if(null===n)return null;for(var r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)"80"===n.substr(r[i],2)&&(e.kid=ASN1HEX.getHexOfV_AtObj(n,r[i]));return e},X509.getExtExtKeyUsageName=function(t){var e=new Array,n=X509.getHexOfTLV_V3ExtValue(t,"extKeyUsage");if(null===n)return null;for(var r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++){var o=ASN1HEX.getHexOfV_AtObj(n,r[i]),s=KJUR.asn1.ASN1Util.oidHexToInt(o),a=KJUR.asn1.x509.OID.oid2name(s);e.push(a)}return e},X509.getExtSubjectAltName=function(t){for(var e=new Array,n=X509.getHexOfTLV_V3ExtValue(t,"subjectAltName"),r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)if("82"===n.substr(r[i],2)){var o=hextoutf8(ASN1HEX.getHexOfV_AtObj(n,r[i]));e.push(o)}return e},X509.getExtCRLDistributionPointsURI=function(t){for(var e=new Array,n=X509.getHexOfTLV_V3ExtValue(t,"cRLDistributionPoints"),r=ASN1HEX.getPosArrayOfChildren_AtObj(n,0),i=0;i<r.length;i++)for(var o=ASN1HEX.getHexOfTLV_AtObj(n,r[i]),s=ASN1HEX.getPosArrayOfChildren_AtObj(o,0),a=0;a<s.length;a++)if("a0"===o.substr(s[a],2)){var u=ASN1HEX.getHexOfV_AtObj(o,s[a]);if("a0"===u.substr(0,2)){var c=ASN1HEX.getHexOfV_AtObj(u,0);if("86"===c.substr(0,2)){var l=ASN1HEX.getHexOfV_AtObj(c,0),h=hextoutf8(l);e.push(h)}}}return e},X509.getExtAIAInfo=function(t){var e={};e.ocsp=[],e.caissuer=[];var n=X509.getPosOfTLV_V3ExtValue(t,"authorityInfoAccess");if(n==-1)return null;if("30"!=t.substr(n,2))throw"malformed AIA Extn Value";for(var r=ASN1HEX.getPosArrayOfChildren_AtObj(t,n),i=0;i<r.length;i++){var o=r[i],s=ASN1HEX.getPosArrayOfChildren_AtObj(t,o);if(2!=s.length)throw"malformed AccessDescription of AIA Extn";var a=s[0],u=s[1];"2b06010505073001"==ASN1HEX.getHexOfV_AtObj(t,a)&&"86"==t.substr(u,2)&&e.ocsp.push(hextoutf8(ASN1HEX.getHexOfV_AtObj(t,u))),"2b06010505073002"==ASN1HEX.getHexOfV_AtObj(t,a)&&"86"==t.substr(u,2)&&e.caissuer.push(hextoutf8(ASN1HEX.getHexOfV_AtObj(t,u)))}return e},X509.getSignatureAlgorithmName=function(t){var e=ASN1HEX.getDecendantHexVByNthList(t,0,[1,0]),n=KJUR.asn1.ASN1Util.oidHexToInt(e),r=KJUR.asn1.x509.OID.oid2name(n);return r},X509.getSignatureValueHex=function(t){var e=ASN1HEX.getDecendantHexVByNthList(t,0,[2]);if("00"!==e.substr(0,2))throw"can't get signature value";return e.substr(2)},X509.getSerialNumberHex=function(t){return ASN1HEX.getDecendantHexVByNthList(t,0,[0,1])},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWS=function(){var t=KJUR.jws.JWS;this.parseJWS=function(e,n){if(void 0===this.parsedJWS||!n&&void 0===this.parsedJWS.sigvalH){var r=e.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==r)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=r[1],o=r[2],s=r[3],a=i+"."+o;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=o,this.parsedJWS.sigvalB64U=s,this.parsedJWS.si=a,!n){var u=b64utohex(s),c=parseBigInt(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=c}var l=b64utoutf8(i),h=b64utoutf8(o);if(this.parsedJWS.headS=l,this.parsedJWS.payloadS=h,!t.isSafeJSONString(l,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+l}}},KJUR.jws.JWS.sign=function(t,e,n,r,i){var o,s,a,u=KJUR.jws.JWS;if("string"!=typeof e&&"object"!=typeof e)throw"spHeader must be JSON string or object: "+e;if("object"==typeof e&&(s=e,o=JSON.stringify(s)),"string"==typeof e){if(o=e,!u.isSafeJSONString(o))throw"JWS Head is not safe JSON string: "+o;s=u.readSafeJSONString(o)}if(a=n,"object"==typeof n&&(a=JSON.stringify(n)),""!=t&&null!=t||void 0===s.alg||(t=s.alg),""!=t&&null!=t&&void 0===s.alg&&(s.alg=t,o=JSON.stringify(s)),t!==s.alg)throw"alg and sHeader.alg doesn't match: "+t+"!="+s.alg;var c=null;if(void 0===u.jwsalg2sigalg[t])throw"unsupported alg name: "+t;c=u.jwsalg2sigalg[t];var l=utf8tob64u(o),h=utf8tob64u(a),f=l+"."+h,d="";if("Hmac"==c.substr(0,4)){if(void 0===r)throw"mac key shall be specified for HS* alg";var p=new KJUR.crypto.Mac({alg:c,prov:"cryptojs",pass:r});p.updateString(f),d=p.doFinal()}else if(c.indexOf("withECDSA")!=-1){var g=new KJUR.crypto.Signature({alg:c});g.init(r,i),g.updateString(f),hASN1Sig=g.sign(),d=KJUR.crypto.ECDSA.asn1SigToConcatSig(hASN1Sig)}else if("none"!=c){var g=new KJUR.crypto.Signature({alg:c});g.init(r,i),g.updateString(f),d=g.sign()}var v=hextob64u(d);return f+"."+v},KJUR.jws.JWS.verify=function(t,e,n){var r=KJUR.jws.JWS,i=t.split("."),o=i[0],s=i[1],a=o+"."+s,u=b64utohex(i[2]),c=r.readSafeJSONString(b64utoutf8(i[0])),l=null,h=null;if(void 0===c.alg)throw"algorithm not specified in header";if(l=c.alg,h=l.substr(0,2),null!=n&&"[object Array]"===Object.prototype.toString.call(n)&&n.length>0){var f=":"+n.join(":")+":";if(f.indexOf(":"+l+":")==-1)throw"algorithm '"+l+"' not accepted in the list"}if("none"!=l&&null===e)throw"key shall be specified to verify.";if("string"==typeof e&&e.indexOf("-----BEGIN ")!=-1&&(e=KEYUTIL.getKey(e)),!("RS"!=h&&"PS"!=h||e instanceof RSAKey))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==h&&!(e instanceof KJUR.crypto.ECDSA))throw"key shall be a ECDSA obj for ES* algs";var d=null;if(void 0===r.jwsalg2sigalg[c.alg])throw"unsupported alg name: "+l;if(d=r.jwsalg2sigalg[l],"none"==d)throw"not supported";if("Hmac"==d.substr(0,4)){var p=null;if(void 0===e)throw"hexadecimal key shall be specified for HMAC";var g=new KJUR.crypto.Mac({alg:d,pass:e});return g.updateString(a),p=g.doFinal(),u==p}if(d.indexOf("withECDSA")!=-1){var v=null;try{v=KJUR.crypto.ECDSA.concatSigToASN1Sig(u)}catch(m){return!1}var y=new KJUR.crypto.Signature({alg:d});return y.init(e),y.updateString(a),y.verify(v)}var y=new KJUR.crypto.Signature({alg:d});return y.init(e),y.updateString(a),y.verify(u)},KJUR.jws.JWS.parse=function(t){var e,n,r,i=t.split("."),o={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return e=i[0],n=i[1],3==i.length&&(r=i[2]),o.headerObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(e)),o.payloadObj=KJUR.jws.JWS.readSafeJSONString(b64utoutf8(n)),o.headerPP=JSON.stringify(o.headerObj,null,"  "),null==o.payloadObj?o.payloadPP=b64utoutf8(n):o.payloadPP=JSON.stringify(o.payloadObj,null,"  "),void 0!==r&&(o.sigHex=b64utohex(r)),o},KJUR.jws.JWS.verifyJWT=function(t,e,n){var r=KJUR.jws.JWS,i=t.split("."),o=i[0],s=i[1],a=(b64utohex(i[2]),r.readSafeJSONString(b64utoutf8(o))),u=r.readSafeJSONString(b64utoutf8(s));if(void 0===a.alg)return!1;if(void 0===n.alg)throw"acceptField.alg shall be specified";if(!r.inArray(a.alg,n.alg))return!1;if(void 0!==u.iss&&"object"==typeof n.iss&&!r.inArray(u.iss,n.iss))return!1;if(void 0!==u.sub&&"object"==typeof n.sub&&!r.inArray(u.sub,n.sub))return!1;if(void 0!==u.aud&&"object"==typeof n.aud)if("string"==typeof u.aud){if(!r.inArray(u.aud,n.aud))return!1}else if("object"==typeof u.aud&&!r.includedArray(u.aud,n.aud))return!1;var c=KJUR.jws.IntDate.getNow();return void 0!==n.verifyAt&&"number"==typeof n.verifyAt&&(c=n.verifyAt),void 0!==n.gracePeriod&&"number"==typeof n.gracePeriod||(n.gracePeriod=0),!(void 0!==u.exp&&"number"==typeof u.exp&&u.exp+n.gracePeriod<c)&&(!(void 0!==u.nbf&&"number"==typeof u.nbf&&c<u.nbf-n.gracePeriod)&&(!(void 0!==u.iat&&"number"==typeof u.iat&&c<u.iat-n.gracePeriod)&&((void 0===u.jti||void 0===n.jti||u.jti===n.jti)&&!!KJUR.jws.JWS.verify(t,e,n.alg))))},KJUR.jws.JWS.includedArray=function(t,e){var n=KJUR.jws.JWS.inArray;if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e))return!1;return!0},KJUR.jws.JWS.inArray=function(t,e){if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(e[n]==t)return!0;return!1},KJUR.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},KJUR.jws.JWS.isSafeJSONString=function(t,e,n){var r=null;try{return r=jsonParse(t),"object"!=typeof r?0:r.constructor===Array?0:(e&&(e[n]=r),1)}catch(i){return 0}},KJUR.jws.JWS.readSafeJSONString=function(t){var e=null;try{return e=jsonParse(t),"object"!=typeof e?null:e.constructor===Array?null:e}catch(n){return null}},KJUR.jws.JWS.getEncodedSignatureValueFromJWS=function(t){var e=t.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==e)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return e[1]},KJUR.jws.JWS.getJWKthumbprint=function(t){if("RSA"!==t.kty&&"EC"!==t.kty&&"oct"!==t.kty)throw"unsupported algorithm for JWK Thumprint";var e="{";if("RSA"===t.kty){if("string"!=typeof t.n||"string"!=typeof t.e)throw"wrong n and e value for RSA key";e+='"e":"'+t.e+'",',e+='"kty":"'+t.kty+'",',e+='"n":"'+t.n+'"}'}else if("EC"===t.kty){if("string"!=typeof t.crv||"string"!=typeof t.x||"string"!=typeof t.y)throw"wrong crv, x and y value for EC key";e+='"crv":"'+t.crv+'",',e+='"kty":"'+t.kty+'",',e+='"x":"'+t.x+'",',e+='"y":"'+t.y+'"}'}else if("oct"===t.kty){if("string"!=typeof t.k)throw"wrong k value for oct(symmetric) key";e+='"kty":"'+t.kty+'",',e+='"k":"'+t.k+'"}'}var n=rstrtohex(e),r=KJUR.crypto.Util.hashHex(n,"sha256"),i=hextob64u(r);return i},KJUR.jws.IntDate={},KJUR.jws.IntDate.get=function(t){if("now"==t)return KJUR.jws.IntDate.getNow();if("now + 1hour"==t)return KJUR.jws.IntDate.getNow()+3600;if("now + 1day"==t)return KJUR.jws.IntDate.getNow()+86400;if("now + 1month"==t)return KJUR.jws.IntDate.getNow()+2592e3;if("now + 1year"==t)return KJUR.jws.IntDate.getNow()+31536e3;if(t.match(/Z$/))return KJUR.jws.IntDate.getZulu(t);if(t.match(/^[0-9]+$/))return parseInt(t);throw"unsupported format: "+t},KJUR.jws.IntDate.getZulu=function(t){var e=t.match(/(\d+)(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)Z/);if(e){var n=e[1],r=parseInt(n);if(4==n.length);else{if(2!=n.length)throw"malformed year string";if(50<=r&&r<100)r=1900+r;else{if(!(0<=r&&r<50))throw"malformed year string for UTCTime";r=2e3+r}}var i=parseInt(e[2])-1,o=parseInt(e[3]),s=parseInt(e[4]),a=parseInt(e[5]),u=parseInt(e[6]),c=new Date(Date.UTC(r,i,o,s,a,u));return~~(c/1e3)}throw"unsupported format: "+t},KJUR.jws.IntDate.getNow=function(){var t=~~(new Date/1e3);return t},KJUR.jws.IntDate.intDate2UTCString=function(t){var e=new Date(1e3*t);return e.toUTCString()},KJUR.jws.IntDate.intDate2Zulu=function(t){var e=new Date(1e3*t),n=("0000"+e.getUTCFullYear()).slice(-4),r=("00"+(e.getUTCMonth()+1)).slice(-2),i=("00"+e.getUTCDate()).slice(-2),o=("00"+e.getUTCHours()).slice(-2),s=("00"+e.getUTCMinutes()).slice(-2),a=("00"+e.getUTCSeconds()).slice(-2);return n+r+i+o+s+a+"Z"},"undefined"!=typeof KJUR&&KJUR||(KJUR={}),"undefined"!=typeof KJUR.jws&&KJUR.jws||(KJUR.jws={}),KJUR.jws.JWSJS=function(){var t=KJUR.jws.JWS,e=KJUR.jws.JWS;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(t){this.init();var e=t.split(".");if(3!=e.length)throw"malformed input JWS";this.aHeader.push(e[0]),this.sPayload=e[1],this.aSignature.push(e[2])},this.addSignature=function(t,e,n,r){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var o=KJUR.jws.JWS.sign(t,e,this.sPayload,n,r),s=o.split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(a){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+a}},this.addSignatureByHeaderKey=function(t,e){var n=b64utoutf8(this.sPayload),r=new KJUR.jws.JWS;r.generateJWSByP1PrvKey(t,n,e);this.aHeader.push(r.parsedJWS.headB64U),this.aSignature.push(r.parsedJWS.sigvalB64U)},this.addSignatureByHeaderPayloadKey=function(t,e,n){var r=new KJUR.jws.JWS;r.generateJWSByP1PrvKey(t,e,n);this.aHeader.push(r.parsedJWS.headB64U),this.sPayload=r.parsedJWS.payloadB64U,this.aSignature.push(r.parsedJWS.sigvalB64U)},this.verifyAll=function(t){if(this.aHeader.length!==t.length||this.aSignature.length!==t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(2!==n.length)return!1;var r=this.verifyNth(e,n[0],n[1]);if(r===!1)return!1}return!0},this.verifyNth=function(t,n,r){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t],o=this.aSignature[t],s=i+"."+this.sPayload+"."+o,a=!1;try{a=e.verify(s,n,r)}catch(u){return!1}return a},this.verifyWithCerts=function(t){if(this.aHeader.length!=t.length)throw"num headers does not match with num certs";if(this.aSignature.length!=t.length)throw"num signatures does not match with num certs";for(var e=this.sPayload,n="",r=0;r<t.length;r++){var i=t[r],o=this.aHeader[r],s=this.aSignature[r],a=o+"."+e+"."+s,u=new KJUR.jws.JWS;try{var c=u.verifyJWSByPemX509Cert(a,i);1!=c&&(n+=r+1+"th signature unmatch. ")}catch(l){n+=r+1+"th signature fail("+l+"). "}}if(""==n)return 1;throw n},this.readJWSJS=function(e){if("string"==typeof e){var n=t.readSafeJSONString(e);if(null==n)throw"argument is not safe JSON object string";this.aHeader=n.headers,this.sPayload=n.payload,this.aSignature=n.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.signatures=e.signatures}catch(r){throw"malformed JWS-JS JSON object: "+r}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(){customElements.define("ct-data-grid",function(t){function e(t){var n,r;return _classCallCheck(this,e),t=n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),t.localData=null,t.model={cols:[],data:[]},t.isReady=!1,r=t,_possibleConstructorReturn(n,r)}return _inherits(e,t),_createClass(e,[{key:"injectStyles",value:function(){var t=document.head.querySelector("style[rel="+this.tagName.toLowerCase()+"]");t||(t=document.createElement("style"),t.setAttribute("rel",this.tagName.toLowerCase()),t.textContent='@keyframes ctDataGridSpin {\n                  0% {\n                    transform: rotate(0deg); }\n                  100% {\n                    transform: rotate(360deg); } }\n                \n                ct-data-grid {\n                  display: flex;\n                  position: relative;\n                  flex: 1; }\n                  ct-data-grid ct-data-col {\n                    display: none;\n                    position: absolute;\n                    top: -9999px;\n                    left: -9999px;\n                    width: 0;\n                    height: 0; }\n                  ct-data-grid .ct-data-grid {\n                    position: relative;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: auto;\n                    max-height: 100%;\n                    display: flex;\n                    flex-direction: column; }\n                    ct-data-grid .ct-data-grid .search-area {\n                      display: none;\n                      flex: 0 0 auto;\n                      margin: 0 0 20px 0; }\n                    ct-data-grid .ct-data-grid .table-area {\n                      position: relative;\n                      min-height: .01%;\n                      overflow-x: auto;\n                      -webkit-overflow-scrolling: touch; }\n                      ct-data-grid .ct-data-grid .table-area .table-container table {\n                        margin: 0;\n                        width: 100%; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table td,\n                        ct-data-grid .ct-data-grid .table-area .table-container table th {\n                          position: relative; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table th {\n                          user-select: none;\n                          white-space: nowrap; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table th.sortable {\n                            cursor: pointer; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table th.sortable:after {\n                              content: "\\f0dc";\n                              font-family: "FontAwesome";\n                              display: inline-block;\n                              vertical-align: middle;\n                              font-size: 0.8em;\n                              width: 20px;\n                              text-align: right;\n                              opacity: 0.3; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table th.sortable.sort-asc:after {\n                              content: "\\f0de";\n                              opacity: 1; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table th.sortable.sort-desc:after {\n                              content: "\\f0dd";\n                              opacity: 1; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table td {\n                          padding: 0; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td .content {\n                            display: block;\n                            padding: 8px; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td .control {\n                            display: block;\n                            padding: 5px; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table td .control input {\n                              line-height: normal; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td .edit-controls {\n                            display: block;\n                            padding: 7px; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table td .edit-controls button {\n                              margin: 0 0 0 5px; }\n                              ct-data-grid .ct-data-grid .table-area .table-container table td .edit-controls button:first-child {\n                                margin: 0; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td .message-detail {\n                            font-size: 0.8em; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td .edit-control {\n                            width: 100%; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td.message-info {\n                            padding-left: 30px; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table td.message-info:before {\n                              content: "\\f05a";\n                              font-family: "FontAwesome";\n                              display: block;\n                              position: absolute;\n                              top: 9px;\n                              left: 9px; }\n                          ct-data-grid .ct-data-grid .table-area .table-container table td.message-error {\n                            background: #f2dede;\n                            padding-left: 30px; }\n                            ct-data-grid .ct-data-grid .table-area .table-container table td.message-error:before {\n                              content: "\\f06a";\n                              font-family: "FontAwesome";\n                              display: block;\n                              position: absolute;\n                              top: 9px;\n                              left: 9px; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table.selection-mode-row tr.selected, ct-data-grid .ct-data-grid .table-area .table-container table.selection-mode-cell tr.selected {\n                          background-color: #d9edf7; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table.selection-mode-row td, ct-data-grid .ct-data-grid .table-area .table-container table.selection-mode-cell td {\n                          cursor: pointer; }\n                        ct-data-grid .ct-data-grid .table-area .table-container table.selection-mode-cell td.selected {\n                          background-color: rgba(0, 0, 0, 0.05); }\n                      ct-data-grid .ct-data-grid .table-area.fixed-headers {\n                        display: flex; }\n                        ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container {\n                          display: flex;\n                          flex: 1; }\n                          ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table {\n                            display: flex;\n                            flex-direction: column;\n                            table-layout: fixed;\n                            flex: 1; }\n                            ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table thead {\n                              display: block;\n                              flex: 0 0 auto; }\n                              ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table thead tr {\n                                display: flex; }\n                            ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table tbody {\n                              display: block;\n                              flex: 1 1 auto;\n                              overflow: auto; }\n                              ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table tbody tr {\n                                display: flex; }\n                              ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table tbody tr:first-child td {\n                                border-top: 0; }\n                            ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table td,\n                            ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table th {\n                              flex: 1;\n                              overflow: hidden; }\n                              ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table td .content,\n                              ct-data-grid .ct-data-grid .table-area.fixed-headers .table-container table th .content {\n                                text-overflow: ellipsis;\n                                overflow: hidden; }\n                    ct-data-grid .ct-data-grid .pagination-area {\n                      flex: 0 0 auto;\n                      display: none;\n                      user-select: none;\n                      margin: 20px 0 0 0; }\n                    ct-data-grid .ct-data-grid .loading {\n                      position: absolute;\n                      top: 0;\n                      left: 0;\n                      width: 100%;\n                      height: 100%;\n                      display: none; }\n                    ct-data-grid .ct-data-grid.has-search .search-area {\n                      display: flex;\n                      justify-content: flex-end; }\n                      ct-data-grid .ct-data-grid.has-search .search-area .search-bar .search-box {\n                        position: relative;\n                        width: 400px; }\n                        ct-data-grid .ct-data-grid.has-search .search-area .search-bar .search-box input.form-control {\n                          z-index: 1;\n                          padding-right: 24px; }\n                        ct-data-grid .ct-data-grid.has-search .search-area .search-bar .search-box .clear-button {\n                          position: absolute;\n                          top: 0;\n                          right: 34px;\n                          width: 24px;\n                          height: 100%;\n                          padding: 8px 0 0 0;\n                          text-align: center;\n                          z-index: 2;\n                          cursor: pointer;\n                          opacity: 0.5;\n                          font-size: 0.8em; }\n                        ct-data-grid .ct-data-grid.has-search .search-area .search-bar .search-box .clear-button:hover {\n                          opacity: 1; }\n                    ct-data-grid .ct-data-grid.has-pagination .pagination-area {\n                      display: flex;\n                      justify-content: center; }\n                      ct-data-grid .ct-data-grid.has-pagination .pagination-area ul.pagination {\n                        display: block;\n                        margin: 0; }\n                        ct-data-grid .ct-data-grid.has-pagination .pagination-area ul.pagination .page-bookend .page-label {\n                          display: none; }\n                        ct-data-grid .ct-data-grid.has-pagination .pagination-area ul.pagination li > a {\n                          min-width: 40px;\n                          text-align: center;\n                          cursor: pointer; }\n                    ct-data-grid .ct-data-grid.loading-data .loading {\n                      display: block; }\n                      ct-data-grid .ct-data-grid.loading-data .loading .bg {\n                        width: 100%;\n                        height: 100%;\n                        background: #ffffff;\n                        opacity: 0.5; }\n                      ct-data-grid .ct-data-grid.loading-data .loading .spinner {\n                        position: absolute;\n                        top: 50%;\n                        left: 50%;\n                        width: 32px;\n                        height: 32px;\n                        border: 1px solid #cccccc;\n                        border-radius: 50%;\n                        margin: -16px 0 0 -16px;\n                        background: #ffffff; }\n                        ct-data-grid .ct-data-grid.loading-data .loading .spinner:after {\n                          content: "";\n                          display: block;\n                          position: absolute;\n                          width: 24px;\n                          height: 24px;\n                          top: 50%;\n                          left: 50%;\n                          margin: -12px 0 0 -12px;\n                          border: 3px solid rgba(0, 0, 0, 0.2);\n                          border-left-color: #000000;\n                          border-radius: 50%;\n                          transform: translateZ(0);\n                          animation: ctDataGridSpin 1.1s infinite linear; }\n                ',
document.head.appendChild(t))}},{key:"generateHtml",value:function(){return'<div class="ct-data-grid">\n                <div class="search-area"></div>\n                <div class="table-area">\n                    <div class="table-container"></div>\n                    <div class="loading"></div>\n                </div>\n                <div class="pagination-area"></div>\n            </div>'}}]),_createClass(e,[{key:"connectedCallback",value:function(){var t=this,e=this.getAttribute("id")||"autoid"+(new Date).getTime(),n=Array.from(this.querySelectorAll("ct-data-col"));n.forEach(function(e){t.model.cols.push({key:e.getAttribute("key"),classes:e.getAttribute("class")||"",displayKey:e.getAttribute("display-key"),cssKey:e.getAttribute("css-key"),heading:e.textContent,dataType:e.getAttribute("data-type")||"string",sortable:e.hasAttribute("sortable")&&"false"!==e.getAttribute("sortable"),sort:e.getAttribute("sort"),width:e.getAttribute("width"),editable:e.hasAttribute("editable")&&"false"!==e.getAttribute("editable"),isControls:"controls"===e.getAttribute("data-type"),editButtonLabel:e.getAttribute("edit-button-label")||"Edit",saveButtonLabel:e.getAttribute("save-button-label")||"Save",cancelButtonLabel:e.getAttribute("cancel-button-label")||"Cancel"})}),this.id=e,this.injectStyles(),this.innerHTML=this.generateHtml(),n.forEach(function(e){t.appendChild(e)}),this.$element=this.querySelector(".ct-data-grid"),this.$searchArea=this.querySelector(".search-area"),this.$tableArea=this.querySelector(".table-area"),this.$tableContainer=this.querySelector(".table-container"),this.$paginationArea=this.querySelector(".pagination-area"),this.$loading=this.querySelector(".loading"),this._initialize(),this._raiseEvent("ready"),this.isReady=!0}},{key:"attributeChangedCallback",value:function(t,e,n){if(this.isReady&&e!==n){var r=!1,i=!1,o=!1;switch(t.toLowerCase()){case"data-source":case"data-source-method":case"data-source-page-param":case"data-source-page-size-param":case"data-source-search-param":case"data-source-sort-column-param":case"data-source-sort-direction-param":case"data-results-property":case"data-results-total-property":this._processDataSourceAttributes(),this._processInteractionAttributes(),o=!0;break;case"show-search":this._processSearchAttributes(),r=!0,i=!0;break;case"show-pagination":this._processPaginationAttributes(),r=!0,o=!0;break;case"page-size":this._processPaginationAttributes(),o=!0;break;case"use-local-interaction":this._processInteractionAttributes(),o=!0;break;case"fixed-headers":this._processPresentationAttributes(),r=!0,i=!0;break;case"row-css-key":this._processPresentationAttributes(),i=!0;break;case"selection-mode":this._processInteractionAttributes(),r=!0,i=!0}if(r&&this._render(!0),i||o){var s=!o;this._buildDataRows(s)}}}},{key:"_initialize",value:function(){this._processDataSourceAttributes(),this._processSearchAttributes(),this._processPaginationAttributes(),this._processInteractionAttributes(),this._processPresentationAttributes(),this.searchQuery="",this.sortBy=null,this.sortDirection=null,this.pageNumber=1,this.unfilteredTotalResults=0,this.totalResults=0,this.selectedValue=null,this._render()}},{key:"_processDataSourceAttributes",value:function(){this.dataSourceUrl=this.getAttribute("data-source"),this.dataSourceMethod=this.getAttribute("data-source-method")||"GET",this.dataSourcePageParam=this.getAttribute("data-source-page-param")||"page",this.dataSourcePageSizeParam=this.getAttribute("data-source-page-size-param")||"limit",this.dataSourceSearchParam=this.getAttribute("data-source-search-param")||"query",this.dataSourceSortColumnParam=this.getAttribute("data-source-sort-column-param")||"sort",this.dataSourceSortDirectionParam=this.getAttribute("data-source-sort-direction-param")||"dir",this.dataResultsProperty=this.getAttribute("data-results-property")||"data",this.dataResultsTotalProperty=this.getAttribute("data-results-total-property")||"totalResults",this.useDataSource=!!this.dataSourceUrl,this.dataSourceParams=null}},{key:"_processInteractionAttributes",value:function(){this.useLocalInteraction=!this.useDataSource||this.hasAttribute("use-local-interaction")&&"false"!==this.getAttribute("use-local-interaction").toLowerCase(),this.selectionMode=(this.getAttribute("selection-mode")||"none").toLowerCase()}},{key:"_processSearchAttributes",value:function(){this.showSearch=this.hasAttribute("show-search")&&"false"!==this.getAttribute("show-search").toLowerCase()}},{key:"_processPaginationAttributes",value:function(){this.showPagination=!this.hasAttribute("show-pagination")||"false"!==this.getAttribute("show-pagination").toLowerCase(),this.pageSize=parseInt(this.getAttribute("page-size"))||0}},{key:"_processPresentationAttributes",value:function(){this.fixedHeaders=this.hasAttribute("fixed-headers")&&"false"!==this.getAttribute("fixed-headers").toLowerCase(),this.rowCssKey=this.getAttribute("row-css-key")||"",this.$tableArea&&this.$tableArea.classList.toggle("fixed-headers",this.fixedHeaders)}},{key:"_render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e._removeChildren(this.$tableContainer),this._buildSearchArea(),this._buildTable(t),this.$tableContainer.appendChild(this.$table)}},{key:"_loadDataFromUrl",value:function(){var t=this,n=this;return new Promise(function(r){n._setLoading(!0),n.dataSourceParams={},t.useLocalInteraction||(n.searchQuery&&(n.dataSourceParams[n.dataSourceSearchParam]=n.searchQuery),null!==n.sortBy&&(n.dataSourceParams[n.dataSourceSortColumnParam]=n.sortBy,n.dataSourceParams[n.dataSourceSortDirectionParam]=n.sortDirection),n.pageSize&&n.pageNumber&&(n.dataSourceParams[n.dataSourcePageSizeParam]=n.pageSize,n.dataSourceParams[n.dataSourcePageParam]=n.pageNumber)),n._sendRequest(n.dataSourceMethod,n.dataSourceUrl,n.dataSourceParams).then(function(t){var i=e._getProperty(t,n.dataResultsProperty);Array.isArray(i)||(n._setLoading(!1),n._setMessage("error","Incorrect data retrieved, must be array; was "+("undefined"==typeof i?"undefined":_typeof(i))),n._raiseEvent("data-error"),r(!1));var o=e._getProperty(t,n.dataResultsTotalProperty);n.unfilteredTotalResults=o||i.length,n.totalResults=o||i.length,n._setLoading(!1),n._setData(i),r(!0)},function(t){n._setLoading(!1),n._setMessage("error","Error loading data...",t),n._raiseEvent("data-error"),r(!1)})})}},{key:"_prepareLocalData",value:function(){var t=this;return new Promise(function(e){var n=Array.from(t.localData||[]);n=t._searchLocal(n),t.totalResults=n.length,n=t._sortLocal(n),n=t._paginateLocal(n),t._setData(n),e(!0)})}},{key:"_buildTable",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(this.$table=document.createElement("table"),this.$table.classList.add("table","table-striped","table-hover"),this.selectionMode){case"row":this.$table.classList.add("selection-mode-row");break;case"cell":this.$table.classList.add("selection-mode-cell")}this.fixedHeaders&&this.$tableArea.classList.add("fixed-headers"),this.$thead=document.createElement("thead"),this.$table.appendChild(this.$thead);var n=document.createElement("tr");this.model.cols.forEach(function(e){return t._buildColumnHeader(n,e)}),this.$thead.appendChild(n),this.$tbody=document.createElement("tbody"),this.$table.appendChild(this.$tbody),this.useDataSource&&e===!1&&this._buildDataRows()}},{key:"_buildColumnHeader",value:function(t,e){var n=this,r=document.createElement("th");e.key&&r.setAttribute("key",e.key),void 0!==e.classes&&null!==e.classes&&e.classes.toString().split(" ").forEach(function(t){t&&r.classList.add(t)}),e.isControls&&r.classList.add("edit-controls"),null!==e.width&&(this.fixedHeaders?r.style.flex="1 1 "+e.width:r.style.width=e.width),e.sortable&&!e.isControls&&(r.classList.add("sortable"),e.key===this.sortBy?this._changeSort(r,this.sortDirection,!0):this.sortBy||(e.sort&&"asc"===e.sort.toString().toLowerCase()&&this._changeSort(r,"asc",!0),e.sort&&"desc"===e.sort.toString().toLowerCase()&&this._changeSort(r,"desc",!0)),r.addEventListener("click",function(){n._changeSort(r)})),r.textContent=e.heading,t.appendChild(r)}},{key:"_buildDataRows",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=void 0;r=n?Promise.resolve(!!this.model.data):this.useDataSource&&this.useLocalInteraction&&null===this.localData?this._loadDataFromUrl().then(function(){return t.localData=t.model.data,t.unfilteredTotalResults=t.localData.length,t.totalResults=t.localData.length,t._prepareLocalData()}):this.useLocalInteraction?this._prepareLocalData():this._loadDataFromUrl(),r.then(function(n){n&&(e._removeChildren(t.$tbody),t.model.data.length>0?t.model.data.forEach(function(e,n){return t._buildDataRow(e,n)}):t._setMessage("info","No data to display..."),t._buildPagination(),t._raiseEvent("data-rendered"))})}},{key:"_buildDataRow",value:function(t,e){var n=this,r=this._applyIndexes(t).__idx,i=document.createElement("tr");if(this.rowCssKey&&t.hasOwnProperty(this.rowCssKey)&&void 0!==t[this.rowCssKey]&&null!==t[this.rowCssKey]){var o=t[this.rowCssKey].toString().split(" ");o.forEach(function(t){t&&i.classList.add(t)})}this._isEditItem(r)&&i.classList.add("editing"),this.model.cols.forEach(function(o,s){n._buildDataCell(i,o,s,t,e,r)}),"row"===this.selectionMode&&i.addEventListener("click",function(){return n.__handleRowClick(i,t,e)}),this.$tbody.appendChild(i)}},{key:"_buildDataCell",value:function(t,n,r,i,o,s){var a=this,u=document.createElement("td");if(void 0!==n.classes&&null!==n.classes&&n.classes.toString().split(" ").forEach(function(t){t&&u.classList.add(t)}),n.cssKey&&i.hasOwnProperty(n.cssKey)&&void 0!==i[n.cssKey]&&null!==i[n.cssKey]){var c=i[n.cssKey].toString().split(" ");c.forEach(function(t){t&&u.classList.add(t)})}void 0!==n.width&&(this.fixedHeaders?u.style.flex="1 1 "+n.width:u.style.width=n.width),t.appendChild(u),"cell"!==this.selectionMode||n.isControls||u.addEventListener("click",function(){return a.__handleCellClick(u,i,o,n,r)});var l=document.createElement("div"),h=!1;this.editManifest&&this.editManifest.itemIndexes.length&&(n.editable||n.isControls)&&(h=this.editManifest.itemIndexes.includes(s));var f=n.isControls?"edit-controls":h?"control":"content";l.classList.add(f),h?(e._removeChildren(l),n.isControls?this._buildEditButtons(l,n,!1,s):this._buildEditControl(l,n,i[n.key],this.editManifest[s])):n.isControls?this._buildEditButtons(l,n,!0,s):n.displayKey?l.innerHTML=i[n.displayKey]||"":l.innerHTML=this._formatData(n,i[n.key]),u.appendChild(l)}},{key:"_formatData",value:function(t,n){var r=this,i="";switch((t.dataType||"").toLowerCase()){case"string":!function(){i=n||""}();break;case"number":!function(){var t=parseFloat(n);isNaN(t)||(i=t.toString())}();break;case"date":!function(){if(void 0!==n&&null!==n&&""!==n){var t=e._parseDate(n);t&&(i=e._renderDate(t))}}();break;case"datetime":!function(){if(void 0!==n&&null!==n&&""!==n){var t=isNaN(n)?n.substring(0,19):n,r=e._parseDate(t);r&&(i=e._renderDate(r)+" "+e._renderTime(r))}}();break;case"boolean":!function(){n===!0?i="Yes":n===!1&&(i="No")}();break;case"url":!function(){n&&(i='<a href="'+n+'" target="_'+r.id+"_"+t.key+'_link">Link</a>')}()}return i}},{key:"_buildEditButtons",value:function(t,e,n,r){var i=this;if(n){var o=document.createElement("button");o.classList.add("btn","btn-xs","btn-default","edit-button"),o.innerHTML='<span class="text">'+e.editButtonLabel+"</span>",o.addEventListener("click",function(t){t.stopPropagation(),i._addEditModeItems([r])}),t.appendChild(o)}else{var s=document.createElement("button");s.classList.add("btn","btn-xs","btn-default","save-button"),s.innerHTML='<span class="text">'+e.saveButtonLabel+"</span>",s.addEventListener("click",function(t){t.stopPropagation();var e=i._getEditChanges([r]);i._removeEditModeItems([r]),e&&e.length&&i._raiseEvent("data-change",e[0])}),t.appendChild(s);var a=document.createElement("button");a.classList.add("btn","btn-xs","btn-default","cancel-button"),a.innerHTML='<span class="text">'+e.cancelButtonLabel+"</span>",a.addEventListener("click",function(t){t.stopPropagation(),i._removeEditModeItems([r])}),t.appendChild(a)}}},{key:"_buildEditControl",value:function(t,n,r,i){var o=void 0;switch((n.dataType||"").toLowerCase()){default:case"string":case"url":!function(){var e=document.createElement("input");e.setAttribute("type","text"),e.value=r,e.classList.add("edit-control","edit-control-"+(n.dataType||"string")),t.appendChild(e),o=function(){return e.value}}();break;case"number":!function(){var e=document.createElement("input");e.setAttribute("type","number"),e.value=r,e.classList.add("edit-control","edit-control-number"),t.appendChild(e),o=function(){return parseInt(e.value)||0}}();break;case"date":!function(){var n=e._parseDate(r),i=document.createElement("input");i.setAttribute("type","date"),n&&(i.value=n.toISOString().substr(0,10)),i.classList.add("edit-control","edit-control-date"),t.appendChild(i),o=function(){return i.value}}();break;case"datetime":!function(){var n=isNaN(r)?r.substring(0,19):r,i=e._parseDate(n),s=document.createElement("input");s.setAttribute("type","date"),i&&(s.value=i.toISOString().substr(0,10)),s.classList.add("edit-control","edit-control-datetime","edit-control-datetime-date"),t.appendChild(s);var a=document.createElement("input");a.setAttribute("type","time"),i&&(a.value=e._renderTime(i)),a.classList.add("edit-control","edit-control-datetime","edit-control-datetime-time"),t.appendChild(a),o=function(){return s.value+"T"+a.value}}();break;case"boolean":!function(){var e=document.createElement("input");e.setAttribute("type","checkbox"),e.checked=r===!0,e.classList.add("edit-control","edit-control-boolean"),t.appendChild(e),o=function(){return e.checked}}()}"function"==typeof o&&(i[n.key]=o)}},{key:"_addEditModeItems",value:function(t){var e=this,n=this.model.cols.filter(function(t){return t.editable});if(0===n.length)throw new Error("You cannot put a grid into edit mode which has no columns that are editable");var r=!1;this.editManifest||(this.editManifest={itemIndexes:[]}),t.forEach(function(t){e._isEditItem(t)||(e.editManifest.itemIndexes.push(t),e.editManifest[t]={},r=!0)}),r&&this._buildDataRows(!0)}},{key:"_isEditItem",value:function(t){return!!this.editManifest&&this.editManifest.itemIndexes.includes(t)}},{key:"_getEditChanges",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.editManifest)return[];var n=[];return this.editManifest.itemIndexes.forEach(function(r){if(null===e||e.includes(r)){var i=Object.assign({},(t.localData||t.model.data)[r]),o=Object.assign({},i),s=t.editManifest[r];for(var a in s)s.hasOwnProperty(a)&&(o[a]=s[a]());var u=JSON.stringify(i)!==JSON.stringify(o);n.push({__idx:r,oldValue:i,newValue:o,hasChanged:u})}}),n}},{key:"_removeEditModeItems",value:function(t){var e=this;if(this.editManifest){var n=!1;t.forEach(function(t){e._isEditItem(t)&&(delete e.editManifest[t],n=!0)}),n&&(this.editManifest.itemIndexes=this.editManifest.itemIndexes.filter(function(e){return!t.includes(e)}),this._buildDataRows(!0))}}},{key:"_removeAllEditModeItems",value:function(){this.editManifest&&this._removeEditModeItems(this.editManifest.itemIndexes)}},{key:"__handleRowClick",value:function(t,e,n){var r=this._applyIndexes(e);if(!this._isEditItem(r.__idx)){var i=Array.from(this.$table.querySelectorAll(".selected"));i.forEach(function(t){t.classList.remove("selected")}),t.classList.add("selected"),this.selectedValue={rowData:r,rowIndex:n},this._raiseEvent("selection",this.selectedValue)}}},{key:"__handleCellClick",value:function(t,e,n,r,i){var o=this._applyIndexes(e);if(!this._isEditItem(o.__idx)){var s=Array.from(this.$table.querySelectorAll(".selected"));s.forEach(function(t){t.classList.remove("selected")}),t.parentNode.classList.add("selected"),t.classList.add("selected"),this.selectedValue={rowData:o,rowIndex:n,columnKey:r.key,columnIndex:i,cellData:e[r.key]},this._raiseEvent("selection",this.selectedValue)}}},{key:"_buildSearchArea",value:function(){var t=this;if(e._removeChildren(this.$searchArea),this.showSearch){this.$element.classList.add("has-search"),this.$searchArea.innerHTML='\n                    <div class="search-bar">\n                        <div class="search-box">\n                            <div class="input-group">\n                                <input type="text" class="form-control" placeholder="Search..." />\n                                <span class="input-group-btn">\n                                    <button class="btn btn-default search-button" type="button"><i class="fa fa-search"></i></button>                        \n                                </span>\n                            </div>\n                            <span class="clear-button">\n                                <i class="fa fa-remove"></i>\n                            </span>\n                        </div>\n                    </div>\n                ';var n=this.$searchArea.querySelector("input.form-control"),r=this.$searchArea.querySelector("button.search-button"),i=this.$searchArea.querySelector("span.clear-button");i.style.display="none";var o=function(){var e=n.value;t._changeSearch(e)};n.addEventListener("keyup",function(t){13===t.keyCode&&o(),i.style.display=0===n.value.length?"none":"inline"}),i.addEventListener("click",function(){n.value="",i.style.display="none",o()}),r.addEventListener("click",function(){o()})}else this.$element.classList.remove("has-search")}},{key:"_changeSearch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.searchQuery=t,this.pageNumber=1,e&&this.showSearch){var n=this.$searchArea.querySelector("input.form-control");n&&(n.value=t)}this._buildDataRows()}},{key:"_searchLocal",value:function(t){var e=this,n=(this.searchQuery||"").trim().toUpperCase();if(n.length>0){var r={};this.model.cols.forEach(function(t){r[t.key]=t}),t=t.filter(function(t){for(var i in t)if(t.hasOwnProperty(i)){var o=r[i];if(o){var s=e._formatData(o,t[i]||"");if(s.toUpperCase().indexOf(n)>-1)return!0}}return!1})}return t}},{key:"_changeSort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"switch",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Array.from(this.$table.querySelectorAll("th.sortable.sort-asc, th.sortable.sort-desc")),i="";null===t?r.forEach(function(t){return t.classList.remove("sort-asc","sort-desc")}):(i=t.getAttribute("key"),"switch"===e&&(e=t.classList.contains("sort-asc")?"desc":"asc"),r.forEach(function(t){return t.classList.remove("sort-asc","sort-desc")}),e&&"asc"===e.toString().toLowerCase()&&t.classList.add("sort-asc"),e&&"desc"===e.toString().toLowerCase()&&t.classList.add("sort-desc")),this.sortBy=i,this.sortDirection=e,n!==!0&&this._buildDataRows()}},{key:"_sortLocal",value:function(t){var n=this.sortBy,r="desc"===this.sortDirection,i=this.model.cols.find(function(t){return t.key===n});if(i&&i.sortable&&!i.isControls){switch((i.dataType||"").toLowerCase()){case"string":case"url":default:t.sort(function(t,e){var r=(t[n]||"").toString().toUpperCase(),i=(e[n]||"").toString().toUpperCase();return r.localeCompare(i)});break;case"number":t.sort(function(t,e){var r=t[n]||0,i=e[n]||0;return r<i?-1:r>i?1:0});break;case"date":case"datetime":t.sort(function(t,r){var i=void 0===t[n]||null===t[n]||""===t[n]?Number.MIN_SAFE_INTEGER:e._parseDate(t[n]).getTime(),o=void 0===r[n]||null===r[n]||""===r[n]?Number.MIN_SAFE_INTEGER:e._parseDate(r[n]).getTime();return isNaN(i)&&(i=Number.MIN_SAFE_INTEGER),isNaN(o)&&(o=Number.MIN_SAFE_INTEGER),i<o?-1:i>o?1:0});break;case"boolean":var o=function(t){return t===!0?0:t===!1?1:r?-1:2};t.sort(function(t,e){var r=o(t[n]),i=o(e[n]);return r<i?-1:r>i?1:0})}r&&t.reverse()}return t}},{key:"_buildPagination",value:function(){var t=this;if(e._removeChildren(this.$paginationArea),this.showPagination&&this.pageSize>0&&this.totalResults>0){this.$element.classList.add("has-pagination");var n=5,r=this._getTotalPages(),i=1,o=Math.min(n,r);if(r>n){var s=Math.ceil(n/2),a=s-1;this.pageNumber>s&&(i=this.pageNumber-a,o=this.pageNumber+a,o>r&&(o=r,i=o-n+1))}if(this.$paginationArea.innerHTML='\n                    <nav>\n                        <ul class="pagination pagination-sm"></ul>\n                    </nav>\n                ',r>1){var u=this.$paginationArea.querySelector(".pagination"),c=function(t){var e=t.html,n=t.active,r=void 0!==n&&n,i=t.enabled,o=void 0===i||i,s=t.handler,a=void 0===s?null:s,c=t.css,l=void 0===c?null:c,h=document.createElement("li");r&&h.classList.add("active"),o||h.classList.add("disabled"),l&&l.split(" ").forEach(function(t){return h.classList.add(t)});var f=document.createElement("a");return f.innerHTML=e,o&&"function"==typeof a&&f.addEventListener("click",a),h.appendChild(f),u.appendChild(h),f};c({html:'<span class="page-icon fa fa-step-backward"></span><span class="page-label"> First</span>',enabled:this.pageNumber>1,handler:function(){return t._changePage(1)},css:"page-first page-bookend"}),c({html:'<span class="page-icon fa fa-chevron-left"></span><span class="page-label"> Previous</span>',enabled:this.pageNumber>1,handler:function(){return t._changePage(t.pageNumber-1)},css:"page-prev page-bookend"});for(var l=function(e){c({html:'<span class="page-label">'+e+"</span>",active:t.pageNumber===e,handler:function(){return t._changePage(e)}})},h=i;h<=o;h++)l(h);c({html:'<span class="page-label">Next </span><span class="page-icon fa fa-chevron-right"></span>',enabled:this.pageNumber<r,handler:function(){return t._changePage(t.pageNumber+1)},css:"page-next page-bookend"}),c({html:'<span class="page-label">Last </span><span class="page-icon fa fa-step-forward"></span>',enabled:this.pageNumber<r,handler:function(){return t._changePage(r)},css:"page-last page-bookend"})}}else this.$element.classList.remove("has-pagination")}},{key:"_changePage",value:function(t){var e=this._getTotalPages();if(isNaN(t)||(t=parseInt(t)),"string"==typeof t)switch(t.toLowerCase()){case"first":t=1;break;case"previous":t=this.pageNumber-1;break;case"next":t=this.pageNumber+1;break;case"last":t=e}if("number"!=typeof t)throw new Error('Invalid page number: "'+t+'"');t<1&&(t=1),t>e&&e>0&&(t=e),this.pageNumber=t,this._buildDataRows(),this.fixedHeaders&&(this.$table.querySelector("tbody").scrollTop=0)}},{key:"_paginateLocal",value:function(t){if(0===this.pageSize)return t;this.totalResults=t.length;var e=this._getTotalPages();e>0&&(this.pageNumber<1&&(this.pageNumber=1),this.pageNumber>e&&(this.pageNumber=e));var n=this.pageSize*(this.pageNumber-1),r=n+this.pageSize;return t.slice(n,Math.min(r,this.totalResults))}},{key:"_getTotalPages",value:function(){return Math.ceil(this.totalResults/this.pageSize)}},{key:"_sendRequest",value:function(t,e,n){return new Promise(function(r,i){var o=(t||"GET").toUpperCase(),s=e,a=new XMLHttpRequest;if(a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var t=JSON.parse(a.response.toString());r(t)}else i(0===a.status?"Could not access "+e:"Error code "+a.status+' on "'+e+'"')},a.onerror=function(){i("There was a problem accessing "+e)},"GET"===o){var u=s.indexOf("?")===-1?"?":"&";Object.keys(n).filter(function(t){return n[t]}).forEach(function(t){s+=""+u+t+"="+encodeURIComponent(n[t]),u="&"})}a.open(o,s,!0),"GET"===o?a.send():(a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(n)))})}},{key:"_setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.model.data=t}},{key:"_applyIndexes",value:function(t){var e=t instanceof Array==0;e&&(t=[t]);var n=JSON.parse(JSON.stringify(t)),r=this.localData||this.model.data||[];return t.forEach(function(t,e){var i=r.indexOf(t);i!==-1&&(n[e].__idx=i)}),e?n[0]:n}},{key:"_setLoading",value:function(t){t?(this.$element.classList.add("loading-data"),this.$loading.innerHTML='<div class="bg"></div><div class="spinner"></div>'):(this.$element.classList.remove("loading-data"),e._removeChildren(this.$loading))}},{key:"_setMessage",value:function(t,n,r){e._removeChildren(this.$tbody);var i=document.createElement("tr");this.$tbody.appendChild(i);var o=document.createElement("td");o.classList.add("message-"+t),o.setAttribute("colspan",this.model.cols.length.toString()),i.appendChild(o);var s=document.createElement("div");s.classList.add("content"),s.textContent=n,r&&(s.innerHTML+='<div class="message-detail">'+r+"</div>"),o.appendChild(s)}},{key:"_raiseEvent",value:function(t,e){var n=this,r=e?{detail:e}:null,i=new CustomEvent(t,r);setTimeout(function(){n.dispatchEvent(i)},0)}},{key:"setData",value:function(t){if(this.useDataSource)throw new Error("Cannot set data on a data grid which uses a data source");Array.isArray(t)&&(this.localData=t,this.unfilteredTotalResults=t.length,this.totalResults=t.length,this._setData(t),this._buildDataRows())}},{key:"getSearch",value:function(){return{query:this.searchQuery||"",totalResults:this.totalResults,unfilteredTotalResults:this.unfilteredTotalResults}}},{key:"setSearch",value:function(t){null===t&&(t=""),this._changeSearch(t,!0)}},{key:"getSort",value:function(){return{column:this.sortBy,direction:this.sortDirection}}},{key:"setSort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"switch";if(null===t){var n=this.model.cols.find(function(t){return!!t.sort});n&&(t=n.key,e=n.sort)}if(t){var r=this.model.cols.filter(function(e){return e.key===t})[0];if(!r)throw new Error('Unable to sort by column "'+t+'" - data grid does not have a column with that key');if(!r.sortable)throw new Error('Unable to sort by column "'+t+'" - that column is not defined as sortable');var i=this.$table.querySelector('th[key="'+t+'"]');this._changeSort(i,e)}else this._changeSort(null)}},{key:"getPage",value:function(){if(!this.pageSize)return null;var t=this._getTotalPages();return{number:this.pageNumber,total:this._getTotalPages(),pageSize:this.pageSize,isFirst:1===this.pageNumber,hasPrevious:this.pageNumber>1,hasNext:this.pageNumber<t,isLast:this.pageNumber===t}}},{key:"setPage",value:function(t){if(!this.pageSize)throw new Error("Cannot change page on a data grid which doesn't use pagination");null===t&&(t=1),this._changePage(t)}},{key:"getVisibleData",value:function(){return this._applyIndexes(this.model.data||[])}},{key:"edit",value:function(t){var e=this;if(void 0===t||null===t)throw new Error("You must specify the indexes or items of data to put into edit mode");t instanceof Array==0&&(t=[t]);var n=t.map(function(t){return"number"==typeof t?t:(e.localData||e.model.data||[]).indexOf(t)}).filter(function(t){return t!==-1});this._addEditModeItems(n)}},{key:"finishedEdit",value:function(){var t=this._getEditChanges();return this._removeAllEditModeItems(),t}},{key:"value",get:function(){return this.selectedValue}}],[{key:"_parseDate",value:function(t){var e=null;if(/[0-9]{4}-[0-9]{2}-[0-9]{2}/.test(t)){if(e=new Date(t),isNaN(e.valueOf())){var n=t.replace(/-/g,"/").replace("T"," ");e=new Date(n)}}else e=new Date(t);return!e||isNaN(e.valueOf())?null:e}},{key:"_renderDate",value:function(t){return!t||isNaN(t.valueOf())?"":new Date(t.getTime()+60*t.getTimezoneOffset()*1e3).toLocaleDateString("en-GB")}},{key:"_renderTime",value:function(t){return!t||isNaN(t.valueOf())?"":new Date(t.getTime()+60*t.getTimezoneOffset()*1e3).toLocaleTimeString("en-GB")}},{key:"_getProperty",value:function(t,e){e=e.replace(/\[(\w+)]/g,".$1").replace(/^\./,"");for(var n=t,r=e;n&&r.length>0;){var i=r.indexOf(".");if(i>-1){var o=r.substring(0,i);n=n[o],r=r.substring(i+1)}else n=n[r],r=""}return n}},{key:"_removeChildren",value:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}},{key:"observedAttributes",get:function(){return["data-source","data-source-method","data-source-page-param","data-source-page-size-param","data-source-search-param","data-source-sort-column-param","data-source-sort-direction-param","data-results-property","data-results-total-property","show-search","show-pagination","page-size","use-local-interaction","fixed-headers","row-css-key","selection-mode"]}}]),e}(HTMLElement))}(),!function(){customElements.define("ct-data-col",function(t){function e(t){var n,r;return _classCallCheck(this,e),t=n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),r=t,_possibleConstructorReturn(n,r)}return _inherits(e,t),e}(HTMLElement))}();